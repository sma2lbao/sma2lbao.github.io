(this.webpackJsonpmiss=this.webpackJsonpmiss||[]).push([[8],{187:function(t,e,n){"use strict";var o=n(1),i=n(0),r=n(69),s=n(17),u=n(25),a=n(47),c=function(t){function e(e){var n=e.options,o=e.context,i=e.result,r=e.setResult,s=t.call(this,n,o)||this;return s.runMutation=function(t){void 0===t&&(t={}),s.onMutationStart();var e=s.generateNewMutationId();return s.mutate(t).then((function(t){return s.onMutationCompleted(t,e),t})).catch((function(t){if(s.onMutationError(t,e),!s.getOptions().onError)throw t}))},s.verifyDocumentType(n.mutation,a.a.Mutation),s.result=i,s.setResult=r,s.mostRecentMutationId=0,s}return Object(o.__extends)(e,t),e.prototype.execute=function(t){return this.isMounted=!0,this.verifyDocumentType(this.getOptions().mutation,a.a.Mutation),[this.runMutation,Object(o.__assign)(Object(o.__assign)({},t),{client:this.refreshClient().client})]},e.prototype.afterExecute=function(){return this.isMounted=!0,this.unmount.bind(this)},e.prototype.cleanup=function(){},e.prototype.mutate=function(t){var e=this.getOptions(),n=e.mutation,i=e.variables,r=e.optimisticResponse,s=e.update,u=e.context,a=void 0===u?{}:u,c=e.awaitRefetchQueries,l=void 0!==c&&c,p=e.fetchPolicy,f=e.errorPolicy,d=Object(o.__assign)({},t),h=Object.assign({},i,d.variables);return delete d.variables,this.refreshClient().client.mutate(Object(o.__assign)({mutation:n,optimisticResponse:r,refetchQueries:d.refetchQueries||this.getOptions().refetchQueries,awaitRefetchQueries:l,update:s,context:a,fetchPolicy:p,errorPolicy:f,variables:h},d))},e.prototype.onMutationStart=function(){this.result.loading||this.getOptions().ignoreResults||this.updateResult({loading:!0,error:void 0,data:void 0,called:!0})},e.prototype.onMutationCompleted=function(t,e){var n=this.getOptions(),o=n.onCompleted,i=n.ignoreResults,r=t.data,s=t.errors,a=s&&s.length>0?new u.a({graphQLErrors:s}):void 0;this.isMostRecentMutation(e)&&!i&&this.updateResult({called:!0,loading:!1,data:r,error:a}),o&&o(r)},e.prototype.onMutationError=function(t,e){var n=this.getOptions().onError;this.isMostRecentMutation(e)&&this.updateResult({loading:!1,error:t,data:void 0,called:!0}),n&&n(t)},e.prototype.generateNewMutationId=function(){return++this.mostRecentMutationId},e.prototype.isMostRecentMutation=function(t){return this.mostRecentMutationId===t},e.prototype.updateResult=function(t){!this.isMounted||this.previousResult&&Object(s.a)(this.previousResult,t)||(this.setResult(t),this.previousResult=t)},e}(n(161).a);function l(t,e){var n=Object(i.useContext)(Object(r.a)()),s=Object(i.useState)({called:!1,loading:!1}),u=s[0],a=s[1],l=e?Object(o.__assign)(Object(o.__assign)({},e),{mutation:t}):{mutation:t},p=Object(i.useRef)();var f=(p.current||(p.current=new c({options:l,context:n,result:u,setResult:a})),p.current);return f.setOptions(l),f.context=n,Object(i.useEffect)((function(){return f.afterExecute()})),f.execute(u)}n.d(e,"a",(function(){return l}))},387:function(t,e,n){"use strict";n.r(e);var o=n(46),i=n(99),r=n(0),s=n(59),u=n(187);function a(){var t=Object(i.a)(["\n  mutation($file: Upload!) {\n    upload_file_oss(file: $file)\n  }\n"]);return a=function(){return t},t}var c=Object(s.a)(a());e.default=function(){var t=Object(u.a)(c,{onCompleted:function(t){console.log(t)},onError:function(t){console.log(t)}}),e=Object(o.a)(t,1)[0];return r.createElement("div",null,r.createElement("div",null,r.createElement("input",{type:"file",onChange:function(t){console.dir(t.currentTarget);var n=t.currentTarget,i=n.validity,r=Object(o.a)(n.files,1)[0];i&&(e({variables:{file:r}}),console.log(r))}})))}}}]);
//# sourceMappingURL=8.5d035534.chunk.js.map
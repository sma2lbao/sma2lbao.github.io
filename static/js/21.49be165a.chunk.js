(this.webpackJsonpmiss=this.webpackJsonpmiss||[]).push([[21],{622:function(e,t,a){"use strict";a.r(t);var n=a(24),r=a(0),c=a.n(r),l=a(275),i=a(270),o=a(101),u=a(618),s=a(365),d=a(314),m=a(77),f=a(50),p=a(32),g=a(26),v=Object(g.a)(c.a.createElement("path",{d:"M12 .3a12 12 0 0 0-3.8 23.4c.6.1.8-.3.8-.6v-2c-3.3.7-4-1.6-4-1.6-.6-1.4-1.4-1.8-1.4-1.8-1-.7.1-.7.1-.7 1.2 0 1.9 1.2 1.9 1.2 1 1.8 2.8 1.3 3.5 1 0-.8.4-1.3.7-1.6-2.7-.3-5.5-1.3-5.5-6 0-1.2.5-2.3 1.3-3.1-.2-.4-.6-1.6 0-3.2 0 0 1-.3 3.4 1.2a11.5 11.5 0 0 1 6 0c2.3-1.5 3.3-1.2 3.3-1.2.6 1.6.2 2.8 0 3.2.9.8 1.3 1.9 1.3 3.2 0 4.6-2.8 5.6-5.5 5.9.5.4.9 1 .9 2.2v3.3c0 .3.1.7.8.6A12 12 0 0 0 12 .3"}),"GitHub"),b=Object(l.a)((function(e){return Object(i.a)({root:{width:"100%"},formWrap:{display:"flex",flexDirection:"column"},thirdWrap:{padding:e.spacing(2),textAlign:"center"}})}));function h(){var e=b(),t=Object(p.a)(),a=t.verify,c=t.setAccessToken,l=Object(m.b)().enqueueSnackbar,i=r.useState(""),g=Object(n.a)(i,2),h=g[0],E=g[1],j=r.useState(""),O=Object(n.a)(j,2),y=O[0],w=O[1],x=Object(f.i)(),C=x.data,k=x.loading,S=x.error,W=Object(f.f)({onCompleted:function(e){l("\u767b\u5f55\u6210\u529f"),c(null===e||void 0===e?void 0:e.login),a()},onError:function(e){console.log(e)}}),N=Object(n.a)(W,2),I=N[0],_=N[1].loading;return r.useEffect((function(){a()})),r.createElement("div",{className:e.root},r.createElement(o.a,{variant:"h4"},"Sign In"),r.createElement("form",{className:e.formWrap},r.createElement(u.a,{id:"username",label:"\u7528\u6237\u540d",value:h,onChange:function(e){return E(e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",fullWidth:!0,variant:"outlined",margin:"normal"}),r.createElement(u.a,{id:"password",label:"\u5bc6\u7801",type:"password",value:y,onChange:function(e){return w(e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",fullWidth:!0,variant:"outlined",margin:"normal"}),r.createElement(s.a,{variant:"contained",color:"primary",size:"large",fullWidth:!0,onClick:function(){I({variables:{username:h,password:y}})},disabled:_},_?"\u767b\u5f55\u4e2d":"\u767b\u5f55")),r.createElement("div",{className:e.thirdWrap},r.createElement(o.a,{variant:"caption",color:"textSecondary"},"\u66f4\u591a\u767b\u5f55\u65b9\u5f0f"),null===C||void 0===C?void 0:C.platform_auth_way.map((function(e,t){return r.createElement("div",{key:t},r.createElement(d.a,{onClick:function(){return function(e,t,n){var r=(window.screen.availHeight-450)/2,i=(window.screen.availWidth-450)/2;console.log("----debug start----"),console.log("http_domain: ",n),console.log("url: ",t),console.log("----debug end----");var o=window.open(n+t,e,"width=".concat(450,",height=").concat(450,",top=").concat(r,",left=").concat(i,",toolbar=0,menubar=0,location=0,status=0"));if(o){var u=setInterval((function(){o.postMessage({type:"access_token"},n)}),1e3);window.addEventListener("message",(function(e){var t=e.data;t&&"access_token_callback"===t.type&&(clearInterval(u),o&&o.close(),l(t.data.access_token?"\u767b\u5f55\u6210\u529f":t.data.error||"\u767b\u5f55\u5931\u8d25"),c(t.data.access_token),a())}))}}(e.platform,e.url,e.http_domain)}},"github"===e.platform&&r.createElement(v,null)))})),k&&r.createElement(o.a,{component:"div",variant:"caption",color:"textSecondary"},"loading"),S&&r.createElement(o.a,{component:"div",variant:"caption",color:"textSecondary"},"oops!")))}var E=a(338),j=Object(l.a)((function(e){return Object(i.a)({root:{width:"100%"},formWrap:{display:"flex",flexDirection:"column"}})}));function O(){var e=j(),t=Object(p.a)().verify,a=Object(m.b)().enqueueSnackbar,c=r.useState(""),l=Object(n.a)(c,2),i=l[0],d=l[1],g=r.useState(""),v=Object(n.a)(g,2),b=v[0],h=v[1],O=r.useState(""),y=Object(n.a)(O,2),w=y[0],x=y[1],C=r.useState(""),k=Object(n.a)(C,2),S=k[0],W=k[1],N=Object(f.l)({onCompleted:function(){a("\u53d1\u9001\u6210\u529f")}}),I=Object(n.a)(N,1)[0],_=Object(f.c)({onCompleted:function(e){a("\u6ce8\u518c\u6210\u529f"),t()}}),q=Object(n.a)(_,1)[0];return r.useEffect((function(){t()})),r.createElement("div",{className:e.root},r.createElement(o.a,{variant:"h4"},"Sign Up"),r.createElement("form",{className:e.formWrap},r.createElement(u.a,{id:"username",label:"\u7528\u6237\u540d",required:!0,value:i,onChange:function(e){d(e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",fullWidth:!0,variant:"outlined",margin:"normal"}),r.createElement(u.a,{id:"password",label:"\u5bc6\u7801",type:"password",required:!0,value:b,onChange:function(e){return h(e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",fullWidth:!0,variant:"outlined",margin:"normal"}),r.createElement(u.a,{id:"email",label:"\u90ae\u7bb1",type:"email",required:!0,value:w,onChange:function(e){return x(e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1",fullWidth:!0,variant:"outlined",margin:"normal"}),r.createElement(E.a,{display:"flex",alignItems:"center",justifyContent:"space-between"},r.createElement(u.a,{id:"code",label:"\u9a8c\u8bc1\u7801",value:S,onChange:function(e){return W(e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",variant:"outlined",margin:"normal"}),r.createElement(s.a,{variant:"contained",onClick:function(){I({variables:{email:w}})}},"\u83b7\u53d6\u9a8c\u8bc1\u7801")),r.createElement(s.a,{variant:"contained",color:"primary",size:"large",fullWidth:!0,onClick:function(){q({variables:{user:{username:i,password:b,email:w,code:S}}})}},"\u6ce8\u518c")))}var y=a(159),w=a.n(y),x=a(160),C=a(74),k=Object(x.autoPlay)(w.a),S=Object(l.a)((function(e){return Object(i.a)({root:{width:"100%",height:"100%",display:"flex"},image:{width:"100%",height:"100%"}})}));function W(e){var t=S(),a=e.images,c=r.useState(0),l=Object(n.a)(c,2),i=l[0],o=l[1];return r.createElement(k,{className:t.root,enableMouseEvents:!0,onChangeIndex:function(e){o(e)},index:i},a.map((function(e,a){return r.createElement("div",{className:t.image,key:a},r.createElement(C.b,{height:"100%",src:e}))})))}W.defaultProps={images:["https://pic1.zhimg.com/v2-cc17d8b31fe162fdbfadba1d18b7836e_1200x500.jpg","http://n.sinaimg.cn/collect/crawl/20160224/ZFh0-fxprucv9824132.jpg"]};var N=W,I=a(315),_=a(4),q=Object(l.a)((function(e){return Object(i.a)({iconWrap:{display:"flex",alignItems:"center",justifyContent:"center"}})})),z=function(e){var t=q();return c.a.createElement(I.a,Object.assign({},e,{className:Object(_.a)("iconfont icon-logo",t.iconWrap)}))};a.d(t,"default",(function(){return H}));var M=Object(l.a)((function(e){return Object(i.a)({root:{width:"100%",height:"100vh",fontSize:0,overflow:"hidden"},left:{flex:1.5},right:{flex:1,backgroundColor:e.palette.background.paper,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",padding:e.spacing(0,4),overflow:"auto"},rightHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:e.spacing(2,0),width:"100%"},rightMain:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",padding:e.spacing(0,8)},rightFooter:{}})}));function H(){var e=M(),t=r.useState(0),a=Object(n.a)(t,2),c=a[0],l=a[1];return r.createElement(E.a,{className:e.root,display:"flex"},r.createElement("div",{className:e.left},r.createElement(N,null)),r.createElement("div",{className:e.right},r.createElement("div",{className:e.rightHeader},r.createElement(z,{fontSize:"large"}),1===c&&r.createElement(s.a,{variant:"outlined",color:"primary",onClick:function(e){return l(0)}},"Sign In"),0===c&&r.createElement(s.a,{variant:"outlined",color:"primary",onClick:function(e){return l(1)}},"Sign Up")),r.createElement("div",{className:e.rightMain},0===c&&r.createElement(h,null),1===c&&r.createElement(O,null)),r.createElement("div",{className:e.rightFooter})))}}}]);
//# sourceMappingURL=21.49be165a.chunk.js.map
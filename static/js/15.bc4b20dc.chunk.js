(this.webpackJsonpmiss=this.webpackJsonpmiss||[]).push([[15],{585:function(e,t,a){"use strict";a.r(t);var n=a(31),l=a(0),r=a.n(l),o=a(576),c=a(323),i=a(307),u=a(71),m=a(54),s=a(49),d=a(24),f=Object(d.a)(r.a.createElement("path",{d:"M12 .3a12 12 0 0 0-3.8 23.4c.6.1.8-.3.8-.6v-2c-3.3.7-4-1.6-4-1.6-.6-1.4-1.4-1.8-1.4-1.8-1-.7.1-.7.1-.7 1.2 0 1.9 1.2 1.9 1.2 1 1.8 2.8 1.3 3.5 1 0-.8.4-1.3.7-1.6-2.7-.3-5.5-1.3-5.5-6 0-1.2.5-2.3 1.3-3.1-.2-.4-.6-1.6 0-3.2 0 0 1-.3 3.4 1.2a11.5 11.5 0 0 1 6 0c2.3-1.5 3.3-1.2 3.3-1.2.6 1.6.2 2.8 0 3.2.9.8 1.3 1.9 1.3 3.2 0 4.6-2.8 5.6-5.5 5.9.5.4.9 1 .9 2.2v3.3c0 .3.1.7.8.6A12 12 0 0 0 12 .3"}),"GitHub");function b(){var e=Object(s.b)(),t=Object(u.b)().enqueueSnackbar,a=Object(m.o)(),r=a.data,d=a.loading,b=a.error,v=Object(m.g)({onCompleted:function(a){t("\u767b\u5f55\u6210\u529f"),localStorage.setItem("access_token",null===a||void 0===a?void 0:a.login),e.gotoHome()},onError:function(e){console.log(e)}}),g=Object(n.a)(v,2),p=g[0],h=g[1].loading,E=Object(m.h)({onCompleted:function(t){t.me.email&&t.me.uid&&t.me.username?e.gotoHome():e.gotoAuthCompletion()}}),j=Object(n.a)(E,1)[0],O=l.useState(""),k=Object(n.a)(O,2),C=k[0],w=k[1],y=l.useState(""),S=Object(n.a)(y,2),_=S[0],x=S[1];return l.createElement("div",null,l.createElement("form",null,l.createElement(o.a,{id:"username",label:"\u7528\u6237\u540d",value:C,onChange:function(e){return w(e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",fullWidth:!0,margin:"normal"}),l.createElement(o.a,{id:"password",label:"\u5bc6\u7801",type:"password",value:_,onChange:function(e){return x(e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",fullWidth:!0,margin:"normal"}),l.createElement(c.a,{variant:"contained",onClick:function(){p({variables:{username:C,password:_}})},disabled:h},h?"\u767b\u5f55\u4e2d":"\u767b\u5f55")),null===r||void 0===r?void 0:r.platform_auth_way.map((function(e,a){return l.createElement("div",{key:a},l.createElement(i.a,{onClick:function(){return function(e,a,n){var l=window.open(n+a,e,"width=450,height=450,toolbar=0,menubar=0,location=0,status=0");if(l){var r=setInterval((function(){l.postMessage({type:"access_token"},n)}),1e3);window.addEventListener("message",(function(e){var a=e.data;a&&"access_token_callback"===a.type&&(clearInterval(r),l&&l.close(),t(a.data.access_token?"\u767b\u5f55\u6210\u529f":a.data.error||"\u767b\u5f55\u5931\u8d25"),localStorage.setItem("access_token",a.data.access_token),j())}))}}(e.platform,e.url,e.http_domain)}},"github"===e.platform&&l.createElement(f,null)))})),d&&l.createElement("div",null,"loading"),b&&l.createElement("div",null,"error"))}var v=a(332);function g(){var e=Object(u.b)().enqueueSnackbar,t=l.useState(""),a=Object(n.a)(t,2),r=a[0],i=a[1],s=l.useState(""),d=Object(n.a)(s,2),f=d[0],b=d[1],g=l.useState(""),p=Object(n.a)(g,2),h=p[0],E=p[1],j=l.useState(""),O=Object(n.a)(j,2),k=O[0],C=O[1],w=Object(m.e)({variables:{username:r}}),y=w.data,S=w.loading;console.log("_changeUsername: ",r,y,S);var _=Object(m.r)({onCompleted:function(){e("\u53d1\u9001\u6210\u529f")},onError:function(t){console.error(t),e("\u53d1\u9001\u5931\u8d25")}}),x=Object(n.a)(_,1)[0],W=Object(m.c)({onError:function(t){console.error(t),e("\u6ce8\u518c\u5931\u8d25")},onCompleted:function(t){console.log(t),e("\u6ce8\u518c\u6210\u529f")}}),q=Object(n.a)(W,1)[0];return l.createElement("div",null,l.createElement("form",null,l.createElement(o.a,{id:"username",label:"\u7528\u6237\u540d",required:!0,value:r,onChange:function(e){i(e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",fullWidth:!0,margin:"normal"}),l.createElement(o.a,{id:"password",label:"\u5bc6\u7801",type:"password",required:!0,value:f,onChange:function(e){return b(e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",fullWidth:!0,margin:"normal"}),l.createElement(o.a,{id:"email",label:"\u90ae\u7bb1",type:"email",required:!0,value:h,onChange:function(e){return E(e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1",fullWidth:!0,margin:"normal"}),l.createElement(v.a,null,l.createElement(o.a,{id:"code",label:"\u9a8c\u8bc1\u7801",value:k,onChange:function(e){return C(e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",margin:"normal"}),l.createElement(c.a,{variant:"contained",onClick:function(){x({variables:{email:h}})}},"\u83b7\u53d6\u9a8c\u8bc1\u7801")),l.createElement(c.a,{variant:"contained",fullWidth:!0,onClick:function(){q({variables:{user:{username:r,password:f,email:h,code:k}}})}},"\u6ce8\u518c")))}var p=a(167),h=a.n(p),E=a(170),j=a(69),O=a(269),k=a(264),C=Object(E.autoPlay)(h.a),w=Object(O.a)((function(e){return Object(k.a)({image:{width:"100%",height:"100%"}})}));function y(e){var t=w(),a=e.images;return l.createElement("div",null,l.createElement(C,{enableMouseEvents:!0,index:0},a.map((function(e,a){return l.createElement("div",{className:t.image,key:a},l.createElement(j.b,{src:e}))}))))}y.defaultProps={images:["https://pic1.zhimg.com/v2-cc17d8b31fe162fdbfadba1d18b7836e_1200x500.jpg","http://n.sinaimg.cn/collect/crawl/20160224/ZFh0-fxprucv9824132.jpg"]};var S=y;a.d(t,"default",(function(){return x}));var _=Object(O.a)((function(e){return Object(k.a)({root:{width:"100%",height:"100vh",fontSize:0,overflow:"hidden"},left:{flex:1,backgroundColor:e.palette.primary.main},right:{flex:1,backgroundColor:e.palette.background.paper,display:"flex",alignItems:"center",justifyContent:"center"},main:{width:300}})}));function x(){var e=_(),t=l.useState(0),a=Object(n.a)(t,2),r=a[0],o=a[1];return l.createElement(v.a,{className:e.root,display:"flex"},l.createElement("div",{className:e.left},l.createElement(S,null)),l.createElement("div",{className:e.right},l.createElement("div",{className:e.main},l.createElement(c.a,{onClick:function(e){return o(0)}},"\u767b\u5f55"),l.createElement(c.a,{onClick:function(e){return o(1)}},"\u6ce8\u518c"),l.createElement("div",null,0===r&&l.createElement(b,null),1===r&&l.createElement(g,null)))))}}}]);
//# sourceMappingURL=15.bc4b20dc.chunk.js.map
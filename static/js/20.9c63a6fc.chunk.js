(this.webpackJsonpmiss=this.webpackJsonpmiss||[]).push([[20],{658:function(e,t,a){"use strict";a.r(t);var n=a(21),r=a(0),l=a(225),i=a(221),o=a(65),c=a(441),u=a(374),s=a(366),d=a(102),m=a(57),f=a(34),p=a(437),v=Object(l.a)((function(e){return Object(i.a)({root:{width:"100%"},formWrap:{display:"flex",flexDirection:"column"},thirdWrap:{padding:e.spacing(2),textAlign:"center"}})}));function g(){var e=v(),t=Object(f.a)(),a=t.verify,l=t.setAccessToken,i=Object(d.b)().enqueueSnackbar,g=r.useState(""),h=Object(n.a)(g,2),b=h[0],E=h[1],j=r.useState(""),w=Object(n.a)(j,2),y=w[0],O=w[1],C=Object(m.p)(),k=C.data,x=C.loading,S=C.error,W=Object(m.m)({onCompleted:function(e){i("\u767b\u5f55\u6210\u529f"),l(null===e||void 0===e?void 0:e.login),a()},onError:function(e){console.log(e)}}),N=Object(n.a)(W,2),I=N[0],_=N[1].loading;return r.useEffect((function(){a()})),r.createElement("div",{className:e.root},r.createElement(o.a,{variant:"h4"},"Sign In"),r.createElement("form",{className:e.formWrap},r.createElement(c.a,{id:"username",label:"\u7528\u6237\u540d",value:b,onChange:function(e){return E(e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",fullWidth:!0,variant:"outlined",margin:"normal"}),r.createElement(c.a,{id:"password",label:"\u5bc6\u7801",type:"password",value:y,onChange:function(e){return O(e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",fullWidth:!0,variant:"outlined",margin:"normal"}),r.createElement(u.a,{variant:"contained",color:"primary",size:"large",fullWidth:!0,onClick:function(){I({variables:{username:b,password:y}})},disabled:_},_?"\u767b\u5f55\u4e2d":"\u767b\u5f55")),r.createElement("div",{className:e.thirdWrap},r.createElement(o.a,{variant:"caption",color:"textSecondary"},"\u66f4\u591a\u767b\u5f55\u65b9\u5f0f"),null===k||void 0===k?void 0:k.platform_auth_way.map((function(e,t){return r.createElement("div",{key:t},r.createElement(s.a,{onClick:function(){return function(e,t,n){var r=(window.screen.availHeight-450)/2,o=(window.screen.availWidth-450)/2,c=window.open(n+t,e,"width=".concat(450,",height=").concat(450,",top=").concat(r,",left=").concat(o,",toolbar=0,menubar=0,location=0,status=0"));if(c){var u=setInterval((function(){c.postMessage({type:"access_token"},n)}),1e3);window.addEventListener("message",(function(e){var t=e.data;t&&"access_token_callback"===t.type&&(clearInterval(u),c&&c.close(),i(t.data.access_token?"\u767b\u5f55\u6210\u529f":t.data.error||"\u767b\u5f55\u5931\u8d25"),l(t.data.access_token),a())}))}}(e.platform,e.url,e.http_domain)}},"github"===e.platform&&r.createElement(p.a,null)))})),x&&r.createElement(o.a,{component:"div",variant:"caption",color:"textSecondary"},"loading"),S&&r.createElement(o.a,{component:"div",variant:"caption",color:"textSecondary"},"oops!")))}var h=a(440),b=Object(l.a)((function(e){return Object(i.a)({root:{width:"100%"},formWrap:{display:"flex",flexDirection:"column"}})}));function E(){var e=b(),t=Object(f.a)().verify,a=Object(d.b)().enqueueSnackbar,l=r.useState(""),i=Object(n.a)(l,2),s=i[0],p=i[1],v=r.useState(""),g=Object(n.a)(v,2),E=g[0],j=g[1],w=r.useState(""),y=Object(n.a)(w,2),O=y[0],C=y[1],k=r.useState(""),x=Object(n.a)(k,2),S=x[0],W=x[1],N=Object(m.v)({onCompleted:function(){a("\u53d1\u9001\u6210\u529f")}}),I=Object(n.a)(N,1)[0],_=Object(m.h)({onCompleted:function(e){a("\u6ce8\u518c\u6210\u529f"),t()}}),q=Object(n.a)(_,1)[0];return r.useEffect((function(){t()})),r.createElement("div",{className:e.root},r.createElement(o.a,{variant:"h4"},"Sign Up"),r.createElement("form",{className:e.formWrap},r.createElement(c.a,{id:"username",label:"\u7528\u6237\u540d",required:!0,value:s,onChange:function(e){p(e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",fullWidth:!0,variant:"outlined",margin:"normal"}),r.createElement(c.a,{id:"password",label:"\u5bc6\u7801",type:"password",required:!0,value:E,onChange:function(e){return j(e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",fullWidth:!0,variant:"outlined",margin:"normal"}),r.createElement(c.a,{id:"email",label:"\u90ae\u7bb1",type:"email",required:!0,value:O,onChange:function(e){return C(e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1",fullWidth:!0,variant:"outlined",margin:"normal"}),r.createElement(h.a,{display:"flex",alignItems:"center",justifyContent:"space-between"},r.createElement(c.a,{id:"code",label:"\u9a8c\u8bc1\u7801",value:S,onChange:function(e){return W(e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",variant:"outlined",margin:"normal"}),r.createElement(u.a,{variant:"text",onClick:function(){I({variables:{email:O}})}},"\u83b7\u53d6\u9a8c\u8bc1\u7801")),r.createElement(u.a,{variant:"contained",color:"primary",size:"large",fullWidth:!0,onClick:function(){q({variables:{user:{username:s,password:E,email:O,code:S}}})}},"\u6ce8\u518c")))}var j=a(168),w=a.n(j),y=a(169),O=a(92),C=Object(y.autoPlay)(w.a),k=Object(l.a)((function(e){return Object(i.a)({root:{width:"100%",height:"100%",display:"flex"},image:{width:"100%",height:"100%"}})}));function x(e){var t=k(),a=e.images,l=r.useState(0),i=Object(n.a)(l,2),o=i[0],c=i[1];return r.createElement(C,{className:t.root,enableMouseEvents:!0,onChangeIndex:function(e){c(e)},index:o},a.map((function(e,a){return r.createElement("div",{className:t.image,key:a},r.createElement(O.b,{height:"100%",src:e}))})))}x.defaultProps={images:["http://sma2lbao.cn/files/miss/2020/11/16/1605512904911"]};var S=x,W=a(195);a.d(t,"default",(function(){return I}));var N=Object(l.a)((function(e){return Object(i.a)({root:{width:"100%",height:"100vh",fontSize:0,overflow:"hidden"},left:{flex:1.5},right:{flex:1,backgroundColor:e.palette.background.paper,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",padding:e.spacing(0,4),overflow:"auto"},rightHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:e.spacing(2,0),width:"100%"},rightMain:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",padding:e.spacing(0,8)},rightFooter:{}})}));function I(){var e=N(),t=Object(f.c)(),a=r.useState(0),l=Object(n.a)(a,2),i=l[0],o=l[1];return r.createElement(h.a,{className:e.root,display:"flex"},r.createElement("div",{className:e.left},r.createElement(S,null)),r.createElement("div",{className:e.right},r.createElement("div",{className:e.rightHeader},r.createElement(W.a,{fontSize:"large",onClick:t.gotoHome}),1===i&&r.createElement(u.a,{variant:"outlined",color:"primary",onClick:function(e){return o(0)}},"Sign In"),0===i&&r.createElement(u.a,{variant:"outlined",color:"primary",onClick:function(e){return o(1)}},"Sign Up")),r.createElement("div",{className:e.rightMain},0===i&&r.createElement(g,null),1===i&&r.createElement(E,null)),r.createElement("div",{className:e.rightFooter})))}}}]);
//# sourceMappingURL=20.9c63a6fc.chunk.js.map
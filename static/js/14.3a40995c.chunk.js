"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[14],{34826:function(e,n,t){t.d(n,{Y:function(){return h},Z:function(){return S}});var i=t(4962),o=t(6914),r=t(52202),a=t(51955),l=t(2815),c=t(35890),s=t(5197),d=t(16831),u=["url"],p={player:"".concat("ShadowPlayer","-player")},x=(0,l.ZP)(s.Ue)((function(){return(0,r.Z)({},"& .".concat(p.player),{width:"100% !important",height:"100% !important",background:"#000"})})),h=function(e){var n=e.url,t=(0,o.Z)(e,u),r=null===n||void 0===n?void 0:n.toString().endsWith(".m3u8"),l=a.createRef();return(0,d.jsx)(x,{ratio:16/9,children:(0,d.jsx)(c.Z,(0,i.Z)((0,i.Z)({ref:l,className:p.player},t),{},{url:n,config:{file:{forceHLS:r,attributes:{controlsList:"nodownload noremoteplayback",disablePictureInPicture:!0}},youtube:{playerVars:{autoplay:t.playing,modestbranding:1,rel:0,showinfo:0,controls:t.controls},embedOptions:{}}}}))})};h.defaultProps={controls:!0,playing:!0};var f=t(56828),v=t(19305),m=t(91992),j=t(14934),Z=t(88404),g=["youtubeUrl"],b="withThird",y={wrap:"".concat(b,"-wrap"),tool:"".concat(b,"-tool"),grouped:"".concat(b,"-grouped")},C=(0,l.ZP)("div")((function(e){var n,t=e.theme;return n={},(0,r.Z)(n,"&.".concat(y.wrap),{position:"relative",width:"100%"}),(0,r.Z)(n,"& .".concat(y.tool),{position:"absolute",right:t.spacing(1),top:"50%",transform:"translateY(-50%)",display:"flex",flexDirection:"column",justifyContent:"space-between",maxHeight:"50%",overflow:"auto",background:"rgba(0, 0, 0, .1)",backdropFilter:"blur(8px)",color:"#fff",padding:t.spacing(1),borderRadius:t.shape.borderRadius,visibility:"hidden","$wrap:hover &":{visibility:"initial"}}),(0,r.Z)(n,"& .".concat(y.grouped),{border:"none","&:not(:first-child)":{borderRadius:t.shape.borderRadius},"&:first-child":{borderRadius:t.shape.borderRadius}}),n}));function S(e){return function(n){var t=n.youtubeUrl,r=(0,o.Z)(n,g),l=r&&r.url?r.url:void 0,c=a.useState(l),s=(0,f.Z)(c,2),u=s[0],p=s[1],x=a.useState(),h=(0,f.Z)(x,2),b=h[0],S=h[1],k=t&&r&&r.url&&r.url!==t;return a.useEffect((function(){p("youtube"===b?t:l)}),[b,l,t]),(0,d.jsxs)(C,{className:y.wrap,children:[(0,d.jsx)(e,(0,i.Z)((0,i.Z)({},r),{},{url:u})),k&&(0,d.jsx)("div",{className:y.tool,children:(0,d.jsx)(v.Z,{theme:{palette:{type:"dark"}},children:(0,d.jsx)(m.Z,{classes:{grouped:y.grouped},orientation:"vertical",value:b,exclusive:!0,onChange:function(e,n){S(n)},children:(0,d.jsx)(j.Z,{value:"youtube",children:(0,d.jsx)(Z.Z,{})})})})})]})}}},96540:function(e,n,t){t.r(n),t.d(n,{ShadowUpload:function(){return hn},default:function(){return fn}});var i,o=t(4962),r=t(6914),a=t(56828),l=t(51955),c=t(52202),s=t(27949),d=t(14417),u=t(49941),p=t(85899),x=t(69006),h=t(78643),f=t(32033),v=t(72432),m=t(16480),j=t(55114),Z=t(71641),g=t(19558),b=t(88080),y=t(11604),C=function(e){var n=l.useState(e),t=(0,a.Z)(n,2),i=t[0],o=t[1];return[i,function(e){o(e.target.value)}]},S=t(54303),k=t(60889),w=t(77058);!function(e){e[e.NORMAL=0]="NORMAL",e[e.EDITING=1]="EDITING"}(i||(i={}));var R=t(16831),I=["value","onChange","placeholder","variant"],T=function(e){var n=e.value,t=e.onChange,c=e.placeholder,s=e.variant,d=void 0===s?"inherit":s,u=(0,r.Z)(e,I),p=l.useState(i.NORMAL),h=(0,a.Z)(p,2),f=h[0],v=h[1];return(0,R.jsx)(S.Z,{onClickAway:function(){f!==i.NORMAL&&v(i.NORMAL)},children:(0,R.jsx)(k.Z,(0,o.Z)((0,o.Z)({sx:[{root:{color:"inherit"}},function(e){return"inherit"!==d?e.typography[d]:{}}],fullWidth:!0,multiline:!0,value:n,onChange:t,placeholder:c},u),{},{startAdornment:f===i.NORMAL?(0,R.jsx)(w.Z,{position:"start",children:(0,R.jsx)(x.Z,{size:"small",color:"inherit",onClick:function(){return v(i.EDITING)},children:(0,R.jsx)(g.Z,{fontSize:"small"})})}):null,readOnly:f===i.NORMAL,disableUnderline:f===i.NORMAL}))})},N=t(52066),D=t(16833),E=t(51168),z=t(73381),B=t(36353),O=t(46405),L=t(10926),M=t.n(L),H=t(80808),A=t.n(H),P="sma2lbao-1305700162",_="ap-hongkong",F=function(){var e=(0,O.iT)({onError:function(e){console.error(e)}}),n=(0,a.Z)(e,1)[0],t=new(A())({getAuthorization:function(e,t){return(0,B.Z)((0,z.Z)().mark((function e(){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n().then((function(e){var n=e.data,i=null===n||void 0===n?void 0:n.get_cos_credential;t({TmpSecretId:i.credentials.tmpSecretId,TmpSecretKey:i.credentials.tmpSecretKey,SecurityToken:i.credentials.sessionToken,StartTime:i.startTime,ExpiredTime:i.expiredTime})}));case 1:case"end":return e.stop()}}),e)})))()}}),i=function(){var e=(0,B.Z)((0,z.Z)().mark((function e(n){var i,o,r;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Date.now(),o=M()(i).format("YYYY-MM-DD"),e.next=4,t.uploadFile({Bucket:P,Region:_,Key:"/upload/".concat(o,"/").concat(i),Body:n});case 4:return r=e.sent,console.log(r),e.abrupt("return","".concat(r.Location.replace("".concat(P,".cos.").concat(_,".myqcloud.com"),"https://sma1lbao.cn")));case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return{uploadFile:i}},U=function(e){var n=e.onComplete,t=e.onError,i=e.children,o=e.component,r=e.custom,c=e.title,s=e.maxSize,u=(0,E.Ds)().enqueueSnackbar,p=F().uploadFile,x=(0,l.useState)(!1),h=(0,a.Z)(x,2),f=h[0],v=h[1],m=l.createRef(),j=o||"div";return(0,R.jsxs)(j,{role:"button",onClick:function(){var e;f||(null===(e=m.current)||void 0===e||e.click())},children:[(0,R.jsx)("input",{ref:m,style:{display:"none"},type:"file",accept:"*",onChange:function(e){var i=e.currentTarget,o=i.validity,r=i.files,a=null===r||void 0===r?void 0:r[0];a&&s&&a.size>1024*s*1024?u("\u8d85\u51fa\u5c3a\u5bf8\u9650\u5236",{variant:"warning"}):o.valid&&(v(!0),p(a).then((function(e){n&&n(e)})).catch((function(e){t&&t(e.message)})).finally((function(){v(!1)})))}}),r?(0,R.jsx)(R.Fragment,{children:i}):(0,R.jsxs)(d.Z,{sx:function(n){var t,i;return{display:"inline-flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:null!==(t=e.width)&&void 0!==t?t:"100%",height:null!==(i=e.height)&&void 0!==i?i:"100%",color:n.palette.text.secondary,flex:1}},children:[(0,R.jsx)("div",{children:(0,R.jsx)(D.Z,{})}),(0,R.jsx)(N.Z,{variant:"h6",children:f?"\u4e0a\u4f20\u4e2d...":c})]})]})};U.defaultProps={custom:!1,title:"\u70b9\u51fb\u4e0a\u4f20",maxSize:200};var Y=t(77412),q=t(59376),W=t(40192),K=t(27582),V=t(91446),G=t(92620),$=t(87940),J=function(e){var n=l.useState(!1),t=(0,a.Z)(n,2),i=t[0],o=t[1],r=l.useState(0),c=(0,a.Z)(r,2),s=c[0],u=c[1],p=l.useState(""),h=(0,a.Z)(p,2),f=h[0],v=h[1];return(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{onClick:function(){return o(!0)},children:e.custom?(0,R.jsx)(R.Fragment,{children:e.children}):(0,R.jsxs)(d.Z,{sx:function(e){return{display:"inline-flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",color:e.palette.text.secondary,flex:1}},children:[(0,R.jsx)("div",{children:(0,R.jsx)(D.Z,{})}),(0,R.jsx)(N.Z,{variant:"h6",children:e.title})]})}),(0,R.jsx)(Y.Z,{onClose:function(){return o(!1)},open:i,children:(0,R.jsxs)(d.Z,{padding:2,children:[(0,R.jsxs)(q.Z,{value:s,onChange:function(e,n){return u(n)},children:[(0,R.jsx)(W.Z,{label:"\u672c\u5730\u4e0a\u4f20"}),(0,R.jsx)(W.Z,{label:"\u7c98\u8d34\u94fe\u63a5"})]}),(0,R.jsxs)(d.Z,{sx:function(e){return{marginTop:e.spacing(2)}},children:[(0,R.jsx)("div",{hidden:0!==s,children:(0,R.jsx)(U,{onComplete:function(n){e.onComplete&&e.onComplete(n),o(!1)},onError:e.onError})}),(0,R.jsx)("div",{hidden:1!==s,children:(0,R.jsxs)(K.Z,{sx:{display:"flex",alignItems:"center"},component:"form",children:[(0,R.jsx)(x.Z,{disabled:!0,children:(0,R.jsx)(G.Z,{})}),(0,R.jsx)(V.ZP,{value:f,onChange:function(e){v(e.target.value)},fullWidth:!0,placeholder:"\u94fe\u63a5\u5730\u5740"}),(0,R.jsx)(x.Z,{onClick:function(){e.onComplete&&e.onComplete(f),o(!1)},color:"primary",disabled:!f,children:(0,R.jsx)($.Z,{})})]})})]})]})})]})};J.defaultProps={custom:!1,title:"\u70b9\u51fb\u4e0a\u4f20"};var Q=l.forwardRef((function(e,n){var t=l.useState([]),i=(0,a.Z)(t,2),o=i[0],r=i[1];l.useImperativeHandle(n,(function(){return{credits:o}}));var C=function(e){var n=e.target,t=n.dataset,i=n.value;if(t.idx&&t.key){var a=o[+t.idx];Object.assign(a,(0,c.Z)({},t.key,i)),r((0,s.Z)(o))}};return(0,R.jsx)(d.Z,{sx:function(e){return{backgroundColor:e.palette.background.paper}},children:(0,R.jsx)(u.Z,{subheader:(0,R.jsxs)(p.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:["\u6f14\u804c\u8868",(0,R.jsx)(x.Z,{onClick:function(){r([].concat((0,s.Z)(o),[{avatar:"",name:"",description:""}]))},size:"small",children:(0,R.jsx)(Z.Z,{fontSize:"small"})})]}),children:o.length?(0,R.jsx)(R.Fragment,{children:o.map((function(e,n){return(0,R.jsxs)(h.ZP,{children:[(0,R.jsx)(f.Z,{children:(0,R.jsx)(J,{custom:!0,onComplete:function(e){return function(e,n){var t=o[e];Object.assign(t,{avatar:n}),r((0,s.Z)(o))}(n,e)},children:(0,R.jsx)(v.Z,{overlap:"circular",anchorOrigin:{vertical:"top",horizontal:"right"},badgeContent:(0,R.jsx)(g.Z,{fontSize:"small"}),children:(0,R.jsx)(m.Z,{src:e.avatar})})})}),(0,R.jsxs)("div",{children:[(0,R.jsx)(T,{inputProps:{"data-idx":n,"data-key":"name"},value:e.name,onChange:C,placeholder:"\u8bf7\u8f93\u5165\u540d\u5b57",maxRows:1}),(0,R.jsx)(T,{inputProps:{"data-idx":n,"data-key":"description"},value:e.description,onChange:C,placeholder:"\u8bf7\u8f93\u5165\u63cf\u8ff0",maxRows:1})]}),(0,R.jsx)(j.Z,{children:(0,R.jsx)(x.Z,{onClick:function(){return function(e){o.splice(e,1),r((0,s.Z)(o))}(n)},children:(0,R.jsx)(b.Z,{})})})]},n)}))}):(0,R.jsx)(d.Z,{justifyContent:"center",display:"flex",children:(0,R.jsx)(y.Vm,{subtitle:"\u65b0\u589e\u6f14\u804c\u5458"})})})})})),X=t(2815),ee=t(50518),ne=t(7607),te=t(66530),ie=t(23921),oe=t(49742),re=t(55995),ae=t(22422),le=t(47204),ce=t(87455),se=t(4304),de=t(5197),ue="EditTop",pe={root:"".concat(ue,"-root"),aider:"".concat(ue,"-aider"),aiderContent:"".concat(ue,"-aiderContent"),main:"".concat(ue,"-main"),mainContent:"".concat(ue,"-mainContent"),poster:"".concat(ue,"-poster"),posterTool:"".concat(ue,"-posterTool")},xe=(0,X.ZP)("div")((function(e){var n,t=e.theme;return n={},(0,c.Z)(n,"&.".concat(pe.root),{position:"relative",width:"100%"}),(0,c.Z)(n,"& .".concat(pe.aider),{position:"absolute",left:0,top:0,bottom:0,width:"45%",padding:t.spacing(8)}),(0,c.Z)(n,"& .".concat(pe.aiderContent),{width:"50%",padding:t.spacing(1),borderRadius:t.shape.borderRadius,maxHeight:"100%",background:"rgba(0, 0, 0, .1)",backdropFilter:"blur(8px)",overflow:"auto"}),(0,c.Z)(n,"& .".concat(pe.main),{position:"absolute",top:"50%",right:0,width:"50%",padding:t.spacing(0,8),transform:"translate(0, -50%)",color:"#fff",display:"flex",flexDirection:"column"}),(0,c.Z)(n,"& .".concat(pe.mainContent),{background:"rgba(0, 0, 0, .1)",backdropFilter:"blur(8px)",padding:t.spacing(4),borderRadius:t.shape.borderRadius}),(0,c.Z)(n,"& .".concat(pe.poster),{position:"relative"}),(0,c.Z)(n,"& .".concat(pe.posterTool),{display:"flex",justifyContent:"space-between",alignItems:"center",visibility:"hidden",position:"absolute",padding:t.spacing(1),top:0,left:0,width:"100%",color:"#fff","$poster:hover &":{visibility:"initial"}}),n})),he=(0,se.bH)(ce.ZP),fe=l.forwardRef((function(e,n){var t=l.useState(0),i=(0,a.Z)(t,2),o=i[0],r=i[1],c=C(""),u=(0,a.Z)(c,2),p=u[0],h=u[1],f=C(""),v=(0,a.Z)(f,2),m=v[0],j=v[1],Z=C(""),g=(0,a.Z)(Z,2),y=g[0],S=g[1],k=l.useState([]),w=(0,a.Z)(k,2),I=w[0],N=w[1],D=l.useState(""),E=(0,a.Z)(D,2),z=E[0],B=E[1];l.useEffect((function(){I&&I.length>0?z&&I.includes(z)||B(I[0]):B("")}),[z,I]),l.useImperativeHandle(n,(function(){return{title:p,sub_title:m,description:y,posters:I,cover:z}}));var O=function(e){if(window.confirm("delete?")){var n=e.currentTarget.dataset;n.idx&&(I.splice(+n.idx,1),N((0,s.Z)(I)))}};return(0,R.jsxs)(xe,{className:pe.root,children:[I.length?(0,R.jsx)(he,{onChangeIndex:function(e){return r(e)},index:o,children:I.map((function(e,n){return(0,R.jsx)(ee.E,{aspectRatio:16/9,src:e},n)}))}):(0,R.jsx)(ee.E,{aspectRatio:16/9,src:ne.OD}),(0,R.jsx)("div",{className:pe.aider,children:(0,R.jsx)("div",{className:pe.aiderContent,children:(0,R.jsxs)(te.Z,{rowHeight:"auto",cols:1,children:[I.map((function(e,n){return(0,R.jsxs)(ie.Z,{cols:1,className:pe.poster,children:[(0,R.jsx)(ee.E,{aspectRatio:16/9,src:e,alt:"poster"+n}),(0,R.jsxs)("div",{className:pe.posterTool,children:[(0,R.jsx)("div",{children:(0,R.jsx)(oe.Z,{TransitionComponent:re.Z,title:"\u8bbe\u6210\u5c01\u9762",placement:"bottom",arrow:!0,children:(0,R.jsx)(ae.Z,{size:"small",color:"primary",checked:z===e,onChange:function(){return function(e){B(I[e])}(n)}})})}),(0,R.jsx)("div",{"data-idx":n,onClick:O,children:(0,R.jsx)(oe.Z,{TransitionComponent:re.Z,title:"\u5220\u9664",placement:"bottom",arrow:!0,children:(0,R.jsx)(x.Z,{size:"medium",children:(0,R.jsx)(b.Z,{fontSize:"small"})})})})]})]},e)})),(0,R.jsx)(ie.Z,{cols:1,children:(0,R.jsx)(de.Ue,{ratio:16/9,children:(0,R.jsx)(d.Z,{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",children:(0,R.jsx)(J,{onComplete:function(e){e&&!I.includes(e)&&N([].concat((0,s.Z)(I),[e]))}})})})})]})})}),(0,R.jsx)("div",{className:pe.main,children:(0,R.jsxs)("div",{className:pe.mainContent,children:[(0,R.jsx)(T,{variant:"h4",value:p,onChange:h,placeholder:"\u8bf7\u8f93\u5165\u6807\u9898"}),(0,R.jsx)(T,{variant:"subtitle1",value:m,onChange:j,placeholder:"\u8bf7\u8f93\u5165\u526f\u6807\u9898"}),(0,R.jsx)(T,{variant:"body2",value:y,onChange:S,placeholder:"\u8bf7\u8f93\u5165\u7535\u5f71\u63cf\u8ff0..."}),(0,R.jsx)(d.Z,{mt:3,children:(0,R.jsx)(x.Z,{color:"inherit",disabled:!0,children:(0,R.jsx)(le.Z,{fontSize:"large"})})})]})})]})})),ve=t(77969),me=t(34325),je=t(95394),Ze=t(98669),ge=t(18103),be=t(66648),ye=t(40663),Ce=t(78175),Se=t(37469),ke=t(34826),we=t(48547),Re=t(28773),Ie=t(8216),Te=t(34635),Ne="EditInfo",De={root:"".concat(Ne,"-root"),header:"".concat(Ne,"-header"),infoItem:"".concat(Ne,"-infoItem"),toolBox:"".concat(Ne,"-toolBox"),toolText:"".concat(Ne,"-toolText"),description:"".concat(Ne,"-description")},Ee=(0,X.ZP)("div")((function(e){var n,t=e.theme;return n={},(0,c.Z)(n,"& .".concat(De.root),{}),(0,c.Z)(n,"& .".concat(De.header),{display:"flex",justifyContent:"space-between",marginBottom:t.spacing(1)}),(0,c.Z)(n,"& .".concat(De.infoItem),{"& + &":{marginLeft:t.spacing(1)}}),(0,c.Z)(n,"& .".concat(De.toolBox),{display:"flex",alignItems:"center",marginRight:t.spacing(2)}),(0,c.Z)(n,"& .".concat(De.toolText),{marginLeft:t.spacing(.5)}),(0,c.Z)(n,"& .".concat(De.description),{marginBottom:t.spacing(1)}),n})),ze=l.forwardRef((function(e,n){var t=C(""),i=(0,a.Z)(t,2),o=i[0],r=i[1],c=C(""),s=(0,a.Z)(c,2),u=s[0],p=s[1],h=C(""),f=(0,a.Z)(h,2),v=f[0],j=f[1],Z=(0,Te.a)().member;return l.useImperativeHandle(n,(function(){return{name:o,sub_name:u,description:v}})),(0,R.jsxs)(Ee,{children:[(0,R.jsxs)(d.Z,{className:De.header,children:[(0,R.jsxs)("div",{children:[(0,R.jsxs)(N.Z,{variant:"subtitle1",children:[(0,R.jsx)(T,{value:o,onChange:r,placeholder:"name"}),(0,R.jsx)(T,{value:u,onChange:p,placeholder:"sub_name"})]}),(0,R.jsx)(d.Z,{display:"flex",children:(0,R.jsxs)(N.Z,{variant:"caption",className:De.infoItem,children:["\u53d1\u5e03\u65f6\u95f4: ",M()(Date.now()).format("YYYY-MM-DD HH:mm")]})})]}),(0,R.jsxs)(d.Z,{display:"flex",alignItems:"center",children:[(0,R.jsxs)(d.Z,{className:De.toolBox,children:[(0,R.jsx)(x.Z,{size:"small",children:(0,R.jsx)(we.Z,{fontSize:"small"})}),(0,R.jsx)(N.Z,{className:De.toolText,children:"--"})]}),(0,R.jsxs)(d.Z,{className:De.toolBox,children:[(0,R.jsx)(x.Z,{size:"small",children:(0,R.jsx)(Re.Z,{fontSize:"small"})}),(0,R.jsx)(N.Z,{className:De.toolText,children:"--"})]}),(0,R.jsx)(x.Z,{size:"small",children:(0,R.jsx)(Ie.Z,{fontSize:"small"})})]})]}),(0,R.jsx)(N.Z,{className:De.description,variant:"body2",children:(0,R.jsx)(T,{variant:"body2",value:v,onChange:j,placeholder:"description..."})}),(0,R.jsx)(d.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:(0,R.jsxs)(d.Z,{display:"flex",alignItems:"center",children:[(0,R.jsx)(m.Z,{src:null===Z||void 0===Z?void 0:Z.avatar}),(0,R.jsxs)(d.Z,{ml:1,children:[(0,R.jsx)(N.Z,{variant:"subtitle2",children:null===Z||void 0===Z?void 0:Z.nickname}),(0,R.jsx)(N.Z,{variant:"caption",children:null===Z||void 0===Z?void 0:Z.description})]})]})})]})})),Be=function(e){var n=e.onSave,t=e.onCancel,i=(0,je.Z)(),o=l.useState(!1),r=(0,a.Z)(o,2),c=r[0],s=r[1],u=l.useState(""),p=(0,a.Z)(u,2),x=p[0],h=p[1],f=l.useState(""),v=(0,a.Z)(f,2),m=v[0],j=v[1],Z=l.createRef();l.useEffect((function(){s(e.open)}),[e.open]);var g=function(){s(!1),t&&t(),s(!1),h(""),j("")};return(0,R.jsx)(d.Z,{children:(0,R.jsxs)(Y.Z,{open:c,fullScreen:!0,onClose:g,children:[(0,R.jsx)(Ze.Z,{position:"fixed",sx:{boxShadow:i.shadows[0]},children:(0,R.jsxs)(ge.Z,{sx:{width:"100%",display:"flex",justifyContent:"space-between"},children:[(0,R.jsx)(ve.Z,{onClick:function(){var e,t,i;n&&n({url:x,cover:m,name:null===(e=Z.current)||void 0===e?void 0:e.name,sub_name:null===(t=Z.current)||void 0===t?void 0:t.sub_name,description:null===(i=Z.current)||void 0===i?void 0:i.description}),g()},color:"inherit",children:"\u4fdd\u5b58"}),(0,R.jsx)(ve.Z,{onClick:g,color:"inherit",children:"\u53d6\u6d88"})]})}),(0,R.jsxs)(d.Z,{sx:{height:"100%"},children:[(0,R.jsx)(ge.Z,{}),(0,R.jsx)(ye.IT,{children:(0,R.jsx)(ye.A1,{children:(0,R.jsxs)(d.Z,{sx:{width:"100%",position:"relative"},children:[x?(0,R.jsx)(ke.Y,{url:x,light:m||ne.OD}):(0,R.jsx)(ee.E,{aspectRatio:16/9,src:m||ne.OD}),(0,R.jsx)(J,{custom:!0,onComplete:function(e){e&&j(e)},children:(0,R.jsx)(be.Z,{color:m?"primary":"default",size:"medium",sx:{position:"absolute",left:i.spacing(4),bottom:i.spacing(4)},children:(0,R.jsx)(Ce.Z,{})})}),(0,R.jsx)(J,{custom:!0,onComplete:function(e){e&&h(e)},children:(0,R.jsx)(be.Z,{color:x?"primary":"default",size:"medium",sx:{position:"absolute",right:i.spacing(4),bottom:i.spacing(4)},children:(0,R.jsx)(Se.Z,{})})})]})})}),(0,R.jsxs)(ye.A1,{sx:{backgroundColor:i.palette.background.paper,display:"flex",margin:"0 auto"},children:[(0,R.jsx)(ye.BW,{sx:{padding:i.spacing(2,5),borderRight:"1px solid ".concat(i.palette.divider)},children:(0,R.jsx)(ze,{ref:Z})}),(0,R.jsx)(ye._9,{sticky:!0,sx:{padding:i.spacing(2,4),height:"100%",overflow:"auto"},children:(0,R.jsx)(y.Vm,{subtitle:"\u8bc4\u8bba\u533a",sx:{width:"100%"}})})]})]})]})})},Oe=(0,me.T4)(me.sV),Le=l.forwardRef((function(e,n){var t=l.useState(!1),i=(0,a.Z)(t,2),r=i[0],c=i[1],u=l.useState([]),p=(0,a.Z)(u,2),x=p[0],h=p[1];l.useImperativeHandle(n,(function(){return{mediums:x}}));return(0,R.jsxs)(d.Z,{children:[(0,R.jsx)(d.Z,{sx:function(e){return{padding:e.spacing(1,0)}},children:(0,R.jsx)(d.Z,{sx:function(e){return{padding:e.spacing(2,0)}},children:(0,R.jsxs)(te.Z,{rowHeight:"auto",cols:4,children:[x.map((function(e,n){return(0,R.jsx)(ie.Z,{cols:1,children:(0,R.jsx)(Oe,(0,o.Z)((0,o.Z)({},e),{},{onDelete:function(){return function(e){var n=x.findIndex((function(n){return n===e}));-1!==n&&(x.splice(n,1),h((0,s.Z)(x)))}(e)}}))},n)})),(0,R.jsx)(ve.Z,{onClick:function(){return c(!0)},children:(0,R.jsx)(y.Vm,{subtitle:"\u65b0\u589e\u5a92\u4f53\u8d44\u6e90"})})]})})}),(0,R.jsx)(Be,{open:r,onSave:function(e){h([].concat((0,s.Z)(x),[e]))},onCancel:function(){return c(!1)}})]})})),Me=t(51661),He=t(57812),Ae=(t(38957),t(91992)),Pe=t(14934),_e=t(56305),Fe=t(1204),Ue=t(98824),Ye=t(45134),qe=t(66629),We=t(46575),Ke=t(55892),Ve=t(39370),Ge=[{label:"Blockquote",style:"blockquote",value:"blockquote",icon:(0,R.jsx)(Fe.Z,{})},{label:"UL",style:"unordered-list-item",value:"ul",icon:(0,R.jsx)(Ue.Z,{})},{label:"OL",style:"ordered-list-item",value:"ol",icon:(0,R.jsx)(Ye.Z,{})},{label:"CodeBlock",style:"code-block",value:"codeblock",icon:(0,R.jsx)(qe.Z,{})}],$e=[{label:"Bold",style:"BOLD",value:"bold",icon:(0,R.jsx)(We.Z,{})},{label:"Italic",style:"ITALIC",value:"italic",icon:(0,R.jsx)(Ke.Z,{})},{label:"Underline",style:"UNDERLINE",value:"underline",icon:(0,R.jsx)(Ve.Z,{})}],Je=function(e){var n=l.useState([]),t=(0,a.Z)(n,2),i=t[0],o=t[1],r=l.useState(),c=(0,a.Z)(r,2),s=c[0],d=c[1],u=e.toggleBlockType,p=e.toggleInlineStyle;return(0,R.jsxs)(K.Z,{elevation:0,sx:function(e){return{display:"inline-flex",border:"1px solid ".concat(e.palette.divider),flexWrap:"wrap"}},children:[(0,R.jsx)(Ae.Z,{value:i,onChange:function(e,n){var t=e.currentTarget.dataset.style;t&&p(t),o(n)},sx:{grouped:function(e){return{margin:e.spacing(.5),border:"none","&:not(:first-child)":{borderRadius:e.shape.borderRadius},"&:first-child":{borderRadius:e.shape.borderRadius}}}},children:$e.map((function(e){return(0,R.jsx)(Pe.Z,{"data-style":e.style,value:e.value,children:e.icon},e.value)}))}),(0,R.jsx)(_e.Z,{flexItem:!0,orientation:"vertical",sx:function(e){return{margin:e.spacing(1,.5)}}}),(0,R.jsx)(Ae.Z,{value:s,exclusive:!0,onChange:function(e,n){var t=e.currentTarget.dataset.style;t&&u(t),d(n)},children:Ge.map((function(e){return(0,R.jsx)(Pe.Z,{"data-style":e.style,value:e.value,children:e.icon},e.value)}))})]})},Qe=l.forwardRef((function(e,n){var t=e.html,i=e.onBlur,o=e.placeholder,r=l.useState((function(){return t?Me.EditorState.createWithContent((0,He.h4)(t)):Me.EditorState.createEmpty()})),c=(0,a.Z)(r,2),s=c[0],u=c[1];l.useImperativeHandle(n,(function(){return{getHtmlString:function(){return(0,He.cn)(s.getCurrentContent())}}}));return(0,R.jsxs)(d.Z,{children:[(0,R.jsx)(Je,{editorState:s,toggleBlockType:function(e){u(Me.RichUtils.toggleBlockType(s,e))},toggleInlineStyle:function(e){u(Me.RichUtils.toggleInlineStyle(s,e))}}),(0,R.jsx)(d.Z,{sx:function(e){return{minHeight:220,border:"1px solid ".concat(e.palette.divider)}},children:(0,R.jsx)(Me.Editor,{blockStyleFn:function(e){return"blockquote"===e.getType()?"RichEditor-blockquote":""},customStyleMap:{CODE:{backgroundColor:"rgba(0, 0, 0, 0.05)",fontFamily:'"Inconsolata", "Menlo", "Consolas", monospace',fontSize:16,padding:2}},editorState:s,handleKeyCommand:function(e,n){var t=Me.RichUtils.handleKeyCommand(n,e);return t?(u(t),"handled"):"not-handled"},keyBindingFn:function(e){return(0,Me.getDefaultKeyBinding)(e)},onChange:u,onBlur:i,placeholder:o,spellCheck:!0})})]})})),Xe=l.forwardRef((function(e,n){var t=l.useState(""),i=(0,a.Z)(t,2),o=i[0],r=i[1];l.useImperativeHandle(n,(function(){return{about:o}}));var c=l.createRef();return(0,R.jsx)("div",{children:(0,R.jsx)(Qe,{ref:c,onBlur:function(){var e,n=null===(e=c.current)||void 0===e?void 0:e.getHtmlString();r(n)}})})})),en=t(47032),nn=t(87664),tn=t(57192),on=t(63157),rn=t(87943),an=t(61318),ln=t(83386),cn=t(87669),sn=function(e){var n=l.useState(!0),t=(0,a.Z)(n,2),i=t[0],o=t[1];return(0,R.jsx)("div",{children:(0,R.jsxs)(Y.Z,{open:i,onClose:function(){o(!1),e.onCancel&&e.onCancel()},children:[e.title&&(0,R.jsx)(rn.Z,{children:e.title}),(0,R.jsx)(an.Z,{children:(0,R.jsx)(ln.Z,{children:e.content})}),(0,R.jsxs)(cn.Z,{children:[e.cancel&&(0,R.jsx)(ve.Z,{onClick:function(){o(!1),e.onCancel&&e.onCancel()},color:"primary",children:e.cancelText||"\u53d6\u6d88"}),(0,R.jsx)(ve.Z,{onClick:function(){o(!1),e.onConfirm&&e.onConfirm()},color:"primary",autoFocus:!0,children:e.confirmText||"\u786e\u5b9a"})]})]})})},dn={dialog:function(e){return new Promise((function(n,t){var i=document.createElement("div");document.body.appendChild(i);var r=function(){i.remove()};on.render((0,R.jsx)("div",{children:(0,R.jsx)(sn,(0,o.Z)((0,o.Z)({},e),{},{onConfirm:function(){n(!0),r()},onCancel:function(){n(!1),r()}}))}),i)}))}},un=t(97353),pn=t(4555),xn=["name","sub_name","description","cover"],hn=function(){var e=(0,pn.s0)(),n=l.useState(0),t=(0,a.Z)(n,2),i=t[0],c=t[1],s=l.useState(!1),u=(0,a.Z)(s,2),p=u[0],x=u[1],h=l.createRef(),f=l.createRef(),v=l.createRef(),m=l.createRef(),j=(0,O.Cn)({onCompleted:function(){dn.dialog({title:"\u63d0\u793a",content:"\u4e0a\u4f20\u6210\u529f\u3002"}).then((function(){e("/home")}))}}),Z=(0,a.Z)(j,1)[0];return(0,R.jsxs)(d.Z,{children:[(0,R.jsx)(ye.IT,{children:(0,R.jsx)(ye.A1,{children:(0,R.jsx)(fe,{ref:h})})}),(0,R.jsxs)(ye.A1,{children:[(0,R.jsxs)(ye.BW,{sx:function(e){return{backgroundColor:e.palette.background.paper,padding:e.spacing(1,6),borderRight:"1px solid ".concat(e.palette.divider)}},children:[(0,R.jsxs)(q.Z,{value:i,onChange:function(e,n){return c(n)},children:[(0,R.jsx)(W.Z,{label:"\u4fe1\u606f"}),(0,R.jsx)(W.Z,{label:"\u76f8\u5173\u63a8\u8350",disabled:!0}),(0,R.jsx)(W.Z,{label:"\u5173\u4e8e"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{hidden:0!==i,children:(0,R.jsx)(Le,{ref:f})}),(0,R.jsx)("div",{hidden:2!==i,children:(0,R.jsx)(Xe,{ref:v})}),(0,R.jsx)(en.Z,{ariaLabel:"SpeedDial OpenIcon",sx:function(e){return{position:"fixed","&.MuiSpeedDial-directionUp, &.MuiSpeedDial-directionLeft":{bottom:e.spacing(2),right:e.spacing(2)},"&.MuiSpeedDial-directionDown, &.MuiSpeedDial-directionRight":{top:e.spacing(2),left:e.spacing(2)}}},icon:(0,R.jsx)(nn.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center"}}),onClose:function(){return x(!1)},onOpen:function(){return x(!0)},open:p,children:(0,R.jsx)(tn.Z,{icon:(0,R.jsx)(un.Z,{}),tooltipTitle:"Create",onClick:function(){var e=h.current,n=f.current,t=m.current,i=v.current;Z({variables:{shadow:{title:(null===e||void 0===e?void 0:e.title)||"",sub_title:(null===e||void 0===e?void 0:e.sub_title)||"",cover:(null===e||void 0===e?void 0:e.cover)||"",posters:null===e||void 0===e?void 0:e.posters,description:null===e||void 0===e?void 0:e.description,credits:null===t||void 0===t?void 0:t.credits,about:(null===i||void 0===i?void 0:i.about)||"",sources:null===n||void 0===n?void 0:n.mediums.map((function(n){var t=n.name,i=n.sub_name,a=n.description,l=n.cover,c=(0,r.Z)(n,xn);return(0,o.Z)({name:t||(null===e||void 0===e?void 0:e.title),sub_name:i||(null===e||void 0===e?void 0:e.sub_title),description:a||(null===e||void 0===e?void 0:e.description),cover:l||(null===e||void 0===e?void 0:e.cover)},c)}))}}})}})})]})]}),(0,R.jsx)(ye._9,{children:(0,R.jsx)(Q,{ref:m})})]})]})},fn=hn}}]);
//# sourceMappingURL=14.3a40995c.chunk.js.map
(this.webpackJsonpmiss=this.webpackJsonpmiss||[]).push([[22],{607:function(e,t,a){"use strict";a.r(t);var n=a(24),r=a(0),l=a.n(r),o=a(460),c=(a(555),a(275)),i=a(270),u=a(195),d=a(326),s=a(626),m=a(591),p=a(584),v=a(585),f=a(586),b=a(587),E=a(588),g=a(589),h=a(590),y=Object(c.a)((function(e){return Object(i.a)({paper:{display:"inline-flex",border:"1px solid ".concat(e.palette.divider),flexWrap:"wrap"},divider:{margin:e.spacing(1,.5)},grouped:{margin:e.spacing(.5),border:"none","&:not(:first-child)":{borderRadius:e.shape.borderRadius},"&:first-child":{borderRadius:e.shape.borderRadius}}})})),C=[{label:"Blockquote",style:"blockquote",value:"blockquote",icon:r.createElement(p.a,null)},{label:"UL",style:"unordered-list-item",value:"ul",icon:r.createElement(v.a,null)},{label:"OL",style:"ordered-list-item",value:"ol",icon:r.createElement(f.a,null)},{label:"CodeBlock",style:"code-block",value:"codeblock",icon:r.createElement(b.a,null)}],O=[{label:"Bold",style:"BOLD",value:"bold",icon:r.createElement(E.a,null)},{label:"Italic",style:"ITALIC",value:"italic",icon:r.createElement(g.a,null)},{label:"Underline",style:"UNDERLINE",value:"underline",icon:r.createElement(h.a,null)}],j=function(e){var t=y(),a=r.useState([]),l=Object(n.a)(a,2),o=l[0],c=l[1],i=r.useState(),p=Object(n.a)(i,2),v=p[0],f=p[1],b=e.toggleBlockType,E=e.toggleInlineStyle;return r.createElement(u.a,{elevation:0,className:t.paper},r.createElement(s.a,{value:o,onChange:function(e,t){var a=e.currentTarget.dataset.style;a&&E(a),c(t)},classes:{grouped:t.grouped}},O.map((function(e){return r.createElement(m.a,{"data-style":e.style,key:e.value,value:e.value},e.icon)}))),r.createElement(d.a,{flexItem:!0,orientation:"vertical",className:t.divider}),r.createElement(s.a,{value:v,exclusive:!0,onChange:function(e,t){var a=e.currentTarget.dataset.style;a&&b(a),f(t)},classes:{grouped:t.grouped}},C.map((function(e){return r.createElement(m.a,{"data-style":e.style,key:e.value,value:e.value},e.icon)}))))},k=Object(c.a)((function(e){return Object(i.a)({root:{},editor:{minHeight:220,border:"1px solid ".concat(e.palette.divider)}})})),S=r.forwardRef((function(e,t){var a=k(),l=e.raw,c=e.onBlur,i=e.placeholder,u=r.useState((function(){return l?o.EditorState.createWithContent(Object(o.convertFromRaw)(JSON.parse(l))):o.EditorState.createEmpty()})),d=Object(n.a)(u,2),s=d[0],m=d[1];r.useImperativeHandle(t,(function(){return{getRawString:function(){return JSON.stringify(Object(o.convertToRaw)(s.getCurrentContent()))}}}));return r.createElement("div",{className:a.root},r.createElement(j,{editorState:s,toggleBlockType:function(e){m(o.RichUtils.toggleBlockType(s,e))},toggleInlineStyle:function(e){m(o.RichUtils.toggleInlineStyle(s,e))}}),r.createElement("div",{className:a.editor},r.createElement(o.Editor,{blockStyleFn:function(e){switch(e.getType()){case"blockquote":return"RichEditor-blockquote";default:return""}},customStyleMap:{CODE:{backgroundColor:"rgba(0, 0, 0, 0.05)",fontFamily:'"Inconsolata", "Menlo", "Consolas", monospace',fontSize:16,padding:2}},editorState:s,handleKeyCommand:function(e,t){var a=o.RichUtils.handleKeyCommand(t,e);return a?(m(a),"handled"):"not-handled"},keyBindingFn:function(e){return Object(o.getDefaultKeyBinding)(e)},onChange:m,onBlur:c,placeholder:i,spellCheck:!0})))})),x=r.forwardRef((function(e,t){var a=r.useState(""),l=Object(n.a)(a,2),o=l[0],c=l[1];r.useImperativeHandle(t,(function(){return{about:o}}));var i=r.createRef();return r.createElement("div",null,r.createElement(S,{ref:i,onBlur:function(){var e,t=null===(e=i.current)||void 0===e?void 0:e.getRawString();c(t)}}))})),R=a(356),N=a(338),w=a(320),I=a(449),T=a(101),D=a(314),B=a(278),H=a(328),F=a(342),U=a(330),L=a(325),M=a(592),q=a(72),z=function(e){var t=r.useState(e),a=Object(n.a)(t,2),l=a[0],o=a[1];return[l,function(e){o(e.target.value)}]},_=a(86),J=a(457),P=Object(c.a)((function(e){return Object(i.a)({root:{},input:{borderColor:"transparent"},body2:e.typography.body2,body1:e.typography.body1,caption:e.typography.caption,button:e.typography.button,h1:e.typography.h1,h2:e.typography.h2,h3:e.typography.h3,h4:e.typography.h4,h5:e.typography.h5,h6:e.typography.h6,subtitle1:e.typography.subtitle1,subtitle2:e.typography.subtitle2,overline:e.typography.overline,inherit:{}})})),W=function(e){var t=e.value,a=e.onChange,n=e.placeholder,l=e.variant,o=void 0===l?"body1":l,c=Object(_.a)(e,["value","onChange","placeholder","variant"]),i=P();return r.createElement(J.a,Object.assign({classes:{root:i.root},className:i[o],value:t,onChange:a,placeholder:n},c))},K=Object(c.a)((function(e){return Object(i.a)({root:{backgroundColor:e.palette.background.paper}})})),A=r.forwardRef((function(e,t){var a=K(),l=r.useState([]),o=Object(n.a)(l,2),c=o[0],i=o[1];r.useImperativeHandle(t,(function(){return{credits:c}}));var u=function(e){var t=e.target,a=t.dataset,n=t.value;if(a.idx&&a.key){var r=c[a.idx];r[a.key]=n,i([].concat(Object(R.a)(c),[r]))}};return r.createElement(N.a,{className:a.root},r.createElement(w.a,{subheader:r.createElement(I.a,null,r.createElement(T.a,null,"\u6f14\u804c\u8868"),r.createElement(D.a,{onClick:function(){i([].concat(Object(R.a)(c),[{avatar:"",name:"",description:"",tags:[]}]))},size:"small"},r.createElement(L.a,{fontSize:"small"})))},c.length?r.createElement(r.Fragment,null,c.map((function(e,t){return r.createElement(B.a,{key:t},r.createElement(H.a,null,r.createElement(F.a,{src:e.avatar})),r.createElement("div",null,r.createElement(W,{inputProps:{"data-idx":t,"data-key":"name"},value:e.name,onChange:u,placeholder:"\u8bf7\u8f93\u5165\u540d\u5b57"}),r.createElement(W,{inputProps:{"data-idx":t,"data-key":"description"},value:e.name,onChange:u,placeholder:"\u8bf7\u8f93\u5165\u63cf\u8ff0"})),r.createElement(U.a,null,r.createElement(D.a,{onClick:function(){return function(e){var t=c.splice(e,1);i(Object(R.a)(t))}(t)}},r.createElement(M.a,null))))}))):r.createElement("div",null,r.createElement(q.a,{title:"\u8bf7\u6dfb\u52a0\u6f14\u804c\u4eba\u5458"}))))})),G=a(75),Q=a(47),V=a(331),X=a(332),Y=a(50),Z=a(593),$=Object(c.a)((function(e){return Object(i.a)({root:{display:"inline-flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:function(e){var t;return null!==(t=e.width)&&void 0!==t?t:"100%"},height:function(e){var t;return null!==(t=e.height)&&void 0!==t?t:"100%"},color:e.palette.text.secondary,flex:1},icon:e.custom.base.icon.large})})),ee=function(e){var t=e.onComplete,a=e.onError,l=e.children,o=e.component,c=e.custom,i=e.title,u=$(e),d=r.createRef(),s=Object(Y.t)({onCompleted:function(e){t&&t(e.upload_file_oss)},onError:function(e){a&&a(e.message)}}),m=Object(n.a)(s,2),p=m[0],v=m[1].loading,f=o||"div";return r.createElement(f,{role:"button",onClick:function(){var e;v||(null===(e=d.current)||void 0===e||e.click())}},r.createElement("input",{ref:d,style:{display:"none"},type:"file",accept:"*",onChange:function(e){var t=e.currentTarget,a=t.validity,r=Object(n.a)(t.files,1)[0];a.valid&&p({variables:{file:r}})}}),c?{children:l}:r.createElement(N.a,{className:u.root},r.createElement("div",null,r.createElement(Z.a,{className:u.icon})),r.createElement(T.a,{variant:"h6"},v?"\u4e0a\u4f20\u4e2d...":i)))};ee.defaultProps={custom:!1,title:"\u70b9\u51fb\u4e0a\u4f20"};var te=a(450),ae=Object(c.a)((function(e){return Object(i.a)({root:{position:"relative",width:"100%"},aider:{position:"absolute",left:0,top:0,bottom:0,width:"45%",padding:e.spacing(8)},aiderContent:{width:"50%",padding:e.spacing(2),borderRadius:e.shape.borderRadius,maxHeight:"100%",background:"rgba(0, 0, 0, .1)",backdropFilter:"blur(8px)",overflow:"auto"},main:{position:"absolute",top:"50%",right:0,width:"50%",padding:e.spacing(0,8),transform:"translate(0, -50%)",color:"#fff",display:"flex",flexDirection:"column"},mainContent:{background:"rgba(0, 0, 0, .1)",backdropFilter:"blur(8px)",padding:e.spacing(4),borderRadius:e.shape.borderRadius},posters:{},posterTool:{display:"none"}})})),ne=r.forwardRef((function(e,t){var a=ae(),l=z(""),o=Object(n.a)(l,2),c=o[0],i=o[1],u=z(""),d=Object(n.a)(u,2),s=d[0],m=d[1],p=z(""),v=Object(n.a)(p,2),f=v[0],b=v[1],E=r.useState([]),g=Object(n.a)(E,2),h=g[0],y=g[1],C=r.useState(""),O=Object(n.a)(C,2),j=O[0],k=O[1];r.useEffect((function(){h&&h.length>0?j&&h.includes(j)||k(h[0]):k("")}),[j,h]),r.useImperativeHandle(t,(function(){return{title:c,sub_title:s,description:f,posters:h,cover:j}}));var S=function(e){if(window.confirm("delete?")){var t=e.currentTarget.dataset;t.idx&&(h.splice(+t.idx,1),y(Object(R.a)(h)))}},x=function(e){var t=e.currentTarget.dataset;t.idx&&k(h[t.idx])};return r.createElement("div",{className:a.root},r.createElement(G.a,{aspectRatio:16/9,src:Q.e}),r.createElement("div",{className:a.aider},r.createElement("div",{className:a.aiderContent},r.createElement(V.a,{cellHeight:"auto",className:a.posters,cols:1},h.map((function(e,t){return r.createElement(X.a,{key:e,cols:1},r.createElement(G.a,{aspectRatio:16/9,src:e,alt:"poster"+t}),r.createElement("div",{className:a.posterTool},r.createElement("div",{"data-idx":t,onClick:S},"remove poster"),r.createElement("div",{"data-idx":t,onClick:x},j===e?"is cover":"isn't cover")))})),r.createElement(X.a,{cols:1},r.createElement(ee,{onComplete:function(e){e&&!h.includes(e)&&y([].concat(Object(R.a)(h),[e]))},title:"\u4e0a\u4f20\u6d77\u62a5"}))))),r.createElement("div",{className:a.main},r.createElement("div",{className:a.mainContent},r.createElement(T.a,{gutterBottom:!0,variant:"h4",component:"div"},r.createElement(W,{variant:"h4",value:c,onChange:i,placeholder:"movie title"})),r.createElement(T.a,{gutterBottom:!0,variant:"subtitle1",component:"div"},r.createElement(W,{value:s,onChange:m,placeholder:"\u8bf7\u8f93\u5165\u526f\u6807\u9898"})),r.createElement(T.a,{variant:"body2",component:"div"},r.createElement(W,{value:f,onChange:b,placeholder:"\u8bf7\u8f93\u5165\u7535\u5f71\u63cf\u8ff0..."})),r.createElement(N.a,{mt:3},r.createElement(D.a,{size:"medium",disabled:!0},r.createElement(te.a,{fontSize:"large"}))))))})),re=a(362),le=a(71),oe=a(594),ce=a(323),ie=a(324),ue=a(83),de=Object(c.a)((function(e){return Object(i.a)({root:{height:"100%"},body:{backgroundColor:e.palette.background.paper,display:"flex",margin:"0 auto"},content:{padding:e.spacing(2,5),borderRight:"1px solid ".concat(e.palette.divider)},aider:{padding:e.spacing(2,4),height:"100%",overflow:"auto"},sourceWrap:{width:"100%",position:"relative"}})})),se=function(e){var t=e.onSave,a=e.onCancel,l=de(),o=r.useState(!1),c=Object(n.a)(o,2),i=c[0],u=c[1],d=r.useState(""),s=Object(n.a)(d,2),m=s[0],p=s[1],v=r.useState(""),f=Object(n.a)(v,2),b=f[0],E=f[1],g=z(""),h=Object(n.a)(g,2),y=h[0],C=h[1],O=z(""),j=Object(n.a)(O,2),k=j[0],S=j[1],x=z(""),R=Object(n.a)(x,2),w=R[0],I=R[1];r.useEffect((function(){u(e.open)}),[e.open]);var T=function(){u(!1),a&&a(),u(!1),p(""),E(""),C(""),S(""),I("")};return r.createElement("div",null,r.createElement(oe.a,{open:i,fullScreen:!0,onClose:T},r.createElement(ce.a,{position:"relative"},r.createElement(ie.a,null,r.createElement(re.a,{onClick:function(){t&&t({url:m,cover:b,name:y,alias_name:k,description:w}),T()},color:"inherit"},"save"),r.createElement(re.a,{onClick:T,color:"inherit"},"cancle"))),r.createElement(N.a,{className:l.root},r.createElement(ue.d,null,r.createElement(ue.b,null,r.createElement("div",{className:l.sourceWrap},r.createElement(G.a,{aspectRatio:16/9,src:Q.e}),r.createElement(ee,{onComplete:function(e){e&&E(e)}},"add cover"),r.createElement(ee,{onComplete:function(e){e&&p(e)}},"add source")))),r.createElement(ue.b,{className:l.body},r.createElement(ue.c,{className:l.content},r.createElement(W,{value:y,onChange:C,placeholder:"name"}),r.createElement(W,{value:k,onChange:S,placeholder:"alias_name"}),r.createElement(W,{value:w,onChange:I,placeholder:"description..."})),r.createElement(ue.a,{sticky:!0,className:l.aider},r.createElement(q.a,{title:"\u8bc4\u8bba\u533a"}))))))},me=Object(c.a)((function(e){return Object(i.a)({root:{padding:e.spacing(1,0)},box:{padding:e.spacing(2,0),"& + &":{borderTop:"1px solid ".concat(e.palette.divider)}}})})),pe=l.a.forwardRef((function(e,t){var a=me(),r=l.a.useState(!1),o=Object(n.a)(r,2),c=o[0],i=o[1],u=l.a.useState([]),d=Object(n.a)(u,2),s=d[0],m=d[1];l.a.useImperativeHandle(t,(function(){return{mediums:s}}));return l.a.createElement(l.a.Fragment,null,l.a.createElement(N.a,{className:a.root},l.a.createElement(N.a,{className:a.box},l.a.createElement(T.a,{variant:"subtitle1",gutterBottom:!0},"\u76f8\u5173\u8d44\u6e90"),l.a.createElement(V.a,{cellHeight:"auto",cols:4},s.map((function(e,t){return l.a.createElement(X.a,{cols:1,key:t},l.a.createElement(le.a,e))})),l.a.createElement(re.a,{onClick:function(){return i(!0)}},"\u6dfb\u52a0")))),l.a.createElement(se,{open:c,onSave:function(e){m([].concat(Object(R.a)(s),[e]))},onCancel:function(){return i(!1)}}))})),ve=a(613),fe=a(572),be=a(41),Ee=a(13),ge=a.n(Ee),he=a(595),ye=a(596),Ce=a(597),Oe=a(598),je=function(e){var t=r.useState(!0),a=Object(n.a)(t,2),l=a[0],o=a[1];return r.createElement("div",null,r.createElement(oe.a,{open:l,onClose:function(){o(!1),e.onCancel&&e.onCancel()}},e.title&&r.createElement(he.a,null,e.title),r.createElement(ye.a,null,r.createElement(Ce.a,null,e.content)),r.createElement(Oe.a,null,e.cancel&&r.createElement(re.a,{onClick:function(){o(!1),e.onCancel&&e.onCancel()},color:"primary"},e.cancelText||"\u53d6\u6d88"),r.createElement(re.a,{onClick:function(){o(!1),e.onConfirm&&e.onConfirm()},color:"primary",autoFocus:!0},e.confirmText||"\u786e\u5b9a"))))},ke={dialog:function(e){return new Promise((function(t,a){var n=document.createElement("div");document.body.appendChild(n);var l=function(){n.remove()};ge.a.render(r.createElement("div",null,r.createElement(je,Object.assign({},e,{onConfirm:function(){t(!0),l()},onCancel:function(){t(!1),l()}}))),n)}))}},Se=a(599),xe=a(627),Re=a(619),Ne=a(600);a.d(t,"MovieUpload",(function(){return Ie}));var we=Object(c.a)((function(e){return Object(i.a)({main:{backgroundColor:e.palette.background.paper,padding:e.spacing(1,6),borderRight:"1px solid ".concat(e.palette.divider)},speedDial:{position:"fixed","&.MuiSpeedDial-directionUp, &.MuiSpeedDial-directionLeft":{bottom:e.spacing(2),right:e.spacing(2)},"&.MuiSpeedDial-directionDown, &.MuiSpeedDial-directionRight":{top:e.spacing(2),left:e.spacing(2)}},speedDialIcon:{display:"flex",alignItems:"center",justifyContent:"center"}})})),Ie=function(){var e=we(),t=Object(be.c)(),a=r.useState(0),l=Object(n.a)(a,2),o=l[0],c=l[1],i=r.useState(!1),u=Object(n.a)(i,2),d=u[0],s=u[1],m=r.createRef(),p=r.createRef(),v=r.createRef(),f=r.createRef(),b=Object(Y.b)({onCompleted:function(){ke.dialog({title:"\u63d0\u793a",content:"\u4e0a\u4f20\u6210\u529f\u3002"}).then((function(){t.gotoHome()}))}}),E=Object(n.a)(b,1)[0];return r.createElement(N.a,null,r.createElement(ue.d,null,r.createElement(ue.b,null,r.createElement(ne,{ref:m}))),r.createElement(ue.b,null,r.createElement(ue.c,{className:e.main},r.createElement(ve.a,{value:o,onChange:function(e,t){return c(t)}},r.createElement(fe.a,{label:"\u4fe1\u606f"}),r.createElement(fe.a,{label:"\u76f8\u5173\u63a8\u8350",disabled:!0}),r.createElement(fe.a,{label:"\u5173\u4e8e"})),r.createElement("div",null,r.createElement("div",{hidden:0!==o},r.createElement(pe,{ref:p})),r.createElement("div",{hidden:2!==o},r.createElement(x,{ref:v})),r.createElement(Se.a,{ariaLabel:"SpeedDial OpenIcon",className:e.speedDial,icon:r.createElement(xe.a,{className:e.speedDialIcon}),onClose:function(){return s(!1)},onOpen:function(){return s(!0)},open:d},r.createElement(Re.a,{icon:r.createElement(Ne.a,null),tooltipTitle:"Create",onClick:function(){var e=m.current,t=p.current,a=v.current,n=f.current;E({variables:{movie:{title:(null===e||void 0===e?void 0:e.title)||"",cover:(null===e||void 0===e?void 0:e.cover)||"",posters:null===e||void 0===e?void 0:e.posters,description:null===e||void 0===e?void 0:e.description,credits:null===n||void 0===n?void 0:n.credits,about:null===a||void 0===a?void 0:a.about,sources:null===t||void 0===t?void 0:t.mediums}}})}})))),r.createElement(ue.a,null,r.createElement(A,{ref:f}))))};t.default=Ie}}]);
//# sourceMappingURL=22.af1bb303.chunk.js.map
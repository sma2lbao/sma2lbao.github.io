{"version":3,"sources":["components/app/FileUpload/FileUpload.tsx","views/Test/index.tsx"],"names":["FileUpload","props","onComplete","onError","children","inputRef","React","useUploadFileOssMutation","onCompleted","data","upload_file_oss","error","message","loading","role","onClick","current","click","ref","style","display","type","accept","onChange","e","currentTarget","validity","file","files","valid","variables","Test"],"mappings":"iIAIaA,EAA4C,SAAAC,GAAU,IACzDC,EAAkCD,EAAlCC,WAAYC,EAAsBF,EAAtBE,QAASC,EAAaH,EAAbG,SAEvBC,EAAWC,cAH+C,EAKzBC,YAAyB,CAC9DC,YAD8D,SAClDC,GACVP,GAAcA,EAAWO,EAAKC,kBAEhCP,QAJ8D,SAItDQ,GACNR,GAAWA,EAAQQ,EAAMC,YAVmC,mBAKzDF,EALyD,KAKtCG,EALsC,KAKtCA,QAyB1B,OACE,2BACE,uBAAKC,KAAK,SAASC,QARH,WACH,IAAD,EAATF,IACH,UAAAR,EAASW,eAAT,SAAkBC,WAOhB,yBACEC,IAAKb,EACLc,MAAO,CAAEC,QAAS,QAClBC,KAAK,OACLC,OAAO,IACPC,SAxBa,SAACC,GAA4C,IAAD,EAI3DA,EAAEC,cAFJC,EAF6D,EAE7DA,SACQC,EAHqD,cAG7DC,MAH6D,MAK3DF,EAASG,OACXnB,EAAgB,CAAEoB,UAAW,CAAEH,aAoB5BvB,KC/BM2B,UAVQ,WACrB,OACE,2BACE,2BACE,gBAAC,EAAD","file":"static/js/12.ab4bbd76.chunk.js","sourcesContent":["import * as React from \"react\";\nimport { useUploadFileOssMutation } from \"@/schema\";\nimport { BaseFileUploadProps } from \"./file-upload\";\n\nexport const FileUpload: React.FC<BaseFileUploadProps> = props => {\n  const { onComplete, onError, children } = props;\n\n  const inputRef = React.createRef<HTMLInputElement>();\n\n  const [upload_file_oss, { loading }] = useUploadFileOssMutation({\n    onCompleted(data) {\n      onComplete && onComplete(data.upload_file_oss);\n    },\n    onError(error) {\n      onError && onError(error.message);\n    }\n  });\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const {\n      validity,\n      files: [file]\n    } = e.currentTarget;\n    if (validity.valid) {\n      upload_file_oss({ variables: { file } });\n    }\n  };\n\n  const handleClick = () => {\n    if (!loading) {\n      inputRef.current?.click();\n    }\n  };\n\n  return (\n    <div>\n      <div role=\"button\" onClick={handleClick}>\n        <input\n          ref={inputRef}\n          style={{ display: \"none\" }}\n          type=\"file\"\n          accept=\"*\"\n          onChange={handleChange}\n        />\n        {children}\n      </div>\n    </div>\n  );\n};\n","import * as React from \"react\";\nimport { FileUpload } from \"@/components/app/FileUpload\";\n\nconst Test: React.FC = () => {\n  return (\n    <div>\n      <div>\n        <FileUpload>upload</FileUpload>\n      </div>\n    </div>\n  );\n};\n\nexport default Test;\n"],"sourceRoot":""}
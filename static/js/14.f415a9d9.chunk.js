(this.webpackJsonpmiss=this.webpackJsonpmiss||[]).push([[14],{393:function(e,t,a){"use strict";var n=a(25),r=a(0),l=a(403),o=(a(442),a(274)),c=a(269),i=Object(o.a)((function(e){return Object(c.a)({root:{},editor:{minHeight:220}})})),u=function(e){var t="RichEditor-styleButton";e.active&&(t+=" RichEditor-activeButton");return r.createElement("span",{className:t,onMouseDown:function(t){t.preventDefault(),e.onToggle(e.style)}},e.label)},d=[{label:"H1",style:"header-one"},{label:"H2",style:"header-two"},{label:"H3",style:"header-three"},{label:"H4",style:"header-four"},{label:"H5",style:"header-five"},{label:"H6",style:"header-six"},{label:"Blockquote",style:"blockquote"},{label:"UL",style:"unordered-list-item"},{label:"OL",style:"ordered-list-item"},{label:"Code Block",style:"code-block"}],s=function(e){var t=e.editorState,a=t.getSelection(),n=t.getCurrentContent().getBlockForKey(a.getStartKey()).getType();return r.createElement("div",{className:"RichEditor-controls"},d.map((function(t){return r.createElement(u,{key:t.label,active:t.style===n,label:t.label,onToggle:e.onToggle,style:t.style})})))},m=[{label:"Bold",style:"BOLD"},{label:"Italic",style:"ITALIC"},{label:"Underline",style:"UNDERLINE"},{label:"Monospace",style:"CODE"}],p=function(e){var t=e.editorState.getCurrentInlineStyle();return r.createElement("div",{className:"RichEditor-controls"},m.map((function(a){return r.createElement(u,{key:a.label,active:t.has(a.style),label:a.label,onToggle:e.onToggle,style:a.style})})))},v=r.forwardRef((function(e,t){var a=i(),o=e.raw,c=e.onBlur,u=e.placeholder,d=r.useState((function(){return o?l.EditorState.createWithContent(Object(l.convertFromRaw)(JSON.parse(o))):l.EditorState.createEmpty()})),m=Object(n.a)(d,2),v=m[0],b=m[1];r.useImperativeHandle(t,(function(){return{getRawString:function(){return JSON.stringify(Object(l.convertToRaw)(v.getCurrentContent()))}}}));return r.createElement("div",{className:a.root},r.createElement(s,{editorState:v,onToggle:function(e){b(l.RichUtils.toggleBlockType(v,e))}}),r.createElement(p,{editorState:v,onToggle:function(e){b(l.RichUtils.toggleInlineStyle(v,e))}}),r.createElement("div",{className:a.editor},r.createElement(l.Editor,{blockStyleFn:function(e){switch(e.getType()){case"blockquote":return"RichEditor-blockquote";default:return""}},customStyleMap:{CODE:{backgroundColor:"rgba(0, 0, 0, 0.05)",fontFamily:'"Inconsolata", "Menlo", "Consolas", monospace',fontSize:16,padding:2}},editorState:v,handleKeyCommand:function(e,t){var a=l.RichUtils.handleKeyCommand(t,e);return a?(b(a),"handled"):"not-handled"},keyBindingFn:function(e){if(9===e.keyCode){var t=l.RichUtils.onTab(e,v,4);return t!==v&&b(t),null}return Object(l.getDefaultKeyBinding)(e)},onChange:b,onBlur:c,placeholder:u,spellCheck:!0})))}));a.d(t,"a",(function(){return v}));t.b=v},591:function(e,t,a){"use strict";a.r(t);var n=a(25),r=a(0),l=a.n(r),o=a(393),c=r.forwardRef((function(e,t){var a=r.useState(""),l=Object(n.a)(a,2),c=l[0],i=l[1];r.useImperativeHandle(t,(function(){return{about:c}}));var u=r.createRef();return r.createElement("div",null,r.createElement(o.a,{ref:u,onBlur:function(){var e,t=null===(e=u.current)||void 0===e?void 0:e.getRawString();i(t)}}))})),i=a(352),u=a(336),d=a(317),s=a(446),m=a(100),p=a(312),v=a(277),b=a(325),f=a(338),E=a(327),g=a(274),h=a(269),y=a(322),C=a(576),O=a(88),j=function(e){var t=r.useState(e),a=Object(n.a)(t,2),l=a[0],o=a[1];return[l,function(e){o(e.target.value)}]},k=a(82),S=a(402),R=Object(g.a)((function(e){return Object(h.a)({root:{},input:{borderColor:"transparent"},body2:e.typography.body2,body1:e.typography.body1,caption:e.typography.caption,button:e.typography.button,h1:e.typography.h1,h2:e.typography.h2,h3:e.typography.h3,h4:e.typography.h4,h5:e.typography.h5,h6:e.typography.h6,subtitle1:e.typography.subtitle1,subtitle2:e.typography.subtitle2,overline:e.typography.overline,inherit:{}})})),x=function(e){var t=e.value,a=e.onChange,n=e.placeholder,l=e.variant,o=void 0===l?"body1":l,c=Object(k.a)(e,["value","onChange","placeholder","variant"]),i=R();return r.createElement(S.a,Object.assign({classes:{root:i.root},className:i[o],value:t,onChange:a,placeholder:n},c))},N=Object(g.a)((function(e){return Object(h.a)({root:{backgroundColor:e.palette.background.paper}})})),w=r.forwardRef((function(e,t){var a=N(),l=r.useState([]),o=Object(n.a)(l,2),c=o[0],g=o[1];r.useImperativeHandle(t,(function(){return{credits:c}}));var h=function(e){var t=e.target,a=t.dataset,n=t.value;if(a.idx&&a.key){var r=c[a.idx];r[a.key]=n,g([].concat(Object(i.a)(c),[r]))}};return r.createElement(u.a,{className:a.root},r.createElement(d.a,{subheader:r.createElement(s.a,null,r.createElement(m.a,null,"\u6f14\u804c\u8868"),r.createElement(p.a,{onClick:function(){g([].concat(Object(i.a)(c),[{avatar:"",name:"",description:"",tags:[]}]))},size:"small"},r.createElement(y.a,{fontSize:"small"})))},c.length?r.createElement(r.Fragment,null,c.map((function(e,t){return r.createElement(v.a,{key:t},r.createElement(b.a,null,r.createElement(f.a,{src:e.avatar})),r.createElement("div",null,r.createElement(x,{inputProps:{"data-idx":t,"data-key":"name"},value:e.name,onChange:h,placeholder:"\u8bf7\u8f93\u5165\u540d\u5b57"}),r.createElement(x,{inputProps:{"data-idx":t,"data-key":"description"},value:e.name,onChange:h,placeholder:"\u8bf7\u8f93\u5165\u63cf\u8ff0"})),r.createElement(E.a,null,r.createElement(p.a,{onClick:function(){return function(e){var t=c.splice(e,1);g(Object(i.a)(t))}(t)}},r.createElement(C.a,null))))}))):r.createElement("div",null,r.createElement(O.a,{title:"\u8bf7\u6dfb\u52a0\u6f14\u804c\u4eba\u5458"}))))})),T=a(73),B=a(47),H=a(329),I=a(330),F=a(353),D=a(50),U=a(577),K=Object(g.a)((function(e){return Object(h.a)({root:{display:"inline-flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:function(e){var t;return null!==(t=e.width)&&void 0!==t?t:"100%"},height:function(e){var t;return null!==(t=e.height)&&void 0!==t?t:"100%"},color:e.palette.text.secondary,flex:1},icon:e.custom.base.icon.large})})),L=function(e){var t=e.onComplete,a=e.onError,l=e.children,o=e.component,c=e.custom,i=e.title,d=K(e),s=r.createRef(),p=Object(D.t)({onCompleted:function(e){t&&t(e.upload_file_oss)},onError:function(e){a&&a(e.message)}}),v=Object(n.a)(p,2),b=v[0],f=v[1].loading,E=o||"div";return r.createElement(E,{role:"button",onClick:function(){var e;f||(null===(e=s.current)||void 0===e||e.click())}},r.createElement("input",{ref:s,style:{display:"none"},type:"file",accept:"*",onChange:function(e){var t=e.currentTarget,a=t.validity,r=Object(n.a)(t.files,1)[0];a.valid&&b({variables:{file:r}})}}),c?{children:l}:r.createElement(u.a,{className:d.root},r.createElement("div",null,r.createElement(U.a,{className:d.icon})),r.createElement(m.a,{variant:"h6"},f?"\u4e0a\u4f20\u4e2d...":i)))};L.defaultProps={custom:!1,title:"\u70b9\u51fb\u4e0a\u4f20"};var M=Object(g.a)((function(e){return Object(h.a)({root:{position:"relative",width:"100%"},aider:{position:"absolute",left:0,top:0,bottom:0,width:"45%",padding:e.spacing(8)},aiderContent:{width:"50%",padding:e.spacing(2),borderRadius:e.shape.borderRadius,maxHeight:"100%",background:"rgba(0, 0, 0, .1)",backdropFilter:"blur(8px)",overflow:"auto"},main:{position:"absolute",top:"50%",right:0,width:"50%",padding:e.spacing(0,8),transform:"translate(0, -50%)",color:"#fff",display:"flex",flexDirection:"column"},mainContent:{background:"rgba(0, 0, 0, .1)",backdropFilter:"blur(8px)",padding:e.spacing(4),borderRadius:e.shape.borderRadius},posters:{},posterTool:{display:"none"}})})),_=r.forwardRef((function(e,t){var a=M(),l=j(""),o=Object(n.a)(l,2),c=o[0],d=o[1],s=j(""),p=Object(n.a)(s,2),v=p[0],b=p[1],f=j(""),E=Object(n.a)(f,2),g=E[0],h=E[1],y=r.useState([]),C=Object(n.a)(y,2),O=C[0],k=C[1],S=r.useState(""),R=Object(n.a)(S,2),N=R[0],w=R[1];r.useEffect((function(){O&&O.length>0?N&&O.includes(N)||w(O[0]):w("")}),[N,O]),r.useImperativeHandle(t,(function(){return{title:c,sub_title:v,description:g,posters:O,cover:N}}));var D=function(e){if(window.confirm("delete?")){var t=e.currentTarget.dataset;t.idx&&(O.splice(+t.idx,1),k(Object(i.a)(O)))}},U=function(e){var t=e.currentTarget.dataset;t.idx&&w(O[t.idx])};return r.createElement("div",{className:a.root},r.createElement(T.a,{aspectRatio:16/9,src:B.e}),r.createElement("div",{className:a.aider},r.createElement("div",{className:a.aiderContent},r.createElement(H.a,{cellHeight:"auto",className:a.posters,cols:1},O.map((function(e,t){return r.createElement(I.a,{key:e,cols:1},r.createElement(T.a,{aspectRatio:16/9,src:e,alt:"poster"+t}),r.createElement("div",{className:a.posterTool},r.createElement("div",{"data-idx":t,onClick:D},"remove poster"),r.createElement("div",{"data-idx":t,onClick:U},N===e?"is cover":"isn't cover")))})),r.createElement(I.a,{cols:1},r.createElement(L,{onComplete:function(e){e&&!O.includes(e)&&k([].concat(Object(i.a)(O),[e]))},title:"\u4e0a\u4f20\u6d77\u62a5"}))))),r.createElement("div",{className:a.main},r.createElement("div",{className:a.mainContent},r.createElement(m.a,{gutterBottom:!0,variant:"h4",component:"div"},r.createElement(x,{variant:"h4",value:c,onChange:d,placeholder:"movie title"})),r.createElement(m.a,{gutterBottom:!0,variant:"subtitle1",component:"div"},r.createElement(x,{value:v,onChange:b,placeholder:"\u8bf7\u8f93\u5165\u526f\u6807\u9898"})),r.createElement(m.a,{variant:"body2",component:"div"},r.createElement(x,{value:g,onChange:h,placeholder:"\u8bf7\u8f93\u5165\u7535\u5f71\u63cf\u8ff0..."})),r.createElement(u.a,{mt:3},r.createElement(F.a,{disabled:!0,size:"large",variant:"contained",color:"primary"},"\u64ad\u653e")))))})),q=a(70),z=a(578),J=a(320),P=a(321),W=a(87),A=Object(g.a)((function(e){return Object(h.a)({root:{height:"100%"},body:{backgroundColor:e.palette.background.paper,display:"flex",margin:"0 auto"},content:{padding:e.spacing(2,5),borderRight:"1px solid ".concat(e.palette.divider)},aider:{padding:e.spacing(2,4),height:"100%",overflow:"auto"},sourceWrap:{width:"100%",position:"relative"}})})),G=function(e){var t=e.onSave,a=e.onCancel,l=A(),o=r.useState(!1),c=Object(n.a)(o,2),i=c[0],d=c[1],s=r.useState(""),m=Object(n.a)(s,2),p=m[0],v=m[1],b=r.useState(""),f=Object(n.a)(b,2),E=f[0],g=f[1],h=j(""),y=Object(n.a)(h,2),C=y[0],k=y[1],S=j(""),R=Object(n.a)(S,2),N=R[0],w=R[1],H=j(""),I=Object(n.a)(H,2),D=I[0],U=I[1];r.useEffect((function(){d(e.open)}),[e.open]);var K=function(){d(!1),a&&a(),d(!1),v(""),g(""),k(""),w(""),U("")};return r.createElement("div",null,r.createElement(z.a,{open:i,fullScreen:!0,onClose:K},r.createElement(J.a,{position:"relative"},r.createElement(P.a,null,r.createElement(F.a,{onClick:function(){t&&t({url:p,cover:E,name:C,alias_name:N,description:D}),K()},color:"inherit"},"save"),r.createElement(F.a,{onClick:K,color:"inherit"},"cancle"))),r.createElement(u.a,{className:l.root},r.createElement(W.d,null,r.createElement(W.b,null,r.createElement("div",{className:l.sourceWrap},r.createElement(T.a,{aspectRatio:16/9,src:B.e}),r.createElement(L,{onComplete:function(e){e&&g(e)}},"add cover"),r.createElement(L,{onComplete:function(e){e&&v(e)}},"add source")))),r.createElement(W.b,{className:l.body},r.createElement(W.c,{className:l.content},r.createElement(x,{value:C,onChange:k,placeholder:"name"}),r.createElement(x,{value:N,onChange:w,placeholder:"alias_name"}),r.createElement(x,{value:D,onChange:U,placeholder:"description..."})),r.createElement(W.a,{sticky:!0,className:l.aider},r.createElement(O.a,{title:"\u8bc4\u8bba\u533a"}))))))},Q=Object(g.a)((function(e){return Object(h.a)({root:{padding:e.spacing(1,0)},box:{padding:e.spacing(2,0),"& + &":{borderTop:"1px solid ".concat(e.palette.divider)}}})})),V=l.a.forwardRef((function(e,t){var a=Q(),r=l.a.useState(!1),o=Object(n.a)(r,2),c=o[0],d=o[1],s=l.a.useState([]),p=Object(n.a)(s,2),v=p[0],b=p[1];l.a.useImperativeHandle(t,(function(){return{mediums:v}}));return l.a.createElement(l.a.Fragment,null,l.a.createElement(u.a,{className:a.root},l.a.createElement(u.a,{className:a.box},l.a.createElement(m.a,{variant:"subtitle1",gutterBottom:!0},"\u76f8\u5173\u8d44\u6e90"),l.a.createElement(H.a,{cellHeight:"auto",cols:4},v.map((function(e,t){return l.a.createElement(I.a,{cols:1,key:t},l.a.createElement(q.a,e))})),l.a.createElement(F.a,{onClick:function(){return d(!0)}},"\u6dfb\u52a0")))),l.a.createElement(G,{open:c,onSave:function(e){b([].concat(Object(i.a)(v),[e]))},onCancel:function(){return d(!1)}}))})),X=a(595),Y=a(564),Z=a(41),$=a(12),ee=a.n($),te=a(579),ae=a(580),ne=a(581),re=a(582),le=function(e){var t=r.useState(!0),a=Object(n.a)(t,2),l=a[0],o=a[1];return r.createElement("div",null,r.createElement(z.a,{open:l,onClose:function(){o(!1),e.onCancel&&e.onCancel()}},e.title&&r.createElement(te.a,null,e.title),r.createElement(ae.a,null,r.createElement(ne.a,null,e.content)),r.createElement(re.a,null,e.cancel&&r.createElement(F.a,{onClick:function(){o(!1),e.onCancel&&e.onCancel()},color:"primary"},e.cancelText||"\u53d6\u6d88"),r.createElement(F.a,{onClick:function(){o(!1),e.onConfirm&&e.onConfirm()},color:"primary",autoFocus:!0},e.confirmText||"\u786e\u5b9a"))))},oe={dialog:function(e){return new Promise((function(t,a){var n=document.createElement("div");document.body.appendChild(n);var l=function(){n.remove()};ee.a.render(r.createElement("div",null,r.createElement(le,Object.assign({},e,{onConfirm:function(){t(!0),l()},onCancel:function(){t(!1),l()}}))),n)}))}};a.d(t,"MovieUpload",(function(){return ie}));var ce=Object(g.a)((function(e){return Object(h.a)({main:{backgroundColor:e.palette.background.paper,padding:e.spacing(1,6),borderRight:"1px solid ".concat(e.palette.divider)}})})),ie=function(){var e=ce(),t=Object(Z.c)(),a=r.useState(0),l=Object(n.a)(a,2),o=l[0],i=l[1],d=r.createRef(),s=r.createRef(),m=r.createRef(),p=r.createRef(),v=Object(D.b)({onCompleted:function(){oe.dialog({title:"\u63d0\u793a",content:"\u4e0a\u4f20\u6210\u529f\u3002"}).then((function(){t.gotoHome()}))}}),b=Object(n.a)(v,1)[0];return r.createElement(u.a,null,r.createElement(W.d,null,r.createElement(W.b,null,r.createElement(_,{ref:d}))),r.createElement(W.b,null,r.createElement(W.c,{className:e.main},r.createElement(X.a,{value:o,onChange:function(e,t){return i(t)}},r.createElement(Y.a,{label:"\u4fe1\u606f"}),r.createElement(Y.a,{label:"\u76f8\u5173\u63a8\u8350",disabled:!0}),r.createElement(Y.a,{label:"\u5173\u4e8e"})),r.createElement("div",null,r.createElement("div",{hidden:0!==o},r.createElement(V,{ref:s})),r.createElement("div",{hidden:2!==o},r.createElement(c,{ref:m})),r.createElement("div",null,r.createElement("div",{onClick:function(){var e=d.current,t=s.current,a=m.current,n=p.current;b({variables:{movie:{title:(null===e||void 0===e?void 0:e.title)||"",cover:(null===e||void 0===e?void 0:e.cover)||"",posters:null===e||void 0===e?void 0:e.posters,description:null===e||void 0===e?void 0:e.description,credits:null===n||void 0===n?void 0:n.credits,about:null===a||void 0===a?void 0:a.about,sources:null===t||void 0===t?void 0:t.mediums}}})}},"create")))),r.createElement(W.a,null,r.createElement(w,{ref:p}))))};t.default=ie}}]);
//# sourceMappingURL=14.f415a9d9.chunk.js.map
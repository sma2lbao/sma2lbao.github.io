{"version":3,"sources":["components/app/FileUpload/useFileUpload.tsx","components/app/FileUpload/FileUpload.tsx","components/app/FileUpload/index.ts","views/Test/index.tsx"],"names":["FileUpload","props","onComplete","onError","children","component","inputRef","React","useUploadFileOssMutation","onCompleted","data","upload_file_oss","error","message","loading","Tag","role","onClick","current","click","ref","style","display","type","accept","onChange","e","currentTarget","validity","file","files","valid","variables","Test"],"mappings":"+FAAO,I,uBCIMA,EAA4C,SAAAC,GAAU,IACzDC,EAA6CD,EAA7CC,WAAYC,EAAiCF,EAAjCE,QAASC,EAAwBH,EAAxBG,SAAUC,EAAcJ,EAAdI,UAEjCC,EAAWC,cAH+C,EAKzBC,YAAyB,CAC9DC,YAD8D,SAClDC,GACVR,GAAcA,EAAWQ,EAAKC,kBAEhCR,QAJ8D,SAItDS,GACNT,GAAWA,EAAQS,EAAMC,YAVmC,mBAKzDF,EALyD,KAKtCG,EALsC,KAKtCA,QAyBpBC,EAAMV,GAAa,MAEzB,OACE,gBAACU,EAAD,CAAKC,KAAK,SAASC,QATD,WACH,IAAD,EAATH,IACH,UAAAR,EAASY,eAAT,SAAkBC,WAQlB,yBACEC,IAAKd,EACLe,MAAO,CAAEC,QAAS,QAClBC,KAAK,OACLC,OAAO,IACPC,SAzBe,SAACC,GAA4C,IAAD,EAI3DA,EAAEC,cAFJC,EAF6D,EAE7DA,SACQC,EAHqD,cAG7DC,MAH6D,MAK3DF,EAASG,OACXpB,EAAgB,CAAEqB,UAAW,CAAEH,aAqB9BzB,IC7CP,mC,iCCAA,2BAae6B,UAVQ,WACrB,OACE,2BACE,2BACE,gBAAC,IAAD","file":"static/js/10.0b48811d.chunk.js","sourcesContent":["export const useFileUpload = () => {};\n","import * as React from \"react\";\nimport { useUploadFileOssMutation } from \"@/schema\";\nimport { BaseFileUploadProps } from \"./file-upload\";\n\nexport const FileUpload: React.FC<BaseFileUploadProps> = props => {\n  const { onComplete, onError, children, component } = props;\n\n  const inputRef = React.createRef<HTMLInputElement>();\n\n  const [upload_file_oss, { loading }] = useUploadFileOssMutation({\n    onCompleted(data) {\n      onComplete && onComplete(data.upload_file_oss);\n    },\n    onError(error) {\n      onError && onError(error.message);\n    }\n  });\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const {\n      validity,\n      files: [file]\n    } = e.currentTarget;\n    if (validity.valid) {\n      upload_file_oss({ variables: { file } });\n    }\n  };\n\n  const handleClick = () => {\n    if (!loading) {\n      inputRef.current?.click();\n    }\n  };\n\n  const Tag = component || \"div\";\n\n  return (\n    <Tag role=\"button\" onClick={handleClick}>\n      <input\n        ref={inputRef}\n        style={{ display: \"none\" }}\n        type=\"file\"\n        accept=\"*\"\n        onChange={handleChange}\n      />\n      {children}\n    </Tag>\n  );\n};\n","export * from \"./useFileUpload\";\nexport * from \"./FileUpload\";\n","import * as React from \"react\";\nimport { FileUpload } from \"@/components/app/FileUpload\";\n\nconst Test: React.FC = () => {\n  return (\n    <div>\n      <div>\n        <FileUpload>upload</FileUpload>\n      </div>\n    </div>\n  );\n};\n\nexport default Test;\n"],"sourceRoot":""}
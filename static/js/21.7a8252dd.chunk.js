(this.webpackJsonpmiss=this.webpackJsonpmiss||[]).push([[21],{617:function(e,t,a){"use strict";a.r(t);var n=a(24),r=a(0),l=a.n(r),c=a(275),i=a(270),o=a(101),u=a(614),s=a(363),d=a(314),m=a(77),f=a(50),g=a(41),p=a(26),v=Object(p.a)(l.a.createElement("path",{d:"M12 .3a12 12 0 0 0-3.8 23.4c.6.1.8-.3.8-.6v-2c-3.3.7-4-1.6-4-1.6-.6-1.4-1.4-1.8-1.4-1.8-1-.7.1-.7.1-.7 1.2 0 1.9 1.2 1.9 1.2 1 1.8 2.8 1.3 3.5 1 0-.8.4-1.3.7-1.6-2.7-.3-5.5-1.3-5.5-6 0-1.2.5-2.3 1.3-3.1-.2-.4-.6-1.6 0-3.2 0 0 1-.3 3.4 1.2a11.5 11.5 0 0 1 6 0c2.3-1.5 3.3-1.2 3.3-1.2.6 1.6.2 2.8 0 3.2.9.8 1.3 1.9 1.3 3.2 0 4.6-2.8 5.6-5.5 5.9.5.4.9 1 .9 2.2v3.3c0 .3.1.7.8.6A12 12 0 0 0 12 .3"}),"GitHub"),b=Object(c.a)((function(e){return Object(i.a)({thirdWrap:{padding:e.spacing(2),textAlign:"center"}})}));function h(){var e=b(),t=Object(g.a)(),a=t.verify,l=t.setAccessToken,c=Object(m.b)().enqueueSnackbar,i=r.useState(""),p=Object(n.a)(i,2),h=p[0],E=p[1],j=r.useState(""),O=Object(n.a)(j,2),y=O[0],w=O[1],C=Object(f.o)(),k=C.data,S=C.loading,x=C.error,W=Object(f.g)({onCompleted:function(e){c("\u767b\u5f55\u6210\u529f"),l(null===e||void 0===e?void 0:e.login),a()},onError:function(e){console.log(e)}}),I=Object(n.a)(W,2),N=I[0],_=I[1].loading;return r.useEffect((function(){a()})),r.createElement("div",null,r.createElement(o.a,{variant:"h4"},"Sign In"),r.createElement("form",null,r.createElement(u.a,{id:"username",label:"\u7528\u6237\u540d",value:h,onChange:function(e){return E(e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",fullWidth:!0,variant:"outlined",margin:"normal"}),r.createElement(u.a,{id:"password",label:"\u5bc6\u7801",type:"password",value:y,onChange:function(e){return w(e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",fullWidth:!0,variant:"outlined",margin:"normal"}),r.createElement(s.a,{variant:"contained",color:"primary",size:"large",fullWidth:!0,onClick:function(){N({variables:{username:h,password:y}})},disabled:_},_?"\u767b\u5f55\u4e2d":"\u767b\u5f55")),r.createElement("div",{className:e.thirdWrap},r.createElement(o.a,{variant:"caption",color:"textSecondary"},"\u66f4\u591a\u767b\u5f55\u65b9\u5f0f"),null===k||void 0===k?void 0:k.platform_auth_way.map((function(e,t){return r.createElement("div",{key:t},r.createElement(d.a,{onClick:function(){return function(e,t,n){var r=(window.screen.availHeight-450)/2,i=(window.screen.availWidth-450)/2,o=window.open(n+t,e,"width=".concat(450,",height=").concat(450,",top=").concat(r,",left=").concat(i,",toolbar=0,menubar=0,location=0,status=0"));if(o){var u=setInterval((function(){o.postMessage({type:"access_token"},n)}),1e3);window.addEventListener("message",(function(e){var t=e.data;t&&"access_token_callback"===t.type&&(clearInterval(u),o&&o.close(),c(t.data.access_token?"\u767b\u5f55\u6210\u529f":t.data.error||"\u767b\u5f55\u5931\u8d25"),l(t.data.access_token),a())}))}}(e.platform,e.url,e.http_domain)}},"github"===e.platform&&r.createElement(v,null)))})),S&&r.createElement(o.a,{variant:"caption",color:"textSecondary"},"loading"),x&&r.createElement(o.a,{variant:"caption",color:"textSecondary"},"oops!")))}var E=a(338);function j(){var e=Object(g.a)().verify,t=Object(m.b)().enqueueSnackbar,a=r.useState(""),l=Object(n.a)(a,2),c=l[0],i=l[1],d=r.useState(""),p=Object(n.a)(d,2),v=p[0],b=p[1],h=r.useState(""),j=Object(n.a)(h,2),O=j[0],y=j[1],w=r.useState(""),C=Object(n.a)(w,2),k=C[0],S=C[1],x=Object(f.e)({variables:{username:c}}),W=x.data,I=x.loading;console.log("_changeUsername: ",c,W,I);var N=Object(f.r)({onCompleted:function(){t("\u53d1\u9001\u6210\u529f")}}),_=Object(n.a)(N,1)[0],q=Object(f.c)({onCompleted:function(a){t("\u6ce8\u518c\u6210\u529f"),e()}}),z=Object(n.a)(q,1)[0];return r.useEffect((function(){e()})),r.createElement("div",null,r.createElement(o.a,{variant:"h4"},"Sign Up"),r.createElement("form",null,r.createElement(u.a,{id:"username",label:"\u7528\u6237\u540d",required:!0,value:c,onChange:function(e){i(e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",fullWidth:!0,variant:"outlined",margin:"normal"}),r.createElement(u.a,{id:"password",label:"\u5bc6\u7801",type:"password",required:!0,value:v,onChange:function(e){return b(e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",fullWidth:!0,variant:"outlined",margin:"normal"}),r.createElement(u.a,{id:"email",label:"\u90ae\u7bb1",type:"email",required:!0,value:O,onChange:function(e){return y(e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1",fullWidth:!0,variant:"outlined",margin:"normal"}),r.createElement(E.a,{display:"flex",alignItems:"center",justifyContent:"space-between"},r.createElement(u.a,{id:"code",label:"\u9a8c\u8bc1\u7801",value:k,onChange:function(e){return S(e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",variant:"outlined",margin:"normal"}),r.createElement(s.a,{variant:"contained",onClick:function(){_({variables:{email:O}})}},"\u83b7\u53d6\u9a8c\u8bc1\u7801")),r.createElement(s.a,{variant:"contained",color:"primary",size:"large",fullWidth:!0,onClick:function(){z({variables:{user:{username:c,password:v,email:O,code:k}}})}},"\u6ce8\u518c")))}var O=a(156),y=a.n(O),w=a(157),C=a(74),k=Object(w.autoPlay)(y.a),S=Object(c.a)((function(e){return Object(i.a)({root:{width:"100%",height:"100%",display:"flex"},image:{width:"100%",height:"100%"}})}));function x(e){var t=S(),a=e.images,l=r.useState(0),c=Object(n.a)(l,2),i=c[0],o=c[1];return r.createElement(k,{className:t.root,enableMouseEvents:!0,onChangeIndex:function(e){o(e)},index:i},a.map((function(e,a){return r.createElement("div",{className:t.image,key:a},r.createElement(C.b,{height:"100%",src:e}))})))}x.defaultProps={images:["https://pic1.zhimg.com/v2-cc17d8b31fe162fdbfadba1d18b7836e_1200x500.jpg","http://n.sinaimg.cn/collect/crawl/20160224/ZFh0-fxprucv9824132.jpg"]};var W=x,I=a(315),N=a(4),_=Object(c.a)((function(e){return Object(i.a)({iconWrap:{display:"flex",alignItems:"center",justifyContent:"center"}})})),q=function(e){var t=_();return l.a.createElement(I.a,Object.assign({},e,{className:Object(N.a)("iconfont icon-logo",t.iconWrap)}))};a.d(t,"default",(function(){return M}));var z=Object(c.a)((function(e){return Object(i.a)({root:{width:"100%",height:"100vh",fontSize:0,overflow:"hidden"},left:{flex:1.5},right:{flex:1,backgroundColor:e.palette.background.paper,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",padding:e.spacing(0,4)},rightHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:e.spacing(2,0),width:"100%"},rightMain:{display:"flex",alignItems:"center",justifyContent:"center"},rightFooter:{}})}));function M(){var e=z(),t=r.useState(0),a=Object(n.a)(t,2),l=a[0],c=a[1];return r.createElement(E.a,{className:e.root,display:"flex"},r.createElement("div",{className:e.left},r.createElement(W,null)),r.createElement("div",{className:e.right},r.createElement("div",{className:e.rightHeader},r.createElement(q,{fontSize:"large"}),1===l&&r.createElement(s.a,{variant:"outlined",color:"primary",onClick:function(e){return c(0)}},"Sign In"),0===l&&r.createElement(s.a,{variant:"outlined",color:"primary",onClick:function(e){return c(1)}},"Sign Up")),r.createElement("div",{className:e.rightMain},r.createElement("div",null,0===l&&r.createElement(h,null),1===l&&r.createElement(j,null))),r.createElement("div",{className:e.rightFooter})))}}}]);
//# sourceMappingURL=21.7a8252dd.chunk.js.map
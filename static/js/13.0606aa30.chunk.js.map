{"version":3,"sources":["components/app/FileUpload/useFileUpload.tsx","components/app/FileUpload/FileUpload.tsx","components/app/FileUpload/index.ts","components/base/Editor/NormalEditor.tsx","views/movies/MovieUpload/modules/EditAbout/index.tsx","components/app/Input/useEditableInput.tsx","components/app/Input/EditableInput.tsx","views/movies/MovieUpload/modules/EditCast/index.tsx","views/movies/MovieUpload/modules/EditTop/index.tsx","views/movies/MovieUpload/modules/EditMediumInfo/index.tsx","views/movies/MovieUpload/modules/EditMain/index.tsx","views/movies/MovieUpload/index.tsx"],"names":["useStyles","makeStyles","theme","createStyles","root","display","flexDirection","justifyContent","alignItems","width","props","height","color","palette","text","secondary","flex","icon","custom","base","large","FileUpload","onComplete","onError","children","component","classes","inputRef","React","useUploadFileOssMutation","onCompleted","data","upload_file_oss","error","message","loading","Tag","role","onClick","current","click","ref","style","type","accept","onChange","e","currentTarget","validity","file","files","valid","variables","Box","className","CloudUpload","Typography","variant","defaultProps","NormalEditor","raw","onBlur","placeholder","EditorState","createWithContent","convertFromRaw","JSON","parse","createEmpty","editorState","setEditorState","getRawString","stringify","convertToRaw","getCurrentContent","EditAbout","aboutRaw","setAboutRaw","about","editorRef","rawString","useEditableInput","initValue","value","setValue","target","input","borderColor","body2","typography","body1","caption","button","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","overline","inherit","EditableInput","rest","Input","backgroundColor","background","paper","EditCast","credits","setCredits","handleChange","dataset","idx","key","cur","List","subheader","ListSubheader","IconButton","avatar","name","description","tags","size","AddCircle","fontSize","length","map","item","ListItem","ListItemAvatar","Avatar","src","inputProps","ListItemSecondaryAction","newCredits","splice","handleDelete","Delete","Placeholder","title","position","aider","left","top","bottom","padding","spacing","aiderContent","borderRadius","shape","maxHeight","backdropFilter","overflow","main","right","transform","mainContent","posters","posterTool","EditTop","setTitle","sub_title","setSubTitle","setDescription","setPosters","cover","setCover","includes","handleRemovePoster","window","confirm","handleChangeCover","Image","aspectRatio","DEFULAT_MOVIE_COVER","GridList","cellHeight","cols","poster","GridListTile","alt","data-idx","imageUrl","gutterBottom","mt","Button","disabled","body","margin","content","borderRight","divider","sourceWrap","EditMediumInfo","onSave","onCancel","open","setOpen","url","setUrl","setName","alias_name","setAliasName","handleCancle","Dialog","fullScreen","onClose","AppBar","Toolbar","sourceUrl","sticky","box","borderTop","EditMain","forwardRef","useState","openMedium","setOpenMedium","mediums","setMediums","useImperativeHandle","Media","medium","MovieUpload","RouterHelper","useRouterHelper","tab","setTab","topRef","mainRef","aboutRef","castRef","useCreateMovieMutation","alert","gotoHome","create_movie","Tabs","val","Tab","label","hidden","topFields","mainFields","aboutFields","castFields","movie","sources"],"mappings":"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","file":"static/js/13.0606aa30.chunk.js","sourcesContent":["export const useFileUpload = () => {};\n","import * as React from \"react\";\nimport { useUploadFileOssMutation } from \"@/schema\";\nimport { BaseFileUploadProps } from \"./file-upload\";\nimport {\n  Box,\n  makeStyles,\n  Theme,\n  createStyles,\n  Typography\n} from \"@material-ui/core\";\nimport { CloudUpload } from \"@material-ui/icons\";\nimport { IPlaceholderProps } from \"@/components/base/Placeholder/placeholder\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: \"inline-flex\",\n      flexDirection: \"column\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      width: (props: IPlaceholderProps) => {\n        return props.width ?? \"100%\";\n      },\n      height: (props: IPlaceholderProps) => {\n        return props.height ?? \"100%\";\n      },\n      color: theme.palette.text.secondary,\n      flex: 1\n    },\n    icon: theme.custom.base.icon.large\n  })\n);\n\nexport const FileUpload: React.FC<BaseFileUploadProps> = props => {\n  const { onComplete, onError, children, component, custom } = props;\n  const classes = useStyles(props);\n\n  const inputRef = React.createRef<HTMLInputElement>();\n\n  const [upload_file_oss, { loading }] = useUploadFileOssMutation({\n    onCompleted(data) {\n      onComplete && onComplete(data.upload_file_oss);\n    },\n    onError(error) {\n      onError && onError(error.message);\n    }\n  });\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const {\n      validity,\n      files: [file]\n    } = e.currentTarget;\n    if (validity.valid) {\n      upload_file_oss({ variables: { file } });\n    }\n  };\n\n  const handleClick = () => {\n    if (!loading) {\n      inputRef.current?.click();\n    }\n  };\n\n  const Tag = component || \"div\";\n\n  return (\n    <Tag role=\"button\" onClick={handleClick}>\n      <input\n        ref={inputRef}\n        style={{ display: \"none\" }}\n        type=\"file\"\n        accept=\"*\"\n        onChange={handleChange}\n      />\n      {custom ? (\n        { children }\n      ) : (\n        <Box className={classes.root}>\n          <div>\n            <CloudUpload className={classes.icon} />\n            {/* <CircularProgress className={classes.icon} /> */}\n          </div>\n          <Typography variant=\"h6\">\n            {loading ? \"上传中...\" : \"点击上传\"}\n          </Typography>\n        </Box>\n      )}\n    </Tag>\n  );\n};\n\nFileUpload.defaultProps = {\n  custom: false\n};\n","export * from \"./useFileUpload\";\nexport * from \"./FileUpload\";\n","import * as React from \"react\";\nimport { Editor, EditorState, convertFromRaw, convertToRaw } from \"draft-js\";\nimport \"draft-js/dist/Draft.css\";\nimport { BaseEditorProps, BaseEditorHandles } from \"./editor\";\n\nexport const NormalEditor = React.forwardRef<\n  BaseEditorHandles,\n  BaseEditorProps\n>((props, ref) => {\n  const { raw, onBlur, placeholder } = props;\n  const [editorState, setEditorState] = React.useState(() =>\n    raw\n      ? EditorState.createWithContent(convertFromRaw(JSON.parse(raw)))\n      : EditorState.createEmpty()\n  );\n\n  React.useImperativeHandle(ref, () => ({\n    getRawString: () => {\n      return JSON.stringify(convertToRaw(editorState.getCurrentContent()));\n    }\n  }));\n\n  return (\n    <Editor\n      editorState={editorState}\n      onChange={setEditorState}\n      onBlur={onBlur}\n      placeholder={placeholder}\n    />\n  );\n});\n","import * as React from \"react\";\nimport { NormalEditor } from \"@/components/base/Editor\";\nimport { EditorHandles } from \"@/components/base/Editor/editor\";\n\nexport interface EditAboutHandles {\n  about?: string;\n}\n\nexport const EditAbout = React.forwardRef<EditAboutHandles, unknown>(\n  (props, ref) => {\n    const [aboutRaw, setAboutRaw] = React.useState(\"\");\n\n    React.useImperativeHandle(ref, () => ({\n      about: aboutRaw\n    }));\n    const editorRef = React.createRef<EditorHandles>();\n\n    const handleBlur = () => {\n      const rawString = editorRef.current?.getRawString();\n      setAboutRaw(rawString);\n    };\n\n    return (\n      <div>\n        <NormalEditor ref={editorRef} onBlur={handleBlur} />\n      </div>\n    );\n  }\n);\n\nexport default EditAbout;\n","import * as React from \"react\";\n\nexport const useEditableInput = (initValue?: any): [any, any] => {\n  const [value, setValue] = React.useState(initValue);\n\n  const onChange = (\n    e: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>\n  ) => {\n    setValue(e.target.value);\n  };\n\n  return [value, onChange];\n};\n","import * as React from \"react\";\nimport { Input, makeStyles, Theme, createStyles } from \"@material-ui/core\";\nimport { BaseInputProps } from \"./input\";\n\nconst useStyles = makeStyles((theme: Theme) => {\n  return createStyles({\n    root: {},\n    input: {\n      borderColor: \"transparent\"\n    },\n    /* Styles applied to the root element if `variant=\"body2\"`. */\n    body2: theme.typography.body2,\n    /* Styles applied to the root element if `variant=\"body1\"`. */\n    body1: theme.typography.body1,\n    /* Styles applied to the root element if `variant=\"caption\"`. */\n    caption: theme.typography.caption,\n    /* Styles applied to the root element if `variant=\"button\"`. */\n    button: theme.typography.button,\n    /* Styles applied to the root element if `variant=\"h1\"`. */\n    h1: theme.typography.h1,\n    /* Styles applied to the root element if `variant=\"h2\"`. */\n    h2: theme.typography.h2,\n    /* Styles applied to the root element if `variant=\"h3\"`. */\n    h3: theme.typography.h3,\n    /* Styles applied to the root element if `variant=\"h4\"`. */\n    h4: theme.typography.h4,\n    /* Styles applied to the root element if `variant=\"h5\"`. */\n    h5: theme.typography.h5,\n    /* Styles applied to the root element if `variant=\"h6\"`. */\n    h6: theme.typography.h6,\n    /* Styles applied to the root element if `variant=\"subtitle1\"`. */\n    subtitle1: theme.typography.subtitle1,\n    /* Styles applied to the root element if `variant=\"subtitle2\"`. */\n    subtitle2: theme.typography.subtitle2,\n    /* Styles applied to the root element if `variant=\"overline\"`. */\n    overline: theme.typography.overline,\n    /* Styles applied to the root element if `variant=\"inherit\"`. */\n    inherit: {}\n  });\n});\n\nexport const EditableInput: React.FC<BaseInputProps> = props => {\n  const { value, onChange, placeholder, variant = \"body1\", ...rest } = props;\n  const classes = useStyles();\n  return (\n    <Input\n      classes={{\n        root: classes.root\n      }}\n      className={classes[variant]}\n      value={value}\n      onChange={onChange}\n      placeholder={placeholder}\n      {...rest}\n    />\n  );\n};\n","import * as React from \"react\";\nimport {\n  List,\n  ListItem,\n  ListItemAvatar,\n  Avatar,\n  ListItemSecondaryAction,\n  IconButton,\n  Box,\n  ListSubheader,\n  Typography\n} from \"@material-ui/core\";\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core/styles\";\nimport { AddCircle, Delete } from \"@material-ui/icons\";\nimport { Placeholder } from \"@/components/base/Placeholder\";\nimport { Character } from \"@/schema\";\nimport { EditableInput } from \"@/components/app/Input\";\n\nexport interface CharacterEdit extends Character {\n  // status:\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      backgroundColor: theme.palette.background.paper\n    }\n  })\n);\n\nexport interface EditCastHandles {\n  credits: CharacterEdit[];\n}\n\nexport const EditCast = React.forwardRef<EditCastHandles, unknown>(\n  (props, ref) => {\n    const classes = useStyles();\n    const [credits, setCredits] = React.useState<CharacterEdit[]>([]);\n\n    React.useImperativeHandle(ref, () => ({\n      credits\n    }));\n\n    const handleAddCredit = () => {\n      setCredits([\n        ...credits,\n        {\n          avatar: \"\",\n          name: \"\",\n          description: \"\",\n          tags: []\n        }\n      ]);\n    };\n\n    const handleChange = (\n      e: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>\n    ) => {\n      const { dataset, value } = e.target;\n      if (dataset.idx && dataset.key) {\n        const cur = credits[dataset.idx];\n        cur[dataset.key] = value;\n        setCredits([...credits, cur]);\n      }\n    };\n\n    const handleDelete = (idx: number) => {\n      const newCredits = credits.splice(idx, 1);\n      setCredits([...newCredits]);\n    };\n\n    return (\n      <Box className={classes.root}>\n        <List\n          subheader={\n            <ListSubheader>\n              <Typography>演职表</Typography>\n              <IconButton onClick={handleAddCredit} size=\"small\">\n                <AddCircle fontSize=\"small\" />\n              </IconButton>\n            </ListSubheader>\n          }\n        >\n          {credits.length ? (\n            <>\n              {credits.map((item, idx) => {\n                return (\n                  <ListItem key={idx}>\n                    <ListItemAvatar>\n                      <Avatar src={item.avatar}></Avatar>\n                    </ListItemAvatar>\n                    <div>\n                      <EditableInput\n                        inputProps={{ \"data-idx\": idx, \"data-key\": \"name\" }}\n                        value={item.name}\n                        onChange={handleChange}\n                        placeholder=\"请输入名字\"\n                      />\n\n                      <EditableInput\n                        inputProps={{\n                          \"data-idx\": idx,\n                          \"data-key\": \"description\"\n                        }}\n                        value={item.name}\n                        onChange={handleChange}\n                        placeholder=\"请输入描述\"\n                      />\n                    </div>\n                    <ListItemSecondaryAction>\n                      <IconButton onClick={() => handleDelete(idx)}>\n                        <Delete />\n                      </IconButton>\n                    </ListItemSecondaryAction>\n                  </ListItem>\n                );\n              })}\n            </>\n          ) : (\n            <div>\n              <Placeholder title=\"请添加演职人员\" />\n            </div>\n          )}\n        </List>\n      </Box>\n    );\n  }\n);\n\nexport default EditCast;\n","import * as React from \"react\";\nimport { Image } from \"@/components/base/Image\";\nimport { DEFULAT_MOVIE_COVER } from \"@/common/constants/default.constant\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport {\n  Typography,\n  Button,\n  Box,\n  GridList,\n  GridListTile\n} from \"@material-ui/core\";\n\nimport { useEditableInput, EditableInput } from \"@/components/app/Input\";\nimport { FileUpload } from \"@/components/app/FileUpload\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      position: \"relative\",\n      width: \"100%\"\n    },\n    aider: {\n      position: \"absolute\",\n      left: 0,\n      top: 0,\n      bottom: 0,\n      width: \"45%\",\n      padding: theme.spacing(8)\n    },\n    aiderContent: {\n      width: \"50%\",\n      padding: theme.spacing(2),\n      borderRadius: theme.shape.borderRadius,\n      maxHeight: \"100%\",\n      background: \"rgba(0, 0, 0, .1)\",\n      backdropFilter: \"blur(8px)\",\n      overflow: \"auto\"\n    },\n    main: {\n      position: \"absolute\",\n      top: \"50%\",\n      right: 0,\n      width: \"50%\",\n      padding: theme.spacing(0, 8),\n      transform: \"translate(0, -50%)\",\n      color: \"#fff\",\n      display: \"flex\",\n      flexDirection: \"column\"\n    },\n    mainContent: {\n      background: \"rgba(0, 0, 0, .1)\",\n      backdropFilter: \"blur(8px)\",\n      padding: theme.spacing(4),\n      borderRadius: theme.shape.borderRadius\n    },\n    posters: {},\n    posterTool: {\n      display: \"none\"\n    }\n  })\n);\n\nexport interface EditTopHandles {\n  title: string;\n\n  sub_title?: string;\n\n  description?: string;\n\n  posters?: string[];\n\n  cover: string;\n}\n\nexport const EditTop = React.forwardRef<EditTopHandles, unknown>(\n  (props, ref) => {\n    const classes = useStyles();\n    const [title, setTitle] = useEditableInput(\"\");\n    const [sub_title, setSubTitle] = useEditableInput(\"\");\n    const [description, setDescription] = useEditableInput(\"\");\n    const [posters, setPosters] = React.useState<string[]>([]);\n    const [cover, setCover] = React.useState<string>(\"\");\n\n    React.useEffect(() => {\n      if (posters && posters.length > 0) {\n        if (!cover || !posters.includes(cover)) setCover(posters[0]);\n      } else {\n        setCover(\"\");\n      }\n    }, [cover, posters]);\n\n    React.useImperativeHandle(ref, () => ({\n      title,\n      sub_title,\n      description,\n      posters,\n      cover\n    }));\n\n    const handleAddPoster = imageUrl => {\n      if (imageUrl && !posters.includes(imageUrl)) {\n        setPosters([...posters, imageUrl]);\n      }\n    };\n\n    const handleRemovePoster = (\n      e: React.MouseEvent<HTMLDivElement, MouseEvent>\n    ) => {\n      const result = window.confirm(\"delete?\");\n      if (result) {\n        const { dataset } = e.currentTarget;\n        if (dataset.idx) {\n          posters.splice(+dataset.idx, 1);\n          setPosters([...posters]);\n        }\n      }\n    };\n\n    const handleChangeCover = (\n      e: React.MouseEvent<HTMLDivElement, MouseEvent>\n    ) => {\n      const { dataset } = e.currentTarget;\n      if (dataset.idx) {\n        setCover(posters[dataset.idx]);\n      }\n    };\n\n    return (\n      <div className={classes.root}>\n        <Image aspectRatio={16 / 9} src={DEFULAT_MOVIE_COVER} />\n        <div className={classes.aider}>\n          <div className={classes.aiderContent}>\n            <GridList cellHeight=\"auto\" className={classes.posters} cols={1}>\n              {posters.map((poster, idx) => (\n                <GridListTile key={poster} cols={1}>\n                  <Image\n                    aspectRatio={16 / 9}\n                    src={poster}\n                    alt={\"poster\" + idx}\n                  />\n                  <div className={classes.posterTool}>\n                    <div data-idx={idx} onClick={handleRemovePoster}>\n                      remove poster\n                    </div>\n                    <div data-idx={idx} onClick={handleChangeCover}>\n                      {cover === poster ? \"is cover\" : \"isn't cover\"}\n                    </div>\n                  </div>\n                </GridListTile>\n              ))}\n              <GridListTile cols={1}>\n                <FileUpload onComplete={handleAddPoster}>add poster</FileUpload>\n              </GridListTile>\n            </GridList>\n          </div>\n        </div>\n        <div className={classes.main}>\n          <div className={classes.mainContent}>\n            <Typography gutterBottom variant=\"h4\" component=\"div\">\n              <EditableInput\n                variant=\"h4\"\n                value={title}\n                onChange={setTitle}\n                placeholder=\"movie title\"\n              />\n            </Typography>\n            <Typography gutterBottom variant=\"subtitle1\" component=\"div\">\n              <EditableInput\n                value={sub_title}\n                onChange={setSubTitle}\n                placeholder=\"请输入副标题\"\n              />\n            </Typography>\n            <Typography variant=\"body2\" component=\"div\">\n              <EditableInput\n                value={description}\n                onChange={setDescription}\n                placeholder=\"请输入电影描述...\"\n              />\n            </Typography>\n            <Box mt={3}>\n              <Button disabled size=\"large\" variant=\"contained\" color=\"primary\">\n                播放\n              </Button>\n            </Box>\n          </div>\n        </div>\n      </div>\n    );\n  }\n);\n\nexport default EditTop;\n","import * as React from \"react\";\nimport {\n  Dialog,\n  Toolbar,\n  AppBar,\n  Button,\n  Box,\n  Theme,\n  makeStyles,\n  createStyles\n} from \"@material-ui/core\";\nimport {\n  FullScreen,\n  BodyScreen,\n  ContentScreen,\n  AiderScreen\n} from \"@/layouts/PageLayout\";\nimport { Image } from \"@/components/base/Image\";\nimport { DEFULAT_MOVIE_COVER } from \"@/common/constants/default.constant\";\nimport { Placeholder } from \"@/components/base/Placeholder\";\nimport { useEditableInput, EditableInput } from \"@/components/app/Input\";\nimport { FileUpload } from \"@/components/app/FileUpload\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      height: \"100%\"\n    },\n    body: {\n      backgroundColor: theme.palette.background.paper,\n      display: \"flex\",\n      margin: \"0 auto\"\n    },\n    content: {\n      padding: theme.spacing(2, 5),\n      borderRight: `1px solid ${theme.palette.divider}`\n    },\n    aider: {\n      padding: theme.spacing(2, 4),\n      height: \"100%\",\n      overflow: \"auto\"\n    },\n    sourceWrap: {\n      width: \"100%\",\n      position: \"relative\"\n    }\n  })\n);\n\nexport interface EditMediumInfoProp {\n  open: boolean;\n\n  onSave?(medium: unknown): void;\n\n  onCancel?(): void;\n}\n\nexport const EditMediumInfo: React.FC<EditMediumInfoProp> = (\n  props: EditMediumInfoProp\n) => {\n  const { onSave, onCancel } = props;\n\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n  const [url, setUrl] = React.useState(\"\");\n  const [cover, setCover] = React.useState(\"\");\n  const [name, setName] = useEditableInput(\"\");\n  const [alias_name, setAliasName] = useEditableInput(\"\");\n  const [description, setDescription] = useEditableInput(\"\");\n\n  React.useEffect(() => {\n    setOpen(props.open);\n  }, [props.open]);\n\n  const reset = () => {\n    setOpen(false);\n    setUrl(\"\");\n    setCover(\"\");\n    setName(\"\");\n    setAliasName(\"\");\n    setDescription(\"\");\n  };\n\n  const handleChangeCover = imageUrl => {\n    if (imageUrl) {\n      setCover(imageUrl);\n    }\n  };\n\n  const handleChangeSource = sourceUrl => {\n    if (sourceUrl) {\n      setUrl(sourceUrl);\n    }\n  };\n\n  const handleSave = () => {\n    onSave &&\n      onSave({\n        url,\n        cover,\n        name,\n        alias_name,\n        description\n      });\n    handleCancle();\n  };\n\n  const handleCancle = () => {\n    setOpen(false);\n    onCancel && onCancel();\n    reset();\n  };\n\n  return (\n    <div>\n      <Dialog open={open} fullScreen onClose={handleCancle}>\n        <AppBar position=\"relative\">\n          <Toolbar>\n            <Button onClick={handleSave} color=\"inherit\">\n              save\n            </Button>\n            <Button onClick={handleCancle} color=\"inherit\">\n              cancle\n            </Button>\n          </Toolbar>\n        </AppBar>\n        <Box className={classes.root}>\n          <FullScreen>\n            <BodyScreen>\n              <div className={classes.sourceWrap}>\n                <Image aspectRatio={16 / 9} src={DEFULAT_MOVIE_COVER} />\n                <FileUpload onComplete={handleChangeCover}>\n                  add cover\n                </FileUpload>\n                <FileUpload onComplete={handleChangeSource}>\n                  add source\n                </FileUpload>\n              </div>\n            </BodyScreen>\n          </FullScreen>\n          <BodyScreen className={classes.body}>\n            <ContentScreen className={classes.content}>\n              {/* <VideoInfo /> */}\n              {/* <NextPlay /> */}\n              <EditableInput\n                value={name}\n                onChange={setName}\n                placeholder=\"name\"\n              />\n              <EditableInput\n                value={alias_name}\n                onChange={setAliasName}\n                placeholder=\"alias_name\"\n              />\n              <EditableInput\n                value={description}\n                onChange={setDescription}\n                placeholder=\"description...\"\n              />\n            </ContentScreen>\n            <AiderScreen sticky className={classes.aider}>\n              {/* <Comment /> */}\n              <Placeholder title=\"评论区\" />\n            </AiderScreen>\n          </BodyScreen>\n        </Box>\n      </Dialog>\n    </div>\n  );\n};\n","import React from \"react\";\nimport {\n  Box,\n  Typography,\n  GridList,\n  GridListTile,\n  Button\n} from \"@material-ui/core\";\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core/styles\";\nimport { MediaNormal } from \"@/components/app/Media\";\nimport { EditMediumInfo } from \"../EditMediumInfo\";\n// import Placeholder from \"@/components/base/Placeholder\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      padding: theme.spacing(1, 0)\n    },\n    box: {\n      padding: theme.spacing(2, 0),\n\n      \"& + &\": {\n        borderTop: `1px solid ${theme.palette.divider}`\n      }\n    }\n  })\n);\n\nexport interface EditMainHandles {\n  mediums: any[];\n}\n\nexport const EditMain = React.forwardRef<EditMainHandles, unknown>(\n  (props, ref) => {\n    const classes = useStyles();\n    const [openMedium, setOpenMedium] = React.useState(false);\n    const [mediums, setMediums] = React.useState<any>([]);\n\n    React.useImperativeHandle(ref, () => ({\n      mediums: mediums\n    }));\n\n    const handleSave = medium => {\n      setMediums([...mediums, medium]);\n    };\n\n    return (\n      <>\n        <Box className={classes.root}>\n          <Box className={classes.box}>\n            <Typography variant=\"subtitle1\" gutterBottom>\n              相关资源\n            </Typography>\n            <GridList cellHeight=\"auto\" cols={4}>\n              {mediums.map((item, idx) => {\n                return (\n                  <GridListTile cols={1} key={idx}>\n                    <MediaNormal {...item} />\n                  </GridListTile>\n                );\n              })}\n\n              <Button onClick={() => setOpenMedium(true)}>添加</Button>\n            </GridList>\n          </Box>\n          {/* <Box className={classes.box}>\n        <Typography variant=\"subtitle1\">精彩点评</Typography>\n      </Box> */}\n        </Box>\n        <EditMediumInfo\n          open={openMedium}\n          onSave={handleSave}\n          onCancel={() => setOpenMedium(false)}\n        />\n      </>\n    );\n  }\n);\n\nexport default EditMain;\n","import * as React from \"react\";\nimport {\n  EditAbout,\n  EditCast,\n  EditMain,\n  EditTop,\n  EditCastHandles,\n  EditTopHandles,\n  EditMainHandles,\n  EditAboutHandles\n} from \"./modules\";\nimport {\n  ContentScreen,\n  AiderScreen,\n  FullScreen,\n  BodyScreen\n} from \"@/layouts/PageLayout\";\nimport {\n  makeStyles,\n  Theme,\n  createStyles,\n  Box,\n  Tabs,\n  Tab\n} from \"@material-ui/core\";\nimport { useCreateMovieMutation } from \"@/schema\";\nimport { useRouterHelper } from \"@/hooks\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    main: {\n      backgroundColor: theme.palette.background.paper,\n      padding: theme.spacing(1, 6),\n      borderRight: `1px solid ${theme.palette.divider}`\n    }\n  })\n);\n\nexport const MovieUpload: React.FC = () => {\n  const classes = useStyles();\n  const RouterHelper = useRouterHelper();\n  const [tab, setTab] = React.useState(0);\n  const topRef = React.createRef<EditTopHandles>();\n  const mainRef = React.createRef<EditMainHandles>();\n  const aboutRef = React.createRef<EditAboutHandles>();\n  const castRef = React.createRef<EditCastHandles>();\n\n  const [create_movie] = useCreateMovieMutation({\n    onCompleted(data) {\n      window.alert(\"success\");\n      RouterHelper.gotoHome();\n    }\n  });\n\n  const handleCreateMovie = () => {\n    const topFields = topRef.current;\n    const mainFields = mainRef.current;\n    const aboutFields = aboutRef.current;\n    const castFields = castRef.current;\n\n    create_movie({\n      variables: {\n        movie: {\n          title: topFields?.title || \"\",\n          cover: topFields?.cover || \"\",\n          posters: topFields?.posters,\n          description: topFields?.description,\n          credits: castFields?.credits,\n          about: aboutFields?.about,\n          sources: mainFields?.mediums\n        }\n      }\n    });\n  };\n\n  return (\n    <Box>\n      <FullScreen>\n        <BodyScreen>\n          <EditTop ref={topRef} />\n        </BodyScreen>\n      </FullScreen>\n      <BodyScreen>\n        <ContentScreen className={classes.main}>\n          <Tabs value={tab} onChange={(e, val) => setTab(val)}>\n            <Tab label=\"信息\"></Tab>\n            <Tab label=\"相关推荐\" disabled></Tab>\n            <Tab label=\"关于\"></Tab>\n          </Tabs>\n          <div>\n            <div hidden={tab !== 0}>\n              <EditMain ref={mainRef} />\n            </div>\n            {/* {tab === 1 && <Relative />} */}\n            <div hidden={tab !== 2}>\n              <EditAbout ref={aboutRef} />\n            </div>\n            <div>\n              <div onClick={handleCreateMovie}>create</div>\n            </div>\n          </div>\n        </ContentScreen>\n        <AiderScreen>\n          <EditCast ref={castRef} />\n        </AiderScreen>\n      </BodyScreen>\n    </Box>\n  );\n};\nexport default MovieUpload;\n"],"sourceRoot":""}
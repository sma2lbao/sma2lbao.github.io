{"version":3,"file":"static/js/102.07252020.chunk.js","mappings":"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","sources":["views/shadows/shadow-home/index.tsx"],"sourcesContent":["import { MediaNormal } from '@/components/app/media';\nimport {\n  ContentScreen,\n  AiderScreen,\n  BodyScreen,\n  FullScreen,\n} from '@/layouts/page-layout';\nimport {\n  Box,\n  // Fab,\n  // useScrollTrigger,\n  // Zoom,\n  Button,\n  Typography,\n  ImageList,\n  ImageListItem,\n} from '@mui/material';\n// import { KeyboardArrowUp } from \"@mui/icons-material\";\nimport { useShadowsPaginatedQuery } from '@/schema';\nimport { useNavigate } from 'react-router-dom';\nimport { SpecialBox } from '@/components/public/special-box';\n\nexport default function ShadowHome() {\n  const navigate = useNavigate();\n  const { data, loading, error, fetchMore } = useShadowsPaginatedQuery({\n    variables: {\n      query: {\n        last: 16,\n      },\n    },\n  });\n  const loadMore = () => {\n    fetchMore({\n      variables: {\n        query: {\n          last: 8,\n          before: data?.shadows_paginated?.pageInfo?.endCursor,\n        },\n      },\n      updateQuery: (previousQueryResult, { fetchMoreResult }) => {\n        if (fetchMoreResult?.shadows_paginated?.edges) {\n          const { edges, pageInfo, totalCount } =\n            fetchMoreResult.shadows_paginated;\n          return {\n            shadows_paginated: {\n              pageInfo,\n              totalCount,\n              edges: [\n                ...(previousQueryResult.shadows_paginated.edges || []),\n                ...edges,\n              ],\n              __typename: previousQueryResult.shadows_paginated.__typename,\n            },\n          };\n        }\n        return previousQueryResult;\n      },\n    });\n  };\n\n  // const trigger = useScrollTrigger({\n  //   target: window ? window() : undefined,\n  //   disableHysteresis: true,\n  //   threshold: 500,\n  // });\n\n  return (\n    <FullScreen>\n      <BodyScreen>\n        <ContentScreen\n          sx={(theme) => ({\n            margin: '0 auto',\n            padding: theme.spacing(8),\n            background: theme.palette.background.paper,\n          })}\n        >\n          {data?.shadows_paginated?.edges?.length ? (\n            <Box\n              sx={(theme) => ({\n                display: 'grid',\n                gridTemplateColumns: 'repeat(4, 1fr)',\n                gridGap: theme.spacing(1, 1),\n                gridAutoFlow: 'row dense',\n              })}\n            >\n              {data?.shadows_paginated?.edges?.map((edge: any) => {\n                return (\n                  <Box\n                    key={edge.cursor}\n                    sx={{\n                      gridRow: '1 span',\n                      gridColumn: '1 span',\n                    }}\n                  >\n                    <MediaNormal\n                      {...edge.node}\n                      onClickRoot={() => navigate(`/shadow/${edge.node.id}`)}\n                      onClickAuthor={() =>\n                        navigate(`/profile/${edge.node.author.username}`)\n                      }\n                    />\n                  </Box>\n                );\n              })}\n            </Box>\n          ) : (\n            <SpecialBox\n              loading={loading}\n              error={!!error}\n              placeholder\n              placeholderTitle=\"暂无结果\"\n              loadingNode={\n                <ImageList rowHeight=\"auto\" cols={4}>\n                  {[0, 0, 0, 0, 0, 0, 0, 0].map((_, index: number) => {\n                    return (\n                      <ImageListItem key={index} cols={1}>\n                        <MediaNormal loading />\n                      </ImageListItem>\n                    );\n                  })}\n                </ImageList>\n              }\n            />\n          )}\n\n          {data?.shadows_paginated?.pageInfo?.hasNextPage && (\n            <Box\n              sx={(theme) => ({\n                padding: theme.spacing(2),\n                textAlign: 'center',\n              })}\n            >\n              <Button onClick={loadMore} disabled={loading}>\n                <Typography color=\"textSecondary\" variant=\"caption\">\n                  {loading ? '加载中...' : '加载更多'}\n                </Typography>\n              </Button>\n            </Box>\n          )}\n        </ContentScreen>\n        <AiderScreen\n          sticky\n          sx={(theme) => ({\n            backgroundColor: theme.palette.background.paper,\n            width: '100%',\n            padding: theme.spacing(2, 2),\n            borderLeft: '1px solid',\n            borderColor: theme.palette.divider,\n          })}\n        >\n          {/* <Sort />\n          <Filter /> */}\n        </AiderScreen>\n\n        {/* <Zoom in={trigger}>\n          <Fab\n            size=\"small\"\n            sx={(theme) => ({\n              position: 'fixed',\n              right: theme.spacing(2),\n              bottom: theme.spacing(2),\n            })}\n          >\n            <KeyboardArrowUp />\n          </Fab>\n        </Zoom> */}\n      </BodyScreen>\n    </FullScreen>\n  );\n}\n"],"names":["ShadowHome","navigate","useNavigate","useShadowsPaginatedQuery","variables","query","last","data","loading","error","fetchMore","sx","theme","margin","padding","spacing","background","palette","paper","shadows_paginated","edges","length","display","gridTemplateColumns","gridGap","gridAutoFlow","map","edge","gridRow","gridColumn","node","onClickRoot","id","onClickAuthor","author","username","cursor","placeholder","placeholderTitle","loadingNode","rowHeight","cols","_","index","pageInfo","hasNextPage","textAlign","onClick","before","endCursor","updateQuery","previousQueryResult","fetchMoreResult","totalCount","__typename","disabled","color","variant","sticky","backgroundColor","width","borderLeft","borderColor","divider"],"sourceRoot":""}
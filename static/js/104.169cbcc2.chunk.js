"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[104],{18104:function(e,n,o){o.r(n),o.d(n,{ProfileContext:function(){return W},default:function(){return A}});var r=o(56828),i=o(51955),t=o(56305),a=o(59376),s=o(40192),l=o(14417),d=o(4555),c=o(46405),u=o(81259),v=o(93037),x=o(49941),g=o(78643),h=o(47822),f=o(75662),m=o(16831);function p(){var e,n,o,r,i=(0,d.UO)().username,t=(0,c.gC)({variables:{query:{last:8},author_username:i}}),a=t.data,s=t.loading,l=t.error;return(0,m.jsx)("div",{children:null!==a&&void 0!==a&&null!==(e=a.playlists_paginated)&&void 0!==e&&null!==(n=e.edges)&&void 0!==n&&n.length?(0,m.jsx)(x.Z,{children:a.playlists_paginated.edges.map((function(e,n){return(0,m.jsxs)(g.ZP,{children:[(0,m.jsx)(h.Z,{children:(0,m.jsx)(v.Z,{})}),(0,m.jsx)(f.Z,{primary:e.node.title,secondary:e.node.create_at})]},n)}))}):(0,m.jsx)(u.qZ,{loading:s,error:!!l,placeholder:!(null!==a&&void 0!==a&&null!==(o=a.playlists_paginated)&&void 0!==o&&null!==(r=o.edges)&&void 0!==r&&r.length),placeholderTitle:"No Playlist Here."})})}var Z=o(4962),j=o(16480),_=o(52066),w=o(77969),C=o(34325),y=o(34635),I=function(){var e=i.useContext(W),n=(0,r.Z)(e,2),o=n[0],t=(0,r.Z)(n[1],1)[0],a=(0,d.s0)(),s=(0,y.F)({owner_uid:null===o||void 0===o?void 0:o.user.uid}),c=s.following,u=s.toggleFollow;return(0,m.jsxs)(l.Z,{sx:function(e){return{display:"flex",paddingBottom:e.spacing(2)}},children:[(0,m.jsxs)(l.Z,{sx:{display:"flex",flexDirection:"column",flex:1,overflow:"hidden"},children:[(0,m.jsxs)(l.Z,{sx:function(e){return{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:e.spacing(6)}},children:[(0,m.jsxs)(l.Z,{display:"flex",alignItems:"center",children:[(0,m.jsx)(j.Z,{src:null===o||void 0===o?void 0:o.user.avatar}),(0,m.jsxs)(l.Z,{ml:1,children:[(0,m.jsx)(_.Z,{variant:"subtitle1",children:null===o||void 0===o?void 0:o.user.nickname}),(0,m.jsx)(_.Z,{variant:"caption",children:null===o||void 0===o?void 0:o.user.description})]})]}),c?(0,m.jsx)(w.Z,{sx:function(e){return{marginLeft:e.spacing(1),flexShrink:0}},onClick:u,children:"\u5df2\u5173\u6ce8"}):(0,m.jsx)(w.Z,{sx:function(e){return{marginLeft:e.spacing(1),flexShrink:0}},onClick:u,children:"\u5173\u6ce8"})]}),(0,m.jsxs)(l.Z,{children:[(0,m.jsx)(_.Z,{gutterBottom:!0,variant:"subtitle2",component:"div",children:null===t||void 0===t?void 0:t.title}),(0,m.jsx)(_.Z,{gutterBottom:!0,variant:"body2",color:"textSecondary",component:"div",children:null===t||void 0===t?void 0:t.description}),(0,m.jsx)("div",{})]})]}),(0,m.jsx)(l.Z,{sx:function(e){return{flex:1,overflow:"hidden",marginLeft:e.spacing(2)}},children:(0,m.jsx)(C.I8,(0,Z.Z)((0,Z.Z)({},t),{},{onClickRoot:function(){return a("/shadow/".concat(null===t||void 0===t?void 0:t.id))}}))})]})},b=o(27949),k=o(52202),S=o(2815),N=o(66530),B=o(23921),q=(0,C.T4)(C.sV),P={footer:"".concat("Medias","-footer")},F=(0,S.ZP)(l.Z)((function(e){var n=e.theme;return(0,k.Z)({},"& .".concat(P.footer),{padding:n.spacing(2),textAlign:"center"})})),M=function(){var e,n,o=(0,d.UO)().username,t=(0,y.a)().member,a=i.useContext(W),s=(0,r.Z)(a,2),v=(0,r.Z)(s[1],2)[1],x=(0,d.s0)(),g=(0,c.zg)({variables:{query:{last:8},author_username:o}}),h=g.data,f=g.loading,p=g.error,j=g.fetchMore;return i.useEffect((function(){var e;null!==h&&void 0!==h&&null!==(e=h.user_shadows_paginated.edges)&&void 0!==e&&e.length&&v(h.user_shadows_paginated.edges[0].node)}),[h,v]),(0,m.jsx)(F,{children:null!==h&&void 0!==h&&h.user_shadows_paginated.totalCount?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(N.Z,{rowHeight:"auto",cols:4,children:h.user_shadows_paginated.edges.map((function(e){return(0,m.jsx)(B.Z,{cols:1,rows:1,children:(0,m.jsx)(q,(0,Z.Z)((0,Z.Z)({},e.node),{},{onEdit:(null===t||void 0===t?void 0:t.username)===o?function(){return x("/shadow-update/".concat(e.node.id))}:void 0,onClickRoot:function(){return x("/shadow/".concat(e.node.id))}}))},e.cursor)}))}),(null===h||void 0===h||null===(e=h.user_shadows_paginated)||void 0===e||null===(n=e.pageInfo)||void 0===n?void 0:n.hasNextPage)&&(0,m.jsx)(l.Z,{className:P.footer,children:(0,m.jsx)(w.Z,{onClick:function(){var e,n;j({variables:{query:{last:8,before:null===h||void 0===h||null===(e=h.user_shadows_paginated)||void 0===e||null===(n=e.pageInfo)||void 0===n?void 0:n.endCursor}},updateQuery:function(e,n){var o,r=n.fetchMoreResult;if(null!==r&&void 0!==r&&null!==(o=r.user_shadows_paginated)&&void 0!==o&&o.edges){var i=r.user_shadows_paginated,t=i.edges;return{user_shadows_paginated:{pageInfo:i.pageInfo,totalCount:i.totalCount,edges:[].concat((0,b.Z)(e.user_shadows_paginated.edges),(0,b.Z)(t)),__typename:e.user_shadows_paginated.__typename}}}return e}})},disabled:f,children:(0,m.jsx)(_.Z,{color:"textSecondary",variant:"caption",children:f?"\u52a0\u8f7d\u4e2d...":"\u52a0\u8f7d\u66f4\u591a"})})})]}):(0,m.jsx)(u.qZ,{loading:f,error:!!p,placeholder:!0,placeholderTitle:"\u6682\u672a\u4e0a\u4f20\u89c6\u9891"})})},R=o(7607),T="Basic",L={root:"".concat(T,"-root"),cover:"".concat(T,"-cover"),coverImg:"".concat(T,"-coverImg"),info:"".concat(T,"-info"),pirmaryColor:"".concat(T,"-pirmaryColor"),secondColor:"".concat(T,"-secondColor")},z=(0,S.ZP)("div")((function(e){var n,o=e.theme;return n={},(0,k.Z)(n,"&.".concat(L.root),{}),(0,k.Z)(n,"& .".concat(L.cover),{}),(0,k.Z)(n,"& .".concat(L.coverImg),{width:"100%",objectFit:"contain"}),(0,k.Z)(n,"& .".concat(L.info),{padding:o.spacing(3,4)}),(0,k.Z)(n,"& .".concat(L.pirmaryColor),{color:"#fff"}),(0,k.Z)(n,"& .".concat(L.secondColor),{color:"#aaa"}),n})),H=function(){var e=i.useContext(W),n=(0,r.Z)(e,1)[0],o=(0,c.BI)({variables:{owner_uid:null===n||void 0===n?void 0:n.user.uid.toString()}}),t=o.data,a=o.loading,s=o.error,l=(0,c.Hh)({variables:{follower_uid:null===n||void 0===n?void 0:n.user.uid.toString()}}),d=l.data,v=l.loading,x=l.error;return(0,m.jsxs)(z,{className:L.root,children:[(0,m.jsx)("div",{className:L.cover,children:(0,m.jsx)("img",{alt:"cover",className:L.coverImg,src:R.W2})}),(0,m.jsxs)("div",{className:L.info,children:[(0,m.jsx)("div",{className:L.pirmaryColor,children:(0,m.jsx)(_.Z,{gutterBottom:!0,variant:"h4",children:null===n||void 0===n?void 0:n.user.nickname})}),(0,m.jsxs)(_.Z,{component:"div",gutterBottom:!0,className:L.pirmaryColor,children:[(0,m.jsx)(u.gq,{loading:a,error:!!s}),(null===t||void 0===t?void 0:t.fans_total)||0," \u7c89\u4e1d"]}),(0,m.jsxs)(_.Z,{component:"div",gutterBottom:!0,className:L.pirmaryColor,children:[(0,m.jsx)(u.gq,{loading:v,error:!!x}),(null===d||void 0===d?void 0:d.follows_total)||0," \u5173\u6ce8"]}),(0,m.jsx)(_.Z,{component:"div",variant:"caption",className:L.secondColor,gutterBottom:!0,children:null===n||void 0===n?void 0:n.user.description})]})]})},O=o(40663),U=o(13436),W=i.createContext([void 0,[void 0,function(){}]]);function A(){var e=(0,d.UO)().username,n=(0,c.bT)({variables:{username:e}}),o=n.data,v=n.loading,x=n.error,g=i.useState(),h=(0,r.Z)(g,2),f=h[0],Z=h[1],j=i.useState(0),_=(0,r.Z)(j,2),w=_[0],C=_[1];return(0,m.jsxs)(O.IT,{children:[(0,m.jsx)(U.q,{children:(0,m.jsxs)("title",{children:["".concat((null===o||void 0===o?void 0:o.user.username)||(null===o||void 0===o?void 0:o.user.nickname)),"\u7684\u4e2a\u4eba\u4e3b\u9875"]})}),null!==o&&void 0!==o&&o.user?(0,m.jsx)(O.A1,{children:(0,m.jsxs)(W.Provider,{value:[o,[f,Z]],children:[(0,m.jsx)(O._9,{sx:{background:"#333"},children:(0,m.jsx)(H,{})}),(0,m.jsxs)(O.BW,{sx:function(e){return{padding:e.spacing(6,4)}},children:[(0,m.jsx)(I,{}),(0,m.jsx)(t.Z,{}),(0,m.jsxs)("div",{children:[(0,m.jsxs)(a.Z,{value:w,onChange:function(e,n){return C(n)},children:[(0,m.jsx)(s.Z,{label:"\u89c6\u9891"}),(0,m.jsx)(s.Z,{label:"\u5217\u8868",disabled:!0})]}),(0,m.jsx)(l.Z,{py:2,hidden:0!==w,children:(0,m.jsx)(M,{})}),(0,m.jsx)(l.Z,{py:2,hidden:1!==w,children:(0,m.jsx)(p,{})})]})]})]})}):(0,m.jsx)(u.qZ,{loading:v,error:!!x})]})}},93037:function(e,n,o){var r=o(26334);n.Z=void 0;var i=r(o(17112)),t=o(16831),a=(0,i.default)((0,t.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z"}),"PlayCircleFilled");n.Z=a},47822:function(e,n,o){var r=o(14974),i=o(1167),t=o(51955),a=o(18767),s=o(81165),l=o(2815),d=o(18555),c=o(86894),u=o(98311),v=o(16831),x=["className"],g=(0,l.ZP)("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:function(e,n){var o=e.ownerState;return[n.root,"flex-start"===o.alignItems&&n.alignItemsFlexStart]}})((function(e){var n=e.theme,o=e.ownerState;return(0,i.Z)({minWidth:56,color:(n.vars||n).palette.action.active,flexShrink:0,display:"inline-flex"},"flex-start"===o.alignItems&&{marginTop:8})})),h=t.forwardRef((function(e,n){var o=(0,d.Z)({props:e,name:"MuiListItemIcon"}),l=o.className,h=(0,r.Z)(o,x),f=t.useContext(u.Z),m=(0,i.Z)({},o,{alignItems:f.alignItems}),p=function(e){var n=e.alignItems,o=e.classes,r={root:["root","flex-start"===n&&"alignItemsFlexStart"]};return(0,s.Z)(r,c.f,o)}(m);return(0,v.jsx)(g,(0,i.Z)({className:(0,a.Z)(p.root,l),ownerState:m,ref:n},h))}));n.Z=h}}]);
//# sourceMappingURL=104.169cbcc2.chunk.js.map
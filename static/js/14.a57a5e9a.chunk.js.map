{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","views/shadows/ShadowHome/modules/Filter/index.tsx","views/shadows/ShadowHome/modules/Sort/index.tsx","views/shadows/ShadowHome/index.tsx"],"names":["_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","Object","from","unsupportedIterableToArray","TypeError","Filter","Placeholder","title","Sort","useStyles","makeStyles","theme","createStyles","content","margin","padding","spacing","background","palette","paper","aider","backgroundColor","width","borderLeft","borderColor","divider","gridRoot","display","gridTemplateColumns","gridGap","gridAutoFlow","gridCard","gridRow","gridColumn","footer","textAlign","scollButton","position","right","bottom","ShadowHome","props","RouterHelper","useRouterHelper","useShadowsPaginatedQuery","variables","query","last","data","loading","fetchMore","classes","className","Box","shadows_paginated","edges","map","edge","key","cursor","Media","node","onClickRoot","gotoShadow","id","onClickAuthor","gotoProfile","author","username","pageInfo","hasNextPage","Button","onClick","before","endCursor","updateQuery","previousQueryResult","fetchMoreResult","totalCount","__typename","disabled","Typography","color","variant","sticky"],"mappings":"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","file":"static/js/14.a57a5e9a.chunk.js","sourcesContent":["import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import * as React from \"react\";\nimport // Box,\n// makeStyles,\n// Theme,\n// createStyles,\n// Typography,\n// Chip,\n\"@material-ui/core\";\n// import { ToggleButtonGroup, ToggleButton } from \"@material-ui/lab\";\n// import { Face } from \"@material-ui/icons\";\nimport { Placeholder } from \"@/components/base/Placeholder\";\n\n// const useStyles = makeStyles((theme: Theme) =>\n//   createStyles({\n//     root: {\n//       // display: \"flex\",\n//       // alignItems: \"center\",\n//     },\n//   })\n// );\n\nexport default function Filter() {\n  // const classes = useStyles();\n\n  return <Placeholder title=\"TODO Filter.\" />;\n\n  // return (\n  //   <Box className={classes.root}>\n  //     <div>\n  //       <Typography variant=\"caption\">地区</Typography>\n  //       <div>\n  //         <ToggleButtonGroup value={1}>\n  //           <ToggleButton value={1}>其他</ToggleButton>\n  //           <ToggleButton value={2}>其他</ToggleButton>\n  //           <ToggleButton value={3}>其他</ToggleButton>\n  //           <ToggleButton value={4}>其他</ToggleButton>\n  //         </ToggleButtonGroup>\n  //       </div>\n  //     </div>\n\n  //     <div>\n  //       <Typography variant=\"caption\">地区</Typography>\n  //       <div>\n  //         <ToggleButtonGroup value={1}>\n  //           <ToggleButton value={1}>其他</ToggleButton>\n  //           <ToggleButton value={2}>其他</ToggleButton>\n  //           <ToggleButton value={3}>其他</ToggleButton>\n  //           <ToggleButton value={4}>其他</ToggleButton>\n  //         </ToggleButtonGroup>\n  //       </div>\n  //     </div>\n\n  //     <div>\n  //       <Typography variant=\"caption\">标签</Typography>\n  //       <div>\n  //         <Chip\n  //           color=\"secondary\"\n  //           size=\"small\"\n  //           onDelete={() => {}}\n  //           icon={<Face />}\n  //         />\n  //       </div>\n  //     </div>\n  //   </Box>\n  // );\n}\n","import * as React from \"react\";\n// import { Box, makeStyles, Theme, createStyles } from \"@material-ui/core\";\n// import { ToggleButtonGroup, ToggleButton } from \"@material-ui/lab\";\nimport Placeholder from \"@/components/base/Placeholder\";\n\n// const useStyles = makeStyles((theme: Theme) =>\n//   createStyles({\n//     root: {\n//       backgroundColor: theme.palette.background.paper,\n//       display: \"flex\",\n//       padding: theme.spacing(2, 0)\n//     }\n//   })\n// );\n\nexport default function Sort() {\n  return <Placeholder title=\"TODO Sort.\" />;\n  // const classes = useStyles();\n  // const [sorts, setSorts] = React.useState(() => [1, 2]);\n\n  // const _changeCall = (_, newSorts: any[]) => {\n  //   setSorts(newSorts);\n  // };\n\n  // return (\n  //   <Box className={classes.root}>\n  //     <ToggleButtonGroup value={sorts} onChange={_changeCall}>\n  //       <ToggleButton value={1}></ToggleButton>\n  //       <ToggleButton value={2}></ToggleButton>\n  //       <ToggleButton value={3}></ToggleButton>\n  //       <ToggleButton value={4}></ToggleButton>\n  //     </ToggleButtonGroup>\n  //   </Box>\n  // );\n}\n","import * as React from \"react\";\nimport { MediaNormal } from \"@/components/app/Media\";\nimport {\n  ContentScreen,\n  AiderScreen,\n  BodyScreen,\n  FullScreen\n} from \"@/layouts/PageLayout\";\nimport { Filter, Sort } from \"./modules\";\nimport { Theme, makeStyles, createStyles } from \"@material-ui/core/styles\";\nimport {\n  Box,\n  // Fab,\n  // useScrollTrigger,\n  // Zoom,\n  Button,\n  Typography\n} from \"@material-ui/core\";\n// import { KeyboardArrowUp } from \"@material-ui/icons\";\nimport { useShadowsPaginatedQuery } from \"@/schema\";\nimport { useRouterHelper } from \"@/hooks\";\n\ninterface Props {\n  window?: () => Window;\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    content: {\n      margin: \"0 auto\",\n      padding: theme.spacing(8),\n      background: theme.palette.background.paper\n    },\n    aider: {\n      backgroundColor: \"#fff\",\n      width: \"100%\",\n      padding: theme.spacing(2, 2),\n      borderLeft: \"1px solid\",\n      borderColor: theme.palette.divider\n    },\n    gridRoot: {\n      display: \"grid\",\n      gridTemplateColumns: \"repeat(4, 1fr)\",\n      gridGap: theme.spacing(1, 1),\n      gridAutoFlow: \"row dense\"\n    },\n    gridCard: {\n      gridRow: \"1 span\",\n      gridColumn: \"1 span\"\n    },\n    footer: {\n      padding: theme.spacing(2),\n      textAlign: \"center\"\n    },\n    scollButton: {\n      position: \"fixed\",\n      right: theme.spacing(2),\n      bottom: theme.spacing(2)\n    }\n  })\n);\n\nexport default function ShadowHome(props: Props) {\n  const RouterHelper = useRouterHelper();\n  const { data, loading, fetchMore } = useShadowsPaginatedQuery({\n    variables: {\n      query: {\n        last: 16\n      }\n    }\n  });\n  const loadMore = () => {\n    fetchMore({\n      variables: {\n        query: {\n          last: 8,\n          before: data?.shadows_paginated?.pageInfo?.endCursor\n        }\n      },\n      updateQuery: (previousQueryResult, { fetchMoreResult }) => {\n        if (fetchMoreResult?.shadows_paginated?.edges) {\n          const {\n            edges,\n            pageInfo,\n            totalCount\n          } = fetchMoreResult.shadows_paginated;\n          return {\n            shadows_paginated: {\n              pageInfo,\n              totalCount,\n              edges: [...previousQueryResult.shadows_paginated.edges, ...edges],\n              __typename: previousQueryResult.shadows_paginated.__typename\n            }\n          };\n        }\n        return previousQueryResult;\n      }\n    });\n  };\n\n  const classes = useStyles();\n  // const { window } = props;\n  // const trigger = useScrollTrigger({\n  //   target: window ? window() : undefined,\n  //   disableHysteresis: true,\n  //   threshold: 500,\n  // });\n\n  return (\n    <FullScreen>\n      <BodyScreen>\n        <ContentScreen className={classes.content}>\n          <Box className={classes.gridRoot}>\n            {data?.shadows_paginated?.edges?.map((edge: any) => {\n              return (\n                <div key={edge.cursor} className={classes.gridCard}>\n                  <MediaNormal\n                    {...edge.node}\n                    onClickRoot={() => RouterHelper.gotoShadow(edge.node.id)}\n                    onClickAuthor={() => () =>\n                      RouterHelper.gotoProfile(edge.node.author.username)}\n                  />\n                </div>\n              );\n            })}\n          </Box>\n          {data?.shadows_paginated?.pageInfo?.hasNextPage && (\n            <Box className={classes.footer}>\n              <Button onClick={loadMore} disabled={loading}>\n                <Typography color=\"textSecondary\" variant=\"caption\">\n                  {loading ? \"加载中...\" : \"加载更多\"}\n                </Typography>\n              </Button>\n            </Box>\n          )}\n        </ContentScreen>\n        <AiderScreen sticky className={classes.aider}>\n          <Sort />\n          <Filter />\n        </AiderScreen>\n\n        {/* <Zoom in={trigger}>\n          <Fab size=\"small\" className={classes.scollButton}>\n            <KeyboardArrowUp />\n          </Fab>\n        </Zoom> */}\n      </BodyScreen>\n    </FullScreen>\n  );\n}\n"],"sourceRoot":""}
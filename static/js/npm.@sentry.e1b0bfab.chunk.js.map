{"version":3,"sources":["../node_modules/@sentry/utils/esm/syncpromise.js","../node_modules/@sentry/hub/esm/scope.js","../node_modules/@sentry/utils/esm/memo.js","../node_modules/@sentry/utils/esm/misc.js","../node_modules/@sentry/utils/esm/is.js","../node_modules/@sentry/hub/esm/hub.js","../node_modules/@sentry/core/esm/integrations/functiontostring.js","../node_modules/@sentry/core/esm/integrations/inboundfilters.js","../node_modules/@sentry/utils/esm/polyfill.js","../node_modules/@sentry/utils/esm/error.js","../node_modules/@sentry/utils/esm/dsn.js","../node_modules/@sentry/core/esm/integration.js","../node_modules/@sentry/core/esm/baseclient.js","../node_modules/@sentry/types/esm/status.js","../node_modules/@sentry/core/esm/transports/noop.js","../node_modules/@sentry/types/esm/severity.js","../node_modules/@sentry/core/esm/basebackend.js","../node_modules/@sentry/utils/esm/supports.js","../node_modules/@sentry/browser/esm/tracekit.js","../node_modules/@sentry/browser/esm/parsers.js","../node_modules/@sentry/browser/esm/eventbuilder.js","../node_modules/@sentry/core/esm/request.js","../node_modules/@sentry/core/esm/api.js","../node_modules/@sentry/utils/esm/promisebuffer.js","../node_modules/@sentry/browser/esm/transports/base.js","../node_modules/@sentry/browser/esm/transports/fetch.js","../node_modules/@sentry/browser/esm/transports/xhr.js","../node_modules/@sentry/browser/esm/backend.js","../node_modules/@sentry/browser/esm/helpers.js","../node_modules/@sentry/utils/esm/instrument.js","../node_modules/@sentry/browser/esm/integrations/breadcrumbs.js","../node_modules/@sentry/browser/esm/client.js","../node_modules/@sentry/browser/esm/version.js","../node_modules/@sentry/browser/esm/integrations/trycatch.js","../node_modules/@sentry/browser/esm/integrations/globalhandlers.js","../node_modules/@sentry/browser/esm/integrations/linkederrors.js","../node_modules/@sentry/browser/esm/integrations/useragent.js","../node_modules/@sentry/browser/esm/sdk.js","../node_modules/@sentry/core/esm/sdk.js","../node_modules/@sentry/minimal/esm/index.js","../node_modules/@sentry/utils/esm/object.js","../node_modules/@sentry/utils/esm/string.js","../node_modules/@sentry/utils/esm/logger.js"],"names":["States","SyncPromise","executor","_this","this","_state","PENDING","_handlers","_resolve","value","_setResult","RESOLVED","_reject","reason","REJECTED","state","then","_value","_executeHandlers","_attachHandler","handler","concat","cachedHandlers","slice","forEach","done","onfulfilled","onrejected","e","resolve","reject","_","all","collection","Array","isArray","length","counter","resolvedCollection","item","index","TypeError","prototype","_onfulfilled","_onrejected","result","catch","val","finally","onfinally","isRejected","toString","Scope","_notifyingListeners","_scopeListeners","_eventProcessors","_breadcrumbs","_user","_tags","_extra","_contexts","clone","scope","newScope","_level","_span","_transactionName","_fingerprint","addScopeListener","callback","push","addEventProcessor","setUser","user","_notifyScopeListeners","setTags","tags","setTag","key","_a","setExtras","extras","setExtra","extra","setFingerprint","fingerprint","setLevel","level","setTransactionName","name","setTransaction","setContext","context","setSpan","span","getSpan","getTransaction","spanRecorder","spans","update","captureContext","updatedScope","contexts","clear","undefined","addBreadcrumb","breadcrumb","maxBreadcrumbs","mergedBreadcrumb","timestamp","clearBreadcrumbs","applyToEvent","event","hint","Object","keys","transaction","trace","getTraceContext","_applyFingerprint","breadcrumbs","_notifyEventProcessors","getGlobalEventProcessors","processors","processor","final","setTimeout","global","__SENTRY__","globalEventProcessors","addGlobalEventProcessor","Memo","_hasWeakSet","WeakSet","_inner","memoize","obj","has","add","i","unmemoize","delete","splice","isNodeEnv","call","process","fallbackGlobalObject","getGlobalObject","window","self","uuid4","crypto","msCrypto","getRandomValues","arr","Uint16Array","pad","num","v","replace","c","r","Math","random","parseUrl","url","match","query","fragment","host","path","protocol","relative","getEventDescription","message","exception","values","type","event_id","consoleSandbox","originalConsole","console","wrappedLevels","__sentry_original__","addExceptionTypeValue","addExceptionMechanism","mechanism","_oO","getLocationHref","document","location","href","oO","htmlTreeAsString","elem","currentElem","out","height","len","sepLength","nextStr","_htmlElementAsString","parentNode","reverse","join","el","className","classes","attr","tagName","toLowerCase","id","split","allowedAttrs","getAttribute","INITIAL_TIME","Date","now","prevNow","performanceFallback","timeOrigin","crossPlatformPerformance","request","module","require","performance","timing","navigationStart","timestampWithMs","parseRetryAfterHeader","header","headerDelay","parseInt","isNaN","headerDate","parse","getFunctionName","fn","isError","wat","isInstanceOf","Error","isErrorEvent","isDOMError","isDOMException","isString","isPrimitive","isPlainObject","isEvent","Event","isElement","Element","isRegExp","isThenable","Boolean","isSyntheticEvent","base","_e","Hub","client","_version","_stack","bindClient","isOlderThan","version","getStackTop","setupIntegrations","pushScope","stack","getStack","parentScope","getClient","popScope","pop","withScope","getScope","captureException","eventId","_lastEventId","finalHint","syntheticException","originalException","_invokeClient","captureMessage","captureEvent","lastEventId","top","getOptions","_b","beforeBreadcrumb","_c","finalBreadcrumb","min","configureScope","run","oldHub","makeMain","getIntegration","integration","warn","startSpan","_callExtensionMethod","startTransaction","traceHeaders","method","args","_i","arguments","apply","carrier","getMainCarrier","sentry","extensions","hub","registry","getHubFromCarrier","setHubOnCarrier","getCurrentHub","hasHubOnCarrier","activeDomain","active","registryHubTopStack","_Oo","getHubFromActiveDomain","originalFunctionToString","FunctionToString","setupOnce","Function","DEFAULT_IGNORE_ERRORS","InboundFilters","_options","clientOptions","options","_mergeOptions","_shouldDropEvent","_isSentryError","logger","_isIgnoredError","_isDeniedUrl","_getEventFilterUrl","_isAllowedUrl","ignoreInternal","ignoreErrors","_getPossibleEventMessages","some","pattern","denyUrls","allowUrls","whitelistUrls","blacklistUrls","error","stacktrace","frames_1","frames","filename","frames_2","setPrototypeOf","__proto__","proto","prop","hasOwnProperty","_super","SentryError","_newTarget","constructor","DSN_REGEX","Dsn","from","_fromString","_fromComponents","_validate","withPassword","pass","port","projectId","str","exec","projectMatch","components","component","ERROR_MESSAGE","installedIntegrations","integrations","defaultIntegrations","userIntegrations","userIntegrationsNames_1","map","pickedIntegrationsNames_1","defaultIntegration","indexOf","userIntegration","integrationsNames","getIntegrationsToSetup","log","setupIntegration","Status","BaseClient","backendClass","_integrations","_processing","_backend","dsn","_dsn","_getBackend","eventFromException","is","eventFromMessage","_processEvent","finalEvent","getDsn","flush","timeout","_isClientProcessing","status","clearInterval","interval","getTransport","close","transportFlushed","ready","enabled","_isEnabled","ticked","setInterval","_prepareEvent","normalizeDepth","prepared","_applyClientOptions","_applyIntegrationsMetadata","finalScope","evt","_normalizeEvent","depth","normalized","b","data","environment","release","dist","maxValueLength","sdkInfo","sdk","integrationsArray","_sendEvent","sendEvent","beforeSend","sampleRate","isTransaction","__sentry__","beforeSendResult","_handleAsyncBeforeSend","processedEvent","fromHttpCode","code","Success","RateLimit","Invalid","Failed","Unknown","Severity","NoopTransport","Skipped","BaseBackend","_transport","_setupTransport","_exception","_hint","_message","supportsFetch","Headers","Request","Response","isNativeFetch","func","test","supportsReferrerPolicy","referrerPolicy","fromString","Debug","Info","Warning","Fatal","Critical","Log","gecko","winjs","geckoEval","chromeEval","reactMinifiedRegexp","computeStackTrace","ex","popSize","framesToPop","parts","opera10Regex","opera11Regex","lines","line","element","column","extractMessage","computeStackTraceFromStacktraceProp","popFrames","submatch","isNative","substr","columnNumber","computeStackTraceFromStackProp","failed","exceptionFromStacktrace","prepareFramesForEvent","eventFromStacktrace","localStack","firstFrameFunction","lastFrameFunction","frame","colno","function","in_app","lineno","eventFromUnknownInput","domException","name_1","eventFromString","rejection","__serialized__","eventFromPlainObject","synthetic","input","attachStacktrace","eventToSentryRequest","api","useEnvelope","req","body","JSON","stringify","getEnvelopeEndpointWithUrlEncodedAuth","getStoreEndpointWithUrlEncodedAuth","envelope","sent_at","toISOString","API","_dsnObject","getBaseApiEndpoint","getStoreEndpoint","_getIngestEndpoint","_encodedAuth","_getEnvelopeEndpoint","getStoreEndpointPath","getRequestHeaders","clientName","clientVersion","getReportDialogEndpoint","dialogOptions","endpoint","encodedOptions","encodeURIComponent","email","target","auth","sentry_key","sentry_version","PromiseBuffer","_limit","_buffer","isReady","task","remove","drain","capturedSetTimeout","clearTimeout","BaseTransport","_api","FetchTransport","_disabledUntil","Promise","sentryReq","fetchParameters","assign","headers","fetch","response","retryAfterHeader","get","XHRTransport","XMLHttpRequest","onreadystatechange","readyState","getResponseHeader","open","setRequestHeader","send","BrowserBackend","handled","transportOptions","transport","ignoreOnError","shouldIgnoreOnError","ignoreNextOnError","wrap","before","__sentry_wrapped__","sentryWrapped","wrappedArguments","arg","handleEvent","property","defineProperty","enumerable","defineProperties","getOwnPropertyDescriptor","configurable","injectReportDialog","script","createElement","async","src","onLoad","onload","head","appendChild","lastHref","handlers","instrumented","instrument","originalConsoleLevel","triggerHandlers","instrumentConsole","addEventListener","domEventHandler","bind","keypressEventHandler","original","eventName","innerOriginal","instrumentDOM","xhrproto","originalOpen","xhr","__sentry_xhr__","toUpperCase","__sentry_own_request__","onreadystatechangeHandler","status_code","endTimestamp","startTimestamp","readyStateArgs","originalSend","instrumentXHR","doc","sandbox","hidden","contentWindow","removeChild","err","supportsNativeFetch","originalFetch","commonHandlerData","fetchData","getFetchMethod","getFetchUrl","instrumentFetch","chrome","isChromePackagedApp","app","runtime","hasHistoryApi","history","pushState","replaceState","supportsHistory","oldOnPopState","onpopstate","historyReplacementFunction","originalHistoryFunction","to","String","instrumentHistory","_oldOnErrorHandler","onerror","msg","_oldOnUnhandledRejectionHandler","onunhandledrejection","addInstrumentationHandler","e_1","next","e_1_1","return","fetchArgs","keypressTimeout","lastCapturedEvent","debounceTimer","debounce","isContentEditable","Breadcrumbs","dom","addSentryBreadcrumb","category","_consoleBreadcrumb","_domBreadcrumb","_xhrBreadcrumb","_fetchBreadcrumb","_historyBreadcrumb","handlerData","parsedLoc","parsedFrom","parsedTo","BrowserClient","showReportDialog","platform","packages","DEFAULT_EVENT_TARGET","TryCatch","eventTarget","requestAnimationFrame","_wrapTimeFunction","_wrapRAF","_wrapXHR","_wrapEventTarget","originalCallback","xmlHttpRequestProps","wrapOptions","GlobalHandlers","_onErrorHandlerInstalled","_onUnhandledRejectionHandlerInstalled","stackTraceLimit","_installGlobalOnErrorHandler","_installGlobalOnUnhandledRejectionHandler","currentHub","hasIntegration","isFailedOwnDelivery","_eventFromIncompleteOnError","_enhanceEventWithInitialFrame","detail","_eventFromIncompleteRejection","groups","LinkedErrors","_key","limit","_handler","linkedErrors","_walkErrorTree","UserAgent","navigator","userAgent","init","window_1","SENTRY_RELEASE","clientClass","debug","enable","initAndBind","callOnHub","fill","source","replacement","wrapped","urlEncode","object","getWalkSource","event_1","currentTarget","CustomEvent","jsonSize","encodeURI","utf8Length","normalizeToSize","maxSize","serialized","normalize","normalizeValue","_events","walk","memo","Infinity","serializeValue","toJSON","acc","innerKey","extractExceptionKeysForMessage","maxLength","sort","includedKeys","truncate","max","snipLine","newLine","ll","start","end","safeJoin","delimiter","output","isMatchingPattern","PREFIX","Logger","_enabled","disable"],"mappings":"8FAAA,sCAUIA,EAVJ,SAYA,SAAWA,GAETA,EAAgB,QAAI,UAGpBA,EAAiB,SAAI,WAGrBA,EAAiB,SAAI,WARvB,CASGA,IAAWA,EAAS,KAOvB,IAAIC,EAEJ,WACE,SAASA,EAAYC,GACnB,IAAIC,EAAQC,KAEZA,KAAKC,OAASL,EAAOM,QACrBF,KAAKG,UAAY,GAGjBH,KAAKI,SAAW,SAAUC,GACxBN,EAAMO,WAAWV,EAAOW,SAAUF,IAKpCL,KAAKQ,QAAU,SAAUC,GACvBV,EAAMO,WAAWV,EAAOc,SAAUD,IAKpCT,KAAKM,WAAa,SAAUK,EAAON,GAC7BN,EAAME,SAAWL,EAAOM,UAIxB,YAAWG,GACbA,EAAMO,KAAKb,EAAMK,SAAUL,EAAMS,UAInCT,EAAME,OAASU,EACfZ,EAAMc,OAASR,EAEfN,EAAMe,sBAMRd,KAAKe,eAAiB,SAAUC,GAC9BjB,EAAMI,UAAYJ,EAAMI,UAAUc,OAAOD,GAEzCjB,EAAMe,oBAKRd,KAAKc,iBAAmB,WACtB,GAAIf,EAAME,SAAWL,EAAOM,QAA5B,CAIA,IAAIgB,EAAiBnB,EAAMI,UAAUgB,QAErCpB,EAAMI,UAAY,GAClBe,EAAeE,SAAQ,SAAUJ,GAC3BA,EAAQK,OAIRtB,EAAME,SAAWL,EAAOW,UACtBS,EAAQM,aAEVN,EAAQM,YAAYvB,EAAMc,QAI1Bd,EAAME,SAAWL,EAAOc,UACtBM,EAAQO,YACVP,EAAQO,WAAWxB,EAAMc,QAI7BG,EAAQK,MAAO,QAInB,IACEvB,EAASE,KAAKI,SAAUJ,KAAKQ,SAC7B,MAAOgB,GACPxB,KAAKQ,QAAQgB,IA4IjB,OAtIA3B,EAAY4B,QAAU,SAAUpB,GAC9B,OAAO,IAAIR,GAAY,SAAU4B,GAC/BA,EAAQpB,OAMZR,EAAY6B,OAAS,SAAUjB,GAC7B,OAAO,IAAIZ,GAAY,SAAU8B,EAAGD,GAClCA,EAAOjB,OAMXZ,EAAY+B,IAAM,SAAUC,GAC1B,OAAO,IAAIhC,GAAY,SAAU4B,EAASC,GACxC,GAAKI,MAAMC,QAAQF,GAKnB,GAA0B,IAAtBA,EAAWG,OAAf,CAKA,IAAIC,EAAUJ,EAAWG,OACrBE,EAAqB,GACzBL,EAAWT,SAAQ,SAAUe,EAAMC,GACjCvC,EAAY4B,QAAQU,GAAMvB,MAAK,SAAUP,GACvC6B,EAAmBE,GAAS/B,EAGZ,KAFhB4B,GAAW,IAMXR,EAAQS,MACPtB,KAAK,KAAMc,WAhBdD,EAAQ,SALRC,EAAO,IAAIW,UAAU,gDA4B3BxC,EAAYyC,UAAU1B,KAAO,SAAU2B,EAAcC,GACnD,IAAIzC,EAAQC,KAEZ,OAAO,IAAIH,GAAY,SAAU4B,EAASC,GACxC3B,EAAMgB,eAAe,CACnBM,MAAM,EACNC,YAAa,SAAqBmB,GAChC,GAAKF,EAOL,IAEE,YADAd,EAAQc,EAAaE,IAErB,MAAOjB,GAEP,YADAE,EAAOF,QARPC,EAAQgB,IAYZlB,WAAY,SAAoBd,GAC9B,GAAK+B,EAKL,IAEE,YADAf,EAAQe,EAAY/B,IAEpB,MAAOe,GAEP,YADAE,EAAOF,QARPE,EAAOjB,UAkBjBZ,EAAYyC,UAAUI,MAAQ,SAAUnB,GACtC,OAAOvB,KAAKY,MAAK,SAAU+B,GACzB,OAAOA,IACNpB,IAKL1B,EAAYyC,UAAUM,QAAU,SAAUC,GACxC,IAAI9C,EAAQC,KAEZ,OAAO,IAAIH,GAAY,SAAU4B,EAASC,GACxC,IAAIiB,EACAG,EACJ,OAAO/C,EAAMa,MAAK,SAAUP,GAC1ByC,GAAa,EACbH,EAAMtC,EAEFwC,GACFA,OAED,SAAUpC,GACXqC,GAAa,EACbH,EAAMlC,EAEFoC,GACFA,OAEDjC,MAAK,WACFkC,EACFpB,EAAOiB,GAITlB,EAAQkB,UAOd9C,EAAYyC,UAAUS,SAAW,WAC/B,MAAO,wBAGFlD,EA5NT,I,iCC9BA,wGAOImD,EAEJ,WACE,SAASA,IAEPhD,KAAKiD,qBAAsB,EAG3BjD,KAAKkD,gBAAkB,GAGvBlD,KAAKmD,iBAAmB,GAGxBnD,KAAKoD,aAAe,GAGpBpD,KAAKqD,MAAQ,GAGbrD,KAAKsD,MAAQ,GAIbtD,KAAKuD,OAAS,GAIdvD,KAAKwD,UAAY,GAuanB,OA/ZAR,EAAMS,MAAQ,SAAUC,GACtB,IAAIC,EAAW,IAAIX,EAenB,OAbIU,IACFC,EAASP,aAAe,mBAASM,EAAMN,cACvCO,EAASL,MAAQ,mBAAS,GAAII,EAAMJ,OACpCK,EAASJ,OAAS,mBAAS,GAAIG,EAAMH,QACrCI,EAASH,UAAY,mBAAS,GAAIE,EAAMF,WACxCG,EAASN,MAAQK,EAAML,MACvBM,EAASC,OAASF,EAAME,OACxBD,EAASE,MAAQH,EAAMG,MACvBF,EAASG,iBAAmBJ,EAAMI,iBAClCH,EAASI,aAAeL,EAAMK,aAC9BJ,EAASR,iBAAmB,mBAASO,EAAMP,mBAGtCQ,GAQTX,EAAMV,UAAU0B,iBAAmB,SAAUC,GAC3CjE,KAAKkD,gBAAgBgB,KAAKD,IAO5BjB,EAAMV,UAAU6B,kBAAoB,SAAUF,GAG5C,OAFAjE,KAAKmD,iBAAiBe,KAAKD,GAEpBjE,MAOTgD,EAAMV,UAAU8B,QAAU,SAAUC,GAKlC,OAJArE,KAAKqD,MAAQgB,GAAQ,GAErBrE,KAAKsE,wBAEEtE,MAOTgD,EAAMV,UAAUiC,QAAU,SAAUC,GAKlC,OAJAxE,KAAKsD,MAAQ,mBAAS,mBAAS,GAAItD,KAAKsD,OAAQkB,GAEhDxE,KAAKsE,wBAEEtE,MAOTgD,EAAMV,UAAUmC,OAAS,SAAUC,EAAKrE,GACtC,IAAIsE,EAMJ,OAJA3E,KAAKsD,MAAQ,mBAAS,mBAAS,GAAItD,KAAKsD,SAASqB,EAAK,IAAOD,GAAOrE,EAAOsE,IAE3E3E,KAAKsE,wBAEEtE,MAOTgD,EAAMV,UAAUsC,UAAY,SAAUC,GAKpC,OAJA7E,KAAKuD,OAAS,mBAAS,mBAAS,GAAIvD,KAAKuD,QAASsB,GAElD7E,KAAKsE,wBAEEtE,MAOTgD,EAAMV,UAAUwC,SAAW,SAAUJ,EAAKK,GACxC,IAAIJ,EAMJ,OAJA3E,KAAKuD,OAAS,mBAAS,mBAAS,GAAIvD,KAAKuD,UAAUoB,EAAK,IAAOD,GAAOK,EAAOJ,IAE7E3E,KAAKsE,wBAEEtE,MAOTgD,EAAMV,UAAU0C,eAAiB,SAAUC,GAKzC,OAJAjF,KAAK+D,aAAekB,EAEpBjF,KAAKsE,wBAEEtE,MAOTgD,EAAMV,UAAU4C,SAAW,SAAUC,GAKnC,OAJAnF,KAAK4D,OAASuB,EAEdnF,KAAKsE,wBAEEtE,MAOTgD,EAAMV,UAAU8C,mBAAqB,SAAUC,GAK7C,OAJArF,KAAK8D,iBAAmBuB,EAExBrF,KAAKsE,wBAEEtE,MAQTgD,EAAMV,UAAUgD,eAAiB,SAAUD,GACzC,OAAOrF,KAAKoF,mBAAmBC,IAQjCrC,EAAMV,UAAUiD,WAAa,SAAUb,EAAKc,GAC1C,IAAIb,EAMJ,OAJA3E,KAAKwD,UAAY,mBAAS,mBAAS,GAAIxD,KAAKwD,aAAamB,EAAK,IAAOD,GAAOc,EAASb,IAErF3E,KAAKsE,wBAEEtE,MAOTgD,EAAMV,UAAUmD,QAAU,SAAUC,GAKlC,OAJA1F,KAAK6D,MAAQ6B,EAEb1F,KAAKsE,wBAEEtE,MAOTgD,EAAMV,UAAUqD,QAAU,WACxB,OAAO3F,KAAK6D,OAOdb,EAAMV,UAAUsD,eAAiB,WAC/B,IAAIF,EAAO1F,KAAK2F,UAEhB,GAAID,GAAQA,EAAKG,cAAgBH,EAAKG,aAAaC,MAAM,GACvD,OAAOJ,EAAKG,aAAaC,MAAM,IAUnC9C,EAAMV,UAAUyD,OAAS,SAAUC,GACjC,IAAKA,EACH,OAAOhG,KAGT,GAA8B,oBAAnBgG,EAA+B,CACxC,IAAIC,EAAeD,EAAehG,MAClC,OAAOiG,aAAwBjD,EAAQiD,EAAejG,KAuCxD,OApCIgG,aAA0BhD,GAC5BhD,KAAKsD,MAAQ,mBAAS,mBAAS,GAAItD,KAAKsD,OAAQ0C,EAAe1C,OAC/DtD,KAAKuD,OAAS,mBAAS,mBAAS,GAAIvD,KAAKuD,QAASyC,EAAezC,QACjEvD,KAAKwD,UAAY,mBAAS,mBAAS,GAAIxD,KAAKwD,WAAYwC,EAAexC,WAEnEwC,EAAe3C,QACjBrD,KAAKqD,MAAQ2C,EAAe3C,OAG1B2C,EAAepC,SACjB5D,KAAK4D,OAASoC,EAAepC,QAG3BoC,EAAejC,eACjB/D,KAAK+D,aAAeiC,EAAejC,eAE5B,YAAciC,KAEvBA,EAAiBA,EACjBhG,KAAKsD,MAAQ,mBAAS,mBAAS,GAAItD,KAAKsD,OAAQ0C,EAAexB,MAC/DxE,KAAKuD,OAAS,mBAAS,mBAAS,GAAIvD,KAAKuD,QAASyC,EAAejB,OACjE/E,KAAKwD,UAAY,mBAAS,mBAAS,GAAIxD,KAAKwD,WAAYwC,EAAeE,UAEnEF,EAAe3B,OACjBrE,KAAKqD,MAAQ2C,EAAe3B,MAG1B2B,EAAeb,QACjBnF,KAAK4D,OAASoC,EAAeb,OAG3Ba,EAAef,cACjBjF,KAAK+D,aAAeiC,EAAef,cAIhCjF,MAOTgD,EAAMV,UAAU6D,MAAQ,WAatB,OAZAnG,KAAKoD,aAAe,GACpBpD,KAAKsD,MAAQ,GACbtD,KAAKuD,OAAS,GACdvD,KAAKqD,MAAQ,GACbrD,KAAKwD,UAAY,GACjBxD,KAAK4D,YAASwC,EACdpG,KAAK8D,sBAAmBsC,EACxBpG,KAAK+D,kBAAeqC,EACpBpG,KAAK6D,WAAQuC,EAEbpG,KAAKsE,wBAEEtE,MAOTgD,EAAMV,UAAU+D,cAAgB,SAAUC,EAAYC,GACpD,IAAIC,EAAmB,mBAAS,CAC9BC,UAAW,eACVH,GAMH,OAJAtG,KAAKoD,kBAAkCgD,IAAnBG,GAAgCA,GAAkB,EAAI,mBAASvG,KAAKoD,aAAc,CAACoD,IAAmBrF,OAAOoF,GAAkB,mBAASvG,KAAKoD,aAAc,CAACoD,IAEhLxG,KAAKsE,wBAEEtE,MAOTgD,EAAMV,UAAUoE,iBAAmB,WAKjC,OAJA1G,KAAKoD,aAAe,GAEpBpD,KAAKsE,wBAEEtE,MAYTgD,EAAMV,UAAUqE,aAAe,SAAUC,EAAOC,GAsC9C,OArCI7G,KAAKuD,QAAUuD,OAAOC,KAAK/G,KAAKuD,QAAQvB,SAC1C4E,EAAM7B,MAAQ,mBAAS,mBAAS,GAAI/E,KAAKuD,QAASqD,EAAM7B,QAGtD/E,KAAKsD,OAASwD,OAAOC,KAAK/G,KAAKsD,OAAOtB,SACxC4E,EAAMpC,KAAO,mBAAS,mBAAS,GAAIxE,KAAKsD,OAAQsD,EAAMpC,OAGpDxE,KAAKqD,OAASyD,OAAOC,KAAK/G,KAAKqD,OAAOrB,SACxC4E,EAAMvC,KAAO,mBAAS,mBAAS,GAAIrE,KAAKqD,OAAQuD,EAAMvC,OAGpDrE,KAAKwD,WAAasD,OAAOC,KAAK/G,KAAKwD,WAAWxB,SAChD4E,EAAMV,SAAW,mBAAS,mBAAS,GAAIlG,KAAKwD,WAAYoD,EAAMV,WAG5DlG,KAAK4D,SACPgD,EAAMzB,MAAQnF,KAAK4D,QAGjB5D,KAAK8D,mBACP8C,EAAMI,YAAchH,KAAK8D,kBAMvB9D,KAAK6D,QACP+C,EAAMV,SAAW,mBAAS,CACxBe,MAAOjH,KAAK6D,MAAMqD,mBACjBN,EAAMV,WAGXlG,KAAKmH,kBAAkBP,GAEvBA,EAAMQ,YAAc,mBAASR,EAAMQ,aAAe,GAAIpH,KAAKoD,cAC3DwD,EAAMQ,YAAcR,EAAMQ,YAAYpF,OAAS,EAAI4E,EAAMQ,iBAAchB,EAChEpG,KAAKqH,uBAAuB,mBAASC,IAA4BtH,KAAKmD,kBAAmByD,EAAOC,IAOzG7D,EAAMV,UAAU+E,uBAAyB,SAAUE,EAAYX,EAAOC,EAAMzE,GAC1E,IAAIrC,EAAQC,KAMZ,YAJc,IAAVoC,IACFA,EAAQ,GAGH,IAAI,KAAY,SAAUX,EAASC,GACxC,IAAI8F,EAAYD,EAAWnF,GAE3B,GAAc,OAAVwE,GAAuC,oBAAdY,EAC3B/F,EAAQmF,OACH,CACL,IAAInE,EAAS+E,EAAU,mBAAS,GAAIZ,GAAQC,GAExC,YAAWpE,GACbA,EAAO7B,MAAK,SAAU6G,GACpB,OAAO1H,EAAMsH,uBAAuBE,EAAYE,EAAOZ,EAAMzE,EAAQ,GAAGxB,KAAKa,MAC5Eb,KAAK,KAAMc,GAEd3B,EAAMsH,uBAAuBE,EAAY9E,EAAQoE,EAAMzE,EAAQ,GAAGxB,KAAKa,GAASb,KAAK,KAAMc,QAUnGsB,EAAMV,UAAUgC,sBAAwB,WACtC,IAAIvE,EAAQC,KAEPA,KAAKiD,sBACRjD,KAAKiD,qBAAsB,EAC3ByE,YAAW,WACT3H,EAAMmD,gBAAgB9B,SAAQ,SAAU6C,GACtCA,EAASlE,MAGXA,EAAMkD,qBAAsB,OAUlCD,EAAMV,UAAU6E,kBAAoB,SAAUP,GAE5CA,EAAM3B,YAAc2B,EAAM3B,YAAcnD,MAAMC,QAAQ6E,EAAM3B,aAAe2B,EAAM3B,YAAc,CAAC2B,EAAM3B,aAAe,GAEjHjF,KAAK+D,eACP6C,EAAM3B,YAAc2B,EAAM3B,YAAYhE,OAAOjB,KAAK+D,eAIhD6C,EAAM3B,cAAgB2B,EAAM3B,YAAYjD,eACnC4E,EAAM3B,aAIVjC,EAjcT,GAycA,SAASsE,IACP,IAAIK,EAAS,cAGb,OAFAA,EAAOC,WAAaD,EAAOC,YAAc,GACzCD,EAAOC,WAAWC,sBAAwBF,EAAOC,WAAWC,uBAAyB,GAC9EF,EAAOC,WAAWC,sBAQpB,SAASC,EAAwB7D,GACtCqD,IAA2BpD,KAAKD,K,iCC/dlC,kCASA,IAAI8D,EAEJ,WACE,SAASA,IACP/H,KAAKgI,YAAiC,oBAAZC,QAC1BjI,KAAKkI,OAASlI,KAAKgI,YAAc,IAAIC,QAAY,GAoDnD,OA5CAF,EAAKzF,UAAU6F,QAAU,SAAUC,GACjC,GAAIpI,KAAKgI,YACP,QAAIhI,KAAKkI,OAAOG,IAAID,KAIpBpI,KAAKkI,OAAOI,IAAIF,IAET,GAIT,IAAK,IAAIG,EAAI,EAAGA,EAAIvI,KAAKkI,OAAOlG,OAAQuG,IAAK,CAG3C,GAFYvI,KAAKkI,OAAOK,KAEVH,EACZ,OAAO,EAMX,OAFApI,KAAKkI,OAAOhE,KAAKkE,IAEV,GAQTL,EAAKzF,UAAUkG,UAAY,SAAUJ,GACnC,GAAIpI,KAAKgI,YACPhI,KAAKkI,OAAOO,OAAOL,QAEnB,IAAK,IAAIG,EAAI,EAAGA,EAAIvI,KAAKkI,OAAOlG,OAAQuG,IACtC,GAAIvI,KAAKkI,OAAOK,KAAOH,EAAK,CAC1BpI,KAAKkI,OAAOQ,OAAOH,EAAG,GAEtB,QAMDR,EAvDT,I,iCCXA,4dAmBO,SAASY,IACd,MAAwF,qBAAjF7B,OAAOxE,UAAUS,SAAS6F,KAAwB,qBAAZC,EAA0BA,EAAU,GAEnF,IAAIC,EAAuB,GAOpB,SAASC,IACd,OAAOJ,IAAchB,EAA2B,qBAAXqB,OAAyBA,OAAyB,qBAATC,KAAuBA,KAAOH,EAQvG,SAASI,IACd,IAAIvB,EAASoB,IACTI,EAASxB,EAAOwB,QAAUxB,EAAOyB,SAErC,QAAiB,IAAXD,GAAsBA,EAAOE,gBAAiB,CAElD,IAAIC,EAAM,IAAIC,YAAY,GAC1BJ,EAAOE,gBAAgBC,GAGvBA,EAAI,GAAc,KAATA,EAAI,GAAa,MAG1BA,EAAI,GAAc,MAATA,EAAI,GAAc,MAE3B,IAAIE,EAAM,SAAaC,GAGrB,IAFA,IAAIC,EAAID,EAAI1G,SAAS,IAEd2G,EAAE1H,OAAS,GAChB0H,EAAI,IAAMA,EAGZ,OAAOA,GAGT,OAAOF,EAAIF,EAAI,IAAME,EAAIF,EAAI,IAAME,EAAIF,EAAI,IAAME,EAAIF,EAAI,IAAME,EAAIF,EAAI,IAAME,EAAIF,EAAI,IAAME,EAAIF,EAAI,IAAME,EAAIF,EAAI,IAInH,MAAO,mCAAmCK,QAAQ,SAAS,SAAUC,GAEnE,IAAIC,EAAoB,GAAhBC,KAAKC,SAAgB,EAG7B,OADc,MAANH,EAAYC,EAAQ,EAAJA,EAAU,GACzB9G,SAAS,OAWf,SAASiH,EAASC,GACvB,IAAKA,EACH,MAAO,GAGT,IAAIC,EAAQD,EAAIC,MAAM,gEAEtB,IAAKA,EACH,MAAO,GAIT,IAAIC,EAAQD,EAAM,IAAM,GACpBE,EAAWF,EAAM,IAAM,GAC3B,MAAO,CACLG,KAAMH,EAAM,GACZI,KAAMJ,EAAM,GACZK,SAAUL,EAAM,GAChBM,SAAUN,EAAM,GAAKC,EAAQC,GAQ1B,SAASK,EAAoB7D,GAClC,GAAIA,EAAM8D,QACR,OAAO9D,EAAM8D,QAGf,GAAI9D,EAAM+D,WAAa/D,EAAM+D,UAAUC,QAAUhE,EAAM+D,UAAUC,OAAO,GAAI,CAC1E,IAAID,EAAY/D,EAAM+D,UAAUC,OAAO,GAEvC,OAAID,EAAUE,MAAQF,EAAUtK,MACvBsK,EAAUE,KAAO,KAAOF,EAAUtK,MAGpCsK,EAAUE,MAAQF,EAAUtK,OAASuG,EAAMkE,UAAY,YAGhE,OAAOlE,EAAMkE,UAAY,YAIpB,SAASC,EAAe9G,GAC7B,IAAI0D,EAASoB,IAGb,KAAM,YAAapB,GACjB,OAAO1D,IAGT,IAAI+G,EAAkBrD,EAAOsD,QACzBC,EAAgB,GAPP,CAAC,QAAS,OAAQ,OAAQ,QAAS,MAAO,UAShD9J,SAAQ,SAAU+D,GACnBA,KAASwC,EAAOsD,SAAWD,EAAgB7F,GAAOgG,sBACpDD,EAAc/F,GAAS6F,EAAgB7F,GACvC6F,EAAgB7F,GAAS6F,EAAgB7F,GAAOgG,wBAIpD,IAAI1I,EAASwB,IAKb,OAHA6C,OAAOC,KAAKmE,GAAe9J,SAAQ,SAAU+D,GAC3C6F,EAAgB7F,GAAS+F,EAAc/F,MAElC1C,EAUF,SAAS2I,EAAsBxE,EAAOvG,EAAOwK,GAClDjE,EAAM+D,UAAY/D,EAAM+D,WAAa,GACrC/D,EAAM+D,UAAUC,OAAShE,EAAM+D,UAAUC,QAAU,GACnDhE,EAAM+D,UAAUC,OAAO,GAAKhE,EAAM+D,UAAUC,OAAO,IAAM,GACzDhE,EAAM+D,UAAUC,OAAO,GAAGvK,MAAQuG,EAAM+D,UAAUC,OAAO,GAAGvK,OAASA,GAAS,GAC9EuG,EAAM+D,UAAUC,OAAO,GAAGC,KAAOjE,EAAM+D,UAAUC,OAAO,GAAGC,MAAQA,GAAQ,QAStE,SAASQ,EAAsBzE,EAAO0E,QACzB,IAAdA,IACFA,EAAY,IAId,IAGE1E,EAAM+D,UAAUC,OAAO,GAAGU,UAAY1E,EAAM+D,UAAUC,OAAO,GAAGU,WAAa,GAC7ExE,OAAOC,KAAKuE,GAAWlK,SAAQ,SAAUsD,GAGvCkC,EAAM+D,UAAUC,OAAO,GAAGU,UAAU5G,GAAO4G,EAAU5G,MAEvD,MAAO6G,KAOJ,SAASC,IACd,IACE,OAAOC,SAASC,SAASC,KACzB,MAAOC,GACP,MAAO,IAUJ,SAASC,EAAiBC,GAK/B,IAWE,IAVA,IAAIC,EAAcD,EAGdE,EAAM,GACNC,EAAS,EACTC,EAAM,EAENC,EADY,MACUnK,OACtBoK,OAAU,EAEPL,GAAeE,IATI,KAeR,UALhBG,EAAUC,EAAqBN,KAKLE,EAAS,GAAKC,EAAMF,EAAIhK,OAASmK,EAAYC,EAAQpK,QAd5D,KAkBnBgK,EAAI9H,KAAKkI,GACTF,GAAOE,EAAQpK,OACf+J,EAAcA,EAAYO,WAG5B,OAAON,EAAIO,UAAUC,KAnBL,OAoBhB,MAAOjB,GACP,MAAO,aASX,SAASc,EAAqBI,GAC5B,IAEIC,EACAC,EACAjI,EACAkI,EACArE,EANAuD,EAAOW,EACPT,EAAM,GAOV,IAAKF,IAASA,EAAKe,QACjB,MAAO,GAYT,GATAb,EAAI9H,KAAK4H,EAAKe,QAAQC,eAElBhB,EAAKiB,IACPf,EAAI9H,KAAK,IAAM4H,EAAKiB,KAItBL,EAAYZ,EAAKY,YAEA,YAASA,GAGxB,IAFAC,EAAUD,EAAUM,MAAM,OAErBzE,EAAI,EAAGA,EAAIoE,EAAQ3K,OAAQuG,IAC9ByD,EAAI9H,KAAK,IAAMyI,EAAQpE,IAI3B,IAAI0E,EAAe,CAAC,OAAQ,OAAQ,QAAS,OAE7C,IAAK1E,EAAI,EAAGA,EAAI0E,EAAajL,OAAQuG,IACnC7D,EAAMuI,EAAa1E,IACnBqE,EAAOd,EAAKoB,aAAaxI,KAGvBsH,EAAI9H,KAAK,IAAMQ,EAAM,KAAQkI,EAAO,MAIxC,OAAOZ,EAAIQ,KAAK,IAGlB,IAAIW,EAAeC,KAAKC,MACpBC,EAAU,EACVC,EAAsB,CACxBF,IAAK,WACH,IAAIA,EAAMD,KAAKC,MAAQF,EAOvB,OALIE,EAAMC,IACRD,EAAMC,GAGRA,EAAUD,EACHA,GAETG,WAAYL,GAEHM,EAA2B,WACpC,GAAI9E,IACF,IAEE,OAnT8B+E,EAkTS,aAARC,EAhTxBC,QAAQF,IAiTEG,YACjB,MAAOlM,GACP,OAAO4L,EArTN,IAA6BG,EAyT9BG,EAAc9E,IAAkB8E,YAEpC,OAAKA,GAAgBA,EAAYR,UAQFjH,IAA3ByH,EAAYL,aAKdK,EAAYL,WAAaK,EAAYC,QAAUD,EAAYC,OAAOC,iBAAmBZ,GAGhFU,GAfEN,EAb2B,GAkC/B,SAASS,IACd,OAAQP,EAAyBD,WAAaC,EAAyBJ,OAAS,IA8B3E,SAASY,EAAsBZ,EAAKa,GACzC,IAAKA,EACH,OAVoB,IAatB,IAAIC,EAAcC,SAAS,GAAKF,EAAQ,IAExC,IAAKG,MAAMF,GACT,OAAqB,IAAdA,EAGT,IAAIG,EAAalB,KAAKmB,MAAM,GAAKL,GAEjC,OAAKG,MAAMC,GArBW,IAsBbA,EAAajB,EAUjB,SAASmB,EAAgBC,GAC9B,IACE,OAAKA,GAAoB,oBAAPA,GAIXA,EAAGpJ,MAXY,cAYtB,MAAO7D,GAGP,MAfsB,kB,mECjYnB,SAASkN,EAAQC,GACtB,OAAQ7H,OAAOxE,UAAUS,SAAS6F,KAAK+F,IACrC,IAAK,iBAGL,IAAK,qBAGL,IAAK,wBACH,OAAO,EAET,QACE,OAAOC,EAAaD,EAAKE,QAWxB,SAASC,EAAaH,GAC3B,MAA+C,wBAAxC7H,OAAOxE,UAAUS,SAAS6F,KAAK+F,GAUjC,SAASI,EAAWJ,GACzB,MAA+C,sBAAxC7H,OAAOxE,UAAUS,SAAS6F,KAAK+F,GAUjC,SAASK,EAAeL,GAC7B,MAA+C,0BAAxC7H,OAAOxE,UAAUS,SAAS6F,KAAK+F,GAUjC,SAASM,EAASN,GACvB,MAA+C,oBAAxC7H,OAAOxE,UAAUS,SAAS6F,KAAK+F,GAUjC,SAASO,EAAYP,GAC1B,OAAe,OAARA,GAA+B,kBAARA,GAAmC,oBAARA,EAUpD,SAASQ,EAAcR,GAC5B,MAA+C,oBAAxC7H,OAAOxE,UAAUS,SAAS6F,KAAK+F,GAUjC,SAASS,EAAQT,GACtB,MAAwB,qBAAVU,OAAyBT,EAAaD,EAAKU,OAUpD,SAASC,EAAUX,GACxB,MAA0B,qBAAZY,SAA2BX,EAAaD,EAAKY,SAUtD,SAASC,EAASb,GACvB,MAA+C,oBAAxC7H,OAAOxE,UAAUS,SAAS6F,KAAK+F,GAOjC,SAASc,EAAWd,GAEzB,OAAOe,QAAQf,GAAOA,EAAI/N,MAA4B,oBAAb+N,EAAI/N,MAUxC,SAAS+O,EAAiBhB,GAC/B,OAAOQ,EAAcR,IAAQ,gBAAiBA,GAAO,mBAAoBA,GAAO,oBAAqBA,EAWhG,SAASC,EAAaD,EAAKiB,GAChC,IACE,OAAOjB,aAAeiB,EACtB,MAAOC,GACP,OAAO,GA9JX,2b,iCCAA,sEA6BIC,EAEJ,WASE,SAASA,EAAIC,EAAQrM,EAAOsM,QACZ,IAAVtM,IACFA,EAAQ,IAAI,UAGG,IAAbsM,IACFA,EAlCmB,GAqCrBhQ,KAAKgQ,SAAWA,EAGhBhQ,KAAKiQ,OAAS,GAEdjQ,KAAKiQ,OAAO/L,KAAK,CACf6L,OAAQA,EACRrM,MAAOA,IAGT1D,KAAKkQ,WAAWH,GAkalB,OA3ZAD,EAAIxN,UAAU6N,YAAc,SAAUC,GACpC,OAAOpQ,KAAKgQ,SAAWI,GAOzBN,EAAIxN,UAAU4N,WAAa,SAAUH,GACzB/P,KAAKqQ,cACXN,OAASA,EAETA,GAAUA,EAAOO,mBACnBP,EAAOO,qBAQXR,EAAIxN,UAAUiO,UAAY,WAExB,IAAIC,EAAQxQ,KAAKyQ,WACbC,EAAcF,EAAMxO,OAAS,EAAIwO,EAAMA,EAAMxO,OAAS,GAAG0B,WAAQ0C,EACjE1C,EAAQ,IAAMD,MAAMiN,GAKxB,OAJA1Q,KAAKyQ,WAAWvM,KAAK,CACnB6L,OAAQ/P,KAAK2Q,YACbjN,MAAOA,IAEFA,GAOToM,EAAIxN,UAAUsO,SAAW,WACvB,YAAiCxK,IAA1BpG,KAAKyQ,WAAWI,OAOzBf,EAAIxN,UAAUwO,UAAY,SAAU7M,GAClC,IAAIP,EAAQ1D,KAAKuQ,YAEjB,IACEtM,EAASP,GACT,QACA1D,KAAK4Q,aAQTd,EAAIxN,UAAUqO,UAAY,WACxB,OAAO3Q,KAAKqQ,cAAcN,QAK5BD,EAAIxN,UAAUyO,SAAW,WACvB,OAAO/Q,KAAKqQ,cAAc3M,OAK5BoM,EAAIxN,UAAUmO,SAAW,WACvB,OAAOzQ,KAAKiQ,QAKdH,EAAIxN,UAAU+N,YAAc,WAC1B,OAAOrQ,KAAKiQ,OAAOjQ,KAAKiQ,OAAOjO,OAAS,IAQ1C8N,EAAIxN,UAAU0O,iBAAmB,SAAUrG,EAAW9D,GACpD,IAAIoK,EAAUjR,KAAKkR,aAAe,cAC9BC,EAAYtK,EAKhB,IAAKA,EAAM,CACT,IAAIuK,OAAqB,EAEzB,IACE,MAAM,IAAIvC,MAAM,6BAChB,MAAOlE,GACPyG,EAAqBzG,EAGvBwG,EAAY,CACVE,kBAAmB1G,EACnByG,mBAAoBA,GAQxB,OAJApR,KAAKsR,cAAc,mBAAoB3G,EAAW,mBAAS,mBAAS,GAAIwG,GAAY,CAClFrG,SAAUmG,KAGLA,GAOTnB,EAAIxN,UAAUiP,eAAiB,SAAU7G,EAASvF,EAAO0B,GACvD,IAAIoK,EAAUjR,KAAKkR,aAAe,cAC9BC,EAAYtK,EAKhB,IAAKA,EAAM,CACT,IAAIuK,OAAqB,EAEzB,IACE,MAAM,IAAIvC,MAAMnE,GAChB,MAAOC,GACPyG,EAAqBzG,EAGvBwG,EAAY,CACVE,kBAAmB3G,EACnB0G,mBAAoBA,GAQxB,OAJApR,KAAKsR,cAAc,iBAAkB5G,EAASvF,EAAO,mBAAS,mBAAS,GAAIgM,GAAY,CACrFrG,SAAUmG,KAGLA,GAOTnB,EAAIxN,UAAUkP,aAAe,SAAU5K,EAAOC,GAC5C,IAAIoK,EAAUjR,KAAKkR,aAAe,cAMlC,OAJAlR,KAAKsR,cAAc,eAAgB1K,EAAO,mBAAS,mBAAS,GAAIC,GAAO,CACrEiE,SAAUmG,KAGLA,GAOTnB,EAAIxN,UAAUmP,YAAc,WAC1B,OAAOzR,KAAKkR,cAOdpB,EAAIxN,UAAU+D,cAAgB,SAAUC,EAAYO,GAClD,IAAI6K,EAAM1R,KAAKqQ,cAEf,GAAKqB,EAAIhO,OAAUgO,EAAI3B,OAAvB,CAKA,IAAIpL,EAAK+M,EAAI3B,OAAO4B,YAAcD,EAAI3B,OAAO4B,cAAgB,GACzDC,EAAKjN,EAAGkN,iBACRA,OAA0B,IAAPD,EAAgB,KAAOA,EAC1CE,EAAKnN,EAAG4B,eACRA,OAAwB,IAAPuL,EA1OC,IA0OqCA,EAE3D,KAAIvL,GAAkB,GAAtB,CAIA,IAAIE,EAAY,cAEZD,EAAmB,mBAAS,CAC9BC,UAAWA,GACVH,GAECyL,EAAkBF,EAAmB,aAAe,WACtD,OAAOA,EAAiBrL,EAAkBK,MACvCL,EAEmB,OAApBuL,GAIJL,EAAIhO,MAAM2C,cAAc0L,EAAiBjI,KAAKkI,IAAIzL,EAxPhC,SA+PpBuJ,EAAIxN,UAAU8B,QAAU,SAAUC,GAChC,IAAIqN,EAAM1R,KAAKqQ,cAEVqB,EAAIhO,OAITgO,EAAIhO,MAAMU,QAAQC,IAOpByL,EAAIxN,UAAUiC,QAAU,SAAUC,GAChC,IAAIkN,EAAM1R,KAAKqQ,cAEVqB,EAAIhO,OAITgO,EAAIhO,MAAMa,QAAQC,IAOpBsL,EAAIxN,UAAUsC,UAAY,SAAUC,GAClC,IAAI6M,EAAM1R,KAAKqQ,cAEVqB,EAAIhO,OAITgO,EAAIhO,MAAMkB,UAAUC,IAOtBiL,EAAIxN,UAAUmC,OAAS,SAAUC,EAAKrE,GACpC,IAAIqR,EAAM1R,KAAKqQ,cAEVqB,EAAIhO,OAITgO,EAAIhO,MAAMe,OAAOC,EAAKrE,IAOxByP,EAAIxN,UAAUwC,SAAW,SAAUJ,EAAKK,GACtC,IAAI2M,EAAM1R,KAAKqQ,cAEVqB,EAAIhO,OAITgO,EAAIhO,MAAMoB,SAASJ,EAAKK,IAQ1B+K,EAAIxN,UAAUiD,WAAa,SAAUF,EAAMG,GACzC,IAAIkM,EAAM1R,KAAKqQ,cAEVqB,EAAIhO,OAITgO,EAAIhO,MAAM6B,WAAWF,EAAMG,IAO7BsK,EAAIxN,UAAU2P,eAAiB,SAAUhO,GACvC,IAAIyN,EAAM1R,KAAKqQ,cAEXqB,EAAIhO,OAASgO,EAAI3B,QACnB9L,EAASyN,EAAIhO,QAQjBoM,EAAIxN,UAAU4P,IAAM,SAAUjO,GAC5B,IAAIkO,EAASC,EAASpS,MAEtB,IACEiE,EAASjE,MACT,QACAoS,EAASD,KAQbrC,EAAIxN,UAAU+P,eAAiB,SAAUC,GACvC,IAAIvC,EAAS/P,KAAK2Q,YAElB,IAAKZ,EACH,OAAO,KAGT,IACE,OAAOA,EAAOsC,eAAeC,GAC7B,MAAO/G,GAEP,OADA,IAAOgH,KAAK,+BAAiCD,EAAYvF,GAAK,yBACvD,OAQX+C,EAAIxN,UAAUkQ,UAAY,SAAUhN,GAClC,OAAOxF,KAAKyS,qBAAqB,YAAajN,IAOhDsK,EAAIxN,UAAUoQ,iBAAmB,SAAUlN,GACzC,OAAOxF,KAAKyS,qBAAqB,mBAAoBjN,IAOvDsK,EAAIxN,UAAUqQ,aAAe,WAC3B,OAAO3S,KAAKyS,qBAAqB,iBAWnC3C,EAAIxN,UAAUgP,cAAgB,SAAUsB,GAKtC,IAJA,IAAIjO,EAEAkO,EAAO,GAEFC,EAAK,EAAGA,EAAKC,UAAU/Q,OAAQ8Q,IACtCD,EAAKC,EAAK,GAAKC,UAAUD,GAG3B,IAAIpB,EAAM1R,KAAKqQ,cAEXqB,GAAOA,EAAI3B,QAAU2B,EAAI3B,OAAO6C,KAEjCjO,EAAK+M,EAAI3B,QAAQ6C,GAAQI,MAAMrO,EAAI,mBAASkO,EAAM,CAACnB,EAAIhO,UAU5DoM,EAAIxN,UAAUmQ,qBAAuB,SAAUG,GAG7C,IAFA,IAAIC,EAAO,GAEFC,EAAK,EAAGA,EAAKC,UAAU/Q,OAAQ8Q,IACtCD,EAAKC,EAAK,GAAKC,UAAUD,GAG3B,IAAIG,EAAUC,IACVC,EAASF,EAAQrL,WAErB,GAAIuL,GAAUA,EAAOC,YAAmD,oBAA9BD,EAAOC,WAAWR,GAC1D,OAAOO,EAAOC,WAAWR,GAAQI,MAAMhT,KAAM6S,GAG/C,IAAON,KAAK,oBAAsBK,EAAS,uCAGtC9C,EA9bT,GAocO,SAASoD,IACd,IAAID,EAAU,cAKd,OAJAA,EAAQrL,WAAaqL,EAAQrL,YAAc,CACzCwL,WAAY,GACZC,SAAKjN,GAEA6M,EAQF,SAASb,EAASiB,GACvB,IAAIC,EAAWJ,IACXf,EAASoB,EAAkBD,GAE/B,OADAE,EAAgBF,EAAUD,GACnBlB,EAUF,SAASsB,IAEd,IAAIH,EAAWJ,IAOf,OALKQ,EAAgBJ,KAAaC,EAAkBD,GAAUnD,YAvfvC,IAwfrBqD,EAAgBF,EAAU,IAAIxD,GAI5B,cAYN,SAAgCwD,GAC9B,IACE,IAEIH,EADUD,IACOtL,WAErB,IAAKuL,IAAWA,EAAOC,aAAeD,EAAOC,WAAmB,OAC9D,OAAOG,EAAkBD,GAI3B,IAEIK,EAFSR,EAAOC,WAAmB,OAEbQ,OAE1B,IAAKD,EACH,OAAOJ,EAAkBD,GAI3B,IAAKI,EAAgBC,IAAiBJ,EAAkBI,GAAcxD,YA5hBjD,GA4hB2E,CAC9F,IAAI0D,EAAsBN,EAAkBD,GAAUjD,cACtDmD,EAAgBG,EAAc,IAAI7D,EAAI+D,EAAoB9D,OAAQ,IAAMtM,MAAMoQ,EAAoBnQ,SAIpG,OAAO6P,EAAkBI,GACzB,MAAOG,GAEP,OAAOP,EAAkBD,IAxClBS,CAAuBT,GAIzBC,EAAkBD,GA6C3B,SAASI,EAAgBT,GACvB,SAAIA,GAAWA,EAAQrL,YAAcqL,EAAQrL,WAAWyL,KAcnD,SAASE,EAAkBN,GAChC,OAAIA,GAAWA,EAAQrL,YAAcqL,EAAQrL,WAAWyL,MAIxDJ,EAAQrL,WAAaqL,EAAQrL,YAAc,GAC3CqL,EAAQrL,WAAWyL,IAAM,IAAIvD,GAJpBmD,EAAQrL,WAAWyL,IAavB,SAASG,EAAgBP,EAASI,GACvC,QAAKJ,IAILA,EAAQrL,WAAaqL,EAAQrL,YAAc,GAC3CqL,EAAQrL,WAAWyL,IAAMA,GAClB,K,qCC/lBLW,E,4GAGJ,IAAIC,EAEJ,WACE,SAASA,IAIPjU,KAAKqF,KAAO4O,EAAiBlH,GA4B/B,OArBAkH,EAAiB3R,UAAU4R,UAAY,WAErCF,EAA2BG,SAAS7R,UAAUS,SAE9CoR,SAAS7R,UAAUS,SAAW,WAG5B,IAFA,IAAI8P,EAAO,GAEFC,EAAK,EAAGA,EAAKC,UAAU/Q,OAAQ8Q,IACtCD,EAAKC,GAAMC,UAAUD,GAGvB,IAAItN,EAAUxF,KAAKmL,qBAAuBnL,KAC1C,OAAOgU,EAAyBhB,MAAMxN,EAASqN,KAQnDoB,EAAiBlH,GAAK,mBACfkH,EAjCT,G,iDCAIG,EAAwB,CAAC,oBAAqB,iDAG9C,EAEJ,WACE,SAASC,EAAeC,QACL,IAAbA,IACFA,EAAW,IAGbtU,KAAKsU,SAAWA,EAKhBtU,KAAKqF,KAAOgP,EAAetH,GAuL7B,OAhLAsH,EAAe/R,UAAU4R,UAAY,WACnC,aAAwB,SAAUtN,GAChC,IAAIyM,EAAM,cAEV,IAAKA,EACH,OAAOzM,EAGT,IAAIqC,EAAOoK,EAAIhB,eAAegC,GAE9B,GAAIpL,EAAM,CACR,IAAI8G,EAASsD,EAAI1C,YACb4D,EAAgBxE,EAASA,EAAO4B,aAAe,GAE/C6C,EAAUvL,EAAKwL,cAAcF,GAEjC,GAAItL,EAAKyL,iBAAiB9N,EAAO4N,GAC/B,OAAO,KAIX,OAAO5N,MAMXyN,EAAe/R,UAAUoS,iBAAmB,SAAU9N,EAAO4N,GAC3D,OAAIxU,KAAK2U,eAAe/N,EAAO4N,IAC7BI,EAAA,EAAOrC,KAAK,6DAA+D,YAAoB3L,KACxF,GAGL5G,KAAK6U,gBAAgBjO,EAAO4N,IAC9BI,EAAA,EAAOrC,KAAK,wEAA0E,YAAoB3L,KACnG,GAGL5G,KAAK8U,aAAalO,EAAO4N,IAC3BI,EAAA,EAAOrC,KAAK,oEAAsE,YAAoB3L,GAAS,WAAa5G,KAAK+U,mBAAmBnO,KAC7I,IAGJ5G,KAAKgV,cAAcpO,EAAO4N,KAC7BI,EAAA,EAAOrC,KAAK,yEAA2E,YAAoB3L,GAAS,WAAa5G,KAAK+U,mBAAmBnO,KAClJ,IAQXyN,EAAe/R,UAAUqS,eAAiB,SAAU/N,EAAO4N,GACzD,IAAKA,EAAQS,eACX,OAAO,EAGT,IACE,OAAOrO,GAASA,EAAM+D,WAAa/D,EAAM+D,UAAUC,QAAUhE,EAAM+D,UAAUC,OAAO,IAAyC,gBAAnChE,EAAM+D,UAAUC,OAAO,GAAGC,OAA0B,EAC9I,MAAOU,GACP,OAAO,IAMX8I,EAAe/R,UAAUuS,gBAAkB,SAAUjO,EAAO4N,GAC1D,SAAKA,EAAQU,eAAiBV,EAAQU,aAAalT,SAI5ChC,KAAKmV,0BAA0BvO,GAAOwO,MAAK,SAAU1K,GAE1D,OAAO8J,EAAQU,aAAaE,MAAK,SAAUC,GACzC,OAAO,YAAkB3K,EAAS2K,UAOxChB,EAAe/R,UAAUwS,aAAe,SAAUlO,EAAO4N,GAEvD,IAAKA,EAAQc,WAAad,EAAQc,SAAStT,OACzC,OAAO,EAGT,IAAIiI,EAAMjK,KAAK+U,mBAAmBnO,GAElC,QAAQqD,GAAcuK,EAAQc,SAASF,MAAK,SAAUC,GACpD,OAAO,YAAkBpL,EAAKoL,OAMlChB,EAAe/R,UAAU0S,cAAgB,SAAUpO,EAAO4N,GAExD,IAAKA,EAAQe,YAAcf,EAAQe,UAAUvT,OAC3C,OAAO,EAGT,IAAIiI,EAAMjK,KAAK+U,mBAAmBnO,GAElC,OAAQqD,GAAauK,EAAQe,UAAUH,MAAK,SAAUC,GACpD,OAAO,YAAkBpL,EAAKoL,OAMlChB,EAAe/R,UAAUmS,cAAgB,SAAUF,GAKjD,YAJsB,IAAlBA,IACFA,EAAgB,IAGX,CACLgB,UAAW,mBAASvV,KAAKsU,SAASkB,eAAiB,GAAIxV,KAAKsU,SAASiB,WAAa,GAAIhB,EAAciB,eAAiB,GAAIjB,EAAcgB,WAAa,IACpJD,SAAU,mBAAStV,KAAKsU,SAASmB,eAAiB,GAAIzV,KAAKsU,SAASgB,UAAY,GAAIf,EAAckB,eAAiB,GAAIlB,EAAce,UAAY,IACjJJ,aAAc,mBAASlV,KAAKsU,SAASY,cAAgB,GAAIX,EAAcW,cAAgB,GAAId,GAC3Fa,eAAwD,qBAAjCjV,KAAKsU,SAASW,gBAAiCjV,KAAKsU,SAASW,iBAMxFZ,EAAe/R,UAAU6S,0BAA4B,SAAUvO,GAC7D,GAAIA,EAAM8D,QACR,MAAO,CAAC9D,EAAM8D,SAGhB,GAAI9D,EAAM+D,UACR,IACE,IAAIhG,EAAKiC,EAAM+D,UAAUC,QAAUhE,EAAM+D,UAAUC,OAAO,IAAM,GAC5DgH,EAAKjN,EAAGkG,KACRA,OAAc,IAAP+G,EAAgB,GAAKA,EAC5BE,EAAKnN,EAAGtE,MACRA,OAAe,IAAPyR,EAAgB,GAAKA,EAEjC,MAAO,CAAC,GAAKzR,EAAOwK,EAAO,KAAOxK,GAClC,MAAOuL,GAEP,OADAgJ,EAAA,EAAOc,MAAM,oCAAsC,YAAoB9O,IAChE,GAIX,MAAO,IAKTyN,EAAe/R,UAAUyS,mBAAqB,SAAUnO,GACtD,IACE,GAAIA,EAAM+O,WAAY,CACpB,IAAIC,EAAWhP,EAAM+O,WAAWE,OAChC,OAAOD,GAAYA,EAASA,EAAS5T,OAAS,GAAG8T,UAAY,KAG/D,GAAIlP,EAAM+D,UAAW,CACnB,IAAIoL,EAAWnP,EAAM+D,UAAUC,QAAUhE,EAAM+D,UAAUC,OAAO,GAAG+K,YAAc/O,EAAM+D,UAAUC,OAAO,GAAG+K,WAAWE,OACtH,OAAOE,GAAYA,EAASA,EAAS/T,OAAS,GAAG8T,UAAY,KAG/D,OAAO,KACP,MAAOlK,GAEP,OADAgJ,EAAA,EAAOc,MAAM,gCAAkC,YAAoB9O,IAC5D,OAQXyN,EAAetH,GAAK,iBACbsH,EAlMT,G,aCVW2B,EAAiBlP,OAAOkP,iBAAmB,CACpDC,UAAW,cACAnU,MAMb,SAAoBsG,EAAK8N,GAGvB,OADA9N,EAAI6N,UAAYC,EACT9N,GAQT,SAAyBA,EAAK8N,GAC5B,IAAK,IAAIC,KAAQD,EAEV9N,EAAIgO,eAAeD,KAEtB/N,EAAI+N,GAAQD,EAAMC,IAItB,OAAO/N,ICxBT,IAAI,EAEJ,SAAUiO,GAGR,SAASC,EAAY5L,GACnB,IAAI6L,EAAavW,KAAKwW,YAElBzW,EAAQsW,EAAOzN,KAAK5I,KAAM0K,IAAY1K,KAK1C,OAHAD,EAAM2K,QAAUA,EAChB3K,EAAMsF,KAAOkR,EAAWjU,UAAUkU,YAAYnR,KAC9C2Q,EAAejW,EAAOwW,EAAWjU,WAC1BvC,EAGT,OAbA,oBAAUuW,EAAaD,GAahBC,EAdT,CAeEzH,OCjBE4H,EAAY,iEAMZ,EAEJ,WAEE,SAASC,EAAIC,GACS,kBAATA,EACT3W,KAAK4W,YAAYD,GAEjB3W,KAAK6W,gBAAgBF,GAGvB3W,KAAK8W,YAiHP,OApGAJ,EAAIpU,UAAUS,SAAW,SAAUgU,QACZ,IAAjBA,IACFA,GAAe,GAGjB,IAAIpS,EAAK3E,KACLqK,EAAO1F,EAAG0F,KACVC,EAAO3F,EAAG2F,KACV0M,EAAOrS,EAAGqS,KACVC,EAAOtS,EAAGsS,KACVC,EAAYvS,EAAGuS,UAInB,OAHevS,EAAG4F,SAGA,MAFP5F,EAAGN,MAEoB0S,GAAgBC,EAAO,IAAMA,EAAO,IAAO,IAAM3M,GAAQ4M,EAAO,IAAMA,EAAO,IAAM,KAAO3M,EAAOA,EAAO,IAAMA,GAAQ4M,GAK1JR,EAAIpU,UAAUsU,YAAc,SAAUO,GACpC,IAAIjN,EAAQuM,EAAUW,KAAKD,GAE3B,IAAKjN,EACH,MAAM,IAAI,EAlDI,eAqDhB,IAAIvF,EAAK,iBAAOuF,EAAM/I,MAAM,GAAI,GAC5BoJ,EAAW5F,EAAG,GACdN,EAAOM,EAAG,GACViN,EAAKjN,EAAG,GACRqS,OAAc,IAAPpF,EAAgB,GAAKA,EAC5BvH,EAAO1F,EAAG,GACVmN,EAAKnN,EAAG,GACRsS,OAAc,IAAPnF,EAAgB,GAAKA,EAG5BxH,EAAO,GACP4M,EAHWvS,EAAG,GAIdqI,EAAQkK,EAAUlK,MAAM,KAO5B,GALIA,EAAMhL,OAAS,IACjBsI,EAAO0C,EAAM7L,MAAM,GAAI,GAAGqL,KAAK,KAC/B0K,EAAYlK,EAAM6D,OAGhBqG,EAAW,CACb,IAAIG,EAAeH,EAAUhN,MAAM,QAE/BmN,IACFH,EAAYG,EAAa,IAI7BrX,KAAK6W,gBAAgB,CACnBxM,KAAMA,EACN2M,KAAMA,EACN1M,KAAMA,EACN4M,UAAWA,EACXD,KAAMA,EACN1M,SAAUA,EACVlG,KAAMA,KAMVqS,EAAIpU,UAAUuU,gBAAkB,SAAUS,GACxCtX,KAAKuK,SAAW+M,EAAW/M,SAC3BvK,KAAKqE,KAAOiT,EAAWjT,KACvBrE,KAAKgX,KAAOM,EAAWN,MAAQ,GAC/BhX,KAAKqK,KAAOiN,EAAWjN,KACvBrK,KAAKiX,KAAOK,EAAWL,MAAQ,GAC/BjX,KAAKsK,KAAOgN,EAAWhN,MAAQ,GAC/BtK,KAAKkX,UAAYI,EAAWJ,WAK9BR,EAAIpU,UAAUwU,UAAY,WACxB,IAAI/W,EAAQC,KAQZ,GANA,CAAC,WAAY,OAAQ,OAAQ,aAAaoB,SAAQ,SAAUmW,GAC1D,IAAKxX,EAAMwX,GACT,MAAM,IAAI,EAAYC,gBAAuBD,EAAY,gBAIxDvX,KAAKkX,UAAUhN,MAAM,SACxB,MAAM,IAAI,EAAYsN,kCAAyCxX,KAAKkX,WAGtE,GAAsB,SAAlBlX,KAAKuK,UAAyC,UAAlBvK,KAAKuK,SACnC,MAAM,IAAI,EAAYiN,iCAAwCxX,KAAKuK,UAGrE,GAAIvK,KAAKiX,MAAQ5I,MAAMD,SAASpO,KAAKiX,KAAM,KACzC,MAAM,IAAI,EAAYO,6BAAoCxX,KAAKiX,OAI5DP,EA1HT,G,gBCTWe,EAAwB,GAgE5B,SAASnH,EAAkBkE,GAChC,IAAIkD,EAAe,GAKnB,OAnEK,SAAgClD,GACrC,IAAImD,EAAsBnD,EAAQmD,qBAAuB,mBAASnD,EAAQmD,sBAAwB,GAC9FC,EAAmBpD,EAAQkD,aAC3BA,EAAe,GAEnB,GAAI5V,MAAMC,QAAQ6V,GAAmB,CACnC,IAAIC,EAA0BD,EAAiBE,KAAI,SAAUvP,GAC3D,OAAOA,EAAElD,QAEP0S,EAA4B,GAEhCJ,EAAoBvW,SAAQ,SAAU4W,IAC8B,IAA9DH,EAAwBI,QAAQD,EAAmB3S,QAAgF,IAAhE0S,EAA0BE,QAAQD,EAAmB3S,QAC1HqS,EAAaxT,KAAK8T,GAClBD,EAA0B7T,KAAK8T,EAAmB3S,UAItDuS,EAAiBxW,SAAQ,SAAU8W,IACgC,IAA7DH,EAA0BE,QAAQC,EAAgB7S,QACpDqS,EAAaxT,KAAKgU,GAClBH,EAA0B7T,KAAKgU,EAAgB7S,cAGd,oBAArBuS,GAChBF,EAAeE,EAAiBD,GAChCD,EAAe5V,MAAMC,QAAQ2V,GAAgBA,EAAe,CAACA,IAE7DA,EAAe,mBAASC,GAI1B,IAAIQ,EAAoBT,EAAaI,KAAI,SAAUvP,GACjD,OAAOA,EAAElD,QAQX,OAJoD,IAAhD8S,EAAkBF,QAFA,UAGpBP,EAAaxT,KAAK8O,MAAM0E,EAAc,mBAASA,EAAahP,OAAOyP,EAAkBF,QAHjE,SAG2F,KAG1GP,EAsBPU,CAAuB5D,GAASpT,SAAQ,SAAUkR,GAChDoF,EAAapF,EAAYjN,MAAQiN,EAnB9B,SAA0BA,IAC0B,IAArDmF,EAAsBQ,QAAQ3F,EAAYjN,QAI9CiN,EAAY4B,UAAU,IAAyB,KAC/CuD,EAAsBvT,KAAKoO,EAAYjN,MACvCuP,EAAA,EAAOyD,IAAI,0BAA4B/F,EAAYjN,OAajDiT,CAAiBhG,MAEZoF,EClCT,ICrCWa,EDqCP,EAEJ,WAOE,SAASC,EAAWC,EAAcjE,GAEhCxU,KAAK0Y,cAAgB,GAGrB1Y,KAAK2Y,aAAc,EACnB3Y,KAAK4Y,SAAW,IAAIH,EAAajE,GACjCxU,KAAKsU,SAAWE,EAEZA,EAAQqE,MACV7Y,KAAK8Y,KAAO,IAAI,EAAItE,EAAQqE,MA4bhC,OAnbAL,EAAWlW,UAAU0O,iBAAmB,SAAUrG,EAAW9D,EAAMnD,GACjE,IAAI3D,EAAQC,KAERiR,EAAUpK,GAAQA,EAAKiE,SAO3B,OANA9K,KAAK2Y,aAAc,EAEnB3Y,KAAK+Y,cAAcC,mBAAmBrO,EAAW9D,GAAMjG,MAAK,SAAUgG,GACpEqK,EAAUlR,EAAMyR,aAAa5K,EAAOC,EAAMnD,MAGrCuN,GAOTuH,EAAWlW,UAAUiP,eAAiB,SAAU7G,EAASvF,EAAO0B,EAAMnD,GACpE,IAAI3D,EAAQC,KAERiR,EAAUpK,GAAQA,EAAKiE,SAO3B,OANA9K,KAAK2Y,aAAc,GACC,OAAAM,EAAA,GAAYvO,GAAW1K,KAAK+Y,cAAcG,iBAAiB,GAAKxO,EAASvF,EAAO0B,GAAQ7G,KAAK+Y,cAAcC,mBAAmBtO,EAAS7D,IAE7IjG,MAAK,SAAUgG,GAC3BqK,EAAUlR,EAAMyR,aAAa5K,EAAOC,EAAMnD,MAErCuN,GAOTuH,EAAWlW,UAAUkP,aAAe,SAAU5K,EAAOC,EAAMnD,GACzD,IAAI3D,EAAQC,KAERiR,EAAUpK,GAAQA,EAAKiE,SAY3B,OAXA9K,KAAK2Y,aAAc,EAEnB3Y,KAAKmZ,cAAcvS,EAAOC,EAAMnD,GAAO9C,MAAK,SAAUwY,GAEpDnI,EAAUmI,GAAcA,EAAWtO,SACnC/K,EAAM4Y,aAAc,KACnB/X,KAAK,MAAM,SAAUH,GACtBmU,EAAA,EAAOc,MAAMjV,GACbV,EAAM4Y,aAAc,KAGf1H,GAOTuH,EAAWlW,UAAU+W,OAAS,WAC5B,OAAOrZ,KAAK8Y,MAOdN,EAAWlW,UAAUqP,WAAa,WAChC,OAAO3R,KAAKsU,UAOdkE,EAAWlW,UAAUgX,MAAQ,SAAUC,GACrC,IAAIxZ,EAAQC,KAEZ,OAAOA,KAAKwZ,oBAAoBD,GAAS3Y,MAAK,SAAU6Y,GAEtD,OADAC,cAAcD,EAAOE,UACd5Z,EAAMgZ,cAAca,eAAeC,MAAMN,GAAS3Y,MAAK,SAAUkZ,GACtE,OAAOL,EAAOM,OAASD,SAS7BtB,EAAWlW,UAAUuX,MAAQ,SAAUN,GACrC,IAAIxZ,EAAQC,KAEZ,OAAOA,KAAKsZ,MAAMC,GAAS3Y,MAAK,SAAU6B,GAExC,OADA1C,EAAM4R,aAAaqI,SAAU,EACtBvX,MAQX+V,EAAWlW,UAAUgO,kBAAoB,WACnCtQ,KAAKia,eACPja,KAAK0Y,cAAgBpI,EAAkBtQ,KAAKsU,YAQhDkE,EAAWlW,UAAU+P,eAAiB,SAAUC,GAC9C,IACE,OAAOtS,KAAK0Y,cAAcpG,EAAYvF,KAAO,KAC7C,MAAOxB,GAEP,OADAqJ,EAAA,EAAOrC,KAAK,+BAAiCD,EAAYvF,GAAK,4BACvD,OAMXyL,EAAWlW,UAAUkX,oBAAsB,SAAUD,GACnD,IAAIxZ,EAAQC,KAEZ,OAAO,IAAI,KAAY,SAAUyB,GAC/B,IAAIyY,EAAS,EAETP,EAAW,EACfD,cAAcC,GACdA,EAAWQ,aAAY,WAChBpa,EAAM4Y,aAMTuB,GAVO,EAYHX,GAAWW,GAAUX,GACvB9X,EAAQ,CACNkY,SAAUA,EACVI,OAAO,KAVXtY,EAAQ,CACNkY,SAAUA,EACVI,OAAO,MAPF,OAyBfvB,EAAWlW,UAAUyW,YAAc,WACjC,OAAO/Y,KAAK4Y,UAKdJ,EAAWlW,UAAU2X,WAAa,WAChC,OAAqC,IAA9Bja,KAAK2R,aAAaqI,cAAmC5T,IAAdpG,KAAK8Y,MAkBrDN,EAAWlW,UAAU8X,cAAgB,SAAUxT,EAAOlD,EAAOmD,GAC3D,IAAI9G,EAAQC,KAER2E,EAAK3E,KAAK2R,aAAa0I,eACvBA,OAAwB,IAAP1V,EAAgB,EAAIA,EAErC2V,EAAW,mBAAS,mBAAS,GAAI1T,GAAQ,CAC3CkE,SAAUlE,EAAMkE,WAAajE,GAAQA,EAAKiE,SAAWjE,EAAKiE,SAAW,eACrErE,UAAWG,EAAMH,WAAa,gBAGhCzG,KAAKua,oBAAoBD,GAEzBta,KAAKwa,2BAA2BF,GAIhC,IAAIG,EAAa/W,EAEbmD,GAAQA,EAAKb,iBACfyU,EAAa,IAAMhX,MAAMgX,GAAY1U,OAAOc,EAAKb,iBAInD,IAAIvD,EAAS,IAAYhB,QAAQ6Y,GAQjC,OALIG,IAEFhY,EAASgY,EAAW9T,aAAa2T,EAAUzT,IAGtCpE,EAAO7B,MAAK,SAAU8Z,GAC3B,MAA8B,kBAAnBL,GAA+BA,EAAiB,EAClDta,EAAM4a,gBAAgBD,EAAKL,GAG7BK,MAeXlC,EAAWlW,UAAUqY,gBAAkB,SAAU/T,EAAOgU,GACtD,IAAKhU,EACH,OAAO,KAGT,IAAIiU,EAAa,mBAAS,mBAAS,mBAAS,mBAAS,mBAAS,GAAIjU,GAAQA,EAAMQ,aAAe,CAC7FA,YAAaR,EAAMQ,YAAY0Q,KAAI,SAAUgD,GAC3C,OAAO,mBAAS,mBAAS,GAAIA,GAAIA,EAAEC,MAAQ,CACzCA,KAAM,YAAUD,EAAEC,KAAMH,UAG1BhU,EAAMvC,MAAQ,CAChBA,KAAM,YAAUuC,EAAMvC,KAAMuW,KAC1BhU,EAAMV,UAAY,CACpBA,SAAU,YAAUU,EAAMV,SAAU0U,KAClChU,EAAM7B,OAAS,CACjBA,MAAO,YAAU6B,EAAM7B,MAAO6V,KAehC,OALIhU,EAAMV,UAAYU,EAAMV,SAASe,QAEnC4T,EAAW3U,SAASe,MAAQL,EAAMV,SAASe,OAGtC4T,GAUTrC,EAAWlW,UAAUiY,oBAAsB,SAAU3T,GACnD,IAAIjC,EAAK3E,KAAK2R,aACVqJ,EAAcrW,EAAGqW,YACjBC,EAAUtW,EAAGsW,QACbC,EAAOvW,EAAGuW,KACVtJ,EAAKjN,EAAGwW,eACRA,OAAwB,IAAPvJ,EAAgB,IAAMA,OAEjBxL,IAAtBQ,EAAMoU,kBAA6C5U,IAAhB4U,IACrCpU,EAAMoU,YAAcA,QAGA5U,IAAlBQ,EAAMqU,cAAqC7U,IAAZ6U,IACjCrU,EAAMqU,QAAUA,QAGC7U,IAAfQ,EAAMsU,WAA+B9U,IAAT8U,IAC9BtU,EAAMsU,KAAOA,GAGXtU,EAAM8D,UACR9D,EAAM8D,QAAU,YAAS9D,EAAM8D,QAASyQ,IAG1C,IAAIxQ,EAAY/D,EAAM+D,WAAa/D,EAAM+D,UAAUC,QAAUhE,EAAM+D,UAAUC,OAAO,GAEhFD,GAAaA,EAAUtK,QACzBsK,EAAUtK,MAAQ,YAASsK,EAAUtK,MAAO8a,IAG9C,IAAIzN,EAAU9G,EAAM8G,QAEhBA,GAAWA,EAAQzD,MACrByD,EAAQzD,IAAM,YAASyD,EAAQzD,IAAKkR,KASxC3C,EAAWlW,UAAUkY,2BAA6B,SAAU5T,GAC1D,IAAIwU,EAAUxU,EAAMyU,IAChBC,EAAoBxU,OAAOC,KAAK/G,KAAK0Y,eAErC0C,GAAWE,EAAkBtZ,OAAS,IACxCoZ,EAAQ1D,aAAe4D,IAS3B9C,EAAWlW,UAAUiZ,WAAa,SAAU3U,GAC1C5G,KAAK+Y,cAAcyC,UAAU5U,IAiB/B4R,EAAWlW,UAAU6W,cAAgB,SAAUvS,EAAOC,EAAMnD,GAC1D,IAAI3D,EAAQC,KAGR2E,EAAK3E,KAAK2R,aACV8J,EAAa9W,EAAG8W,WAChBC,EAAa/W,EAAG+W,WAEpB,IAAK1b,KAAKia,aACR,OAAO,IAAYvY,OAAO,yCAG5B,IAAIia,EAA+B,gBAAf/U,EAAMiE,KAI1B,OAAK8Q,GAAuC,kBAAfD,GAA2B5R,KAAKC,SAAW2R,EAC/D,IAAYha,OAAO,qDAGrB,IAAI,KAAY,SAAUD,EAASC,GACxC3B,EAAMqa,cAAcxT,EAAOlD,EAAOmD,GAAMjG,MAAK,SAAU0Z,GACrD,GAAiB,OAAbA,EAAJ,CAKA,IAAIlB,EAAakB,EAGjB,GAF0BzT,GAAQA,EAAKkU,OAAiC,IAAzBlU,EAAKkU,KAAKa,aAE7BH,GAAcE,EAIxC,OAHA5b,EAAMwb,WAAWnC,QAEjB3X,EAAQ2X,GAIV,IAAIyC,EAAmBJ,EAAWnB,EAAUzT,GAE5C,GAAgC,qBAArBgV,EACTjH,EAAA,EAAOc,MAAM,mEACR,GAAI,OAAAuD,EAAA,GAAW4C,GACpB9b,EAAM+b,uBAAuBD,EAAkBpa,EAASC,OACnD,CAGL,GAAmB,QAFnB0X,EAAayC,GAKX,OAFAjH,EAAA,EAAOyD,IAAI,2DACX5W,EAAQ,MAKV1B,EAAMwb,WAAWnC,GAEjB3X,EAAQ2X,SAhCR1X,EAAO,6DAkCRd,KAAK,MAAM,SAAUH,GACtBV,EAAMiR,iBAAiBvQ,EAAQ,CAC7Bsa,KAAM,CACJa,YAAY,GAEdvK,kBAAmB5Q,IAGrBiB,EAAO,8HAAgIjB,UAS7I+X,EAAWlW,UAAUwZ,uBAAyB,SAAUL,EAAYha,EAASC,GAC3E,IAAI3B,EAAQC,KAEZyb,EAAW7a,MAAK,SAAUmb,GACD,OAAnBA,GAMJhc,EAAMwb,WAAWQ,GAEjBta,EAAQsa,IAPNra,EAAO,yDAQRd,KAAK,MAAM,SAAUY,GACtBE,EAAO,4BAA8BF,OAIlCgX,EA7cT,ICrCA,SAAWD,GAETA,EAAgB,QAAI,UAGpBA,EAAgB,QAAI,UAGpBA,EAAgB,QAAI,UAGpBA,EAAkB,UAAI,aAGtBA,EAAgB,QAAI,UAGpBA,EAAe,OAAI,SAjBrB,CAkBGA,IAAWA,EAAS,KAGvB,SAAWA,GA2BTA,EAAOyD,aApBP,SAAsBC,GACpB,OAAIA,GAAQ,KAAOA,EAAO,IACjB1D,EAAO2D,QAGH,MAATD,EACK1D,EAAO4D,UAGZF,GAAQ,KAAOA,EAAO,IACjB1D,EAAO6D,QAGZH,GAAQ,IACH1D,EAAO8D,OAGT9D,EAAO+D,SAxBlB,CA4BG/D,IAAWA,EAAS,KCjDvB,ICFWgE,EDEP,EAEJ,WACE,SAASC,KAqBT,OAfAA,EAAcla,UAAUkZ,UAAY,SAAU7Z,GAC5C,OAAO,IAAYF,QAAQ,CACzBhB,OAAQ,sEACRgZ,OAAQlB,EAAOkE,WAQnBD,EAAcla,UAAUuX,MAAQ,SAAUlY,GACxC,OAAO,IAAYF,SAAQ,IAGtB+a,EAtBT,GECI,EAEJ,WAEE,SAASE,EAAYlI,GACnBxU,KAAKsU,SAAWE,EAEXxU,KAAKsU,SAASuE,KACjBjE,EAAA,EAAOrC,KAAK,kDAGdvS,KAAK2c,WAAa3c,KAAK4c,kBA8CzB,OAtCAF,EAAYpa,UAAU0W,mBAAqB,SAAU6D,EAAYC,GAC/D,MAAM,IAAI,EAAY,yDAOxBJ,EAAYpa,UAAU4W,iBAAmB,SAAU6D,EAAUnZ,EAAQkZ,GACnE,MAAM,IAAI,EAAY,uDAOxBJ,EAAYpa,UAAUkZ,UAAY,SAAU5U,GAC1C5G,KAAK2c,WAAWnB,UAAU5U,GAAOhG,KAAK,MAAM,SAAUH,GACpDmU,EAAA,EAAOc,MAAM,8BAAgCjV,OAQjDic,EAAYpa,UAAUsX,aAAe,WACnC,OAAO5Z,KAAK2c,YAOdD,EAAYpa,UAAUsa,gBAAkB,WACtC,OAAO,IAAI,GAGNF,EAvDT,GCgDO,SAASM,IACd,KAAM,UAAW,eACf,OAAO,EAGT,IAIE,OAHA,IAAIC,QACJ,IAAIC,QAAQ,IACZ,IAAIC,UACG,EACP,MAAO3b,GACP,OAAO,GAQX,SAAS4b,EAAcC,GACrB,OAAOA,GAAQ,mDAAmDC,KAAKD,EAAKta,YA+DvE,SAASwa,IAKd,IAAKP,IACH,OAAO,EAGT,IAIE,OAHA,IAAIE,QAAQ,IAAK,CACfM,eAAgB,YAEX,EACP,MAAOhc,GACP,OAAO,IFvJX,SAAW+a,GAETA,EAAgB,MAAI,QAGpBA,EAAgB,MAAI,QAGpBA,EAAkB,QAAI,UAGtBA,EAAc,IAAI,MAGlBA,EAAe,KAAI,OAGnBA,EAAgB,MAAI,QAGpBA,EAAmB,SAAI,WApBzB,CAqBGA,IAAaA,EAAW,KAG3B,SAAWA,GAkCTA,EAASkB,WA3BT,SAAoBtY,GAClB,OAAQA,GACN,IAAK,QACH,OAAOoX,EAASmB,MAElB,IAAK,OACH,OAAOnB,EAASoB,KAElB,IAAK,OACL,IAAK,UACH,OAAOpB,EAASqB,QAElB,IAAK,QACH,OAAOrB,EAAS1N,MAElB,IAAK,QACH,OAAO0N,EAASsB,MAElB,IAAK,WACH,OAAOtB,EAASuB,SAElB,IAAK,MACL,QACE,OAAOvB,EAASwB,MA9BxB,CAmCGxB,IAAaA,EAAW,KGzD3B,IAEI,EAAS,6JAITyB,EAAQ,oLACRC,EAAQ,gHACRC,EAAY,gDACZC,EAAa,gCAEbC,EAAsB,8BAInB,SAASC,EAAkBC,GAChC,IAAI9N,EAAQ,KACR+N,EAAU,EAEVD,IAC4B,kBAAnBA,EAAGE,YACZD,EAAUD,EAAGE,YACJJ,EAAoBd,KAAKgB,EAAG5T,WACrC6T,EAAU,IAId,IAME,GAFA/N,EAwHJ,SAA6C8N,GAC3C,IAAKA,IAAOA,EAAG3I,WACb,OAAO,KAaT,IAPA,IAKI8I,EALA9I,EAAa2I,EAAG3I,WAChB+I,EAAe,8DACfC,EAAe,sGACfC,EAAQjJ,EAAW3I,MAAM,MACzBwD,EAAQ,GAGHqO,EAAO,EAAGA,EAAOD,EAAM5c,OAAQ6c,GAAQ,EAAG,CACjD,IAAIC,EAAU,MAEVL,EAAQC,EAAatH,KAAKwH,EAAMC,KAClCC,EAAU,CACR7U,IAAKwU,EAAM,GACXpB,KAAMoB,EAAM,GACZ5L,KAAM,GACNgM,MAAOJ,EAAM,GACbM,OAAQ,OAEDN,EAAQE,EAAavH,KAAKwH,EAAMC,OACzCC,EAAU,CACR7U,IAAKwU,EAAM,GACXpB,KAAMoB,EAAM,IAAMA,EAAM,GACxB5L,KAAM4L,EAAM,GAAKA,EAAM,GAAGzR,MAAM,KAAO,GACvC6R,MAAOJ,EAAM,GACbM,QAASN,EAAM,KAIfK,KACGA,EAAQzB,MAAQyB,EAAQD,OAC3BC,EAAQzB,KA7LO,KAgMjB7M,EAAMtM,KAAK4a,IAIf,IAAKtO,EAAMxO,OACT,OAAO,KAGT,MAAO,CACL0I,QAASsU,EAAeV,GACxBjZ,KAAMiZ,EAAGjZ,KACTmL,MAAOA,GA5KCyO,CAAoCX,GAG1C,OAAOY,EAAU1O,EAAO+N,GAE1B,MAAO/c,IAGT,IAGE,GAFAgP,EAkBJ,SAAwC8N,GACtC,IAAKA,IAAOA,EAAG9N,MACb,OAAO,KAUT,IAPA,IAGI2O,EACAV,EACAK,EALAtO,EAAQ,GACRoO,EAAQN,EAAG9N,MAAMxD,MAAM,MAMlBzE,EAAI,EAAGA,EAAIqW,EAAM5c,SAAUuG,EAAG,CACrC,GAAIkW,EAAQ,EAAOrH,KAAKwH,EAAMrW,IAAK,CACjC,IAAI6W,EAAWX,EAAM,IAAqC,IAA/BA,EAAM,GAAGxG,QAAQ,UAEnCwG,EAAM,IAAmC,IAA7BA,EAAM,GAAGxG,QAAQ,UAEvBkH,EAAWhB,EAAW/G,KAAKqH,EAAM,OAE9CA,EAAM,GAAKU,EAAS,GAEpBV,EAAM,GAAKU,EAAS,GAEpBV,EAAM,GAAKU,EAAS,IAGtBL,EAAU,CAGR7U,IAAKwU,EAAM,IAA0C,IAApCA,EAAM,GAAGxG,QAAQ,eAAuBwG,EAAM,GAAGY,OAAO,cAAcrd,QAAUyc,EAAM,GACvGpB,KAAMoB,EAAM,IAzFG,IA0Ff5L,KAAMuM,EAAW,CAACX,EAAM,IAAM,GAC9BI,KAAMJ,EAAM,IAAMA,EAAM,GAAK,KAC7BM,OAAQN,EAAM,IAAMA,EAAM,GAAK,WAE5B,GAAIA,EAAQR,EAAM7G,KAAKwH,EAAMrW,IAClCuW,EAAU,CACR7U,IAAKwU,EAAM,GACXpB,KAAMoB,EAAM,IAjGG,IAkGf5L,KAAM,GACNgM,MAAOJ,EAAM,GACbM,OAAQN,EAAM,IAAMA,EAAM,GAAK,UAE5B,MAAIA,EAAQT,EAAM5G,KAAKwH,EAAMrW,KAyBlC,SAxBSkW,EAAM,IAAMA,EAAM,GAAGxG,QAAQ,YAAc,IAErCkH,EAAWjB,EAAU9G,KAAKqH,EAAM,MAE7CA,EAAM,GAAKA,EAAM,IAAM,OACvBA,EAAM,GAAKU,EAAS,GACpBV,EAAM,GAAKU,EAAS,GACpBV,EAAM,GAAK,IACI,IAANlW,GAAYkW,EAAM,SAA0B,IAApBH,EAAGgB,eAKpC9O,EAAM,GAAGuO,OAAST,EAAGgB,aAAe,GAGtCR,EAAU,CACR7U,IAAKwU,EAAM,GACXpB,KAAMoB,EAAM,IAzHG,IA0Hf5L,KAAM4L,EAAM,GAAKA,EAAM,GAAGzR,MAAM,KAAO,GACvC6R,KAAMJ,EAAM,IAAMA,EAAM,GAAK,KAC7BM,OAAQN,EAAM,IAAMA,EAAM,GAAK,OAM9BK,EAAQzB,MAAQyB,EAAQD,OAC3BC,EAAQzB,KAnIS,KAsInB7M,EAAMtM,KAAK4a,GAGb,IAAKtO,EAAMxO,OACT,OAAO,KAGT,MAAO,CACL0I,QAASsU,EAAeV,GACxBjZ,KAAMiZ,EAAGjZ,KACTmL,MAAOA,GAxGC+O,CAA+BjB,GAGrC,OAAOY,EAAU1O,EAAO+N,GAE1B,MAAO/c,IAGT,MAAO,CACLkJ,QAASsU,EAAeV,GACxBjZ,KAAMiZ,GAAMA,EAAGjZ,KACfmL,MAAO,GACPgP,QAAQ,GA6JZ,SAASN,EAAUvJ,EAAY4I,GAC7B,IACE,OAAO,mBAAS,mBAAS,GAAI5I,GAAa,CACxCnF,MAAOmF,EAAWnF,MAAMrP,MAAMod,KAEhC,MAAO/c,GACP,OAAOmU,GAWX,SAASqJ,EAAeV,GACtB,IAAI5T,EAAU4T,GAAMA,EAAG5T,QAEvB,OAAKA,EAIDA,EAAQgL,OAA0C,kBAA1BhL,EAAQgL,MAAMhL,QACjCA,EAAQgL,MAAMhL,QAGhBA,EAPE,mBCnOJ,SAAS+U,EAAwB9J,GACtC,IAAIE,EAAS6J,EAAsB/J,EAAWnF,OAC1C7F,EAAY,CACdE,KAAM8K,EAAWtQ,KACjBhF,MAAOsV,EAAWjL,SAapB,OAVImL,GAAUA,EAAO7T,SACnB2I,EAAUgL,WAAa,CACrBE,OAAQA,SAIWzP,IAAnBuE,EAAUE,MAA0C,KAApBF,EAAUtK,QAC5CsK,EAAUtK,MAAQ,8BAGbsK,EAiCF,SAASgV,EAAoBhK,GAElC,MAAO,CACLhL,UAAW,CACTC,OAAQ,CAHI6U,EAAwB9J,MAWnC,SAAS+J,EAAsBlP,GACpC,IAAKA,IAAUA,EAAMxO,OACnB,MAAO,GAGT,IAAI4d,EAAapP,EACbqP,EAAqBD,EAAW,GAAGvC,MAAQ,GAC3CyC,EAAoBF,EAAWA,EAAW5d,OAAS,GAAGqb,MAAQ,GAYlE,OAVsD,IAAlDwC,EAAmB5H,QAAQ,oBAAgF,IAApD4H,EAAmB5H,QAAQ,sBACpF2H,EAAaA,EAAWze,MAAM,KAIoB,IAAhD2e,EAAkB7H,QAAQ,mBAC5B2H,EAAaA,EAAWze,MAAM,GAAI,IAI7Bye,EAAWze,MAAM,EAxFH,IAwFwB2W,KAAI,SAAUiI,GACzD,MAAO,CACLC,MAAwB,OAAjBD,EAAMhB,YAAkB3Y,EAAY2Z,EAAMhB,OACjDjJ,SAAUiK,EAAM9V,KAAO2V,EAAW,GAAG3V,IACrCgW,SAAUF,EAAM1C,MAAQ,IACxB6C,QAAQ,EACRC,OAAuB,OAAfJ,EAAMlB,UAAgBzY,EAAY2Z,EAAMlB,SAEjDtS,UC9CE,SAAS6T,EAAsBzV,EAAWyG,EAAoBoD,GAKnE,IAAI5N,EAEJ,QANgB,IAAZ4N,IACFA,EAAU,IAKR,OAAAyE,EAAA,GAAatO,IAAcA,EAAU+K,MAMvC,OADA9O,EAAQ+Y,EAAoBtB,EAD5B1T,EAFiBA,EAEM+K,QAKzB,GAAI,OAAAuD,EAAA,GAAWtO,IAAc,OAAAsO,EAAA,GAAetO,GAAY,CAKtD,IAAI0V,EAAe1V,EACf2V,EAASD,EAAahb,OAAS,OAAA4T,EAAA,GAAWoH,GAAgB,WAAa,gBACvE3V,EAAU2V,EAAa3V,QAAU4V,EAAS,KAAOD,EAAa3V,QAAU4V,EAG5E,OAFA1Z,EAAQ2Z,EAAgB7V,EAAS0G,EAAoBoD,GACrD,YAAsB5N,EAAO8D,GACtB9D,EAGT,OAAI,OAAAqS,EAAA,GAAQtO,GAEV/D,EAAQ+Y,EAAoBtB,EAAkB1T,IAI5C,OAAAsO,EAAA,GAActO,IAAc,OAAAsO,EAAA,GAAQtO,IAKtC/D,ED5DG,SAA8B+D,EAAWyG,EAAoBoP,GAClE,IAAI5Z,EAAQ,CACV+D,UAAW,CACTC,OAAQ,CAAC,CACPC,KAAM,OAAAoO,EAAA,GAAQtO,GAAaA,EAAU6L,YAAYnR,KAAOmb,EAAY,qBAAuB,QAC3FngB,MAAO,cAAgBmgB,EAAY,oBAAsB,aAAe,wBAA0B,YAA+B7V,MAGrI5F,MAAO,CACL0b,eAAgB,YAAgB9V,KAIpC,GAAIyG,EAAoB,CACtB,IACIwE,EAAW8J,EADErB,EAAkBjN,GACaZ,OAChD5J,EAAM+O,WAAa,CACjBE,OAAQD,GAIZ,OAAOhP,ECuCG8Z,CADc/V,EACwByG,EAAoBoD,EAAQgM,WAC1E,YAAsB5Z,EAAO,CAC3B+Z,WAAW,IAEN/Z,IAYTA,EAAQ2Z,EAAgB5V,EAAWyG,EAAoBoD,GACvD,YAAsB5N,EAAO,GAAK+D,OAAWvE,GAC7C,YAAsBQ,EAAO,CAC3B+Z,WAAW,IAEN/Z,GAMF,SAAS2Z,EAAgBK,EAAOxP,EAAoBoD,QACzC,IAAZA,IACFA,EAAU,IAGZ,IAAI5N,EAAQ,CACV8D,QAASkW,GAGX,GAAIpM,EAAQqM,kBAAoBzP,EAAoB,CAClD,IACIwE,EAAW8J,EADErB,EAAkBjN,GACaZ,OAChD5J,EAAM+O,WAAa,CACjBE,OAAQD,GAIZ,OAAOhP,ECrIF,SAASka,EAAqBla,EAAOma,GAC1C,IAAIC,EAA6B,gBAAfpa,EAAMiE,KACpBoW,EAAM,CACRC,KAAMC,KAAKC,UAAUxa,GACrBqD,IAAK+W,EAAcD,EAAIM,wCAA0CN,EAAIO,sCAOvE,GAAIN,EAAa,CACf,IAaIO,EAbkBJ,KAAKC,UAAU,CACnCtW,SAAUlE,EAAMkE,SAGhB0W,QAAS,IAAIpU,KAAyB,IAApB,eAA0BqU,gBASb,KAPfN,KAAKC,UAAU,CAC/BvW,KAAMjE,EAAMiE,OAMwC,KAAOoW,EAAIC,KACjED,EAAIC,KAAOK,EAGb,OAAON,EC/BT,IAGI,EAEJ,WAEE,SAASS,EAAI7I,GACX7Y,KAAK6Y,IAAMA,EACX7Y,KAAK2hB,WAAa,IAAI,EAAI9I,GAwI5B,OAnIA6I,EAAIpf,UAAU+W,OAAS,WACrB,OAAOrZ,KAAK2hB,YAKdD,EAAIpf,UAAUsf,mBAAqB,WACjC,IAAI/I,EAAM7Y,KAAK2hB,WACXpX,EAAWsO,EAAItO,SAAWsO,EAAItO,SAAW,IAAM,GAC/C0M,EAAO4B,EAAI5B,KAAO,IAAM4B,EAAI5B,KAAO,GACvC,OAAO1M,EAAW,KAAOsO,EAAIxO,KAAO4M,GAAQ4B,EAAIvO,KAAO,IAAMuO,EAAIvO,KAAO,IAAM,SAKhFoX,EAAIpf,UAAUuf,iBAAmB,WAC/B,OAAO7hB,KAAK8hB,mBAAmB,UASjCJ,EAAIpf,UAAUgf,mCAAqC,WACjD,OAAOthB,KAAK6hB,mBAAqB,IAAM7hB,KAAK+hB,gBAS9CL,EAAIpf,UAAU+e,sCAAwC,WACpD,OAAOrhB,KAAKgiB,uBAAyB,IAAMhiB,KAAK+hB,gBAKlDL,EAAIpf,UAAU2f,qBAAuB,WACnC,IAAIpJ,EAAM7Y,KAAK2hB,WACf,OAAQ9I,EAAIvO,KAAO,IAAMuO,EAAIvO,KAAO,IAAM,QAAUuO,EAAI3B,UAAY,WAQtEwK,EAAIpf,UAAU4f,kBAAoB,SAAUC,EAAYC,GACtD,IAAIvJ,EAAM7Y,KAAK2hB,WACXzT,EAAS,CAAC,2BAQd,OAPAA,EAAOhK,KAAK,iBAAmBie,EAAa,IAAMC,GAClDlU,EAAOhK,KAAK,cAAgB2U,EAAIxU,MAE5BwU,EAAI7B,MACN9I,EAAOhK,KAAK,iBAAmB2U,EAAI7B,MAG9B,CACL,eAAgB,mBAChB,gBAAiB9I,EAAO1B,KAAK,QAMjCkV,EAAIpf,UAAU+f,wBAA0B,SAAUC,QAC1B,IAAlBA,IACFA,EAAgB,IAGlB,IAAIzJ,EAAM7Y,KAAK2hB,WACXY,EAAWviB,KAAK4hB,qBAAuB,oBACvCY,EAAiB,GAGrB,IAAK,IAAI9d,KAFT8d,EAAete,KAAK,OAAS2U,EAAI9V,YAEjBuf,EACd,GAAY,SAAR5d,EAAgB,CAClB,IAAK4d,EAAcje,KACjB,SAGEie,EAAcje,KAAKgB,MACrBmd,EAAete,KAAK,QAAUue,mBAAmBH,EAAcje,KAAKgB,OAGlEid,EAAcje,KAAKqe,OACrBF,EAAete,KAAK,SAAWue,mBAAmBH,EAAcje,KAAKqe,aAGvEF,EAAete,KAAKue,mBAAmB/d,GAAO,IAAM+d,mBAAmBH,EAAc5d,KAIzF,OAAI8d,EAAexgB,OACVugB,EAAW,IAAMC,EAAehW,KAAK,KAGvC+V,GAKTb,EAAIpf,UAAU0f,qBAAuB,WACnC,OAAOhiB,KAAK8hB,mBAAmB,aAKjCJ,EAAIpf,UAAUwf,mBAAqB,SAAUa,GAG3C,MAAO,GAFI3iB,KAAK4hB,qBACN5hB,KAAK2hB,WACQzK,UAAY,IAAMyL,EAAS,KAKpDjB,EAAIpf,UAAUyf,aAAe,WAC3B,IACIa,EAAO,CAGTC,WAJQ7iB,KAAK2hB,WAIGtd,KAChBye,eA5ImB,KA8IrB,OAAO,YAAUF,IAGZlB,EA5IT,GCFI,EAEJ,WACE,SAASqB,EAAcC,GACrBhjB,KAAKgjB,OAASA,EAGdhjB,KAAKijB,QAAU,GAqFjB,OA9EAF,EAAczgB,UAAU4gB,QAAU,WAChC,YAAuB9c,IAAhBpG,KAAKgjB,QAAwBhjB,KAAKgC,SAAWhC,KAAKgjB,QAU3DD,EAAczgB,UAAUgG,IAAM,SAAU6a,GACtC,IAAIpjB,EAAQC,KAEZ,OAAKA,KAAKkjB,YAI0B,IAAhCljB,KAAKijB,QAAQhL,QAAQkL,IACvBnjB,KAAKijB,QAAQ/e,KAAKif,GAGpBA,EAAKviB,MAAK,WACR,OAAOb,EAAMqjB,OAAOD,MACnBviB,KAAK,MAAM,WACZ,OAAOb,EAAMqjB,OAAOD,GAAMviB,KAAK,MAAM,kBAIhCuiB,GAdE,IAAYzhB,OAAO,IAAI,EAAY,qDAwB9CqhB,EAAczgB,UAAU8gB,OAAS,SAAUD,GAGzC,OAFkBnjB,KAAKijB,QAAQva,OAAO1I,KAAKijB,QAAQhL,QAAQkL,GAAO,GAAG,IASvEJ,EAAczgB,UAAUN,OAAS,WAC/B,OAAOhC,KAAKijB,QAAQjhB,QAUtB+gB,EAAczgB,UAAU+gB,MAAQ,SAAU9J,GACxC,IAAIxZ,EAAQC,KAEZ,OAAO,IAAI,KAAY,SAAUyB,GAC/B,IAAI6hB,EAAqB5b,YAAW,WAC9B6R,GAAWA,EAAU,GACvB9X,GAAQ,KAET8X,GACH,IAAY3X,IAAI7B,EAAMkjB,SAASriB,MAAK,WAClC2iB,aAAaD,GACb7hB,GAAQ,MACPb,KAAK,MAAM,WACZa,GAAQ,UAKPshB,EA1FT,GCFI,EAEJ,WACE,SAASS,EAAchP,GACrBxU,KAAKwU,QAAUA,EAGfxU,KAAKijB,QAAU,IAAI,EAAc,IACjCjjB,KAAKyjB,KAAO,IAAI,EAAIzjB,KAAKwU,QAAQqE,KAEjC7Y,KAAKiK,IAAMjK,KAAKyjB,KAAKnC,qCAmBvB,OAZAkC,EAAclhB,UAAUkZ,UAAY,SAAU7Z,GAC5C,MAAM,IAAI,EAAY,wDAOxB6hB,EAAclhB,UAAUuX,MAAQ,SAAUN,GACxC,OAAOvZ,KAAKijB,QAAQI,MAAM9J,IAGrBiK,EA3BT,GCDI,EAAS,cAGT,EAEJ,SAAUnN,GAGR,SAASqN,IACP,IAAI3jB,EAAmB,OAAXsW,GAAmBA,EAAOrD,MAAMhT,KAAM+S,YAAc/S,KAKhE,OADAD,EAAM4jB,eAAiB,IAAIvW,KAAKA,KAAKC,OAC9BtN,EAiET,OAzEA,oBAAU2jB,EAAgBrN,GAe1BqN,EAAephB,UAAUkZ,UAAY,SAAU5U,GAC7C,IAAI7G,EAAQC,KAEZ,GAAI,IAAIoN,KAAKA,KAAKC,OAASrN,KAAK2jB,eAC9B,OAAOC,QAAQliB,OAAO,CACpBkF,MAAOA,EACPnG,OAAQ,yBAA2BT,KAAK2jB,eAAiB,6BACzDlK,OAAQ,MAIZ,IAAIoK,EAAY/C,EAAqBla,EAAO5G,KAAKyjB,MAC7CjP,EAAU,CACZ0M,KAAM2C,EAAU3C,KAChBtO,OAAQ,OAKR4K,eAAgBD,IAA2B,SAAW,IAWxD,YARqCnX,IAAjCpG,KAAKwU,QAAQsP,iBACfhd,OAAOid,OAAOvP,EAASxU,KAAKwU,QAAQsP,sBAGT1d,IAAzBpG,KAAKwU,QAAQwP,UACfxP,EAAQwP,QAAUhkB,KAAKwU,QAAQwP,SAG1BhkB,KAAKijB,QAAQ3a,IAAI,IAAI,KAAY,SAAU7G,EAASC,GACzD,EAAOuiB,MAAMJ,EAAU5Z,IAAKuK,GAAS5T,MAAK,SAAUsjB,GAClD,IAAIzK,EAASlB,EAAOyD,aAAakI,EAASzK,QAE1C,GAAIA,IAAWlB,EAAO2D,QAAtB,CAOA,GAAIzC,IAAWlB,EAAO4D,UAAW,CAC/B,IAAI9O,EAAMD,KAAKC,MAMX8W,EAAmBD,EAASF,QAAQI,IAAI,eAC5CrkB,EAAM4jB,eAAiB,IAAIvW,KAAKC,EAAM,YAAsBA,EAAK8W,IACjEvP,EAAA,EAAOrC,KAAK,wCAA0CxS,EAAM4jB,gBAG9DjiB,EAAOwiB,QAlBLziB,EAAQ,CACNgY,OAAQA,OAkBX/W,MAAMhB,QAINgiB,EA1ET,CA2EE,GC9EE,EAEJ,SAAUrN,GAGR,SAASgO,IACP,IAAItkB,EAAmB,OAAXsW,GAAmBA,EAAOrD,MAAMhT,KAAM+S,YAAc/S,KAKhE,OADAD,EAAM4jB,eAAiB,IAAIvW,KAAKA,KAAKC,OAC9BtN,EA+DT,OAvEA,oBAAUskB,EAAchO,GAexBgO,EAAa/hB,UAAUkZ,UAAY,SAAU5U,GAC3C,IAAI7G,EAAQC,KAEZ,GAAI,IAAIoN,KAAKA,KAAKC,OAASrN,KAAK2jB,eAC9B,OAAOC,QAAQliB,OAAO,CACpBkF,MAAOA,EACPnG,OAAQ,yBAA2BT,KAAK2jB,eAAiB,6BACzDlK,OAAQ,MAIZ,IAAIoK,EAAY/C,EAAqBla,EAAO5G,KAAKyjB,MACjD,OAAOzjB,KAAKijB,QAAQ3a,IAAI,IAAI,KAAY,SAAU7G,EAASC,GACzD,IAAIgM,EAAU,IAAI4W,eAiClB,IAAK,IAAIpW,KA/BTR,EAAQ6W,mBAAqB,WAC3B,GAA2B,IAAvB7W,EAAQ8W,WAAZ,CAIA,IAAI/K,EAASlB,EAAOyD,aAAatO,EAAQ+L,QAEzC,GAAIA,IAAWlB,EAAO2D,QAAtB,CAOA,GAAIzC,IAAWlB,EAAO4D,UAAW,CAC/B,IAAI9O,EAAMD,KAAKC,MAMX8W,EAAmBzW,EAAQ+W,kBAAkB,eACjD1kB,EAAM4jB,eAAiB,IAAIvW,KAAKC,EAAM,YAAsBA,EAAK8W,IACjEvP,EAAA,EAAOrC,KAAK,wCAA0CxS,EAAM4jB,gBAG9DjiB,EAAOgM,QAlBLjM,EAAQ,CACNgY,OAAQA,MAoBd/L,EAAQgX,KAAK,OAAQb,EAAU5Z,KAEZlK,EAAMyU,QAAQwP,QAC3BjkB,EAAMyU,QAAQwP,QAAQ5N,eAAelI,IACvCR,EAAQiX,iBAAiBzW,EAAQnO,EAAMyU,QAAQwP,QAAQ9V,IAI3DR,EAAQkX,KAAKf,EAAU3C,WAIpBmD,EAxET,CAyEE,GCvEE,EAEJ,SAAUhO,GAGR,SAASwO,IACP,OAAkB,OAAXxO,GAAmBA,EAAOrD,MAAMhT,KAAM+S,YAAc/S,KAgD7D,OAnDA,oBAAU6kB,EAAgBxO,GAU1BwO,EAAeviB,UAAU0W,mBAAqB,SAAUrO,EAAW9D,GACjE,OPhBG,SAA4B2N,EAAS7J,EAAW9D,GACrD,IACID,EAAQwZ,EAAsBzV,EADT9D,GAAQA,EAAKuK,yBAAsBhL,EACK,CAC/Dya,iBAAkBrM,EAAQqM,mBAY5B,OAVA,YAAsBja,EAAO,CAC3Bke,SAAS,EACTja,KAAM,YAERjE,EAAMzB,MAAQoX,EAAS1N,MAEnBhI,GAAQA,EAAKiE,WACflE,EAAMkE,SAAWjE,EAAKiE,UAGjB,IAAYrJ,QAAQmF,GOClBoS,CAAmBhZ,KAAKsU,SAAU3J,EAAW9D,IAOtDge,EAAeviB,UAAU4W,iBAAmB,SAAUxO,EAASvF,EAAO0B,GAKpE,YAJc,IAAV1B,IACFA,EAAQoX,EAASoB,MPHhB,SAA0BnJ,EAAS9J,EAASvF,EAAO0B,QAC1C,IAAV1B,IACFA,EAAQoX,EAASoB,MAGnB,IACI/W,EAAQ2Z,EAAgB7V,EADH7D,GAAQA,EAAKuK,yBAAsBhL,EACH,CACvDya,iBAAkBrM,EAAQqM,mBAQ5B,OANAja,EAAMzB,MAAQA,EAEV0B,GAAQA,EAAKiE,WACflE,EAAMkE,SAAWjE,EAAKiE,UAGjB,IAAYrJ,QAAQmF,GOTlBsS,CAAiBlZ,KAAKsU,SAAU5J,EAASvF,EAAO0B,IAOzDge,EAAeviB,UAAUsa,gBAAkB,WACzC,IAAK5c,KAAKsU,SAASuE,IAEjB,OAAOxC,EAAO/T,UAAUsa,gBAAgBhU,KAAK5I,MAG/C,IAAI+kB,EAAmB,mBAAS,mBAAS,GAAI/kB,KAAKsU,SAASyQ,kBAAmB,CAC5ElM,IAAK7Y,KAAKsU,SAASuE,MAGrB,OAAI7Y,KAAKsU,SAAS0Q,UACT,IAAIhlB,KAAKsU,SAAS0Q,UAAUD,GAGjC/H,IACK,IAAI,EAAe+H,GAGrB,IAAI,EAAaA,IAGnBF,EApDT,CAqDE,G,QC/DEI,GAAgB,EAKb,SAASC,KACd,OAAOD,GAAgB,EAMlB,SAASE,KAEdF,IAAiB,EACjBvd,YAAW,WACTud,IAAiB,KAYd,SAASG,GAAK3W,EAAI+F,EAAS6Q,GAKhC,QAJgB,IAAZ7Q,IACFA,EAAU,IAGM,oBAAP/F,EACT,OAAOA,EAGT,IAEE,GAAIA,EAAGmN,WACL,OAAOnN,EAIT,GAAIA,EAAG6W,mBACL,OAAO7W,EAAG6W,mBAEZ,MAAO9jB,GAIP,OAAOiN,EAMT,IAAI8W,EAAgB,WAClB,IAAI1S,EAAO/Q,MAAMQ,UAAUnB,MAAMyH,KAAKmK,WAEtC,IACMsS,GAA4B,oBAAXA,GACnBA,EAAOrS,MAAMhT,KAAM+S,WAIrB,IAAIyS,EAAmB3S,EAAKiF,KAAI,SAAU2N,GACxC,OAAOL,GAAKK,EAAKjR,MAGnB,OAAI/F,EAAGiX,YAMEjX,EAAGiX,YAAY1S,MAAMhT,KAAMwlB,GAO7B/W,EAAGuE,MAAMhT,KAAMwlB,GACtB,MAAOlH,GAkBP,MAjBA6G,KACA,aAAU,SAAUzhB,GAClBA,EAAMS,mBAAkB,SAAUyC,GAChC,IAAImV,EAAiB,mBAAS,GAAInV,GAUlC,OARI4N,EAAQlJ,YACV,YAAsByQ,OAAgB3V,OAAWA,GACjD,YAAsB2V,EAAgBvH,EAAQlJ,YAGhDyQ,EAAehX,MAAQ,mBAAS,mBAAS,GAAIgX,EAAehX,OAAQ,CAClEgO,UAAWF,IAENkJ,KAET,YAAiBuC,MAEbA,IAQV,IACE,IAAK,IAAIqH,KAAYlX,EACf3H,OAAOxE,UAAU8T,eAAexN,KAAK6F,EAAIkX,KAC3CJ,EAAcI,GAAYlX,EAAGkX,IAGjC,MAAOpa,IAGTkD,EAAGnM,UAAYmM,EAAGnM,WAAa,GAC/BijB,EAAcjjB,UAAYmM,EAAGnM,UAC7BwE,OAAO8e,eAAenX,EAAI,qBAAsB,CAC9CoX,YAAY,EACZxlB,MAAOklB,IAITze,OAAOgf,iBAAiBP,EAAe,CACrC3J,WAAY,CACViK,YAAY,EACZxlB,OAAO,GAET8K,oBAAqB,CACnB0a,YAAY,EACZxlB,MAAOoO,KAIX,IACmB3H,OAAOif,yBAAyBR,EAAe,QAEjDS,cACblf,OAAO8e,eAAeL,EAAe,OAAQ,CAC3CnB,IAAK,WACH,OAAO3V,EAAGpJ,QAKhB,MAAOkG,IAET,OAAOga,EAOF,SAASU,GAAmBzR,GAKjC,QAJgB,IAAZA,IACFA,EAAU,IAGPA,EAAQvD,QAKb,GAAKuD,EAAQqE,IAAb,CAKA,IAAIqN,EAASza,SAAS0a,cAAc,UACpCD,EAAOE,OAAQ,EACfF,EAAOG,IAAM,IAAI,EAAI7R,EAAQqE,KAAKwJ,wBAAwB7N,GAEtDA,EAAQ8R,SAEVJ,EAAOK,OAAS/R,EAAQ8R,SAGzB7a,SAAS+a,MAAQ/a,SAASyV,MAAMuF,YAAYP,QAb3CtR,EAAA,EAAOc,MAAM,oDALbd,EAAA,EAAOc,MAAM,mDCjKjB,IAuTIgR,GAvTA,GAAS,cAYTC,GAAW,GACXC,GAAe,GAGnB,SAASC,GAAWhc,GAClB,IAAI+b,GAAa/b,GAMjB,OAFA+b,GAAa/b,IAAQ,EAEbA,GACN,IAAK,WAkFT,WACE,KAAM,YAAa,IACjB,OAGF,CAAC,QAAS,OAAQ,OAAQ,QAAS,MAAO,UAAUzJ,SAAQ,SAAU+D,GAC9DA,KAAS,GAAO8F,SAItB,YAAK,GAAOA,QAAS9F,GAAO,SAAU2hB,GACpC,OAAO,WAGL,IAFA,IAAIjU,EAAO,GAEFC,EAAK,EAAGA,EAAKC,UAAU/Q,OAAQ8Q,IACtCD,EAAKC,GAAMC,UAAUD,GAGvBiU,GAAgB,UAAW,CACzBlU,KAAMA,EACN1N,MAAOA,IAGL2hB,GACF3S,SAAS7R,UAAU0Q,MAAMpK,KAAKke,EAAsB,GAAO7b,QAAS4H,UAzGxEmU,GACA,MAEF,IAAK,OA4VT,WACE,KAAM,aAAc,IAClB,OAKF,GAAOvb,SAASwb,iBAAiB,QAASC,GAAgB,QAASH,GAAgBI,KAAK,KAAM,SAAS,GACvG,GAAO1b,SAASwb,iBAAiB,WAAYG,GAAqBL,GAAgBI,KAAK,KAAM,SAAS,GAEtG,CAAC,cAAe,QAAQ/lB,SAAQ,SAAUuhB,GAExC,IAAIzM,EAAQ,GAAOyM,IAAW,GAAOA,GAAQrgB,UAExC4T,GAAUA,EAAME,gBAAmBF,EAAME,eAAe,sBAM7D,YAAKF,EAAO,oBAAoB,SAAUmR,GACxC,OAAO,SAAUC,EAAW7Y,EAAI+F,GA6B9B,OA5BI/F,GAAMA,EAAGiX,aACO,UAAd4B,GACF,YAAK7Y,EAAI,eAAe,SAAU8Y,GAChC,OAAO,SAAU3gB,GAEf,OADAsgB,GAAgB,QAASH,GAAgBI,KAAK,KAAM,OAApDD,CAA4DtgB,GACrD2gB,EAAc3e,KAAK5I,KAAM4G,OAKpB,aAAd0gB,GACF,YAAK7Y,EAAI,eAAe,SAAU8Y,GAChC,OAAO,SAAU3gB,GAEf,OADAwgB,GAAqBL,GAAgBI,KAAK,KAAM,OAAhDC,CAAwDxgB,GACjD2gB,EAAc3e,KAAK5I,KAAM4G,SAKpB,UAAd0gB,GACFJ,GAAgB,QAASH,GAAgBI,KAAK,KAAM,QAAQ,EAA5DD,CAAkElnB,MAGlD,aAAdsnB,GACFF,GAAqBL,GAAgBI,KAAK,KAAM,OAAhDC,CAAwDpnB,OAIrDqnB,EAASze,KAAK5I,KAAMsnB,EAAW7Y,EAAI+F,OAG9C,YAAK0B,EAAO,uBAAuB,SAAUmR,GAC3C,OAAO,SAAUC,EAAW7Y,EAAI+F,GAC9B,IACE6S,EAASze,KAAK5I,KAAMsnB,EAAW7Y,EAAG6W,mBAAoB9Q,GACtD,MAAOhT,IAGT,OAAO6lB,EAASze,KAAK5I,KAAMsnB,EAAW7Y,EAAI+F,WAvZ5CgT,GACA,MAEF,IAAK,OAgMT,WACE,KAAM,mBAAoB,IACxB,OAGF,IAAIC,EAAWnD,eAAehiB,UAC9B,YAAKmlB,EAAU,QAAQ,SAAUC,GAC/B,OAAO,WAGL,IAFA,IAAI7U,EAAO,GAEFC,EAAK,EAAGA,EAAKC,UAAU/Q,OAAQ8Q,IACtCD,EAAKC,GAAMC,UAAUD,GAIvB,IAAI6U,EAAM3nB,KACNiK,EAAM4I,EAAK,GACf8U,EAAIC,eAAiB,CAEnBhV,OAAQ,OAAAqG,EAAA,GAASpG,EAAK,IAAMA,EAAK,GAAGgV,cAAgBhV,EAAK,GACzD5I,IAAK4I,EAAK,IAIR,OAAAoG,EAAA,GAAShP,IAAsC,SAA9B0d,EAAIC,eAAehV,QAAqB3I,EAAIC,MAAM,gBACrEyd,EAAIG,wBAAyB,GAG/B,IAAIC,EAA4B,WAC9B,GAAuB,IAAnBJ,EAAInD,WAAkB,CACxB,IAGMmD,EAAIC,iBACND,EAAIC,eAAeI,YAAcL,EAAIlO,QAEvC,MAAOjY,IAITulB,GAAgB,MAAO,CACrBlU,KAAMA,EACNoV,aAAc7a,KAAKC,MACnB6a,eAAgB9a,KAAKC,MACrBsa,IAAKA,MAsBX,MAjBI,uBAAwBA,GAAyC,oBAA3BA,EAAIpD,mBAC5C,YAAKoD,EAAK,sBAAsB,SAAUN,GACxC,OAAO,WAGL,IAFA,IAAIc,EAAiB,GAEZrV,EAAK,EAAGA,EAAKC,UAAU/Q,OAAQ8Q,IACtCqV,EAAerV,GAAMC,UAAUD,GAIjC,OADAiV,IACOV,EAASrU,MAAM2U,EAAKQ,OAI/BR,EAAIV,iBAAiB,mBAAoBc,GAGpCL,EAAa1U,MAAM2U,EAAK9U,OAGnC,YAAK4U,EAAU,QAAQ,SAAUW,GAC/B,OAAO,WAGL,IAFA,IAAIvV,EAAO,GAEFC,EAAK,EAAGA,EAAKC,UAAU/Q,OAAQ8Q,IACtCD,EAAKC,GAAMC,UAAUD,GAQvB,OALAiU,GAAgB,MAAO,CACrBlU,KAAMA,EACNqV,eAAgB9a,KAAKC,MACrBsa,IAAK3nB,OAEAooB,EAAapV,MAAMhT,KAAM6S,OAjRhCwV,GACA,MAEF,IAAK,SAuGT,WACE,IZ3DK,WACL,IAAKrL,IACH,OAAO,EAGT,IAAIrV,EAAS,cAGb,GAAIyV,EAAczV,EAAOsc,OACvB,OAAO,EAKT,IAAIxhB,GAAS,EACT6lB,EAAM3gB,EAAO8D,SAEjB,GAAI6c,GAAoC,oBAAtBA,EAAInC,cACpB,IACE,IAAIoC,EAAUD,EAAInC,cAAc,UAChCoC,EAAQC,QAAS,EACjBF,EAAI9B,KAAKC,YAAY8B,GAEjBA,EAAQE,eAAiBF,EAAQE,cAAcxE,QAEjDxhB,EAAS2a,EAAcmL,EAAQE,cAAcxE,QAG/CqE,EAAI9B,KAAKkC,YAAYH,GACrB,MAAOI,GACP/T,EAAA,EAAOrC,KAAK,kFAAmFoW,GAInG,OAAOlmB,EYyBFmmB,GACH,OAGF,YAAK,GAAQ,SAAS,SAAUC,GAC9B,OAAO,WAGL,IAFA,IAAIhW,EAAO,GAEFC,EAAK,EAAGA,EAAKC,UAAU/Q,OAAQ8Q,IACtCD,EAAKC,GAAMC,UAAUD,GAGvB,IAAIgW,EAAoB,CACtBjW,KAAMA,EACNkW,UAAW,CACTnW,OAAQoW,GAAenW,GACvB5I,IAAKgf,GAAYpW,IAEnBqV,eAAgB9a,KAAKC,OAIvB,OAFA0Z,GAAgB,QAAS,mBAAS,GAAI+B,IAE/BD,EAAc7V,MAAM,GAAQH,GAAMjS,MAAK,SAAUsjB,GAKtD,OAJA6C,GAAgB,QAAS,mBAAS,mBAAS,GAAI+B,GAAoB,CACjEb,aAAc7a,KAAKC,MACnB6W,SAAUA,KAELA,KACN,SAAUxO,GAQX,MAPAqR,GAAgB,QAAS,mBAAS,mBAAS,GAAI+B,GAAoB,CACjEb,aAAc7a,KAAKC,MACnBqI,MAAOA,KAKHA,SA3IRwT,GACA,MAEF,IAAK,WAkRT,WACE,IZ5JK,WAIL,IAAIvhB,EAAS,cAITwhB,EAASxhB,EAAOwhB,OAChBC,EAAsBD,GAAUA,EAAOE,KAAOF,EAAOE,IAAIC,QAGzDC,EAAgB,YAAa5hB,KAAYA,EAAO6hB,QAAQC,aAAe9hB,EAAO6hB,QAAQE,aAC1F,OAAQN,GAAuBG,EY+I1BI,GACH,OAGF,IAAIC,EAAgB,GAAOC,WAyB3B,SAASC,EAA2BC,GAClC,OAAO,WAGL,IAFA,IAAIlX,EAAO,GAEFC,EAAK,EAAGA,EAAKC,UAAU/Q,OAAQ8Q,IACtCD,EAAKC,GAAMC,UAAUD,GAGvB,IAAI7I,EAAM4I,EAAK7Q,OAAS,EAAI6Q,EAAK,QAAKzM,EAEtC,GAAI6D,EAAK,CAEP,IAAI0M,EAAO+P,GACPsD,EAAKC,OAAOhgB,GAEhByc,GAAWsD,EACXjD,GAAgB,UAAW,CACzBpQ,KAAMA,EACNqT,GAAIA,IAIR,OAAOD,EAAwB/W,MAAMhT,KAAM6S,IA7C/C,GAAOgX,WAAa,WAGlB,IAFA,IAAIhX,EAAO,GAEFC,EAAK,EAAGA,EAAKC,UAAU/Q,OAAQ8Q,IACtCD,EAAKC,GAAMC,UAAUD,GAGvB,IAAIkX,EAAK,GAAOte,SAASC,KAErBgL,EAAO+P,GAOX,GANAA,GAAWsD,EACXjD,GAAgB,UAAW,CACzBpQ,KAAMA,EACNqT,GAAIA,IAGFJ,EACF,OAAOA,EAAc5W,MAAMhT,KAAM6S,IAgCrC,YAAK,GAAO2W,QAAS,YAAaM,GAClC,YAAK,GAAON,QAAS,eAAgBM,GA1UjCI,GACA,MAEF,IAAK,QAifPC,GAAqB,GAAOC,QAE5B,GAAOA,QAAU,SAAUC,EAAKpgB,EAAK4U,EAAME,EAAQrJ,GASjD,OARAqR,GAAgB,QAAS,CACvBhI,OAAQA,EACRrJ,MAAOA,EACPmJ,KAAMA,EACNwL,IAAKA,EACLpgB,IAAKA,MAGHkgB,IAEKA,GAAmBnX,MAAMhT,KAAM+S,YA5ftC,MAEF,IAAK,qBAqgBPuX,GAAkC,GAAOC,qBAEzC,GAAOA,qBAAuB,SAAU/oB,GAGtC,OAFAulB,GAAgB,qBAAsBvlB,IAElC8oB,IAEKA,GAAgCtX,MAAMhT,KAAM+S,YA1gBnD,MAEF,QACE6B,EAAA,EAAOrC,KAAK,gCAAiC1H,IAU5C,SAAS2f,GAA0BxpB,GACnCA,GAAmC,kBAAjBA,EAAQ6J,MAAiD,oBAArB7J,EAAQiD,WAInE0iB,GAAS3lB,EAAQ6J,MAAQ8b,GAAS3lB,EAAQ6J,OAAS,GACnD8b,GAAS3lB,EAAQ6J,MAAM3G,KAAKlD,EAAQiD,UACpC4iB,GAAW7lB,EAAQ6J,OAIrB,SAASkc,GAAgBlc,EAAMkQ,GAC7B,IAAI0P,EAAK9lB,EAET,GAAKkG,GAAS8b,GAAS9b,GAIvB,IACE,IAAK,IAAI+G,EAAK,mBAAS+U,GAAS9b,IAAS,IAAKiH,EAAKF,EAAG8Y,QAAS5Y,EAAGzQ,KAAMyQ,EAAKF,EAAG8Y,OAAQ,CACtF,IAAI1pB,EAAU8Q,EAAGzR,MAEjB,IACEW,EAAQ+Z,GACR,MAAOvZ,GACPoT,EAAA,EAAOc,MAAM,0DAA4D7K,EAAO,WAAa,YAAgB7J,GAAW,YAAcQ,KAG1I,MAAOmpB,GACPF,EAAM,CACJ/U,MAAOiV,GAET,QACA,IACM7Y,IAAOA,EAAGzQ,OAASsD,EAAKiN,EAAGgZ,SAASjmB,EAAGiE,KAAKgJ,GAChD,QACA,GAAI6Y,EAAK,MAAMA,EAAI/U,QAuFzB,SAASsT,GAAe6B,GAKtB,YAJkB,IAAdA,IACFA,EAAY,IAGV,YAAa,IAAU,OAAA5R,EAAA,GAAa4R,EAAU,GAAI3N,UAAY2N,EAAU,GAAGjY,OACtEqX,OAAOY,EAAU,GAAGjY,QAAQiV,cAGjCgD,EAAU,IAAMA,EAAU,GAAGjY,OACxBqX,OAAOY,EAAU,GAAGjY,QAAQiV,cAG9B,MAKT,SAASoB,GAAY4B,GAKnB,YAJkB,IAAdA,IACFA,EAAY,IAGc,kBAAjBA,EAAU,GACZA,EAAU,GAGf,YAAa,IAAU,OAAA5R,EAAA,GAAa4R,EAAU,GAAI3N,SAC7C2N,EAAU,GAAG5gB,IAGfggB,OAAOY,EAAU,IAiO1B,IAEIC,GACAC,GAFAC,GAAgB,EAYpB,SAAS9D,GAAgB7hB,EAAMrE,EAASiqB,GAKtC,YAJiB,IAAbA,IACFA,GAAW,GAGN,SAAUrkB,GAIfkkB,QAAkB1kB,EAIbQ,GAASmkB,KAAsBnkB,IAIpCmkB,GAAoBnkB,EAEhBokB,IACFzH,aAAayH,IAGXC,EACFD,GAAgBtjB,YAAW,WACzB1G,EAAQ,CACN4F,MAAOA,EACPvB,KAAMA,OAIVrE,EAAQ,CACN4F,MAAOA,EACPvB,KAAMA,MAad,SAAS+hB,GAAqBpmB,GAI5B,OAAO,SAAU4F,GACf,IAAI+b,EAEJ,IACEA,EAAS/b,EAAM+b,OACf,MAAOnhB,GAGP,OAGF,IAAIqL,EAAU8V,GAAUA,EAAO9V,QAI1BA,IAAuB,UAAZA,GAAmC,aAAZA,GAA2B8V,EAAOuI,qBAMpEJ,IACH5D,GAAgB,QAASlmB,EAAzBkmB,CAAkCtgB,GAGpC2c,aAAauH,IACbA,GAAkBpjB,YAAW,WAC3BojB,QAAkB1kB,IA1FD,OA+FvB,IAAI+jB,GAAqB,KAwBzB,IAAIG,GAAkC,KC1iBtC,IAAI,GAEJ,WAIE,SAASa,EAAY3W,GAInBxU,KAAKqF,KAAO8lB,EAAYpe,GACxB/M,KAAKsU,SAAW,mBAAS,CACvBrJ,SAAS,EACTmgB,KAAK,EACLnH,OAAO,EACPuF,SAAS,EACTrW,QAAQ,EACRwU,KAAK,GACJnT,GAiRL,OA1QA2W,EAAY7oB,UAAU+oB,oBAAsB,SAAUzkB,GAC/C5G,KAAKsU,SAASnB,QAInB,cAAgB9M,cAAc,CAC5BilB,SAAU,WAA4B,gBAAf1kB,EAAMiE,KAAyB,cAAgB,SACtEC,SAAUlE,EAAMkE,SAChB3F,MAAOyB,EAAMzB,MACbuF,QAAS,YAAoB9D,IAC5B,CACDA,MAAOA,KAaXukB,EAAY7oB,UAAU4R,UAAY,WAChC,IAAInU,EAAQC,KAERA,KAAKsU,SAASrJ,SAChBuf,GAA0B,CACxBvmB,SAAU,WAGR,IAFA,IAAI4O,EAAO,GAEFC,EAAK,EAAGA,EAAKC,UAAU/Q,OAAQ8Q,IACtCD,EAAKC,GAAMC,UAAUD,GAGvB/S,EAAMwrB,mBAAmBvY,MAAMjT,EAAO,mBAAS8S,KAEjDhI,KAAM,YAIN7K,KAAKsU,SAAS8W,KAChBZ,GAA0B,CACxBvmB,SAAU,WAGR,IAFA,IAAI4O,EAAO,GAEFC,EAAK,EAAGA,EAAKC,UAAU/Q,OAAQ8Q,IACtCD,EAAKC,GAAMC,UAAUD,GAGvB/S,EAAMyrB,eAAexY,MAAMjT,EAAO,mBAAS8S,KAE7ChI,KAAM,QAIN7K,KAAKsU,SAASqT,KAChB6C,GAA0B,CACxBvmB,SAAU,WAGR,IAFA,IAAI4O,EAAO,GAEFC,EAAK,EAAGA,EAAKC,UAAU/Q,OAAQ8Q,IACtCD,EAAKC,GAAMC,UAAUD,GAGvB/S,EAAM0rB,eAAezY,MAAMjT,EAAO,mBAAS8S,KAE7ChI,KAAM,QAIN7K,KAAKsU,SAAS2P,OAChBuG,GAA0B,CACxBvmB,SAAU,WAGR,IAFA,IAAI4O,EAAO,GAEFC,EAAK,EAAGA,EAAKC,UAAU/Q,OAAQ8Q,IACtCD,EAAKC,GAAMC,UAAUD,GAGvB/S,EAAM2rB,iBAAiB1Y,MAAMjT,EAAO,mBAAS8S,KAE/ChI,KAAM,UAIN7K,KAAKsU,SAASkV,SAChBgB,GAA0B,CACxBvmB,SAAU,WAGR,IAFA,IAAI4O,EAAO,GAEFC,EAAK,EAAGA,EAAKC,UAAU/Q,OAAQ8Q,IACtCD,EAAKC,GAAMC,UAAUD,GAGvB/S,EAAM4rB,mBAAmB3Y,MAAMjT,EAAO,mBAAS8S,KAEjDhI,KAAM,aAUZsgB,EAAY7oB,UAAUipB,mBAAqB,SAAUK,GACnD,IAAItlB,EAAa,CACfglB,SAAU,UACVvQ,KAAM,CACJhI,UAAW6Y,EAAY/Y,KACvB+B,OAAQ,WAEVzP,MAAOoX,EAASkB,WAAWmO,EAAYzmB,OACvCuF,QAAS,YAASkhB,EAAY/Y,KAAM,MAGtC,GAA0B,WAAtB+Y,EAAYzmB,MAAoB,CAClC,IAA4B,IAAxBymB,EAAY/Y,KAAK,GAKnB,OAJAvM,EAAWoE,QAAU,sBAAwB,YAASkhB,EAAY/Y,KAAK1R,MAAM,GAAI,MAAQ,kBACzFmF,EAAWyU,KAAKhI,UAAY6Y,EAAY/Y,KAAK1R,MAAM,GAOvD,cAAgBkF,cAAcC,EAAY,CACxCsa,MAAOgL,EAAY/Y,KACnB1N,MAAOymB,EAAYzmB,SASvBgmB,EAAY7oB,UAAUkpB,eAAiB,SAAUI,GAC/C,IAAIjJ,EAEJ,IACEA,EAASiJ,EAAYhlB,MAAM+b,OAAS,YAAiBiJ,EAAYhlB,MAAM+b,QAAU,YAAiBiJ,EAAYhlB,OAC9G,MAAOpF,GACPmhB,EAAS,YAGW,IAAlBA,EAAO3gB,QAIX,cAAgBqE,cAAc,CAC5BilB,SAAU,MAAQM,EAAYvmB,KAC9BqF,QAASiY,GACR,CACD/b,MAAOglB,EAAYhlB,MACnBvB,KAAMumB,EAAYvmB,QAStB8lB,EAAY7oB,UAAUmpB,eAAiB,SAAUG,GAC/C,GAAIA,EAAY3D,aAAhB,CAEE,GAAI2D,EAAYjE,IAAIG,uBAClB,OAGF,cAAgBzhB,cAAc,CAC5BilB,SAAU,MACVvQ,KAAM6Q,EAAYjE,IAAIC,eACtB/c,KAAM,QACL,CACD8c,IAAKiE,EAAYjE,aAWvBwD,EAAY7oB,UAAUopB,iBAAmB,SAAUE,GAE5CA,EAAY3D,eAIb2D,EAAY7C,UAAU9e,IAAIC,MAAM,eAAkD,SAAjC0hB,EAAY7C,UAAUnW,SAKvEgZ,EAAYlW,MACd,cAAgBrP,cAAc,CAC5BilB,SAAU,QACVvQ,KAAM6Q,EAAY7C,UAClB5jB,MAAOoX,EAAS1N,MAChBhE,KAAM,QACL,CACDkQ,KAAM6Q,EAAYlW,MAClBkL,MAAOgL,EAAY/Y,OAGrB,cAAgBxM,cAAc,CAC5BilB,SAAU,QACVvQ,KAAM,mBAAS,mBAAS,GAAI6Q,EAAY7C,WAAY,CAClDf,YAAa4D,EAAY1H,SAASzK,SAEpC5O,KAAM,QACL,CACD+V,MAAOgL,EAAY/Y,KACnBqR,SAAU0H,EAAY1H,cAU5BiH,EAAY7oB,UAAUqpB,mBAAqB,SAAUC,GACnD,IAAIjkB,EAAS,cACTgP,EAAOiV,EAAYjV,KACnBqT,EAAK4B,EAAY5B,GACjB6B,EAAY,YAASlkB,EAAO+D,SAASC,MACrCmgB,EAAa,YAASnV,GACtBoV,EAAW,YAAS/B,GAEnB8B,EAAWxhB,OACdwhB,EAAaD,GAKXA,EAAUthB,WAAawhB,EAASxhB,UAAYshB,EAAUxhB,OAAS0hB,EAAS1hB,OAC1E2f,EAAK+B,EAASvhB,UAGZqhB,EAAUthB,WAAauhB,EAAWvhB,UAAYshB,EAAUxhB,OAASyhB,EAAWzhB,OAC9EsM,EAAOmV,EAAWthB,UAGpB,cAAgBnE,cAAc,CAC5BilB,SAAU,aACVvQ,KAAM,CACJpE,KAAMA,EACNqT,GAAIA,MASVmB,EAAYpe,GAAK,cACVoe,EAjST,GCDI,GAEJ,SAAU9U,GASR,SAAS2V,EAAcxX,GAKrB,YAJgB,IAAZA,IACFA,EAAU,IAGL6B,EAAOzN,KAAK5I,KAAM,EAAgBwU,IAAYxU,KA8DvD,OA3EA,oBAAUgsB,EAAe3V,GAsBzB2V,EAAc1pB,UAAU2pB,iBAAmB,SAAUzX,QACnC,IAAZA,IACFA,EAAU,IAIG,cAAkB/I,WAM5BzL,KAAKia,aAKVgM,GAAmB,mBAAS,mBAAS,GAAIzR,GAAU,CACjDqE,IAAKrE,EAAQqE,KAAO7Y,KAAKqZ,YALzBzE,EAAA,EAAOc,MAAM,iEAajBsW,EAAc1pB,UAAU8X,cAAgB,SAAUxT,EAAOlD,EAAOmD,GAU9D,OATAD,EAAMslB,SAAWtlB,EAAMslB,UAAY,aACnCtlB,EAAMyU,IAAM,mBAAS,mBAAS,GAAIzU,EAAMyU,KAAM,CAC5ChW,KCpEgB,4BDqEhB8mB,SAAU,mBAASvlB,EAAMyU,KAAOzU,EAAMyU,IAAI8Q,UAAY,GAAI,CAAC,CACzD9mB,KAAM,sBACN+K,QCtEiB,YDwEnBA,QCxEmB,WD0EdiG,EAAO/T,UAAU8X,cAAcxR,KAAK5I,KAAM4G,EAAOlD,EAAOmD,IAOjEmlB,EAAc1pB,UAAUiZ,WAAa,SAAU3U,GAC7C,IAAI0L,EAActS,KAAKqS,eAAe,IAElCC,GACFA,EAAY+Y,oBAAoBzkB,GAGlCyP,EAAO/T,UAAUiZ,WAAW3S,KAAK5I,KAAM4G,IAGlColB,EA5ET,CA6EE,GE1FEI,GAAuB,CAAC,cAAe,SAAU,OAAQ,mBAAoB,iBAAkB,oBAAqB,kBAAmB,cAAe,aAAc,qBAAsB,cAAe,aAAc,iBAAkB,eAAgB,kBAAmB,cAAe,cAAe,eAAgB,qBAAsB,SAAU,YAAa,eAAgB,gBAAiB,YAAa,kBAAmB,SAAU,iBAAkB,4BAA6B,wBAGje,GAEJ,WAIE,SAASC,EAAS7X,GAIhBxU,KAAKqF,KAAOgnB,EAAStf,GACrB/M,KAAKsU,SAAW,mBAAS,CACvBgQ,gBAAgB,EAChBgI,aAAa,EACbC,uBAAuB,EACvBpS,aAAa,EACbzS,YAAY,GACX8M,GAuML,OA/LA6X,EAAS/pB,UAAU4R,UAAY,WAC7B,IAAIvM,EAAS,eAET3H,KAAKsU,SAAS5M,YAChB,YAAKC,EAAQ,aAAc3H,KAAKwsB,kBAAkBrF,KAAKnnB,OAGrDA,KAAKsU,SAAS6F,aAChB,YAAKxS,EAAQ,cAAe3H,KAAKwsB,kBAAkBrF,KAAKnnB,OAGtDA,KAAKsU,SAASiY,uBAChB,YAAK5kB,EAAQ,wBAAyB3H,KAAKysB,SAAStF,KAAKnnB,OAGvDA,KAAKsU,SAASgQ,gBAAkB,mBAAoB3c,GACtD,YAAK2c,eAAehiB,UAAW,OAAQtC,KAAK0sB,SAASvF,KAAKnnB,OAGxDA,KAAKsU,SAASgY,eACExqB,MAAMC,QAAQ/B,KAAKsU,SAASgY,aAAetsB,KAAKsU,SAASgY,YAAcF,IAC7EhrB,QAAQpB,KAAK2sB,iBAAiBxF,KAAKnnB,QAMnDqsB,EAAS/pB,UAAUkqB,kBAAoB,SAAUnF,GAE/C,OAAO,WAGL,IAFA,IAAIxU,EAAO,GAEFC,EAAK,EAAGA,EAAKC,UAAU/Q,OAAQ8Q,IACtCD,EAAKC,GAAMC,UAAUD,GAGvB,IAAI8Z,EAAmB/Z,EAAK,GAU5B,OATAA,EAAK,GAAKuS,GAAKwH,EAAkB,CAC/BthB,UAAW,CACTyP,KAAM,CACJkF,SAAU,YAAgBoH,IAE5BvC,SAAS,EACTja,KAAM,gBAGHwc,EAASrU,MAAMhT,KAAM6S,KAOhCwZ,EAAS/pB,UAAUmqB,SAAW,SAAUpF,GAEtC,OAAO,SAAUpjB,GAEf,OAAOojB,EAASze,KAAK5I,KAAMolB,GAAKnhB,EAAU,CACxCqH,UAAW,CACTyP,KAAM,CACJkF,SAAU,wBACVjf,QAAS,YAAgBqmB,IAE3BvC,SAAS,EACTja,KAAM,mBAQdwhB,EAAS/pB,UAAUqqB,iBAAmB,SAAUhK,GAE9C,IAAIhb,EAAS,cAETuO,EAAQvO,EAAOgb,IAAWhb,EAAOgb,GAAQrgB,UAExC4T,GAAUA,EAAME,gBAAmBF,EAAME,eAAe,sBAI7D,YAAKF,EAAO,oBAAoB,SAAUmR,GACxC,OAAO,SAAUC,EAAW7Y,EAAI+F,GAC9B,IACgC,oBAAnB/F,EAAGiX,cACZjX,EAAGiX,YAAcN,GAAK3W,EAAGiX,YAAYyB,KAAK1Y,GAAK,CAC7CnD,UAAW,CACTyP,KAAM,CACJkF,SAAU,cACVjf,QAAS,YAAgByN,GACzBkU,OAAQA,GAEVmC,SAAS,EACTja,KAAM,iBAIZ,MAAO8d,IAGT,OAAOtB,EAASze,KAAK5I,KAAMsnB,EAC3BlC,GAAK3W,EAAI,CACPnD,UAAW,CACTyP,KAAM,CACJkF,SAAU,mBACVjf,QAAS,YAAgByN,GACzBkU,OAAQA,GAEVmC,SAAS,EACTja,KAAM,gBAEN2J,OAGR,YAAK0B,EAAO,uBAAuB,SAAUmR,GAC3C,OAAO,SAAUC,EAAW7Y,EAAI+F,GAkB9B,IACE6S,EAASze,KAAK5I,KAAMsnB,EAAW7Y,EAAG6W,mBAAoB9Q,GACtD,MAAOhT,IAGT,OAAO6lB,EAASze,KAAK5I,KAAMsnB,EAAW7Y,EAAI+F,SAOhD6X,EAAS/pB,UAAUoqB,SAAW,SAAUtE,GAEtC,OAAO,WAGL,IAFA,IAAIvV,EAAO,GAEFC,EAAK,EAAGA,EAAKC,UAAU/Q,OAAQ8Q,IACtCD,EAAKC,GAAMC,UAAUD,GAIvB,IAAI6U,EAAM3nB,KACN6sB,EAAsB,CAAC,SAAU,UAAW,aAAc,sBAyB9D,OAxBAA,EAAoBzrB,SAAQ,SAAU+U,GAChCA,KAAQwR,GAA4B,oBAAdA,EAAIxR,IAE5B,YAAKwR,EAAKxR,GAAM,SAAUkR,GACxB,IAAIyF,EAAc,CAChBxhB,UAAW,CACTyP,KAAM,CACJkF,SAAU9J,EACVnV,QAAS,YAAgBqmB,IAE3BvC,SAAS,EACTja,KAAM,eASV,OALIwc,EAASlc,sBACX2hB,EAAYxhB,UAAUyP,KAAK/Z,QAAU,YAAgBqmB,EAASlc,sBAIzDia,GAAKiC,EAAUyF,SAIrB1E,EAAapV,MAAMhT,KAAM6S,KAQpCwZ,EAAStf,GAAK,WACPsf,EAtNT,GCEI,GAEJ,WAEE,SAASU,EAAevY,GAItBxU,KAAKqF,KAAO0nB,EAAehgB,GAG3B/M,KAAKgtB,0BAA2B,EAGhChtB,KAAKitB,uCAAwC,EAC7CjtB,KAAKsU,SAAW,mBAAS,CACvB8V,SAAS,EACTG,sBAAsB,GACrB/V,GAsML,OA/LAuY,EAAezqB,UAAU4R,UAAY,WACnCrF,MAAMqe,gBAAkB,GAEpBltB,KAAKsU,SAAS8V,UAChBxV,EAAA,EAAOyD,IAAI,oCAEXrY,KAAKmtB,gCAGHntB,KAAKsU,SAASiW,uBAChB3V,EAAA,EAAOyD,IAAI,iDAEXrY,KAAKotB,8CAMTL,EAAezqB,UAAU6qB,6BAA+B,WACtD,IAAIptB,EAAQC,KAERA,KAAKgtB,2BAITxC,GAA0B,CAExBvmB,SAAU,SAAkB8W,GAC1B,IAAIrF,EAAQqF,EAAKrF,MACb2X,EAAa,cACbC,EAAiBD,EAAWhb,eAAe0a,GAC3CQ,EAAsB7X,IAA0C,IAAjCA,EAAMoS,uBAEzC,GAAKwF,IAAkBpI,OAAyBqI,EAAhD,CAIA,IAAIxd,EAASsd,EAAW1c,YACpB/J,EAAQ,OAAAqS,EAAA,GAAYvD,GAAS3V,EAAMytB,4BAA4BzS,EAAKsP,IAAKtP,EAAK9Q,IAAK8Q,EAAK8D,KAAM9D,EAAKgE,QAAUhf,EAAM0tB,8BAA8BrN,EAAsB1K,OAAOtP,EAAW,CAC3Lya,iBAAkB9Q,GAAUA,EAAO4B,aAAakP,iBAChDL,WAAW,IACTzF,EAAK9Q,IAAK8Q,EAAK8D,KAAM9D,EAAKgE,QAC9B,YAAsBnY,EAAO,CAC3Bke,SAAS,EACTja,KAAM,YAERwiB,EAAW7b,aAAa5K,EAAO,CAC7ByK,kBAAmBqE,MAGvB7K,KAAM,UAER7K,KAAKgtB,0BAA2B,IAKlCD,EAAezqB,UAAU8qB,0CAA4C,WACnE,IAAIrtB,EAAQC,KAERA,KAAKitB,wCAITzC,GAA0B,CAExBvmB,SAAU,SAAkBzC,GAC1B,IAAIkU,EAAQlU,EAEZ,IAGM,WAAYA,EACdkU,EAAQlU,EAAEf,OAMH,WAAYe,GAAK,WAAYA,EAAEksB,SACpChY,EAAQlU,EAAEksB,OAAOjtB,QAErB,MAAO8K,IAGT,IAAI8hB,EAAa,cACbC,EAAiBD,EAAWhb,eAAe0a,GAC3CQ,EAAsB7X,IAA0C,IAAjCA,EAAMoS,uBAEzC,IAAKwF,GAAkBpI,MAAyBqI,EAC9C,OAAO,EAGT,IAAIxd,EAASsd,EAAW1c,YACpB/J,EAAQ,OAAAqS,EAAA,GAAYvD,GAAS3V,EAAM4tB,8BAA8BjY,GAAS0K,EAAsB1K,OAAOtP,EAAW,CACpHya,iBAAkB9Q,GAAUA,EAAO4B,aAAakP,iBAChDL,WAAW,IAEb5Z,EAAMzB,MAAQoX,EAAS1N,MACvB,YAAsBjI,EAAO,CAC3Bke,SAAS,EACTja,KAAM,yBAERwiB,EAAW7b,aAAa5K,EAAO,CAC7ByK,kBAAmBqE,KAIvB7K,KAAM,uBAER7K,KAAKitB,uCAAwC,IAQ/CF,EAAezqB,UAAUkrB,4BAA8B,SAAUnD,EAAKpgB,EAAK4U,EAAME,GAC/E,IAGI1Z,EADAqF,EAAU,OAAAuO,EAAA,GAAaoR,GAAOA,EAAI3f,QAAU2f,EAGhD,GAAI,OAAApR,EAAA,GAASvO,GAAU,CACrB,IAAIkjB,EAASljB,EAAQR,MANF,4GAQf0jB,IACFvoB,EAAOuoB,EAAO,GACdljB,EAAUkjB,EAAO,IAIrB,IAAIhnB,EAAQ,CACV+D,UAAW,CACTC,OAAQ,CAAC,CACPC,KAAMxF,GAAQ,QACdhF,MAAOqK,MAIb,OAAO1K,KAAKytB,8BAA8B7mB,EAAOqD,EAAK4U,EAAME,IAQ9DgO,EAAezqB,UAAUqrB,8BAAgC,SAAUjY,GACjE,MAAO,CACL/K,UAAW,CACTC,OAAQ,CAAC,CACPC,KAAM,qBACNxK,MAAO,oDAAsDqV,OASrEqX,EAAezqB,UAAUmrB,8BAAgC,SAAU7mB,EAAOqD,EAAK4U,EAAME,GACnFnY,EAAM+D,UAAY/D,EAAM+D,WAAa,GACrC/D,EAAM+D,UAAUC,OAAShE,EAAM+D,UAAUC,QAAU,GACnDhE,EAAM+D,UAAUC,OAAO,GAAKhE,EAAM+D,UAAUC,OAAO,IAAM,GACzDhE,EAAM+D,UAAUC,OAAO,GAAG+K,WAAa/O,EAAM+D,UAAUC,OAAO,GAAG+K,YAAc,GAC/E/O,EAAM+D,UAAUC,OAAO,GAAG+K,WAAWE,OAASjP,EAAM+D,UAAUC,OAAO,GAAG+K,WAAWE,QAAU,GAC7F,IAAImK,EAAQ3R,MAAMD,SAAS2Q,EAAQ,UAAO3Y,EAAY2Y,EAClDoB,EAAS9R,MAAMD,SAASyQ,EAAM,UAAOzY,EAAYyY,EACjD/I,EAAW,OAAAmD,EAAA,GAAShP,IAAQA,EAAIjI,OAAS,EAAIiI,EAAM,cAYvD,OAV2D,IAAvDrD,EAAM+D,UAAUC,OAAO,GAAG+K,WAAWE,OAAO7T,QAC9C4E,EAAM+D,UAAUC,OAAO,GAAG+K,WAAWE,OAAO3R,KAAK,CAC/C8b,MAAOA,EACPlK,SAAUA,EACVmK,SAAU,IACVC,QAAQ,EACRC,OAAQA,IAILvZ,GAOTmmB,EAAehgB,GAAK,iBACbggB,EAtNT,GCHI,GAEJ,WAIE,SAASc,EAAarZ,QACJ,IAAZA,IACFA,EAAU,IAOZxU,KAAKqF,KAAOwoB,EAAa9gB,GACzB/M,KAAK8tB,KAAOtZ,EAAQ9P,KApBN,QAqBd1E,KAAKgjB,OAASxO,EAAQuZ,OApBN,EA6ElB,OAlDAF,EAAavrB,UAAU4R,UAAY,WACjC,aAAwB,SAAUtN,EAAOC,GACvC,IAAIoC,EAAO,cAAgBoJ,eAAewb,GAE1C,OAAI5kB,EACKA,EAAK+kB,SAASpnB,EAAOC,GAGvBD,MAQXinB,EAAavrB,UAAU0rB,SAAW,SAAUpnB,EAAOC,GACjD,IAAKD,EAAM+D,YAAc/D,EAAM+D,UAAUC,SAAW/D,IAAS,OAAAoS,EAAA,GAAapS,EAAKwK,kBAAmBxC,OAChG,OAAOjI,EAGT,IAAIqnB,EAAejuB,KAAKkuB,eAAernB,EAAKwK,kBAAmBrR,KAAK8tB,MAGpE,OADAlnB,EAAM+D,UAAUC,OAAS,mBAASqjB,EAAcrnB,EAAM+D,UAAUC,QACzDhE,GAOTinB,EAAavrB,UAAU4rB,eAAiB,SAAUxY,EAAOhR,EAAK8L,GAK5D,QAJc,IAAVA,IACFA,EAAQ,KAGL,OAAAyI,EAAA,GAAavD,EAAMhR,GAAMmK,QAAU2B,EAAMxO,OAAS,GAAKhC,KAAKgjB,OAC/D,OAAOxS,EAGT,IACI7F,EAAY8U,EADCpB,EAAkB3I,EAAMhR,KAEzC,OAAO1E,KAAKkuB,eAAexY,EAAMhR,GAAMA,EAAK,mBAAS,CAACiG,GAAY6F,KAOpEqd,EAAa9gB,GAAK,eACX8gB,EAxET,GCRI,GAAS,cAGT,GAEJ,WACE,SAASM,IAIPnuB,KAAKqF,KAAO8oB,EAAUphB,GAgCxB,OAzBAohB,EAAU7rB,UAAU4R,UAAY,WAC9B,aAAwB,SAAUtN,GAChC,GAAI,cAAgByL,eAAe8b,GAAY,CAC7C,IAAK,GAAOC,YAAc,GAAO1iB,SAC/B,OAAO9E,EAGT,IAAI8G,EAAU9G,EAAM8G,SAAW,GAI/B,OAHAA,EAAQzD,IAAMyD,EAAQzD,KAAO,GAAOyB,SAASC,KAC7C+B,EAAQsW,QAAUtW,EAAQsW,SAAW,GACrCtW,EAAQsW,QAAQ,cAAgB,GAAOoK,UAAUC,UAC1C,mBAAS,mBAAS,GAAIznB,GAAQ,CACnC8G,QAASA,IAIb,OAAO9G,MAQXunB,EAAUphB,GAAK,YACRohB,EArCT,GCRA,mCAKO,IAAI,GAAsB,CAAC,IAAI,EAAiB9Z,eAAkB,IAAI,EAAiBJ,iBAAoB,IAAI,GAAY,IAAI,GAAe,IAAI,GAAkB,IAAI,GAAgB,IAAI,IA2D5L,SAASqa,GAAK9Z,GASnB,QARgB,IAAZA,IACFA,EAAU,SAGwBpO,IAAhCoO,EAAQmD,sBACVnD,EAAQmD,oBAAsB,SAGRvR,IAApBoO,EAAQyG,QAAuB,CACjC,IAAIsT,EAAW,cAEXA,EAASC,gBAAkBD,EAASC,eAAezhB,KACrDyH,EAAQyG,QAAUsT,EAASC,eAAezhB,KCnEzC,SAAqB0hB,EAAaja,IACjB,IAAlBA,EAAQka,OACV9Z,EAAA,EAAO+Z,SAGT,IAAItb,EAAM,cACNtD,EAAS,IAAI0e,EAAYja,GAC7BnB,EAAInD,WAAWH,GDgEf6e,CAAY,GAAepa,K,gCEjF7B,0HASA,SAASqa,EAAUjc,GAGjB,IAFA,IAAIC,EAAO,GAEFC,EAAK,EAAGA,EAAKC,UAAU/Q,OAAQ8Q,IACtCD,EAAKC,EAAK,GAAKC,UAAUD,GAG3B,IAAIO,EAAM,cAEV,GAAIA,GAAOA,EAAIT,GAEb,OAAOS,EAAIT,GAAQI,MAAMK,EAAK,mBAASR,IAGzC,MAAM,IAAIhE,MAAM,qBAAuB+D,EAAS,wDAW3C,SAAS5B,EAAiBrG,EAAW3E,GAC1C,IAAIoL,EAEJ,IACE,MAAM,IAAIvC,MAAM,6BAChB,MAAOlE,GACPyG,EAAqBzG,EAGvB,OAAOkkB,EAAU,mBAAoBlkB,EAAW,CAC9C3E,eAAgBA,EAChBqL,kBAAmB1G,EACnByG,mBAAoBA,IAWjB,SAASG,EAAe7G,EAAS1E,GACtC,IAAIoL,EAEJ,IACE,MAAM,IAAIvC,MAAMnE,GAChB,MAAOC,GACPyG,EAAqBzG,EAKvB,IACInF,EAAoC,kBAAnBQ,EAA8B,CACjDA,eAAgBA,QACdI,EACJ,OAAOyoB,EAAU,iBAAkBnkB,EAJG,kBAAnB1E,EAA8BA,OAAiBI,EAIf,mBAAS,CAC1DiL,kBAAmB3G,EACnB0G,mBAAoBA,GACnB5L,IAmGE,SAASsL,EAAU7M,GACxB4qB,EAAU,YAAa5qB,K,iCC/KzB,gOAcO,SAAS6qB,EAAKC,EAAQ1pB,EAAM2pB,GACjC,GAAM3pB,KAAQ0pB,EAAd,CAIA,IAAI1H,EAAW0H,EAAO1pB,GAClB4pB,EAAUD,EAAY3H,GAG1B,GAAuB,oBAAZ4H,EACT,IACEA,EAAQ3sB,UAAY2sB,EAAQ3sB,WAAa,GACzCwE,OAAOgf,iBAAiBmJ,EAAS,CAC/B9jB,oBAAqB,CACnB0a,YAAY,EACZxlB,MAAOgnB,KAGX,MAAOvT,IAKXib,EAAO1pB,GAAQ4pB,GASV,SAASC,EAAUC,GACxB,OAAOroB,OAAOC,KAAKooB,GAAQrX,KAAI,SAAUpT,GACvC,OAAO+d,mBAAmB/d,GAAO,IAAM+d,mBAAmB0M,EAAOzqB,OAChE8H,KAAK,KASV,SAAS4iB,EAAc/uB,GACrB,GAAI,YAAQA,GAAQ,CAClB,IAAIqV,EAAQrV,EACRsoB,EAAM,CACRje,QAASgL,EAAMhL,QACfrF,KAAMqQ,EAAMrQ,KACZmL,MAAOkF,EAAMlF,OAGf,IAAK,IAAIjI,KAAKmN,EACR5O,OAAOxE,UAAU8T,eAAexN,KAAK8M,EAAOnN,KAC9CogB,EAAIpgB,GAAKmN,EAAMnN,IAInB,OAAOogB,EAGT,GAAI,YAAQtoB,GAAQ,CAClB,IAAIgvB,EAAUhvB,EACV0uB,EAAS,GACbA,EAAOlkB,KAAOwkB,EAAQxkB,KAEtB,IACEkkB,EAAOpM,OAAS,YAAU0M,EAAQ1M,QAAU,YAAiB0M,EAAQ1M,QAAU7b,OAAOxE,UAAUS,SAAS6F,KAAKymB,EAAQ1M,QACtH,MAAOpX,GACPwjB,EAAOpM,OAAS,YAGlB,IACEoM,EAAOO,cAAgB,YAAUD,EAAQC,eAAiB,YAAiBD,EAAQC,eAAiBxoB,OAAOxE,UAAUS,SAAS6F,KAAKymB,EAAQC,eAC3I,MAAO/jB,GACPwjB,EAAOO,cAAgB,YAOzB,IAAK,IAAI/mB,IAJkB,qBAAhBgnB,aAA+B,YAAalvB,EAAOkvB,eAC5DR,EAAOrB,OAAS2B,EAAQ3B,QAGZ2B,EACRvoB,OAAOxE,UAAU8T,eAAexN,KAAKymB,EAAS9mB,KAChDwmB,EAAOxmB,GAAK8mB,GAIhB,OAAON,EAGT,OAAO1uB,EAYT,SAASmvB,EAASnvB,GAChB,OARF,SAAoBA,GAElB,QAASovB,UAAUpvB,GAAO2M,MAAM,SAAShL,OAMlC0tB,CAAWvO,KAAKC,UAAU/gB,IAK5B,SAASsvB,EAAgBR,EAChCvU,EACAgV,QACgB,IAAVhV,IACFA,EAAQ,QAGM,IAAZgV,IACFA,EAAU,QAGZ,IAAIC,EAAaC,EAAUX,EAAQvU,GAEnC,OAAI4U,EAASK,GAAcD,EAClBD,EAAgBR,EAAQvU,EAAQ,EAAGgV,GAGrCC,EAiCT,SAASE,EAAe1vB,EAAOqE,GAC7B,MAAY,WAARA,GAAoBrE,GAA0B,kBAAVA,GAAsBA,EAAM2vB,QAC3D,WAGG,kBAARtrB,EACK,kBAGa,qBAAXiD,GAA0BtH,IAAUsH,EACtC,WAGa,qBAAXqB,QAA0B3I,IAAU2I,OACtC,WAGe,qBAAbyC,UAA4BpL,IAAUoL,SACxC,aAIL,YAAiBpL,GACZ,mBAGY,kBAAVA,GAAsBA,IAAUA,EAClC,aAGK,IAAVA,EACK,cAGY,oBAAVA,EACF,cAAgB,YAAgBA,GAAS,IAG3CA,EAaF,SAAS4vB,EAAKvrB,EAAKrE,EAAOua,EAAOsV,GAUtC,QATc,IAAVtV,IACFA,EAASuV,UAGE,IAATD,IACFA,EAAO,IAAI,KAIC,IAAVtV,EACF,OA3FJ,SAAwBva,GACtB,IAAIwK,EAAO/D,OAAOxE,UAAUS,SAAS6F,KAAKvI,GAE1C,GAAqB,kBAAVA,EACT,OAAOA,EAGT,GAAa,oBAATwK,EACF,MAAO,WAGT,GAAa,mBAATA,EACF,MAAO,UAGT,IAAIgQ,EAAakV,EAAe1vB,GAChC,OAAO,YAAYwa,GAAcA,EAAahQ,EA2ErCulB,CAAe/vB,GAMxB,GAAc,OAAVA,QAA4B+F,IAAV/F,GAA+C,oBAAjBA,EAAMgwB,OACxD,OAAOhwB,EAAMgwB,SAMf,IAAIxV,EAAakV,EAAe1vB,EAAOqE,GAEvC,GAAI,YAAYmW,GACd,OAAOA,EAIT,IAAIkU,EAASK,EAAc/uB,GAEvBiwB,EAAMxuB,MAAMC,QAAQ1B,GAAS,GAAK,GAEtC,GAAI6vB,EAAK/nB,QAAQ9H,GACf,MAAO,eAIT,IAAK,IAAIkwB,KAAYxB,EAEdjoB,OAAOxE,UAAU8T,eAAexN,KAAKmmB,EAAQwB,KAKlDD,EAAIC,GAAYN,EAAKM,EAAUxB,EAAOwB,GAAW3V,EAAQ,EAAGsV,IAM9D,OAFAA,EAAK1nB,UAAUnI,GAERiwB,EAgBF,SAASR,EAAUlP,EAAOhG,GAC/B,IACE,OAAOuG,KAAK5S,MAAM4S,KAAKC,UAAUR,GAAO,SAAUlc,EAAKrE,GACrD,OAAO4vB,EAAKvrB,EAAKrE,EAAOua,OAE1B,MAAOrP,GACP,MAAO,wBAUJ,SAASilB,EAA+B7lB,EAAW8lB,QACtC,IAAdA,IACFA,EAAY,IAGd,IAAI1pB,EAAOD,OAAOC,KAAKqoB,EAAczkB,IAGrC,GAFA5D,EAAK2pB,QAEA3pB,EAAK/E,OACR,MAAO,uBAGT,GAAI+E,EAAK,GAAG/E,QAAUyuB,EACpB,OAAO,YAAS1pB,EAAK,GAAI0pB,GAG3B,IAAK,IAAIE,EAAe5pB,EAAK/E,OAAQ2uB,EAAe,EAAGA,IAAgB,CACrE,IAAId,EAAa9oB,EAAK5F,MAAM,EAAGwvB,GAAcnkB,KAAK,MAElD,KAAIqjB,EAAW7tB,OAASyuB,GAIxB,OAAIE,IAAiB5pB,EAAK/E,OACjB6tB,EAGF,YAASA,EAAYY,GAG9B,MAAO,M,kDCpVT,oJASO,SAASG,EAASzZ,EAAK0Z,GAK5B,YAJY,IAARA,IACFA,EAAM,GAGW,kBAAR1Z,GAA4B,IAAR0Z,GAIxB1Z,EAAInV,QAAU6uB,EAHZ1Z,EAGwBA,EAAIkI,OAAO,EAAGwR,GAAO,MAWjD,SAASC,EAASjS,EAAMmB,GAC7B,IAAI+Q,EAAUlS,EACVmS,EAAKD,EAAQ/uB,OAEjB,GAAIgvB,GAAM,IACR,OAAOD,EAGL/Q,EAAQgR,IAEVhR,EAAQgR,GAGV,IAAIC,EAAQnnB,KAAK+mB,IAAI7Q,EAAQ,GAAI,GAE7BiR,EAAQ,IACVA,EAAQ,GAGV,IAAIC,EAAMpnB,KAAKkI,IAAIif,EAAQ,IAAKD,GAoBhC,OAlBIE,EAAMF,EAAK,IACbE,EAAMF,GAGJE,IAAQF,IACVC,EAAQnnB,KAAK+mB,IAAIK,EAAM,IAAK,IAG9BH,EAAUA,EAAQ5vB,MAAM8vB,EAAOC,GAE3BD,EAAQ,IACVF,EAAU,WAAaA,GAGrBG,EAAMF,IACRD,GAAW,WAGNA,EAUF,SAASI,EAASvQ,EAAOwQ,GAC9B,IAAKtvB,MAAMC,QAAQ6e,GACjB,MAAO,GAKT,IAFA,IAAIyQ,EAAS,GAEJ9oB,EAAI,EAAGA,EAAIqY,EAAM5e,OAAQuG,IAAK,CACrC,IAAIlI,EAAQugB,EAAMrY,GAElB,IACE8oB,EAAOntB,KAAK+lB,OAAO5pB,IACnB,MAAOmB,GACP6vB,EAAOntB,KAAK,iCAIhB,OAAOmtB,EAAO7kB,KAAK4kB,GAQd,SAASE,EAAkBjxB,EAAOgV,GACvC,QAAK,YAAShV,KAIV,YAASgV,GACJA,EAAQiI,KAAKjd,GAGC,kBAAZgV,IAC0B,IAA5BhV,EAAM4X,QAAQ5C,M,gCCjHzB,8CAGI1N,EAAS,cAGT4pB,EAAS,iBAGTC,EAEJ,WAEE,SAASA,IACPxxB,KAAKyxB,UAAW,EAqElB,OAhEAD,EAAOlvB,UAAUovB,QAAU,WACzB1xB,KAAKyxB,UAAW,GAKlBD,EAAOlvB,UAAUqsB,OAAS,WACxB3uB,KAAKyxB,UAAW,GAKlBD,EAAOlvB,UAAU+V,IAAM,WAGrB,IAFA,IAAIxF,EAAO,GAEFC,EAAK,EAAGA,EAAKC,UAAU/Q,OAAQ8Q,IACtCD,EAAKC,GAAMC,UAAUD,GAGlB9S,KAAKyxB,UAIV,aAAe,WACb9pB,EAAOsD,QAAQoN,IAAIkZ,EAAS,UAAY1e,EAAKrG,KAAK,UAMtDglB,EAAOlvB,UAAUiQ,KAAO,WAGtB,IAFA,IAAIM,EAAO,GAEFC,EAAK,EAAGA,EAAKC,UAAU/Q,OAAQ8Q,IACtCD,EAAKC,GAAMC,UAAUD,GAGlB9S,KAAKyxB,UAIV,aAAe,WACb9pB,EAAOsD,QAAQsH,KAAKgf,EAAS,WAAa1e,EAAKrG,KAAK,UAMxDglB,EAAOlvB,UAAUoT,MAAQ,WAGvB,IAFA,IAAI7C,EAAO,GAEFC,EAAK,EAAGA,EAAKC,UAAU/Q,OAAQ8Q,IACtCD,EAAKC,GAAMC,UAAUD,GAGlB9S,KAAKyxB,UAIV,aAAe,WACb9pB,EAAOsD,QAAQyK,MAAM6b,EAAS,YAAc1e,EAAKrG,KAAK,UAInDglB,EAxET,GA4EA7pB,EAAOC,WAAaD,EAAOC,YAAc,GACzC,IAAIgN,EAASjN,EAAOC,WAAWgN,SAAWjN,EAAOC,WAAWgN,OAAS,IAAI4c","file":"static/js/npm.@sentry.e1b0bfab.chunk.js","sourcesContent":["/* eslint-disable @typescript-eslint/explicit-function-return-type */\n\n/* eslint-disable @typescript-eslint/typedef */\n\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { isThenable } from './is';\n/** SyncPromise internal states */\n\nvar States;\n\n(function (States) {\n  /** Pending */\n  States[\"PENDING\"] = \"PENDING\";\n  /** Resolved / OK */\n\n  States[\"RESOLVED\"] = \"RESOLVED\";\n  /** Rejected / Error */\n\n  States[\"REJECTED\"] = \"REJECTED\";\n})(States || (States = {}));\n/**\n * Thenable class that behaves like a Promise and follows it's interface\n * but is not async internally\n */\n\n\nvar SyncPromise =\n/** @class */\nfunction () {\n  function SyncPromise(executor) {\n    var _this = this;\n\n    this._state = States.PENDING;\n    this._handlers = [];\n    /** JSDoc */\n\n    this._resolve = function (value) {\n      _this._setResult(States.RESOLVED, value);\n    };\n    /** JSDoc */\n\n\n    this._reject = function (reason) {\n      _this._setResult(States.REJECTED, reason);\n    };\n    /** JSDoc */\n\n\n    this._setResult = function (state, value) {\n      if (_this._state !== States.PENDING) {\n        return;\n      }\n\n      if (isThenable(value)) {\n        value.then(_this._resolve, _this._reject);\n        return;\n      }\n\n      _this._state = state;\n      _this._value = value;\n\n      _this._executeHandlers();\n    }; // TODO: FIXME\n\n    /** JSDoc */\n\n\n    this._attachHandler = function (handler) {\n      _this._handlers = _this._handlers.concat(handler);\n\n      _this._executeHandlers();\n    };\n    /** JSDoc */\n\n\n    this._executeHandlers = function () {\n      if (_this._state === States.PENDING) {\n        return;\n      }\n\n      var cachedHandlers = _this._handlers.slice();\n\n      _this._handlers = [];\n      cachedHandlers.forEach(function (handler) {\n        if (handler.done) {\n          return;\n        }\n\n        if (_this._state === States.RESOLVED) {\n          if (handler.onfulfilled) {\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\n            handler.onfulfilled(_this._value);\n          }\n        }\n\n        if (_this._state === States.REJECTED) {\n          if (handler.onrejected) {\n            handler.onrejected(_this._value);\n          }\n        }\n\n        handler.done = true;\n      });\n    };\n\n    try {\n      executor(this._resolve, this._reject);\n    } catch (e) {\n      this._reject(e);\n    }\n  }\n  /** JSDoc */\n\n\n  SyncPromise.resolve = function (value) {\n    return new SyncPromise(function (resolve) {\n      resolve(value);\n    });\n  };\n  /** JSDoc */\n\n\n  SyncPromise.reject = function (reason) {\n    return new SyncPromise(function (_, reject) {\n      reject(reason);\n    });\n  };\n  /** JSDoc */\n\n\n  SyncPromise.all = function (collection) {\n    return new SyncPromise(function (resolve, reject) {\n      if (!Array.isArray(collection)) {\n        reject(new TypeError(\"Promise.all requires an array as input.\"));\n        return;\n      }\n\n      if (collection.length === 0) {\n        resolve([]);\n        return;\n      }\n\n      var counter = collection.length;\n      var resolvedCollection = [];\n      collection.forEach(function (item, index) {\n        SyncPromise.resolve(item).then(function (value) {\n          resolvedCollection[index] = value;\n          counter -= 1;\n\n          if (counter !== 0) {\n            return;\n          }\n\n          resolve(resolvedCollection);\n        }).then(null, reject);\n      });\n    });\n  };\n  /** JSDoc */\n\n\n  SyncPromise.prototype.then = function (_onfulfilled, _onrejected) {\n    var _this = this;\n\n    return new SyncPromise(function (resolve, reject) {\n      _this._attachHandler({\n        done: false,\n        onfulfilled: function onfulfilled(result) {\n          if (!_onfulfilled) {\n            // TODO: ¯\\_(ツ)_/¯\n            // TODO: FIXME\n            resolve(result);\n            return;\n          }\n\n          try {\n            resolve(_onfulfilled(result));\n            return;\n          } catch (e) {\n            reject(e);\n            return;\n          }\n        },\n        onrejected: function onrejected(reason) {\n          if (!_onrejected) {\n            reject(reason);\n            return;\n          }\n\n          try {\n            resolve(_onrejected(reason));\n            return;\n          } catch (e) {\n            reject(e);\n            return;\n          }\n        }\n      });\n    });\n  };\n  /** JSDoc */\n\n\n  SyncPromise.prototype.catch = function (onrejected) {\n    return this.then(function (val) {\n      return val;\n    }, onrejected);\n  };\n  /** JSDoc */\n\n\n  SyncPromise.prototype.finally = function (onfinally) {\n    var _this = this;\n\n    return new SyncPromise(function (resolve, reject) {\n      var val;\n      var isRejected;\n      return _this.then(function (value) {\n        isRejected = false;\n        val = value;\n\n        if (onfinally) {\n          onfinally();\n        }\n      }, function (reason) {\n        isRejected = true;\n        val = reason;\n\n        if (onfinally) {\n          onfinally();\n        }\n      }).then(function () {\n        if (isRejected) {\n          reject(val);\n          return;\n        }\n\n        resolve(val);\n      });\n    });\n  };\n  /** JSDoc */\n\n\n  SyncPromise.prototype.toString = function () {\n    return '[object SyncPromise]';\n  };\n\n  return SyncPromise;\n}();\n\nexport { SyncPromise };","import { __assign, __read, __spread } from \"tslib\";\nimport { getGlobalObject, isPlainObject, isThenable, SyncPromise, timestampWithMs } from '@sentry/utils';\n/**\n * Holds additional event information. {@link Scope.applyToEvent} will be\n * called by the client before an event will be sent.\n */\n\nvar Scope =\n/** @class */\nfunction () {\n  function Scope() {\n    /** Flag if notifiying is happening. */\n    this._notifyingListeners = false;\n    /** Callback for client to receive scope changes. */\n\n    this._scopeListeners = [];\n    /** Callback list that will be called after {@link applyToEvent}. */\n\n    this._eventProcessors = [];\n    /** Array of breadcrumbs. */\n\n    this._breadcrumbs = [];\n    /** User */\n\n    this._user = {};\n    /** Tags */\n\n    this._tags = {};\n    /** Extra */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    this._extra = {};\n    /** Contexts */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    this._contexts = {};\n  }\n  /**\n   * Inherit values from the parent scope.\n   * @param scope to clone.\n   */\n\n\n  Scope.clone = function (scope) {\n    var newScope = new Scope();\n\n    if (scope) {\n      newScope._breadcrumbs = __spread(scope._breadcrumbs);\n      newScope._tags = __assign({}, scope._tags);\n      newScope._extra = __assign({}, scope._extra);\n      newScope._contexts = __assign({}, scope._contexts);\n      newScope._user = scope._user;\n      newScope._level = scope._level;\n      newScope._span = scope._span;\n      newScope._transactionName = scope._transactionName;\n      newScope._fingerprint = scope._fingerprint;\n      newScope._eventProcessors = __spread(scope._eventProcessors);\n    }\n\n    return newScope;\n  };\n  /**\n   * Add internal on change listener. Used for sub SDKs that need to store the scope.\n   * @hidden\n   */\n\n\n  Scope.prototype.addScopeListener = function (callback) {\n    this._scopeListeners.push(callback);\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Scope.prototype.addEventProcessor = function (callback) {\n    this._eventProcessors.push(callback);\n\n    return this;\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Scope.prototype.setUser = function (user) {\n    this._user = user || {};\n\n    this._notifyScopeListeners();\n\n    return this;\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Scope.prototype.setTags = function (tags) {\n    this._tags = __assign(__assign({}, this._tags), tags);\n\n    this._notifyScopeListeners();\n\n    return this;\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Scope.prototype.setTag = function (key, value) {\n    var _a;\n\n    this._tags = __assign(__assign({}, this._tags), (_a = {}, _a[key] = value, _a));\n\n    this._notifyScopeListeners();\n\n    return this;\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Scope.prototype.setExtras = function (extras) {\n    this._extra = __assign(__assign({}, this._extra), extras);\n\n    this._notifyScopeListeners();\n\n    return this;\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Scope.prototype.setExtra = function (key, extra) {\n    var _a;\n\n    this._extra = __assign(__assign({}, this._extra), (_a = {}, _a[key] = extra, _a));\n\n    this._notifyScopeListeners();\n\n    return this;\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Scope.prototype.setFingerprint = function (fingerprint) {\n    this._fingerprint = fingerprint;\n\n    this._notifyScopeListeners();\n\n    return this;\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Scope.prototype.setLevel = function (level) {\n    this._level = level;\n\n    this._notifyScopeListeners();\n\n    return this;\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Scope.prototype.setTransactionName = function (name) {\n    this._transactionName = name;\n\n    this._notifyScopeListeners();\n\n    return this;\n  };\n  /**\n   * Can be removed in major version.\n   * @deprecated in favor of {@link this.setTransactionName}\n   */\n\n\n  Scope.prototype.setTransaction = function (name) {\n    return this.setTransactionName(name);\n  };\n  /**\n   * @inheritDoc\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  Scope.prototype.setContext = function (key, context) {\n    var _a;\n\n    this._contexts = __assign(__assign({}, this._contexts), (_a = {}, _a[key] = context, _a));\n\n    this._notifyScopeListeners();\n\n    return this;\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Scope.prototype.setSpan = function (span) {\n    this._span = span;\n\n    this._notifyScopeListeners();\n\n    return this;\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Scope.prototype.getSpan = function () {\n    return this._span;\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Scope.prototype.getTransaction = function () {\n    var span = this.getSpan();\n\n    if (span && span.spanRecorder && span.spanRecorder.spans[0]) {\n      return span.spanRecorder.spans[0];\n    }\n\n    return undefined;\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Scope.prototype.update = function (captureContext) {\n    if (!captureContext) {\n      return this;\n    }\n\n    if (typeof captureContext === 'function') {\n      var updatedScope = captureContext(this);\n      return updatedScope instanceof Scope ? updatedScope : this;\n    }\n\n    if (captureContext instanceof Scope) {\n      this._tags = __assign(__assign({}, this._tags), captureContext._tags);\n      this._extra = __assign(__assign({}, this._extra), captureContext._extra);\n      this._contexts = __assign(__assign({}, this._contexts), captureContext._contexts);\n\n      if (captureContext._user) {\n        this._user = captureContext._user;\n      }\n\n      if (captureContext._level) {\n        this._level = captureContext._level;\n      }\n\n      if (captureContext._fingerprint) {\n        this._fingerprint = captureContext._fingerprint;\n      }\n    } else if (isPlainObject(captureContext)) {\n      // eslint-disable-next-line no-param-reassign\n      captureContext = captureContext;\n      this._tags = __assign(__assign({}, this._tags), captureContext.tags);\n      this._extra = __assign(__assign({}, this._extra), captureContext.extra);\n      this._contexts = __assign(__assign({}, this._contexts), captureContext.contexts);\n\n      if (captureContext.user) {\n        this._user = captureContext.user;\n      }\n\n      if (captureContext.level) {\n        this._level = captureContext.level;\n      }\n\n      if (captureContext.fingerprint) {\n        this._fingerprint = captureContext.fingerprint;\n      }\n    }\n\n    return this;\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Scope.prototype.clear = function () {\n    this._breadcrumbs = [];\n    this._tags = {};\n    this._extra = {};\n    this._user = {};\n    this._contexts = {};\n    this._level = undefined;\n    this._transactionName = undefined;\n    this._fingerprint = undefined;\n    this._span = undefined;\n\n    this._notifyScopeListeners();\n\n    return this;\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Scope.prototype.addBreadcrumb = function (breadcrumb, maxBreadcrumbs) {\n    var mergedBreadcrumb = __assign({\n      timestamp: timestampWithMs()\n    }, breadcrumb);\n\n    this._breadcrumbs = maxBreadcrumbs !== undefined && maxBreadcrumbs >= 0 ? __spread(this._breadcrumbs, [mergedBreadcrumb]).slice(-maxBreadcrumbs) : __spread(this._breadcrumbs, [mergedBreadcrumb]);\n\n    this._notifyScopeListeners();\n\n    return this;\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Scope.prototype.clearBreadcrumbs = function () {\n    this._breadcrumbs = [];\n\n    this._notifyScopeListeners();\n\n    return this;\n  };\n  /**\n   * Applies the current context and fingerprint to the event.\n   * Note that breadcrumbs will be added by the client.\n   * Also if the event has already breadcrumbs on it, we do not merge them.\n   * @param event Event\n   * @param hint May contain additional informartion about the original exception.\n   * @hidden\n   */\n\n\n  Scope.prototype.applyToEvent = function (event, hint) {\n    if (this._extra && Object.keys(this._extra).length) {\n      event.extra = __assign(__assign({}, this._extra), event.extra);\n    }\n\n    if (this._tags && Object.keys(this._tags).length) {\n      event.tags = __assign(__assign({}, this._tags), event.tags);\n    }\n\n    if (this._user && Object.keys(this._user).length) {\n      event.user = __assign(__assign({}, this._user), event.user);\n    }\n\n    if (this._contexts && Object.keys(this._contexts).length) {\n      event.contexts = __assign(__assign({}, this._contexts), event.contexts);\n    }\n\n    if (this._level) {\n      event.level = this._level;\n    }\n\n    if (this._transactionName) {\n      event.transaction = this._transactionName;\n    } // We want to set the trace context for normal events only if there isn't already\n    // a trace context on the event. There is a product feature in place where we link\n    // errors with transaction and it relys on that.\n\n\n    if (this._span) {\n      event.contexts = __assign({\n        trace: this._span.getTraceContext()\n      }, event.contexts);\n    }\n\n    this._applyFingerprint(event);\n\n    event.breadcrumbs = __spread(event.breadcrumbs || [], this._breadcrumbs);\n    event.breadcrumbs = event.breadcrumbs.length > 0 ? event.breadcrumbs : undefined;\n    return this._notifyEventProcessors(__spread(getGlobalEventProcessors(), this._eventProcessors), event, hint);\n  };\n  /**\n   * This will be called after {@link applyToEvent} is finished.\n   */\n\n\n  Scope.prototype._notifyEventProcessors = function (processors, event, hint, index) {\n    var _this = this;\n\n    if (index === void 0) {\n      index = 0;\n    }\n\n    return new SyncPromise(function (resolve, reject) {\n      var processor = processors[index];\n\n      if (event === null || typeof processor !== 'function') {\n        resolve(event);\n      } else {\n        var result = processor(__assign({}, event), hint);\n\n        if (isThenable(result)) {\n          result.then(function (final) {\n            return _this._notifyEventProcessors(processors, final, hint, index + 1).then(resolve);\n          }).then(null, reject);\n        } else {\n          _this._notifyEventProcessors(processors, result, hint, index + 1).then(resolve).then(null, reject);\n        }\n      }\n    });\n  };\n  /**\n   * This will be called on every set call.\n   */\n\n\n  Scope.prototype._notifyScopeListeners = function () {\n    var _this = this;\n\n    if (!this._notifyingListeners) {\n      this._notifyingListeners = true;\n      setTimeout(function () {\n        _this._scopeListeners.forEach(function (callback) {\n          callback(_this);\n        });\n\n        _this._notifyingListeners = false;\n      });\n    }\n  };\n  /**\n   * Applies fingerprint from the scope to the event if there's one,\n   * uses message if there's one instead or get rid of empty fingerprint\n   */\n\n\n  Scope.prototype._applyFingerprint = function (event) {\n    // Make sure it's an array first and we actually have something in place\n    event.fingerprint = event.fingerprint ? Array.isArray(event.fingerprint) ? event.fingerprint : [event.fingerprint] : []; // If we have something on the scope, then merge it with event\n\n    if (this._fingerprint) {\n      event.fingerprint = event.fingerprint.concat(this._fingerprint);\n    } // If we have no data at all, remove empty array default\n\n\n    if (event.fingerprint && !event.fingerprint.length) {\n      delete event.fingerprint;\n    }\n  };\n\n  return Scope;\n}();\n\nexport { Scope };\n/**\n * Retruns the global event processors.\n */\n\nfunction getGlobalEventProcessors() {\n  var global = getGlobalObject();\n  global.__SENTRY__ = global.__SENTRY__ || {};\n  global.__SENTRY__.globalEventProcessors = global.__SENTRY__.globalEventProcessors || [];\n  return global.__SENTRY__.globalEventProcessors;\n}\n/**\n * Add a EventProcessor to be kept globally.\n * @param callback EventProcessor to add\n */\n\n\nexport function addGlobalEventProcessor(callback) {\n  getGlobalEventProcessors().push(callback);\n}","/* eslint-disable @typescript-eslint/no-unsafe-member-access */\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\n\n/**\n * Memo class used for decycle json objects. Uses WeakSet if available otherwise array.\n */\nvar Memo =\n/** @class */\nfunction () {\n  function Memo() {\n    this._hasWeakSet = typeof WeakSet === 'function';\n    this._inner = this._hasWeakSet ? new WeakSet() : [];\n  }\n  /**\n   * Sets obj to remember.\n   * @param obj Object to remember\n   */\n\n\n  Memo.prototype.memoize = function (obj) {\n    if (this._hasWeakSet) {\n      if (this._inner.has(obj)) {\n        return true;\n      }\n\n      this._inner.add(obj);\n\n      return false;\n    } // eslint-disable-next-line @typescript-eslint/prefer-for-of\n\n\n    for (var i = 0; i < this._inner.length; i++) {\n      var value = this._inner[i];\n\n      if (value === obj) {\n        return true;\n      }\n    }\n\n    this._inner.push(obj);\n\n    return false;\n  };\n  /**\n   * Removes object from internal storage.\n   * @param obj Object to forget\n   */\n\n\n  Memo.prototype.unmemoize = function (obj) {\n    if (this._hasWeakSet) {\n      this._inner.delete(obj);\n    } else {\n      for (var i = 0; i < this._inner.length; i++) {\n        if (this._inner[i] === obj) {\n          this._inner.splice(i, 1);\n\n          break;\n        }\n      }\n    }\n  };\n\n  return Memo;\n}();\n\nexport { Memo };","import { isString } from './is';\nimport { snipLine } from './string';\n/**\n * Requires a module which is protected against bundler minification.\n *\n * @param request The module path to resolve\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\nexport function dynamicRequire(mod, request) {\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  return mod.require(request);\n}\n/**\n * Checks whether we're in the Node.js or Browser environment\n *\n * @returns Answer to given question\n */\n\nexport function isNodeEnv() {\n  return Object.prototype.toString.call(typeof process !== 'undefined' ? process : 0) === '[object process]';\n}\nvar fallbackGlobalObject = {};\n/**\n * Safely get global scope object\n *\n * @returns Global scope object\n */\n\nexport function getGlobalObject() {\n  return isNodeEnv() ? global : typeof window !== 'undefined' ? window : typeof self !== 'undefined' ? self : fallbackGlobalObject;\n}\n/**\n * UUID4 generator\n *\n * @returns string Generated UUID4.\n */\n\nexport function uuid4() {\n  var global = getGlobalObject();\n  var crypto = global.crypto || global.msCrypto;\n\n  if (!(crypto === void 0) && crypto.getRandomValues) {\n    // Use window.crypto API if available\n    var arr = new Uint16Array(8);\n    crypto.getRandomValues(arr); // set 4 in byte 7\n    // eslint-disable-next-line no-bitwise\n\n    arr[3] = arr[3] & 0xfff | 0x4000; // set 2 most significant bits of byte 9 to '10'\n    // eslint-disable-next-line no-bitwise\n\n    arr[4] = arr[4] & 0x3fff | 0x8000;\n\n    var pad = function pad(num) {\n      var v = num.toString(16);\n\n      while (v.length < 4) {\n        v = \"0\" + v;\n      }\n\n      return v;\n    };\n\n    return pad(arr[0]) + pad(arr[1]) + pad(arr[2]) + pad(arr[3]) + pad(arr[4]) + pad(arr[5]) + pad(arr[6]) + pad(arr[7]);\n  } // http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/2117523#2117523\n\n\n  return 'xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    // eslint-disable-next-line no-bitwise\n    var r = Math.random() * 16 | 0; // eslint-disable-next-line no-bitwise\n\n    var v = c === 'x' ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n}\n/**\n * Parses string form of URL into an object\n * // borrowed from https://tools.ietf.org/html/rfc3986#appendix-B\n * // intentionally using regex and not <a/> href parsing trick because React Native and other\n * // environments where DOM might not be available\n * @returns parsed URL object\n */\n\nexport function parseUrl(url) {\n  if (!url) {\n    return {};\n  }\n\n  var match = url.match(/^(([^:/?#]+):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$/);\n\n  if (!match) {\n    return {};\n  } // coerce to undefined values to empty string so we don't get 'undefined'\n\n\n  var query = match[6] || '';\n  var fragment = match[8] || '';\n  return {\n    host: match[4],\n    path: match[5],\n    protocol: match[2],\n    relative: match[5] + query + fragment\n  };\n}\n/**\n * Extracts either message or type+value from an event that can be used for user-facing logs\n * @returns event's description\n */\n\nexport function getEventDescription(event) {\n  if (event.message) {\n    return event.message;\n  }\n\n  if (event.exception && event.exception.values && event.exception.values[0]) {\n    var exception = event.exception.values[0];\n\n    if (exception.type && exception.value) {\n      return exception.type + \": \" + exception.value;\n    }\n\n    return exception.type || exception.value || event.event_id || '<unknown>';\n  }\n\n  return event.event_id || '<unknown>';\n}\n/** JSDoc */\n\nexport function consoleSandbox(callback) {\n  var global = getGlobalObject();\n  var levels = ['debug', 'info', 'warn', 'error', 'log', 'assert'];\n\n  if (!('console' in global)) {\n    return callback();\n  }\n\n  var originalConsole = global.console;\n  var wrappedLevels = {}; // Restore all wrapped console methods\n\n  levels.forEach(function (level) {\n    if (level in global.console && originalConsole[level].__sentry_original__) {\n      wrappedLevels[level] = originalConsole[level];\n      originalConsole[level] = originalConsole[level].__sentry_original__;\n    }\n  }); // Perform callback manipulations\n\n  var result = callback(); // Revert restoration to wrapped state\n\n  Object.keys(wrappedLevels).forEach(function (level) {\n    originalConsole[level] = wrappedLevels[level];\n  });\n  return result;\n}\n/**\n * Adds exception values, type and value to an synthetic Exception.\n * @param event The event to modify.\n * @param value Value of the exception.\n * @param type Type of the exception.\n * @hidden\n */\n\nexport function addExceptionTypeValue(event, value, type) {\n  event.exception = event.exception || {};\n  event.exception.values = event.exception.values || [];\n  event.exception.values[0] = event.exception.values[0] || {};\n  event.exception.values[0].value = event.exception.values[0].value || value || '';\n  event.exception.values[0].type = event.exception.values[0].type || type || 'Error';\n}\n/**\n * Adds exception mechanism to a given event.\n * @param event The event to modify.\n * @param mechanism Mechanism of the mechanism.\n * @hidden\n */\n\nexport function addExceptionMechanism(event, mechanism) {\n  if (mechanism === void 0) {\n    mechanism = {};\n  } // TODO: Use real type with `keyof Mechanism` thingy and maybe make it better?\n\n\n  try {\n    // @ts-ignore Type 'Mechanism | {}' is not assignable to type 'Mechanism | undefined'\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    event.exception.values[0].mechanism = event.exception.values[0].mechanism || {};\n    Object.keys(mechanism).forEach(function (key) {\n      // @ts-ignore Mechanism has no index signature\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      event.exception.values[0].mechanism[key] = mechanism[key];\n    });\n  } catch (_oO) {// no-empty\n  }\n}\n/**\n * A safe form of location.href\n */\n\nexport function getLocationHref() {\n  try {\n    return document.location.href;\n  } catch (oO) {\n    return '';\n  }\n}\n/**\n * Given a child DOM element, returns a query-selector statement describing that\n * and its ancestors\n * e.g. [HTMLElement] => body > div > input#foo.btn[name=baz]\n * @returns generated DOM path\n */\n\nexport function htmlTreeAsString(elem) {\n  // try/catch both:\n  // - accessing event.target (see getsentry/raven-js#838, #768)\n  // - `htmlTreeAsString` because it's complex, and just accessing the DOM incorrectly\n  // - can throw an exception in some circumstances.\n  try {\n    var currentElem = elem;\n    var MAX_TRAVERSE_HEIGHT = 5;\n    var MAX_OUTPUT_LEN = 80;\n    var out = [];\n    var height = 0;\n    var len = 0;\n    var separator = ' > ';\n    var sepLength = separator.length;\n    var nextStr = void 0; // eslint-disable-next-line no-plusplus\n\n    while (currentElem && height++ < MAX_TRAVERSE_HEIGHT) {\n      nextStr = _htmlElementAsString(currentElem); // bail out if\n      // - nextStr is the 'html' element\n      // - the length of the string that would be created exceeds MAX_OUTPUT_LEN\n      //   (ignore this limit if we are on the first iteration)\n\n      if (nextStr === 'html' || height > 1 && len + out.length * sepLength + nextStr.length >= MAX_OUTPUT_LEN) {\n        break;\n      }\n\n      out.push(nextStr);\n      len += nextStr.length;\n      currentElem = currentElem.parentNode;\n    }\n\n    return out.reverse().join(separator);\n  } catch (_oO) {\n    return '<unknown>';\n  }\n}\n/**\n * Returns a simple, query-selector representation of a DOM element\n * e.g. [HTMLElement] => input#foo.btn[name=baz]\n * @returns generated DOM path\n */\n\nfunction _htmlElementAsString(el) {\n  var elem = el;\n  var out = [];\n  var className;\n  var classes;\n  var key;\n  var attr;\n  var i;\n\n  if (!elem || !elem.tagName) {\n    return '';\n  }\n\n  out.push(elem.tagName.toLowerCase());\n\n  if (elem.id) {\n    out.push(\"#\" + elem.id);\n  } // eslint-disable-next-line prefer-const\n\n\n  className = elem.className;\n\n  if (className && isString(className)) {\n    classes = className.split(/\\s+/);\n\n    for (i = 0; i < classes.length; i++) {\n      out.push(\".\" + classes[i]);\n    }\n  }\n\n  var allowedAttrs = ['type', 'name', 'title', 'alt'];\n\n  for (i = 0; i < allowedAttrs.length; i++) {\n    key = allowedAttrs[i];\n    attr = elem.getAttribute(key);\n\n    if (attr) {\n      out.push(\"[\" + key + \"=\\\"\" + attr + \"\\\"]\");\n    }\n  }\n\n  return out.join('');\n}\n\nvar INITIAL_TIME = Date.now();\nvar prevNow = 0;\nvar performanceFallback = {\n  now: function now() {\n    var now = Date.now() - INITIAL_TIME;\n\n    if (now < prevNow) {\n      now = prevNow;\n    }\n\n    prevNow = now;\n    return now;\n  },\n  timeOrigin: INITIAL_TIME\n};\nexport var crossPlatformPerformance = function () {\n  if (isNodeEnv()) {\n    try {\n      var perfHooks = dynamicRequire(module, 'perf_hooks');\n      return perfHooks.performance;\n    } catch (_) {\n      return performanceFallback;\n    }\n  }\n\n  var performance = getGlobalObject().performance;\n\n  if (!performance || !performance.now) {\n    return performanceFallback;\n  } // Polyfill for performance.timeOrigin.\n  //\n  // While performance.timing.navigationStart is deprecated in favor of performance.timeOrigin, performance.timeOrigin\n  // is not as widely supported. Namely, performance.timeOrigin is undefined in Safari as of writing.\n\n\n  if (performance.timeOrigin === undefined) {\n    // As of writing, performance.timing is not available in Web Workers in mainstream browsers, so it is not always a\n    // valid fallback. In the absence of a initial time provided by the browser, fallback to INITIAL_TIME.\n    // @ts-ignore ignored because timeOrigin is a readonly property but we want to override\n    // eslint-disable-next-line deprecation/deprecation\n    performance.timeOrigin = performance.timing && performance.timing.navigationStart || INITIAL_TIME;\n  }\n\n  return performance;\n}();\n/**\n * Returns a timestamp in seconds with milliseconds precision since the UNIX epoch calculated with the monotonic clock.\n */\n\nexport function timestampWithMs() {\n  return (crossPlatformPerformance.timeOrigin + crossPlatformPerformance.now()) / 1000;\n} // https://semver.org/#is-there-a-suggested-regular-expression-regex-to-check-a-semver-string\n\nvar SEMVER_REGEXP = /^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-((?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?$/;\n/**\n * Parses input into a SemVer interface\n * @param input string representation of a semver version\n */\n\nexport function parseSemver(input) {\n  var match = input.match(SEMVER_REGEXP) || [];\n  var major = parseInt(match[1], 10);\n  var minor = parseInt(match[2], 10);\n  var patch = parseInt(match[3], 10);\n  return {\n    buildmetadata: match[5],\n    major: isNaN(major) ? undefined : major,\n    minor: isNaN(minor) ? undefined : minor,\n    patch: isNaN(patch) ? undefined : patch,\n    prerelease: match[4]\n  };\n}\nvar defaultRetryAfter = 60 * 1000; // 60 seconds\n\n/**\n * Extracts Retry-After value from the request header or returns default value\n * @param now current unix timestamp\n * @param header string representation of 'Retry-After' header\n */\n\nexport function parseRetryAfterHeader(now, header) {\n  if (!header) {\n    return defaultRetryAfter;\n  }\n\n  var headerDelay = parseInt(\"\" + header, 10);\n\n  if (!isNaN(headerDelay)) {\n    return headerDelay * 1000;\n  }\n\n  var headerDate = Date.parse(\"\" + header);\n\n  if (!isNaN(headerDate)) {\n    return headerDate - now;\n  }\n\n  return defaultRetryAfter;\n}\nvar defaultFunctionName = '<anonymous>';\n/**\n * Safely extract function name from itself\n */\n\nexport function getFunctionName(fn) {\n  try {\n    if (!fn || typeof fn !== 'function') {\n      return defaultFunctionName;\n    }\n\n    return fn.name || defaultFunctionName;\n  } catch (e) {\n    // Just accessing custom props in some Selenium environments\n    // can cause a \"Permission denied\" exception (see raven-js#495).\n    return defaultFunctionName;\n  }\n}\n/**\n * This function adds context (pre/post/line) lines to the provided frame\n *\n * @param lines string[] containing all lines\n * @param frame StackFrame that will be mutated\n * @param linesOfContext number of context lines we want to add pre/post\n */\n\nexport function addContextToFrame(lines, frame, linesOfContext) {\n  if (linesOfContext === void 0) {\n    linesOfContext = 5;\n  }\n\n  var lineno = frame.lineno || 0;\n  var maxLines = lines.length;\n  var sourceLine = Math.max(Math.min(maxLines, lineno - 1), 0);\n  frame.pre_context = lines.slice(Math.max(0, sourceLine - linesOfContext), sourceLine).map(function (line) {\n    return snipLine(line, 0);\n  });\n  frame.context_line = snipLine(lines[Math.min(maxLines - 1, sourceLine)], frame.colno || 0);\n  frame.post_context = lines.slice(Math.min(sourceLine + 1, maxLines), sourceLine + 1 + linesOfContext).map(function (line) {\n    return snipLine(line, 0);\n  });\n}\n/**\n * Strip the query string and fragment off of a given URL or path (if present)\n *\n * @param urlPath Full URL or path, including possible query string and/or fragment\n * @returns URL or path without query string or fragment\n */\n\nexport function stripUrlQueryAndFragment(urlPath) {\n  // eslint-disable-next-line no-useless-escape\n  return urlPath.split(/[\\?#]/, 1)[0];\n}","/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\n\n/**\n * Checks whether given value's type is one of a few Error or Error-like\n * {@link isError}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nexport function isError(wat) {\n  switch (Object.prototype.toString.call(wat)) {\n    case '[object Error]':\n      return true;\n\n    case '[object Exception]':\n      return true;\n\n    case '[object DOMException]':\n      return true;\n\n    default:\n      return isInstanceOf(wat, Error);\n  }\n}\n/**\n * Checks whether given value's type is ErrorEvent\n * {@link isErrorEvent}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\n\nexport function isErrorEvent(wat) {\n  return Object.prototype.toString.call(wat) === '[object ErrorEvent]';\n}\n/**\n * Checks whether given value's type is DOMError\n * {@link isDOMError}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\n\nexport function isDOMError(wat) {\n  return Object.prototype.toString.call(wat) === '[object DOMError]';\n}\n/**\n * Checks whether given value's type is DOMException\n * {@link isDOMException}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\n\nexport function isDOMException(wat) {\n  return Object.prototype.toString.call(wat) === '[object DOMException]';\n}\n/**\n * Checks whether given value's type is a string\n * {@link isString}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\n\nexport function isString(wat) {\n  return Object.prototype.toString.call(wat) === '[object String]';\n}\n/**\n * Checks whether given value's is a primitive (undefined, null, number, boolean, string)\n * {@link isPrimitive}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\n\nexport function isPrimitive(wat) {\n  return wat === null || typeof wat !== 'object' && typeof wat !== 'function';\n}\n/**\n * Checks whether given value's type is an object literal\n * {@link isPlainObject}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\n\nexport function isPlainObject(wat) {\n  return Object.prototype.toString.call(wat) === '[object Object]';\n}\n/**\n * Checks whether given value's type is an Event instance\n * {@link isEvent}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\n\nexport function isEvent(wat) {\n  return typeof Event !== 'undefined' && isInstanceOf(wat, Event);\n}\n/**\n * Checks whether given value's type is an Element instance\n * {@link isElement}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\n\nexport function isElement(wat) {\n  return typeof Element !== 'undefined' && isInstanceOf(wat, Element);\n}\n/**\n * Checks whether given value's type is an regexp\n * {@link isRegExp}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\n\nexport function isRegExp(wat) {\n  return Object.prototype.toString.call(wat) === '[object RegExp]';\n}\n/**\n * Checks whether given value has a then function.\n * @param wat A value to be checked.\n */\n\nexport function isThenable(wat) {\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  return Boolean(wat && wat.then && typeof wat.then === 'function');\n}\n/**\n * Checks whether given value's type is a SyntheticEvent\n * {@link isSyntheticEvent}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\n\nexport function isSyntheticEvent(wat) {\n  return isPlainObject(wat) && 'nativeEvent' in wat && 'preventDefault' in wat && 'stopPropagation' in wat;\n}\n/**\n * Checks whether given value's type is an instance of provided constructor.\n * {@link isInstanceOf}.\n *\n * @param wat A value to be checked.\n * @param base A constructor to be used in a check.\n * @returns A boolean representing the result.\n */\n\nexport function isInstanceOf(wat, base) {\n  try {\n    return wat instanceof base;\n  } catch (_e) {\n    return false;\n  }\n}","import { __assign, __read, __spread } from \"tslib\";\nimport { consoleSandbox, getGlobalObject, isNodeEnv, logger, timestampWithMs, uuid4 } from '@sentry/utils';\nimport { Scope } from './scope';\n/**\n * API compatibility version of this hub.\n *\n * WARNING: This number should only be increased when the global interface\n * changes and new methods are introduced.\n *\n * @hidden\n */\n\nexport var API_VERSION = 3;\n/**\n * Default maximum number of breadcrumbs added to an event. Can be overwritten\n * with {@link Options.maxBreadcrumbs}.\n */\n\nvar DEFAULT_BREADCRUMBS = 100;\n/**\n * Absolute maximum number of breadcrumbs added to an event. The\n * `maxBreadcrumbs` option cannot be higher than this value.\n */\n\nvar MAX_BREADCRUMBS = 100;\n/**\n * @inheritDoc\n */\n\nvar Hub =\n/** @class */\nfunction () {\n  /**\n   * Creates a new instance of the hub, will push one {@link Layer} into the\n   * internal stack on creation.\n   *\n   * @param client bound to the hub.\n   * @param scope bound to the hub.\n   * @param version number, higher number means higher priority.\n   */\n  function Hub(client, scope, _version) {\n    if (scope === void 0) {\n      scope = new Scope();\n    }\n\n    if (_version === void 0) {\n      _version = API_VERSION;\n    }\n\n    this._version = _version;\n    /** Is a {@link Layer}[] containing the client and scope */\n\n    this._stack = [];\n\n    this._stack.push({\n      client: client,\n      scope: scope\n    });\n\n    this.bindClient(client);\n  }\n  /**\n   * @inheritDoc\n   */\n\n\n  Hub.prototype.isOlderThan = function (version) {\n    return this._version < version;\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Hub.prototype.bindClient = function (client) {\n    var top = this.getStackTop();\n    top.client = client;\n\n    if (client && client.setupIntegrations) {\n      client.setupIntegrations();\n    }\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Hub.prototype.pushScope = function () {\n    // We want to clone the content of prev scope\n    var stack = this.getStack();\n    var parentScope = stack.length > 0 ? stack[stack.length - 1].scope : undefined;\n    var scope = Scope.clone(parentScope);\n    this.getStack().push({\n      client: this.getClient(),\n      scope: scope\n    });\n    return scope;\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Hub.prototype.popScope = function () {\n    return this.getStack().pop() !== undefined;\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Hub.prototype.withScope = function (callback) {\n    var scope = this.pushScope();\n\n    try {\n      callback(scope);\n    } finally {\n      this.popScope();\n    }\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Hub.prototype.getClient = function () {\n    return this.getStackTop().client;\n  };\n  /** Returns the scope of the top stack. */\n\n\n  Hub.prototype.getScope = function () {\n    return this.getStackTop().scope;\n  };\n  /** Returns the scope stack for domains or the process. */\n\n\n  Hub.prototype.getStack = function () {\n    return this._stack;\n  };\n  /** Returns the topmost scope layer in the order domain > local > process. */\n\n\n  Hub.prototype.getStackTop = function () {\n    return this._stack[this._stack.length - 1];\n  };\n  /**\n   * @inheritDoc\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\n\n\n  Hub.prototype.captureException = function (exception, hint) {\n    var eventId = this._lastEventId = uuid4();\n    var finalHint = hint; // If there's no explicit hint provided, mimick the same thing that would happen\n    // in the minimal itself to create a consistent behavior.\n    // We don't do this in the client, as it's the lowest level API, and doing this,\n    // would prevent user from having full control over direct calls.\n\n    if (!hint) {\n      var syntheticException = void 0;\n\n      try {\n        throw new Error('Sentry syntheticException');\n      } catch (exception) {\n        syntheticException = exception;\n      }\n\n      finalHint = {\n        originalException: exception,\n        syntheticException: syntheticException\n      };\n    }\n\n    this._invokeClient('captureException', exception, __assign(__assign({}, finalHint), {\n      event_id: eventId\n    }));\n\n    return eventId;\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Hub.prototype.captureMessage = function (message, level, hint) {\n    var eventId = this._lastEventId = uuid4();\n    var finalHint = hint; // If there's no explicit hint provided, mimick the same thing that would happen\n    // in the minimal itself to create a consistent behavior.\n    // We don't do this in the client, as it's the lowest level API, and doing this,\n    // would prevent user from having full control over direct calls.\n\n    if (!hint) {\n      var syntheticException = void 0;\n\n      try {\n        throw new Error(message);\n      } catch (exception) {\n        syntheticException = exception;\n      }\n\n      finalHint = {\n        originalException: message,\n        syntheticException: syntheticException\n      };\n    }\n\n    this._invokeClient('captureMessage', message, level, __assign(__assign({}, finalHint), {\n      event_id: eventId\n    }));\n\n    return eventId;\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Hub.prototype.captureEvent = function (event, hint) {\n    var eventId = this._lastEventId = uuid4();\n\n    this._invokeClient('captureEvent', event, __assign(__assign({}, hint), {\n      event_id: eventId\n    }));\n\n    return eventId;\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Hub.prototype.lastEventId = function () {\n    return this._lastEventId;\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Hub.prototype.addBreadcrumb = function (breadcrumb, hint) {\n    var top = this.getStackTop();\n\n    if (!top.scope || !top.client) {\n      return;\n    } // eslint-disable-next-line @typescript-eslint/unbound-method\n\n\n    var _a = top.client.getOptions && top.client.getOptions() || {},\n        _b = _a.beforeBreadcrumb,\n        beforeBreadcrumb = _b === void 0 ? null : _b,\n        _c = _a.maxBreadcrumbs,\n        maxBreadcrumbs = _c === void 0 ? DEFAULT_BREADCRUMBS : _c;\n\n    if (maxBreadcrumbs <= 0) {\n      return;\n    }\n\n    var timestamp = timestampWithMs();\n\n    var mergedBreadcrumb = __assign({\n      timestamp: timestamp\n    }, breadcrumb);\n\n    var finalBreadcrumb = beforeBreadcrumb ? consoleSandbox(function () {\n      return beforeBreadcrumb(mergedBreadcrumb, hint);\n    }) : mergedBreadcrumb;\n\n    if (finalBreadcrumb === null) {\n      return;\n    }\n\n    top.scope.addBreadcrumb(finalBreadcrumb, Math.min(maxBreadcrumbs, MAX_BREADCRUMBS));\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Hub.prototype.setUser = function (user) {\n    var top = this.getStackTop();\n\n    if (!top.scope) {\n      return;\n    }\n\n    top.scope.setUser(user);\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Hub.prototype.setTags = function (tags) {\n    var top = this.getStackTop();\n\n    if (!top.scope) {\n      return;\n    }\n\n    top.scope.setTags(tags);\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Hub.prototype.setExtras = function (extras) {\n    var top = this.getStackTop();\n\n    if (!top.scope) {\n      return;\n    }\n\n    top.scope.setExtras(extras);\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Hub.prototype.setTag = function (key, value) {\n    var top = this.getStackTop();\n\n    if (!top.scope) {\n      return;\n    }\n\n    top.scope.setTag(key, value);\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Hub.prototype.setExtra = function (key, extra) {\n    var top = this.getStackTop();\n\n    if (!top.scope) {\n      return;\n    }\n\n    top.scope.setExtra(key, extra);\n  };\n  /**\n   * @inheritDoc\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  Hub.prototype.setContext = function (name, context) {\n    var top = this.getStackTop();\n\n    if (!top.scope) {\n      return;\n    }\n\n    top.scope.setContext(name, context);\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Hub.prototype.configureScope = function (callback) {\n    var top = this.getStackTop();\n\n    if (top.scope && top.client) {\n      callback(top.scope);\n    }\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Hub.prototype.run = function (callback) {\n    var oldHub = makeMain(this);\n\n    try {\n      callback(this);\n    } finally {\n      makeMain(oldHub);\n    }\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Hub.prototype.getIntegration = function (integration) {\n    var client = this.getClient();\n\n    if (!client) {\n      return null;\n    }\n\n    try {\n      return client.getIntegration(integration);\n    } catch (_oO) {\n      logger.warn(\"Cannot retrieve integration \" + integration.id + \" from the current Hub\");\n      return null;\n    }\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Hub.prototype.startSpan = function (context) {\n    return this._callExtensionMethod('startSpan', context);\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Hub.prototype.startTransaction = function (context) {\n    return this._callExtensionMethod('startTransaction', context);\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Hub.prototype.traceHeaders = function () {\n    return this._callExtensionMethod('traceHeaders');\n  };\n  /**\n   * Internal helper function to call a method on the top client if it exists.\n   *\n   * @param method The method to call on the client.\n   * @param args Arguments to pass to the client function.\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  Hub.prototype._invokeClient = function (method) {\n    var _a;\n\n    var args = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      args[_i - 1] = arguments[_i];\n    }\n\n    var top = this.getStackTop();\n\n    if (top && top.client && top.client[method]) {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-explicit-any\n      (_a = top.client)[method].apply(_a, __spread(args, [top.scope]));\n    }\n  };\n  /**\n   * Calls global extension method and binding current instance to the function call\n   */\n  // @ts-ignore Function lacks ending return statement and return type does not include 'undefined'. ts(2366)\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  Hub.prototype._callExtensionMethod = function (method) {\n    var args = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      args[_i - 1] = arguments[_i];\n    }\n\n    var carrier = getMainCarrier();\n    var sentry = carrier.__SENTRY__;\n\n    if (sentry && sentry.extensions && typeof sentry.extensions[method] === 'function') {\n      return sentry.extensions[method].apply(this, args);\n    }\n\n    logger.warn(\"Extension method \" + method + \" couldn't be found, doing nothing.\");\n  };\n\n  return Hub;\n}();\n\nexport { Hub };\n/** Returns the global shim registry. */\n\nexport function getMainCarrier() {\n  var carrier = getGlobalObject();\n  carrier.__SENTRY__ = carrier.__SENTRY__ || {\n    extensions: {},\n    hub: undefined\n  };\n  return carrier;\n}\n/**\n * Replaces the current main hub with the passed one on the global object\n *\n * @returns The old replaced hub\n */\n\nexport function makeMain(hub) {\n  var registry = getMainCarrier();\n  var oldHub = getHubFromCarrier(registry);\n  setHubOnCarrier(registry, hub);\n  return oldHub;\n}\n/**\n * Returns the default hub instance.\n *\n * If a hub is already registered in the global carrier but this module\n * contains a more recent version, it replaces the registered version.\n * Otherwise, the currently registered hub will be returned.\n */\n\nexport function getCurrentHub() {\n  // Get main carrier (global for every environment)\n  var registry = getMainCarrier(); // If there's no hub, or its an old API, assign a new one\n\n  if (!hasHubOnCarrier(registry) || getHubFromCarrier(registry).isOlderThan(API_VERSION)) {\n    setHubOnCarrier(registry, new Hub());\n  } // Prefer domains over global if they are there (applicable only to Node environment)\n\n\n  if (isNodeEnv()) {\n    return getHubFromActiveDomain(registry);\n  } // Return hub that lives on a global object\n\n\n  return getHubFromCarrier(registry);\n}\n/**\n * Try to read the hub from an active domain, and fallback to the registry if one doesn't exist\n * @returns discovered hub\n */\n\nfunction getHubFromActiveDomain(registry) {\n  try {\n    var property = 'domain';\n    var carrier = getMainCarrier();\n    var sentry = carrier.__SENTRY__;\n\n    if (!sentry || !sentry.extensions || !sentry.extensions[property]) {\n      return getHubFromCarrier(registry);\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    var domain = sentry.extensions[property]; // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n\n    var activeDomain = domain.active; // If there's no active domain, just return global hub\n\n    if (!activeDomain) {\n      return getHubFromCarrier(registry);\n    } // If there's no hub on current domain, or it's an old API, assign a new one\n\n\n    if (!hasHubOnCarrier(activeDomain) || getHubFromCarrier(activeDomain).isOlderThan(API_VERSION)) {\n      var registryHubTopStack = getHubFromCarrier(registry).getStackTop();\n      setHubOnCarrier(activeDomain, new Hub(registryHubTopStack.client, Scope.clone(registryHubTopStack.scope)));\n    } // Return hub that lives on a domain\n\n\n    return getHubFromCarrier(activeDomain);\n  } catch (_Oo) {\n    // Return hub that lives on a global object\n    return getHubFromCarrier(registry);\n  }\n}\n/**\n * This will tell whether a carrier has a hub on it or not\n * @param carrier object\n */\n\n\nfunction hasHubOnCarrier(carrier) {\n  if (carrier && carrier.__SENTRY__ && carrier.__SENTRY__.hub) {\n    return true;\n  }\n\n  return false;\n}\n/**\n * This will create a new {@link Hub} and add to the passed object on\n * __SENTRY__.hub.\n * @param carrier object\n * @hidden\n */\n\n\nexport function getHubFromCarrier(carrier) {\n  if (carrier && carrier.__SENTRY__ && carrier.__SENTRY__.hub) {\n    return carrier.__SENTRY__.hub;\n  }\n\n  carrier.__SENTRY__ = carrier.__SENTRY__ || {};\n  carrier.__SENTRY__.hub = new Hub();\n  return carrier.__SENTRY__.hub;\n}\n/**\n * This will set passed {@link Hub} on the passed object's __SENTRY__.hub attribute\n * @param carrier object\n * @param hub Hub\n */\n\nexport function setHubOnCarrier(carrier, hub) {\n  if (!carrier) {\n    return false;\n  }\n\n  carrier.__SENTRY__ = carrier.__SENTRY__ || {};\n  carrier.__SENTRY__.hub = hub;\n  return true;\n}","var originalFunctionToString;\n/** Patch toString calls to return proper name for wrapped functions */\n\nvar FunctionToString =\n/** @class */\nfunction () {\n  function FunctionToString() {\n    /**\n     * @inheritDoc\n     */\n    this.name = FunctionToString.id;\n  }\n  /**\n   * @inheritDoc\n   */\n\n\n  FunctionToString.prototype.setupOnce = function () {\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    originalFunctionToString = Function.prototype.toString; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    Function.prototype.toString = function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      var context = this.__sentry_original__ || this;\n      return originalFunctionToString.apply(context, args);\n    };\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  FunctionToString.id = 'FunctionToString';\n  return FunctionToString;\n}();\n\nexport { FunctionToString };","import { __read, __spread } from \"tslib\";\nimport { addGlobalEventProcessor, getCurrentHub } from '@sentry/hub';\nimport { getEventDescription, isMatchingPattern, logger } from '@sentry/utils'; // \"Script error.\" is hard coded into browsers for errors that it can't read.\n// this is the result of a script being pulled in from an external domain and CORS.\n\nvar DEFAULT_IGNORE_ERRORS = [/^Script error\\.?$/, /^Javascript error: Script error\\.? on line 0$/];\n/** Inbound filters configurable by the user */\n\nvar InboundFilters =\n/** @class */\nfunction () {\n  function InboundFilters(_options) {\n    if (_options === void 0) {\n      _options = {};\n    }\n\n    this._options = _options;\n    /**\n     * @inheritDoc\n     */\n\n    this.name = InboundFilters.id;\n  }\n  /**\n   * @inheritDoc\n   */\n\n\n  InboundFilters.prototype.setupOnce = function () {\n    addGlobalEventProcessor(function (event) {\n      var hub = getCurrentHub();\n\n      if (!hub) {\n        return event;\n      }\n\n      var self = hub.getIntegration(InboundFilters);\n\n      if (self) {\n        var client = hub.getClient();\n        var clientOptions = client ? client.getOptions() : {};\n\n        var options = self._mergeOptions(clientOptions);\n\n        if (self._shouldDropEvent(event, options)) {\n          return null;\n        }\n      }\n\n      return event;\n    });\n  };\n  /** JSDoc */\n\n\n  InboundFilters.prototype._shouldDropEvent = function (event, options) {\n    if (this._isSentryError(event, options)) {\n      logger.warn(\"Event dropped due to being internal Sentry Error.\\nEvent: \" + getEventDescription(event));\n      return true;\n    }\n\n    if (this._isIgnoredError(event, options)) {\n      logger.warn(\"Event dropped due to being matched by `ignoreErrors` option.\\nEvent: \" + getEventDescription(event));\n      return true;\n    }\n\n    if (this._isDeniedUrl(event, options)) {\n      logger.warn(\"Event dropped due to being matched by `denyUrls` option.\\nEvent: \" + getEventDescription(event) + \".\\nUrl: \" + this._getEventFilterUrl(event));\n      return true;\n    }\n\n    if (!this._isAllowedUrl(event, options)) {\n      logger.warn(\"Event dropped due to not being matched by `allowUrls` option.\\nEvent: \" + getEventDescription(event) + \".\\nUrl: \" + this._getEventFilterUrl(event));\n      return true;\n    }\n\n    return false;\n  };\n  /** JSDoc */\n\n\n  InboundFilters.prototype._isSentryError = function (event, options) {\n    if (!options.ignoreInternal) {\n      return false;\n    }\n\n    try {\n      return event && event.exception && event.exception.values && event.exception.values[0] && event.exception.values[0].type === 'SentryError' || false;\n    } catch (_oO) {\n      return false;\n    }\n  };\n  /** JSDoc */\n\n\n  InboundFilters.prototype._isIgnoredError = function (event, options) {\n    if (!options.ignoreErrors || !options.ignoreErrors.length) {\n      return false;\n    }\n\n    return this._getPossibleEventMessages(event).some(function (message) {\n      // Not sure why TypeScript complains here...\n      return options.ignoreErrors.some(function (pattern) {\n        return isMatchingPattern(message, pattern);\n      });\n    });\n  };\n  /** JSDoc */\n\n\n  InboundFilters.prototype._isDeniedUrl = function (event, options) {\n    // TODO: Use Glob instead?\n    if (!options.denyUrls || !options.denyUrls.length) {\n      return false;\n    }\n\n    var url = this._getEventFilterUrl(event);\n\n    return !url ? false : options.denyUrls.some(function (pattern) {\n      return isMatchingPattern(url, pattern);\n    });\n  };\n  /** JSDoc */\n\n\n  InboundFilters.prototype._isAllowedUrl = function (event, options) {\n    // TODO: Use Glob instead?\n    if (!options.allowUrls || !options.allowUrls.length) {\n      return true;\n    }\n\n    var url = this._getEventFilterUrl(event);\n\n    return !url ? true : options.allowUrls.some(function (pattern) {\n      return isMatchingPattern(url, pattern);\n    });\n  };\n  /** JSDoc */\n\n\n  InboundFilters.prototype._mergeOptions = function (clientOptions) {\n    if (clientOptions === void 0) {\n      clientOptions = {};\n    }\n\n    return {\n      allowUrls: __spread(this._options.whitelistUrls || [], this._options.allowUrls || [], clientOptions.whitelistUrls || [], clientOptions.allowUrls || []),\n      denyUrls: __spread(this._options.blacklistUrls || [], this._options.denyUrls || [], clientOptions.blacklistUrls || [], clientOptions.denyUrls || []),\n      ignoreErrors: __spread(this._options.ignoreErrors || [], clientOptions.ignoreErrors || [], DEFAULT_IGNORE_ERRORS),\n      ignoreInternal: typeof this._options.ignoreInternal !== 'undefined' ? this._options.ignoreInternal : true\n    };\n  };\n  /** JSDoc */\n\n\n  InboundFilters.prototype._getPossibleEventMessages = function (event) {\n    if (event.message) {\n      return [event.message];\n    }\n\n    if (event.exception) {\n      try {\n        var _a = event.exception.values && event.exception.values[0] || {},\n            _b = _a.type,\n            type = _b === void 0 ? '' : _b,\n            _c = _a.value,\n            value = _c === void 0 ? '' : _c;\n\n        return [\"\" + value, type + \": \" + value];\n      } catch (oO) {\n        logger.error(\"Cannot extract message for event \" + getEventDescription(event));\n        return [];\n      }\n    }\n\n    return [];\n  };\n  /** JSDoc */\n\n\n  InboundFilters.prototype._getEventFilterUrl = function (event) {\n    try {\n      if (event.stacktrace) {\n        var frames_1 = event.stacktrace.frames;\n        return frames_1 && frames_1[frames_1.length - 1].filename || null;\n      }\n\n      if (event.exception) {\n        var frames_2 = event.exception.values && event.exception.values[0].stacktrace && event.exception.values[0].stacktrace.frames;\n        return frames_2 && frames_2[frames_2.length - 1].filename || null;\n      }\n\n      return null;\n    } catch (oO) {\n      logger.error(\"Cannot extract url for event \" + getEventDescription(event));\n      return null;\n    }\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  InboundFilters.id = 'InboundFilters';\n  return InboundFilters;\n}();\n\nexport { InboundFilters };","export var setPrototypeOf = Object.setPrototypeOf || ({\n  __proto__: []\n} instanceof Array ? setProtoOf : mixinProperties);\n/**\n * setPrototypeOf polyfill using __proto__\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\n\nfunction setProtoOf(obj, proto) {\n  // @ts-ignore __proto__ does not exist on obj\n  obj.__proto__ = proto;\n  return obj;\n}\n/**\n * setPrototypeOf polyfill using mixin\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\n\n\nfunction mixinProperties(obj, proto) {\n  for (var prop in proto) {\n    // eslint-disable-next-line no-prototype-builtins\n    if (!obj.hasOwnProperty(prop)) {\n      // @ts-ignore typescript complains about indexing so we remove\n      obj[prop] = proto[prop];\n    }\n  }\n\n  return obj;\n}","import { __extends } from \"tslib\";\nimport { setPrototypeOf } from './polyfill';\n/** An error emitted by Sentry SDKs and related utilities. */\n\nvar SentryError =\n/** @class */\nfunction (_super) {\n  __extends(SentryError, _super);\n\n  function SentryError(message) {\n    var _newTarget = this.constructor;\n\n    var _this = _super.call(this, message) || this;\n\n    _this.message = message;\n    _this.name = _newTarget.prototype.constructor.name;\n    setPrototypeOf(_this, _newTarget.prototype);\n    return _this;\n  }\n\n  return SentryError;\n}(Error);\n\nexport { SentryError };","import { __read } from \"tslib\";\nimport { SentryError } from './error';\n/** Regular expression used to parse a Dsn. */\n\nvar DSN_REGEX = /^(?:(\\w+):)\\/\\/(?:(\\w+)(?::(\\w+))?@)([\\w.-]+)(?::(\\d+))?\\/(.+)/;\n/** Error message */\n\nvar ERROR_MESSAGE = 'Invalid Dsn';\n/** The Sentry Dsn, identifying a Sentry instance and project. */\n\nvar Dsn =\n/** @class */\nfunction () {\n  /** Creates a new Dsn component */\n  function Dsn(from) {\n    if (typeof from === 'string') {\n      this._fromString(from);\n    } else {\n      this._fromComponents(from);\n    }\n\n    this._validate();\n  }\n  /**\n   * Renders the string representation of this Dsn.\n   *\n   * By default, this will render the public representation without the password\n   * component. To get the deprecated private representation, set `withPassword`\n   * to true.\n   *\n   * @param withPassword When set to true, the password will be included.\n   */\n\n\n  Dsn.prototype.toString = function (withPassword) {\n    if (withPassword === void 0) {\n      withPassword = false;\n    }\n\n    var _a = this,\n        host = _a.host,\n        path = _a.path,\n        pass = _a.pass,\n        port = _a.port,\n        projectId = _a.projectId,\n        protocol = _a.protocol,\n        user = _a.user;\n\n    return protocol + \"://\" + user + (withPassword && pass ? \":\" + pass : '') + (\"@\" + host + (port ? \":\" + port : '') + \"/\" + (path ? path + \"/\" : path) + projectId);\n  };\n  /** Parses a string into this Dsn. */\n\n\n  Dsn.prototype._fromString = function (str) {\n    var match = DSN_REGEX.exec(str);\n\n    if (!match) {\n      throw new SentryError(ERROR_MESSAGE);\n    }\n\n    var _a = __read(match.slice(1), 6),\n        protocol = _a[0],\n        user = _a[1],\n        _b = _a[2],\n        pass = _b === void 0 ? '' : _b,\n        host = _a[3],\n        _c = _a[4],\n        port = _c === void 0 ? '' : _c,\n        lastPath = _a[5];\n\n    var path = '';\n    var projectId = lastPath;\n    var split = projectId.split('/');\n\n    if (split.length > 1) {\n      path = split.slice(0, -1).join('/');\n      projectId = split.pop();\n    }\n\n    if (projectId) {\n      var projectMatch = projectId.match(/^\\d+/);\n\n      if (projectMatch) {\n        projectId = projectMatch[0];\n      }\n    }\n\n    this._fromComponents({\n      host: host,\n      pass: pass,\n      path: path,\n      projectId: projectId,\n      port: port,\n      protocol: protocol,\n      user: user\n    });\n  };\n  /** Maps Dsn components into this instance. */\n\n\n  Dsn.prototype._fromComponents = function (components) {\n    this.protocol = components.protocol;\n    this.user = components.user;\n    this.pass = components.pass || '';\n    this.host = components.host;\n    this.port = components.port || '';\n    this.path = components.path || '';\n    this.projectId = components.projectId;\n  };\n  /** Validates this Dsn and throws on error. */\n\n\n  Dsn.prototype._validate = function () {\n    var _this = this;\n\n    ['protocol', 'user', 'host', 'projectId'].forEach(function (component) {\n      if (!_this[component]) {\n        throw new SentryError(ERROR_MESSAGE + \": \" + component + \" missing\");\n      }\n    });\n\n    if (!this.projectId.match(/^\\d+$/)) {\n      throw new SentryError(ERROR_MESSAGE + \": Invalid projectId \" + this.projectId);\n    }\n\n    if (this.protocol !== 'http' && this.protocol !== 'https') {\n      throw new SentryError(ERROR_MESSAGE + \": Invalid protocol \" + this.protocol);\n    }\n\n    if (this.port && isNaN(parseInt(this.port, 10))) {\n      throw new SentryError(ERROR_MESSAGE + \": Invalid port \" + this.port);\n    }\n  };\n\n  return Dsn;\n}();\n\nexport { Dsn };","import { __read, __spread } from \"tslib\";\nimport { addGlobalEventProcessor, getCurrentHub } from '@sentry/hub';\nimport { logger } from '@sentry/utils';\nexport var installedIntegrations = [];\n/** Gets integration to install */\n\nexport function getIntegrationsToSetup(options) {\n  var defaultIntegrations = options.defaultIntegrations && __spread(options.defaultIntegrations) || [];\n  var userIntegrations = options.integrations;\n  var integrations = [];\n\n  if (Array.isArray(userIntegrations)) {\n    var userIntegrationsNames_1 = userIntegrations.map(function (i) {\n      return i.name;\n    });\n    var pickedIntegrationsNames_1 = []; // Leave only unique default integrations, that were not overridden with provided user integrations\n\n    defaultIntegrations.forEach(function (defaultIntegration) {\n      if (userIntegrationsNames_1.indexOf(defaultIntegration.name) === -1 && pickedIntegrationsNames_1.indexOf(defaultIntegration.name) === -1) {\n        integrations.push(defaultIntegration);\n        pickedIntegrationsNames_1.push(defaultIntegration.name);\n      }\n    }); // Don't add same user integration twice\n\n    userIntegrations.forEach(function (userIntegration) {\n      if (pickedIntegrationsNames_1.indexOf(userIntegration.name) === -1) {\n        integrations.push(userIntegration);\n        pickedIntegrationsNames_1.push(userIntegration.name);\n      }\n    });\n  } else if (typeof userIntegrations === 'function') {\n    integrations = userIntegrations(defaultIntegrations);\n    integrations = Array.isArray(integrations) ? integrations : [integrations];\n  } else {\n    integrations = __spread(defaultIntegrations);\n  } // Make sure that if present, `Debug` integration will always run last\n\n\n  var integrationsNames = integrations.map(function (i) {\n    return i.name;\n  });\n  var alwaysLastToRun = 'Debug';\n\n  if (integrationsNames.indexOf(alwaysLastToRun) !== -1) {\n    integrations.push.apply(integrations, __spread(integrations.splice(integrationsNames.indexOf(alwaysLastToRun), 1)));\n  }\n\n  return integrations;\n}\n/** Setup given integration */\n\nexport function setupIntegration(integration) {\n  if (installedIntegrations.indexOf(integration.name) !== -1) {\n    return;\n  }\n\n  integration.setupOnce(addGlobalEventProcessor, getCurrentHub);\n  installedIntegrations.push(integration.name);\n  logger.log(\"Integration installed: \" + integration.name);\n}\n/**\n * Given a list of integration instances this installs them all. When `withDefaults` is set to `true` then all default\n * integrations are added unless they were already provided before.\n * @param integrations array of integration instances\n * @param withDefault should enable default integrations\n */\n\nexport function setupIntegrations(options) {\n  var integrations = {};\n  getIntegrationsToSetup(options).forEach(function (integration) {\n    integrations[integration.name] = integration;\n    setupIntegration(integration);\n  });\n  return integrations;\n}","import { __assign } from \"tslib\";\n/* eslint-disable max-lines */\n\nimport { Scope } from '@sentry/hub';\nimport { Dsn, isPrimitive, isThenable, logger, normalize, SyncPromise, timestampWithMs, truncate, uuid4 } from '@sentry/utils';\nimport { setupIntegrations } from './integration';\n/**\n * Base implementation for all JavaScript SDK clients.\n *\n * Call the constructor with the corresponding backend constructor and options\n * specific to the client subclass. To access these options later, use\n * {@link Client.getOptions}. Also, the Backend instance is available via\n * {@link Client.getBackend}.\n *\n * If a Dsn is specified in the options, it will be parsed and stored. Use\n * {@link Client.getDsn} to retrieve the Dsn at any moment. In case the Dsn is\n * invalid, the constructor will throw a {@link SentryException}. Note that\n * without a valid Dsn, the SDK will not send any events to Sentry.\n *\n * Before sending an event via the backend, it is passed through\n * {@link BaseClient.prepareEvent} to add SDK information and scope data\n * (breadcrumbs and context). To add more custom information, override this\n * method and extend the resulting prepared event.\n *\n * To issue automatically created events (e.g. via instrumentation), use\n * {@link Client.captureEvent}. It will prepare the event and pass it through\n * the callback lifecycle. To issue auto-breadcrumbs, use\n * {@link Client.addBreadcrumb}.\n *\n * @example\n * class NodeClient extends BaseClient<NodeBackend, NodeOptions> {\n *   public constructor(options: NodeOptions) {\n *     super(NodeBackend, options);\n *   }\n *\n *   // ...\n * }\n */\n\nvar BaseClient =\n/** @class */\nfunction () {\n  /**\n   * Initializes this client instance.\n   *\n   * @param backendClass A constructor function to create the backend.\n   * @param options Options for the client.\n   */\n  function BaseClient(backendClass, options) {\n    /** Array of used integrations. */\n    this._integrations = {};\n    /** Is the client still processing a call? */\n\n    this._processing = false;\n    this._backend = new backendClass(options);\n    this._options = options;\n\n    if (options.dsn) {\n      this._dsn = new Dsn(options.dsn);\n    }\n  }\n  /**\n   * @inheritDoc\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\n\n\n  BaseClient.prototype.captureException = function (exception, hint, scope) {\n    var _this = this;\n\n    var eventId = hint && hint.event_id;\n    this._processing = true; // eslint-disable-next-line @typescript-eslint/no-floating-promises\n\n    this._getBackend().eventFromException(exception, hint).then(function (event) {\n      eventId = _this.captureEvent(event, hint, scope);\n    });\n\n    return eventId;\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  BaseClient.prototype.captureMessage = function (message, level, hint, scope) {\n    var _this = this;\n\n    var eventId = hint && hint.event_id;\n    this._processing = true;\n    var promisedEvent = isPrimitive(message) ? this._getBackend().eventFromMessage(\"\" + message, level, hint) : this._getBackend().eventFromException(message, hint); // eslint-disable-next-line @typescript-eslint/no-floating-promises\n\n    promisedEvent.then(function (event) {\n      eventId = _this.captureEvent(event, hint, scope);\n    });\n    return eventId;\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  BaseClient.prototype.captureEvent = function (event, hint, scope) {\n    var _this = this;\n\n    var eventId = hint && hint.event_id;\n    this._processing = true;\n\n    this._processEvent(event, hint, scope).then(function (finalEvent) {\n      // We need to check for finalEvent in case beforeSend returned null\n      eventId = finalEvent && finalEvent.event_id;\n      _this._processing = false;\n    }).then(null, function (reason) {\n      logger.error(reason);\n      _this._processing = false;\n    });\n\n    return eventId;\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  BaseClient.prototype.getDsn = function () {\n    return this._dsn;\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  BaseClient.prototype.getOptions = function () {\n    return this._options;\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  BaseClient.prototype.flush = function (timeout) {\n    var _this = this;\n\n    return this._isClientProcessing(timeout).then(function (status) {\n      clearInterval(status.interval);\n      return _this._getBackend().getTransport().close(timeout).then(function (transportFlushed) {\n        return status.ready && transportFlushed;\n      });\n    });\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  BaseClient.prototype.close = function (timeout) {\n    var _this = this;\n\n    return this.flush(timeout).then(function (result) {\n      _this.getOptions().enabled = false;\n      return result;\n    });\n  };\n  /**\n   * Sets up the integrations\n   */\n\n\n  BaseClient.prototype.setupIntegrations = function () {\n    if (this._isEnabled()) {\n      this._integrations = setupIntegrations(this._options);\n    }\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  BaseClient.prototype.getIntegration = function (integration) {\n    try {\n      return this._integrations[integration.id] || null;\n    } catch (_oO) {\n      logger.warn(\"Cannot retrieve integration \" + integration.id + \" from the current Client\");\n      return null;\n    }\n  };\n  /** Waits for the client to be done with processing. */\n\n\n  BaseClient.prototype._isClientProcessing = function (timeout) {\n    var _this = this;\n\n    return new SyncPromise(function (resolve) {\n      var ticked = 0;\n      var tick = 1;\n      var interval = 0;\n      clearInterval(interval);\n      interval = setInterval(function () {\n        if (!_this._processing) {\n          resolve({\n            interval: interval,\n            ready: true\n          });\n        } else {\n          ticked += tick;\n\n          if (timeout && ticked >= timeout) {\n            resolve({\n              interval: interval,\n              ready: false\n            });\n          }\n        }\n      }, tick);\n    });\n  };\n  /** Returns the current backend. */\n\n\n  BaseClient.prototype._getBackend = function () {\n    return this._backend;\n  };\n  /** Determines whether this SDK is enabled and a valid Dsn is present. */\n\n\n  BaseClient.prototype._isEnabled = function () {\n    return this.getOptions().enabled !== false && this._dsn !== undefined;\n  };\n  /**\n   * Adds common information to events.\n   *\n   * The information includes release and environment from `options`,\n   * breadcrumbs and context (extra, tags and user) from the scope.\n   *\n   * Information that is already present in the event is never overwritten. For\n   * nested objects, such as the context, keys are merged.\n   *\n   * @param event The original event.\n   * @param hint May contain additional information about the original exception.\n   * @param scope A scope containing event metadata.\n   * @returns A new event with more information.\n   */\n\n\n  BaseClient.prototype._prepareEvent = function (event, scope, hint) {\n    var _this = this;\n\n    var _a = this.getOptions().normalizeDepth,\n        normalizeDepth = _a === void 0 ? 3 : _a;\n\n    var prepared = __assign(__assign({}, event), {\n      event_id: event.event_id || (hint && hint.event_id ? hint.event_id : uuid4()),\n      timestamp: event.timestamp || timestampWithMs()\n    });\n\n    this._applyClientOptions(prepared);\n\n    this._applyIntegrationsMetadata(prepared); // If we have scope given to us, use it as the base for further modifications.\n    // This allows us to prevent unnecessary copying of data if `captureContext` is not provided.\n\n\n    var finalScope = scope;\n\n    if (hint && hint.captureContext) {\n      finalScope = Scope.clone(finalScope).update(hint.captureContext);\n    } // We prepare the result here with a resolved Event.\n\n\n    var result = SyncPromise.resolve(prepared); // This should be the last thing called, since we want that\n    // {@link Hub.addEventProcessor} gets the finished prepared event.\n\n    if (finalScope) {\n      // In case we have a hub we reassign it.\n      result = finalScope.applyToEvent(prepared, hint);\n    }\n\n    return result.then(function (evt) {\n      if (typeof normalizeDepth === 'number' && normalizeDepth > 0) {\n        return _this._normalizeEvent(evt, normalizeDepth);\n      }\n\n      return evt;\n    });\n  };\n  /**\n   * Applies `normalize` function on necessary `Event` attributes to make them safe for serialization.\n   * Normalized keys:\n   * - `breadcrumbs.data`\n   * - `user`\n   * - `contexts`\n   * - `extra`\n   * @param event Event\n   * @returns Normalized event\n   */\n\n\n  BaseClient.prototype._normalizeEvent = function (event, depth) {\n    if (!event) {\n      return null;\n    }\n\n    var normalized = __assign(__assign(__assign(__assign(__assign({}, event), event.breadcrumbs && {\n      breadcrumbs: event.breadcrumbs.map(function (b) {\n        return __assign(__assign({}, b), b.data && {\n          data: normalize(b.data, depth)\n        });\n      })\n    }), event.user && {\n      user: normalize(event.user, depth)\n    }), event.contexts && {\n      contexts: normalize(event.contexts, depth)\n    }), event.extra && {\n      extra: normalize(event.extra, depth)\n    }); // event.contexts.trace stores information about a Transaction. Similarly,\n    // event.spans[] stores information about child Spans. Given that a\n    // Transaction is conceptually a Span, normalization should apply to both\n    // Transactions and Spans consistently.\n    // For now the decision is to skip normalization of Transactions and Spans,\n    // so this block overwrites the normalized event to add back the original\n    // Transaction information prior to normalization.\n\n\n    if (event.contexts && event.contexts.trace) {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n      normalized.contexts.trace = event.contexts.trace;\n    }\n\n    return normalized;\n  };\n  /**\n   *  Enhances event using the client configuration.\n   *  It takes care of all \"static\" values like environment, release and `dist`,\n   *  as well as truncating overly long values.\n   * @param event event instance to be enhanced\n   */\n\n\n  BaseClient.prototype._applyClientOptions = function (event) {\n    var _a = this.getOptions(),\n        environment = _a.environment,\n        release = _a.release,\n        dist = _a.dist,\n        _b = _a.maxValueLength,\n        maxValueLength = _b === void 0 ? 250 : _b;\n\n    if (event.environment === undefined && environment !== undefined) {\n      event.environment = environment;\n    }\n\n    if (event.release === undefined && release !== undefined) {\n      event.release = release;\n    }\n\n    if (event.dist === undefined && dist !== undefined) {\n      event.dist = dist;\n    }\n\n    if (event.message) {\n      event.message = truncate(event.message, maxValueLength);\n    }\n\n    var exception = event.exception && event.exception.values && event.exception.values[0];\n\n    if (exception && exception.value) {\n      exception.value = truncate(exception.value, maxValueLength);\n    }\n\n    var request = event.request;\n\n    if (request && request.url) {\n      request.url = truncate(request.url, maxValueLength);\n    }\n  };\n  /**\n   * This function adds all used integrations to the SDK info in the event.\n   * @param sdkInfo The sdkInfo of the event that will be filled with all integrations.\n   */\n\n\n  BaseClient.prototype._applyIntegrationsMetadata = function (event) {\n    var sdkInfo = event.sdk;\n    var integrationsArray = Object.keys(this._integrations);\n\n    if (sdkInfo && integrationsArray.length > 0) {\n      sdkInfo.integrations = integrationsArray;\n    }\n  };\n  /**\n   * Tells the backend to send this event\n   * @param event The Sentry event to send\n   */\n\n\n  BaseClient.prototype._sendEvent = function (event) {\n    this._getBackend().sendEvent(event);\n  };\n  /**\n   * Processes an event (either error or message) and sends it to Sentry.\n   *\n   * This also adds breadcrumbs and context information to the event. However,\n   * platform specific meta data (such as the User's IP address) must be added\n   * by the SDK implementor.\n   *\n   *\n   * @param event The event to send to Sentry.\n   * @param hint May contain additional information about the original exception.\n   * @param scope A scope containing event metadata.\n   * @returns A SyncPromise that resolves with the event or rejects in case event was/will not be send.\n   */\n\n\n  BaseClient.prototype._processEvent = function (event, hint, scope) {\n    var _this = this; // eslint-disable-next-line @typescript-eslint/unbound-method\n\n\n    var _a = this.getOptions(),\n        beforeSend = _a.beforeSend,\n        sampleRate = _a.sampleRate;\n\n    if (!this._isEnabled()) {\n      return SyncPromise.reject('SDK not enabled, will not send event.');\n    }\n\n    var isTransaction = event.type === 'transaction'; // 1.0 === 100% events are sent\n    // 0.0 === 0% events are sent\n    // Sampling for transaction happens somewhere else\n\n    if (!isTransaction && typeof sampleRate === 'number' && Math.random() > sampleRate) {\n      return SyncPromise.reject('This event has been sampled, will not send event.');\n    }\n\n    return new SyncPromise(function (resolve, reject) {\n      _this._prepareEvent(event, scope, hint).then(function (prepared) {\n        if (prepared === null) {\n          reject('An event processor returned null, will not send event.');\n          return;\n        }\n\n        var finalEvent = prepared;\n        var isInternalException = hint && hint.data && hint.data.__sentry__ === true; // We skip beforeSend in case of transactions\n\n        if (isInternalException || !beforeSend || isTransaction) {\n          _this._sendEvent(finalEvent);\n\n          resolve(finalEvent);\n          return;\n        }\n\n        var beforeSendResult = beforeSend(prepared, hint);\n\n        if (typeof beforeSendResult === 'undefined') {\n          logger.error('`beforeSend` method has to return `null` or a valid event.');\n        } else if (isThenable(beforeSendResult)) {\n          _this._handleAsyncBeforeSend(beforeSendResult, resolve, reject);\n        } else {\n          finalEvent = beforeSendResult;\n\n          if (finalEvent === null) {\n            logger.log('`beforeSend` returned `null`, will not send event.');\n            resolve(null);\n            return;\n          } // From here on we are really async\n\n\n          _this._sendEvent(finalEvent);\n\n          resolve(finalEvent);\n        }\n      }).then(null, function (reason) {\n        _this.captureException(reason, {\n          data: {\n            __sentry__: true\n          },\n          originalException: reason\n        });\n\n        reject(\"Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\\nReason: \" + reason);\n      });\n    });\n  };\n  /**\n   * Resolves before send Promise and calls resolve/reject on parent SyncPromise.\n   */\n\n\n  BaseClient.prototype._handleAsyncBeforeSend = function (beforeSend, resolve, reject) {\n    var _this = this;\n\n    beforeSend.then(function (processedEvent) {\n      if (processedEvent === null) {\n        reject('`beforeSend` returned `null`, will not send event.');\n        return;\n      } // From here on we are really async\n\n\n      _this._sendEvent(processedEvent);\n\n      resolve(processedEvent);\n    }).then(null, function (e) {\n      reject(\"beforeSend rejected with \" + e);\n    });\n  };\n\n  return BaseClient;\n}();\n\nexport { BaseClient };","/** The status of an event. */\n// eslint-disable-next-line import/export\nexport var Status;\n\n(function (Status) {\n  /** The status could not be determined. */\n  Status[\"Unknown\"] = \"unknown\";\n  /** The event was skipped due to configuration or callbacks. */\n\n  Status[\"Skipped\"] = \"skipped\";\n  /** The event was sent to Sentry successfully. */\n\n  Status[\"Success\"] = \"success\";\n  /** The client is currently rate limited and will try again later. */\n\n  Status[\"RateLimit\"] = \"rate_limit\";\n  /** The event could not be processed. */\n\n  Status[\"Invalid\"] = \"invalid\";\n  /** A server-side error ocurred during submission. */\n\n  Status[\"Failed\"] = \"failed\";\n})(Status || (Status = {})); // eslint-disable-next-line @typescript-eslint/no-namespace, import/export\n\n\n(function (Status) {\n  /**\n   * Converts a HTTP status code into a {@link Status}.\n   *\n   * @param code The HTTP response status code.\n   * @returns The send status or {@link Status.Unknown}.\n   */\n  function fromHttpCode(code) {\n    if (code >= 200 && code < 300) {\n      return Status.Success;\n    }\n\n    if (code === 429) {\n      return Status.RateLimit;\n    }\n\n    if (code >= 400 && code < 500) {\n      return Status.Invalid;\n    }\n\n    if (code >= 500) {\n      return Status.Failed;\n    }\n\n    return Status.Unknown;\n  }\n\n  Status.fromHttpCode = fromHttpCode;\n})(Status || (Status = {}));","import { Status } from '@sentry/types';\nimport { SyncPromise } from '@sentry/utils';\n/** Noop transport */\n\nvar NoopTransport =\n/** @class */\nfunction () {\n  function NoopTransport() {}\n  /**\n   * @inheritDoc\n   */\n\n\n  NoopTransport.prototype.sendEvent = function (_) {\n    return SyncPromise.resolve({\n      reason: \"NoopTransport: Event has been skipped because no Dsn is configured.\",\n      status: Status.Skipped\n    });\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  NoopTransport.prototype.close = function (_) {\n    return SyncPromise.resolve(true);\n  };\n\n  return NoopTransport;\n}();\n\nexport { NoopTransport };","/** JSDoc */\n// eslint-disable-next-line import/export\nexport var Severity;\n\n(function (Severity) {\n  /** JSDoc */\n  Severity[\"Fatal\"] = \"fatal\";\n  /** JSDoc */\n\n  Severity[\"Error\"] = \"error\";\n  /** JSDoc */\n\n  Severity[\"Warning\"] = \"warning\";\n  /** JSDoc */\n\n  Severity[\"Log\"] = \"log\";\n  /** JSDoc */\n\n  Severity[\"Info\"] = \"info\";\n  /** JSDoc */\n\n  Severity[\"Debug\"] = \"debug\";\n  /** JSDoc */\n\n  Severity[\"Critical\"] = \"critical\";\n})(Severity || (Severity = {})); // eslint-disable-next-line @typescript-eslint/no-namespace, import/export\n\n\n(function (Severity) {\n  /**\n   * Converts a string-based level into a {@link Severity}.\n   *\n   * @param level string representation of Severity\n   * @returns Severity\n   */\n  function fromString(level) {\n    switch (level) {\n      case 'debug':\n        return Severity.Debug;\n\n      case 'info':\n        return Severity.Info;\n\n      case 'warn':\n      case 'warning':\n        return Severity.Warning;\n\n      case 'error':\n        return Severity.Error;\n\n      case 'fatal':\n        return Severity.Fatal;\n\n      case 'critical':\n        return Severity.Critical;\n\n      case 'log':\n      default:\n        return Severity.Log;\n    }\n  }\n\n  Severity.fromString = fromString;\n})(Severity || (Severity = {}));","import { logger, SentryError } from '@sentry/utils';\nimport { NoopTransport } from './transports/noop';\n/**\n * This is the base implemention of a Backend.\n * @hidden\n */\n\nvar BaseBackend =\n/** @class */\nfunction () {\n  /** Creates a new backend instance. */\n  function BaseBackend(options) {\n    this._options = options;\n\n    if (!this._options.dsn) {\n      logger.warn('No DSN provided, backend will not do anything.');\n    }\n\n    this._transport = this._setupTransport();\n  }\n  /**\n   * @inheritDoc\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\n\n\n  BaseBackend.prototype.eventFromException = function (_exception, _hint) {\n    throw new SentryError('Backend has to implement `eventFromException` method');\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  BaseBackend.prototype.eventFromMessage = function (_message, _level, _hint) {\n    throw new SentryError('Backend has to implement `eventFromMessage` method');\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  BaseBackend.prototype.sendEvent = function (event) {\n    this._transport.sendEvent(event).then(null, function (reason) {\n      logger.error(\"Error while sending event: \" + reason);\n    });\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  BaseBackend.prototype.getTransport = function () {\n    return this._transport;\n  };\n  /**\n   * Sets up the transport so it can be used later to send requests.\n   */\n\n\n  BaseBackend.prototype._setupTransport = function () {\n    return new NoopTransport();\n  };\n\n  return BaseBackend;\n}();\n\nexport { BaseBackend };","import { logger } from './logger';\nimport { getGlobalObject } from './misc';\n/**\n * Tells whether current environment supports ErrorEvent objects\n * {@link supportsErrorEvent}.\n *\n * @returns Answer to the given question.\n */\n\nexport function supportsErrorEvent() {\n  try {\n    new ErrorEvent('');\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n/**\n * Tells whether current environment supports DOMError objects\n * {@link supportsDOMError}.\n *\n * @returns Answer to the given question.\n */\n\nexport function supportsDOMError() {\n  try {\n    // Chrome: VM89:1 Uncaught TypeError: Failed to construct 'DOMError':\n    // 1 argument required, but only 0 present.\n    // @ts-ignore It really needs 1 argument, not 0.\n    new DOMError('');\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n/**\n * Tells whether current environment supports DOMException objects\n * {@link supportsDOMException}.\n *\n * @returns Answer to the given question.\n */\n\nexport function supportsDOMException() {\n  try {\n    new DOMException('');\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n/**\n * Tells whether current environment supports Fetch API\n * {@link supportsFetch}.\n *\n * @returns Answer to the given question.\n */\n\nexport function supportsFetch() {\n  if (!('fetch' in getGlobalObject())) {\n    return false;\n  }\n\n  try {\n    new Headers();\n    new Request('');\n    new Response();\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n/**\n * isNativeFetch checks if the given function is a native implementation of fetch()\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\n\nfunction isNativeFetch(func) {\n  return func && /^function fetch\\(\\)\\s+\\{\\s+\\[native code\\]\\s+\\}$/.test(func.toString());\n}\n/**\n * Tells whether current environment supports Fetch API natively\n * {@link supportsNativeFetch}.\n *\n * @returns true if `window.fetch` is natively implemented, false otherwise\n */\n\n\nexport function supportsNativeFetch() {\n  if (!supportsFetch()) {\n    return false;\n  }\n\n  var global = getGlobalObject(); // Fast path to avoid DOM I/O\n  // eslint-disable-next-line @typescript-eslint/unbound-method\n\n  if (isNativeFetch(global.fetch)) {\n    return true;\n  } // window.fetch is implemented, but is polyfilled or already wrapped (e.g: by a chrome extension)\n  // so create a \"pure\" iframe to see if that has native fetch\n\n\n  var result = false;\n  var doc = global.document; // eslint-disable-next-line deprecation/deprecation\n\n  if (doc && typeof doc.createElement === \"function\") {\n    try {\n      var sandbox = doc.createElement('iframe');\n      sandbox.hidden = true;\n      doc.head.appendChild(sandbox);\n\n      if (sandbox.contentWindow && sandbox.contentWindow.fetch) {\n        // eslint-disable-next-line @typescript-eslint/unbound-method\n        result = isNativeFetch(sandbox.contentWindow.fetch);\n      }\n\n      doc.head.removeChild(sandbox);\n    } catch (err) {\n      logger.warn('Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ', err);\n    }\n  }\n\n  return result;\n}\n/**\n * Tells whether current environment supports ReportingObserver API\n * {@link supportsReportingObserver}.\n *\n * @returns Answer to the given question.\n */\n\nexport function supportsReportingObserver() {\n  return 'ReportingObserver' in getGlobalObject();\n}\n/**\n * Tells whether current environment supports Referrer Policy API\n * {@link supportsReferrerPolicy}.\n *\n * @returns Answer to the given question.\n */\n\nexport function supportsReferrerPolicy() {\n  // Despite all stars in the sky saying that Edge supports old draft syntax, aka 'never', 'always', 'origin' and 'default\n  // https://caniuse.com/#feat=referrer-policy\n  // It doesn't. And it throw exception instead of ignoring this parameter...\n  // REF: https://github.com/getsentry/raven-js/issues/1233\n  if (!supportsFetch()) {\n    return false;\n  }\n\n  try {\n    new Request('_', {\n      referrerPolicy: 'origin'\n    });\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n/**\n * Tells whether current environment supports History API\n * {@link supportsHistory}.\n *\n * @returns Answer to the given question.\n */\n\nexport function supportsHistory() {\n  // NOTE: in Chrome App environment, touching history.pushState, *even inside\n  //       a try/catch block*, will cause Chrome to output an error to console.error\n  // borrowed from: https://github.com/angular/angular.js/pull/13945/files\n  var global = getGlobalObject();\n  /* eslint-disable @typescript-eslint/no-unsafe-member-access */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n  var chrome = global.chrome;\n  var isChromePackagedApp = chrome && chrome.app && chrome.app.runtime;\n  /* eslint-enable @typescript-eslint/no-unsafe-member-access */\n\n  var hasHistoryApi = 'history' in global && !!global.history.pushState && !!global.history.replaceState;\n  return !isChromePackagedApp && hasHistoryApi;\n}","/**\n * This was originally forked from https://github.com/occ/TraceKit, but has since been\n * largely modified and is now maintained as part of Sentry JS SDK.\n */\nimport { __assign } from \"tslib\"; // global reference to slice\n\nvar UNKNOWN_FUNCTION = '?'; // Chromium based browsers: Chrome, Brave, new Opera, new Edge\n\nvar chrome = /^\\s*at (?:(.*?) ?\\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\\/).*?)(?::(\\d+))?(?::(\\d+))?\\)?\\s*$/i; // gecko regex: `(?:bundle|\\d+\\.js)`: `bundle` is for react native, `\\d+\\.js` also but specifically for ram bundles because it\n// generates filenames without a prefix like `file://` the filenames in the stacktrace are just 42.js\n// We need this specific case for now because we want no other regex to match.\n\nvar gecko = /^\\s*(.*?)(?:\\((.*?)\\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\\/.*?|\\[native code\\]|[^@]*(?:bundle|\\d+\\.js))(?::(\\d+))?(?::(\\d+))?\\s*$/i;\nvar winjs = /^\\s*at (?:((?:\\[object object\\])?.+) )?\\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\\d+)(?::(\\d+))?\\)?\\s*$/i;\nvar geckoEval = /(\\S+) line (\\d+)(?: > eval line \\d+)* > eval/i;\nvar chromeEval = /\\((\\S*)(?::(\\d+))(?::(\\d+))\\)/; // Based on our own mapping pattern - https://github.com/getsentry/sentry/blob/9f08305e09866c8bd6d0c24f5b0aabdd7dd6c59c/src/sentry/lang/javascript/errormapping.py#L83-L108\n\nvar reactMinifiedRegexp = /Minified React error #\\d+;/i;\n/** JSDoc */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\n\nexport function computeStackTrace(ex) {\n  var stack = null;\n  var popSize = 0;\n\n  if (ex) {\n    if (typeof ex.framesToPop === 'number') {\n      popSize = ex.framesToPop;\n    } else if (reactMinifiedRegexp.test(ex.message)) {\n      popSize = 1;\n    }\n  }\n\n  try {\n    // This must be tried first because Opera 10 *destroys*\n    // its stacktrace property if you try to access the stack\n    // property first!!\n    stack = computeStackTraceFromStacktraceProp(ex);\n\n    if (stack) {\n      return popFrames(stack, popSize);\n    }\n  } catch (e) {// no-empty\n  }\n\n  try {\n    stack = computeStackTraceFromStackProp(ex);\n\n    if (stack) {\n      return popFrames(stack, popSize);\n    }\n  } catch (e) {// no-empty\n  }\n\n  return {\n    message: extractMessage(ex),\n    name: ex && ex.name,\n    stack: [],\n    failed: true\n  };\n}\n/** JSDoc */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any, complexity\n\nfunction computeStackTraceFromStackProp(ex) {\n  if (!ex || !ex.stack) {\n    return null;\n  }\n\n  var stack = [];\n  var lines = ex.stack.split('\\n');\n  var isEval;\n  var submatch;\n  var parts;\n  var element;\n\n  for (var i = 0; i < lines.length; ++i) {\n    if (parts = chrome.exec(lines[i])) {\n      var isNative = parts[2] && parts[2].indexOf('native') === 0; // start of line\n\n      isEval = parts[2] && parts[2].indexOf('eval') === 0; // start of line\n\n      if (isEval && (submatch = chromeEval.exec(parts[2]))) {\n        // throw out eval line/column and use top-most line/column number\n        parts[2] = submatch[1]; // url\n\n        parts[3] = submatch[2]; // line\n\n        parts[4] = submatch[3]; // column\n      }\n\n      element = {\n        // working with the regexp above is super painful. it is quite a hack, but just stripping the `address at `\n        // prefix here seems like the quickest solution for now.\n        url: parts[2] && parts[2].indexOf('address at ') === 0 ? parts[2].substr('address at '.length) : parts[2],\n        func: parts[1] || UNKNOWN_FUNCTION,\n        args: isNative ? [parts[2]] : [],\n        line: parts[3] ? +parts[3] : null,\n        column: parts[4] ? +parts[4] : null\n      };\n    } else if (parts = winjs.exec(lines[i])) {\n      element = {\n        url: parts[2],\n        func: parts[1] || UNKNOWN_FUNCTION,\n        args: [],\n        line: +parts[3],\n        column: parts[4] ? +parts[4] : null\n      };\n    } else if (parts = gecko.exec(lines[i])) {\n      isEval = parts[3] && parts[3].indexOf(' > eval') > -1;\n\n      if (isEval && (submatch = geckoEval.exec(parts[3]))) {\n        // throw out eval line/column and use top-most line number\n        parts[1] = parts[1] || \"eval\";\n        parts[3] = submatch[1];\n        parts[4] = submatch[2];\n        parts[5] = ''; // no column when eval\n      } else if (i === 0 && !parts[5] && ex.columnNumber !== void 0) {\n        // FireFox uses this awesome columnNumber property for its top frame\n        // Also note, Firefox's column number is 0-based and everything else expects 1-based,\n        // so adding 1\n        // NOTE: this hack doesn't work if top-most frame is eval\n        stack[0].column = ex.columnNumber + 1;\n      }\n\n      element = {\n        url: parts[3],\n        func: parts[1] || UNKNOWN_FUNCTION,\n        args: parts[2] ? parts[2].split(',') : [],\n        line: parts[4] ? +parts[4] : null,\n        column: parts[5] ? +parts[5] : null\n      };\n    } else {\n      continue;\n    }\n\n    if (!element.func && element.line) {\n      element.func = UNKNOWN_FUNCTION;\n    }\n\n    stack.push(element);\n  }\n\n  if (!stack.length) {\n    return null;\n  }\n\n  return {\n    message: extractMessage(ex),\n    name: ex.name,\n    stack: stack\n  };\n}\n/** JSDoc */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nfunction computeStackTraceFromStacktraceProp(ex) {\n  if (!ex || !ex.stacktrace) {\n    return null;\n  } // Access and store the stacktrace property before doing ANYTHING\n  // else to it because Opera is not very good at providing it\n  // reliably in other circumstances.\n\n\n  var stacktrace = ex.stacktrace;\n  var opera10Regex = / line (\\d+).*script (?:in )?(\\S+)(?:: in function (\\S+))?$/i;\n  var opera11Regex = / line (\\d+), column (\\d+)\\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\\((.*)\\))? in (.*):\\s*$/i;\n  var lines = stacktrace.split('\\n');\n  var stack = [];\n  var parts;\n\n  for (var line = 0; line < lines.length; line += 2) {\n    var element = null;\n\n    if (parts = opera10Regex.exec(lines[line])) {\n      element = {\n        url: parts[2],\n        func: parts[3],\n        args: [],\n        line: +parts[1],\n        column: null\n      };\n    } else if (parts = opera11Regex.exec(lines[line])) {\n      element = {\n        url: parts[6],\n        func: parts[3] || parts[4],\n        args: parts[5] ? parts[5].split(',') : [],\n        line: +parts[1],\n        column: +parts[2]\n      };\n    }\n\n    if (element) {\n      if (!element.func && element.line) {\n        element.func = UNKNOWN_FUNCTION;\n      }\n\n      stack.push(element);\n    }\n  }\n\n  if (!stack.length) {\n    return null;\n  }\n\n  return {\n    message: extractMessage(ex),\n    name: ex.name,\n    stack: stack\n  };\n}\n/** Remove N number of frames from the stack */\n\n\nfunction popFrames(stacktrace, popSize) {\n  try {\n    return __assign(__assign({}, stacktrace), {\n      stack: stacktrace.stack.slice(popSize)\n    });\n  } catch (e) {\n    return stacktrace;\n  }\n}\n/**\n * There are cases where stacktrace.message is an Event object\n * https://github.com/getsentry/sentry-javascript/issues/1949\n * In this specific case we try to extract stacktrace.message.error.message\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nfunction extractMessage(ex) {\n  var message = ex && ex.message;\n\n  if (!message) {\n    return 'No error message';\n  }\n\n  if (message.error && typeof message.error.message === 'string') {\n    return message.error.message;\n  }\n\n  return message;\n}","import { extractExceptionKeysForMessage, isEvent, normalizeToSize } from '@sentry/utils';\nimport { computeStackTrace } from './tracekit';\nvar STACKTRACE_LIMIT = 50;\n/**\n * This function creates an exception from an TraceKitStackTrace\n * @param stacktrace TraceKitStackTrace that will be converted to an exception\n * @hidden\n */\n\nexport function exceptionFromStacktrace(stacktrace) {\n  var frames = prepareFramesForEvent(stacktrace.stack);\n  var exception = {\n    type: stacktrace.name,\n    value: stacktrace.message\n  };\n\n  if (frames && frames.length) {\n    exception.stacktrace = {\n      frames: frames\n    };\n  }\n\n  if (exception.type === undefined && exception.value === '') {\n    exception.value = 'Unrecoverable error caught';\n  }\n\n  return exception;\n}\n/**\n * @hidden\n */\n\nexport function eventFromPlainObject(exception, syntheticException, rejection) {\n  var event = {\n    exception: {\n      values: [{\n        type: isEvent(exception) ? exception.constructor.name : rejection ? 'UnhandledRejection' : 'Error',\n        value: \"Non-Error \" + (rejection ? 'promise rejection' : 'exception') + \" captured with keys: \" + extractExceptionKeysForMessage(exception)\n      }]\n    },\n    extra: {\n      __serialized__: normalizeToSize(exception)\n    }\n  };\n\n  if (syntheticException) {\n    var stacktrace = computeStackTrace(syntheticException);\n    var frames_1 = prepareFramesForEvent(stacktrace.stack);\n    event.stacktrace = {\n      frames: frames_1\n    };\n  }\n\n  return event;\n}\n/**\n * @hidden\n */\n\nexport function eventFromStacktrace(stacktrace) {\n  var exception = exceptionFromStacktrace(stacktrace);\n  return {\n    exception: {\n      values: [exception]\n    }\n  };\n}\n/**\n * @hidden\n */\n\nexport function prepareFramesForEvent(stack) {\n  if (!stack || !stack.length) {\n    return [];\n  }\n\n  var localStack = stack;\n  var firstFrameFunction = localStack[0].func || '';\n  var lastFrameFunction = localStack[localStack.length - 1].func || ''; // If stack starts with one of our API calls, remove it (starts, meaning it's the top of the stack - aka last call)\n\n  if (firstFrameFunction.indexOf('captureMessage') !== -1 || firstFrameFunction.indexOf('captureException') !== -1) {\n    localStack = localStack.slice(1);\n  } // If stack ends with one of our internal API calls, remove it (ends, meaning it's the bottom of the stack - aka top-most call)\n\n\n  if (lastFrameFunction.indexOf('sentryWrapped') !== -1) {\n    localStack = localStack.slice(0, -1);\n  } // The frame where the crash happened, should be the last entry in the array\n\n\n  return localStack.slice(0, STACKTRACE_LIMIT).map(function (frame) {\n    return {\n      colno: frame.column === null ? undefined : frame.column,\n      filename: frame.url || localStack[0].url,\n      function: frame.func || '?',\n      in_app: true,\n      lineno: frame.line === null ? undefined : frame.line\n    };\n  }).reverse();\n}","import { Severity } from '@sentry/types';\nimport { addExceptionMechanism, addExceptionTypeValue, isDOMError, isDOMException, isError, isErrorEvent, isEvent, isPlainObject, SyncPromise } from '@sentry/utils';\nimport { eventFromPlainObject, eventFromStacktrace, prepareFramesForEvent } from './parsers';\nimport { computeStackTrace } from './tracekit';\n/**\n * Builds and Event from a Exception\n * @hidden\n */\n\nexport function eventFromException(options, exception, hint) {\n  var syntheticException = hint && hint.syntheticException || undefined;\n  var event = eventFromUnknownInput(exception, syntheticException, {\n    attachStacktrace: options.attachStacktrace\n  });\n  addExceptionMechanism(event, {\n    handled: true,\n    type: 'generic'\n  });\n  event.level = Severity.Error;\n\n  if (hint && hint.event_id) {\n    event.event_id = hint.event_id;\n  }\n\n  return SyncPromise.resolve(event);\n}\n/**\n * Builds and Event from a Message\n * @hidden\n */\n\nexport function eventFromMessage(options, message, level, hint) {\n  if (level === void 0) {\n    level = Severity.Info;\n  }\n\n  var syntheticException = hint && hint.syntheticException || undefined;\n  var event = eventFromString(message, syntheticException, {\n    attachStacktrace: options.attachStacktrace\n  });\n  event.level = level;\n\n  if (hint && hint.event_id) {\n    event.event_id = hint.event_id;\n  }\n\n  return SyncPromise.resolve(event);\n}\n/**\n * @hidden\n */\n\nexport function eventFromUnknownInput(exception, syntheticException, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var event;\n\n  if (isErrorEvent(exception) && exception.error) {\n    // If it is an ErrorEvent with `error` property, extract it to get actual Error\n    var errorEvent = exception; // eslint-disable-next-line no-param-reassign\n\n    exception = errorEvent.error;\n    event = eventFromStacktrace(computeStackTrace(exception));\n    return event;\n  }\n\n  if (isDOMError(exception) || isDOMException(exception)) {\n    // If it is a DOMError or DOMException (which are legacy APIs, but still supported in some browsers)\n    // then we just extract the name and message, as they don't provide anything else\n    // https://developer.mozilla.org/en-US/docs/Web/API/DOMError\n    // https://developer.mozilla.org/en-US/docs/Web/API/DOMException\n    var domException = exception;\n    var name_1 = domException.name || (isDOMError(domException) ? 'DOMError' : 'DOMException');\n    var message = domException.message ? name_1 + \": \" + domException.message : name_1;\n    event = eventFromString(message, syntheticException, options);\n    addExceptionTypeValue(event, message);\n    return event;\n  }\n\n  if (isError(exception)) {\n    // we have a real Error object, do nothing\n    event = eventFromStacktrace(computeStackTrace(exception));\n    return event;\n  }\n\n  if (isPlainObject(exception) || isEvent(exception)) {\n    // If it is plain Object or Event, serialize it manually and extract options\n    // This will allow us to group events based on top-level keys\n    // which is much better than creating new group when any key/value change\n    var objectException = exception;\n    event = eventFromPlainObject(objectException, syntheticException, options.rejection);\n    addExceptionMechanism(event, {\n      synthetic: true\n    });\n    return event;\n  } // If none of previous checks were valid, then it means that it's not:\n  // - an instance of DOMError\n  // - an instance of DOMException\n  // - an instance of Event\n  // - an instance of Error\n  // - a valid ErrorEvent (one with an error property)\n  // - a plain Object\n  //\n  // So bail out and capture it as a simple message:\n\n\n  event = eventFromString(exception, syntheticException, options);\n  addExceptionTypeValue(event, \"\" + exception, undefined);\n  addExceptionMechanism(event, {\n    synthetic: true\n  });\n  return event;\n}\n/**\n * @hidden\n */\n\nexport function eventFromString(input, syntheticException, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var event = {\n    message: input\n  };\n\n  if (options.attachStacktrace && syntheticException) {\n    var stacktrace = computeStackTrace(syntheticException);\n    var frames_1 = prepareFramesForEvent(stacktrace.stack);\n    event.stacktrace = {\n      frames: frames_1\n    };\n  }\n\n  return event;\n}","import { timestampWithMs } from '@sentry/utils';\n/** Creates a SentryRequest from an event. */\n\nexport function eventToSentryRequest(event, api) {\n  var useEnvelope = event.type === 'transaction';\n  var req = {\n    body: JSON.stringify(event),\n    url: useEnvelope ? api.getEnvelopeEndpointWithUrlEncodedAuth() : api.getStoreEndpointWithUrlEncodedAuth()\n  }; // https://develop.sentry.dev/sdk/envelopes/\n  // Since we don't need to manipulate envelopes nor store them, there is no\n  // exported concept of an Envelope with operations including serialization and\n  // deserialization. Instead, we only implement a minimal subset of the spec to\n  // serialize events inline here.\n\n  if (useEnvelope) {\n    var envelopeHeaders = JSON.stringify({\n      event_id: event.event_id,\n      // We need to add * 1000 since we divide it by 1000 by default but JS works with ms precision\n      // The reason we use timestampWithMs here is that all clocks across the SDK use the same clock\n      sent_at: new Date(timestampWithMs() * 1000).toISOString()\n    });\n    var itemHeaders = JSON.stringify({\n      type: event.type\n    }); // The trailing newline is optional. We intentionally don't send it to avoid\n    // sending unnecessary bytes.\n    //\n    // const envelope = `${envelopeHeaders}\\n${itemHeaders}\\n${req.body}\\n`;\n\n    var envelope = envelopeHeaders + \"\\n\" + itemHeaders + \"\\n\" + req.body;\n    req.body = envelope;\n  }\n\n  return req;\n}","import { Dsn, urlEncode } from '@sentry/utils';\nvar SENTRY_API_VERSION = '7';\n/** Helper class to provide urls to different Sentry endpoints. */\n\nvar API =\n/** @class */\nfunction () {\n  /** Create a new instance of API */\n  function API(dsn) {\n    this.dsn = dsn;\n    this._dsnObject = new Dsn(dsn);\n  }\n  /** Returns the Dsn object. */\n\n\n  API.prototype.getDsn = function () {\n    return this._dsnObject;\n  };\n  /** Returns the prefix to construct Sentry ingestion API endpoints. */\n\n\n  API.prototype.getBaseApiEndpoint = function () {\n    var dsn = this._dsnObject;\n    var protocol = dsn.protocol ? dsn.protocol + \":\" : '';\n    var port = dsn.port ? \":\" + dsn.port : '';\n    return protocol + \"//\" + dsn.host + port + (dsn.path ? \"/\" + dsn.path : '') + \"/api/\";\n  };\n  /** Returns the store endpoint URL. */\n\n\n  API.prototype.getStoreEndpoint = function () {\n    return this._getIngestEndpoint('store');\n  };\n  /**\n   * Returns the store endpoint URL with auth in the query string.\n   *\n   * Sending auth as part of the query string and not as custom HTTP headers avoids CORS preflight requests.\n   */\n\n\n  API.prototype.getStoreEndpointWithUrlEncodedAuth = function () {\n    return this.getStoreEndpoint() + \"?\" + this._encodedAuth();\n  };\n  /**\n   * Returns the envelope endpoint URL with auth in the query string.\n   *\n   * Sending auth as part of the query string and not as custom HTTP headers avoids CORS preflight requests.\n   */\n\n\n  API.prototype.getEnvelopeEndpointWithUrlEncodedAuth = function () {\n    return this._getEnvelopeEndpoint() + \"?\" + this._encodedAuth();\n  };\n  /** Returns only the path component for the store endpoint. */\n\n\n  API.prototype.getStoreEndpointPath = function () {\n    var dsn = this._dsnObject;\n    return (dsn.path ? \"/\" + dsn.path : '') + \"/api/\" + dsn.projectId + \"/store/\";\n  };\n  /**\n   * Returns an object that can be used in request headers.\n   * This is needed for node and the old /store endpoint in sentry\n   */\n\n\n  API.prototype.getRequestHeaders = function (clientName, clientVersion) {\n    var dsn = this._dsnObject;\n    var header = [\"Sentry sentry_version=\" + SENTRY_API_VERSION];\n    header.push(\"sentry_client=\" + clientName + \"/\" + clientVersion);\n    header.push(\"sentry_key=\" + dsn.user);\n\n    if (dsn.pass) {\n      header.push(\"sentry_secret=\" + dsn.pass);\n    }\n\n    return {\n      'Content-Type': 'application/json',\n      'X-Sentry-Auth': header.join(', ')\n    };\n  };\n  /** Returns the url to the report dialog endpoint. */\n\n\n  API.prototype.getReportDialogEndpoint = function (dialogOptions) {\n    if (dialogOptions === void 0) {\n      dialogOptions = {};\n    }\n\n    var dsn = this._dsnObject;\n    var endpoint = this.getBaseApiEndpoint() + \"embed/error-page/\";\n    var encodedOptions = [];\n    encodedOptions.push(\"dsn=\" + dsn.toString());\n\n    for (var key in dialogOptions) {\n      if (key === 'user') {\n        if (!dialogOptions.user) {\n          continue;\n        }\n\n        if (dialogOptions.user.name) {\n          encodedOptions.push(\"name=\" + encodeURIComponent(dialogOptions.user.name));\n        }\n\n        if (dialogOptions.user.email) {\n          encodedOptions.push(\"email=\" + encodeURIComponent(dialogOptions.user.email));\n        }\n      } else {\n        encodedOptions.push(encodeURIComponent(key) + \"=\" + encodeURIComponent(dialogOptions[key]));\n      }\n    }\n\n    if (encodedOptions.length) {\n      return endpoint + \"?\" + encodedOptions.join('&');\n    }\n\n    return endpoint;\n  };\n  /** Returns the envelope endpoint URL. */\n\n\n  API.prototype._getEnvelopeEndpoint = function () {\n    return this._getIngestEndpoint('envelope');\n  };\n  /** Returns the ingest API endpoint for target. */\n\n\n  API.prototype._getIngestEndpoint = function (target) {\n    var base = this.getBaseApiEndpoint();\n    var dsn = this._dsnObject;\n    return \"\" + base + dsn.projectId + \"/\" + target + \"/\";\n  };\n  /** Returns a URL-encoded string with auth config suitable for a query string. */\n\n\n  API.prototype._encodedAuth = function () {\n    var dsn = this._dsnObject;\n    var auth = {\n      // We send only the minimum set of required information. See\n      // https://github.com/getsentry/sentry-javascript/issues/2572.\n      sentry_key: dsn.user,\n      sentry_version: SENTRY_API_VERSION\n    };\n    return urlEncode(auth);\n  };\n\n  return API;\n}();\n\nexport { API };","import { SentryError } from './error';\nimport { SyncPromise } from './syncpromise';\n/** A simple queue that holds promises. */\n\nvar PromiseBuffer =\n/** @class */\nfunction () {\n  function PromiseBuffer(_limit) {\n    this._limit = _limit;\n    /** Internal set of queued Promises */\n\n    this._buffer = [];\n  }\n  /**\n   * Says if the buffer is ready to take more requests\n   */\n\n\n  PromiseBuffer.prototype.isReady = function () {\n    return this._limit === undefined || this.length() < this._limit;\n  };\n  /**\n   * Add a promise to the queue.\n   *\n   * @param task Can be any PromiseLike<T>\n   * @returns The original promise.\n   */\n\n\n  PromiseBuffer.prototype.add = function (task) {\n    var _this = this;\n\n    if (!this.isReady()) {\n      return SyncPromise.reject(new SentryError('Not adding Promise due to buffer limit reached.'));\n    }\n\n    if (this._buffer.indexOf(task) === -1) {\n      this._buffer.push(task);\n    }\n\n    task.then(function () {\n      return _this.remove(task);\n    }).then(null, function () {\n      return _this.remove(task).then(null, function () {// We have to add this catch here otherwise we have an unhandledPromiseRejection\n        // because it's a new Promise chain.\n      });\n    });\n    return task;\n  };\n  /**\n   * Remove a promise to the queue.\n   *\n   * @param task Can be any PromiseLike<T>\n   * @returns Removed promise.\n   */\n\n\n  PromiseBuffer.prototype.remove = function (task) {\n    var removedTask = this._buffer.splice(this._buffer.indexOf(task), 1)[0];\n\n    return removedTask;\n  };\n  /**\n   * This function returns the number of unresolved promises in the queue.\n   */\n\n\n  PromiseBuffer.prototype.length = function () {\n    return this._buffer.length;\n  };\n  /**\n   * This will drain the whole queue, returns true if queue is empty or drained.\n   * If timeout is provided and the queue takes longer to drain, the promise still resolves but with false.\n   *\n   * @param timeout Number in ms to wait until it resolves with false.\n   */\n\n\n  PromiseBuffer.prototype.drain = function (timeout) {\n    var _this = this;\n\n    return new SyncPromise(function (resolve) {\n      var capturedSetTimeout = setTimeout(function () {\n        if (timeout && timeout > 0) {\n          resolve(false);\n        }\n      }, timeout);\n      SyncPromise.all(_this._buffer).then(function () {\n        clearTimeout(capturedSetTimeout);\n        resolve(true);\n      }).then(null, function () {\n        resolve(true);\n      });\n    });\n  };\n\n  return PromiseBuffer;\n}();\n\nexport { PromiseBuffer };","import { API } from '@sentry/core';\nimport { PromiseBuffer, SentryError } from '@sentry/utils';\n/** Base Transport class implementation */\n\nvar BaseTransport =\n/** @class */\nfunction () {\n  function BaseTransport(options) {\n    this.options = options;\n    /** A simple buffer holding all requests. */\n\n    this._buffer = new PromiseBuffer(30);\n    this._api = new API(this.options.dsn); // eslint-disable-next-line deprecation/deprecation\n\n    this.url = this._api.getStoreEndpointWithUrlEncodedAuth();\n  }\n  /**\n   * @inheritDoc\n   */\n\n\n  BaseTransport.prototype.sendEvent = function (_) {\n    throw new SentryError('Transport Class has to implement `sendEvent` method');\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  BaseTransport.prototype.close = function (timeout) {\n    return this._buffer.drain(timeout);\n  };\n\n  return BaseTransport;\n}();\n\nexport { BaseTransport };","import { __extends } from \"tslib\";\nimport { eventToSentryRequest } from '@sentry/core';\nimport { Status } from '@sentry/types';\nimport { getGlobalObject, logger, parseRetryAfterHeader, supportsReferrerPolicy, SyncPromise } from '@sentry/utils';\nimport { BaseTransport } from './base';\nvar global = getGlobalObject();\n/** `fetch` based transport */\n\nvar FetchTransport =\n/** @class */\nfunction (_super) {\n  __extends(FetchTransport, _super);\n\n  function FetchTransport() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    /** Locks transport after receiving 429 response */\n\n\n    _this._disabledUntil = new Date(Date.now());\n    return _this;\n  }\n  /**\n   * @inheritDoc\n   */\n\n\n  FetchTransport.prototype.sendEvent = function (event) {\n    var _this = this;\n\n    if (new Date(Date.now()) < this._disabledUntil) {\n      return Promise.reject({\n        event: event,\n        reason: \"Transport locked till \" + this._disabledUntil + \" due to too many requests.\",\n        status: 429\n      });\n    }\n\n    var sentryReq = eventToSentryRequest(event, this._api);\n    var options = {\n      body: sentryReq.body,\n      method: 'POST',\n      // Despite all stars in the sky saying that Edge supports old draft syntax, aka 'never', 'always', 'origin' and 'default\n      // https://caniuse.com/#feat=referrer-policy\n      // It doesn't. And it throw exception instead of ignoring this parameter...\n      // REF: https://github.com/getsentry/raven-js/issues/1233\n      referrerPolicy: supportsReferrerPolicy() ? 'origin' : ''\n    };\n\n    if (this.options.fetchParameters !== undefined) {\n      Object.assign(options, this.options.fetchParameters);\n    }\n\n    if (this.options.headers !== undefined) {\n      options.headers = this.options.headers;\n    }\n\n    return this._buffer.add(new SyncPromise(function (resolve, reject) {\n      global.fetch(sentryReq.url, options).then(function (response) {\n        var status = Status.fromHttpCode(response.status);\n\n        if (status === Status.Success) {\n          resolve({\n            status: status\n          });\n          return;\n        }\n\n        if (status === Status.RateLimit) {\n          var now = Date.now();\n          /**\n           * \"The name is case-insensitive.\"\n           * https://developer.mozilla.org/en-US/docs/Web/API/Headers/get\n           */\n\n          var retryAfterHeader = response.headers.get('Retry-After');\n          _this._disabledUntil = new Date(now + parseRetryAfterHeader(now, retryAfterHeader));\n          logger.warn(\"Too many requests, backing off till: \" + _this._disabledUntil);\n        }\n\n        reject(response);\n      }).catch(reject);\n    }));\n  };\n\n  return FetchTransport;\n}(BaseTransport);\n\nexport { FetchTransport };","import { __extends } from \"tslib\";\nimport { eventToSentryRequest } from '@sentry/core';\nimport { Status } from '@sentry/types';\nimport { logger, parseRetryAfterHeader, SyncPromise } from '@sentry/utils';\nimport { BaseTransport } from './base';\n/** `XHR` based transport */\n\nvar XHRTransport =\n/** @class */\nfunction (_super) {\n  __extends(XHRTransport, _super);\n\n  function XHRTransport() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    /** Locks transport after receiving 429 response */\n\n\n    _this._disabledUntil = new Date(Date.now());\n    return _this;\n  }\n  /**\n   * @inheritDoc\n   */\n\n\n  XHRTransport.prototype.sendEvent = function (event) {\n    var _this = this;\n\n    if (new Date(Date.now()) < this._disabledUntil) {\n      return Promise.reject({\n        event: event,\n        reason: \"Transport locked till \" + this._disabledUntil + \" due to too many requests.\",\n        status: 429\n      });\n    }\n\n    var sentryReq = eventToSentryRequest(event, this._api);\n    return this._buffer.add(new SyncPromise(function (resolve, reject) {\n      var request = new XMLHttpRequest();\n\n      request.onreadystatechange = function () {\n        if (request.readyState !== 4) {\n          return;\n        }\n\n        var status = Status.fromHttpCode(request.status);\n\n        if (status === Status.Success) {\n          resolve({\n            status: status\n          });\n          return;\n        }\n\n        if (status === Status.RateLimit) {\n          var now = Date.now();\n          /**\n           * \"The search for the header name is case-insensitive.\"\n           * https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/getResponseHeader\n           */\n\n          var retryAfterHeader = request.getResponseHeader('Retry-After');\n          _this._disabledUntil = new Date(now + parseRetryAfterHeader(now, retryAfterHeader));\n          logger.warn(\"Too many requests, backing off till: \" + _this._disabledUntil);\n        }\n\n        reject(request);\n      };\n\n      request.open('POST', sentryReq.url);\n\n      for (var header in _this.options.headers) {\n        if (_this.options.headers.hasOwnProperty(header)) {\n          request.setRequestHeader(header, _this.options.headers[header]);\n        }\n      }\n\n      request.send(sentryReq.body);\n    }));\n  };\n\n  return XHRTransport;\n}(BaseTransport);\n\nexport { XHRTransport };","import { __assign, __extends } from \"tslib\";\nimport { BaseBackend } from '@sentry/core';\nimport { Severity } from '@sentry/types';\nimport { supportsFetch } from '@sentry/utils';\nimport { eventFromException, eventFromMessage } from './eventbuilder';\nimport { FetchTransport, XHRTransport } from './transports';\n/**\n * The Sentry Browser SDK Backend.\n * @hidden\n */\n\nvar BrowserBackend =\n/** @class */\nfunction (_super) {\n  __extends(BrowserBackend, _super);\n\n  function BrowserBackend() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * @inheritDoc\n   */\n\n\n  BrowserBackend.prototype.eventFromException = function (exception, hint) {\n    return eventFromException(this._options, exception, hint);\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  BrowserBackend.prototype.eventFromMessage = function (message, level, hint) {\n    if (level === void 0) {\n      level = Severity.Info;\n    }\n\n    return eventFromMessage(this._options, message, level, hint);\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  BrowserBackend.prototype._setupTransport = function () {\n    if (!this._options.dsn) {\n      // We return the noop transport here in case there is no Dsn.\n      return _super.prototype._setupTransport.call(this);\n    }\n\n    var transportOptions = __assign(__assign({}, this._options.transportOptions), {\n      dsn: this._options.dsn\n    });\n\n    if (this._options.transport) {\n      return new this._options.transport(transportOptions);\n    }\n\n    if (supportsFetch()) {\n      return new FetchTransport(transportOptions);\n    }\n\n    return new XHRTransport(transportOptions);\n  };\n\n  return BrowserBackend;\n}(BaseBackend);\n\nexport { BrowserBackend };","import { __assign } from \"tslib\";\nimport { API, captureException, withScope } from '@sentry/core';\nimport { addExceptionMechanism, addExceptionTypeValue, logger } from '@sentry/utils';\nvar ignoreOnError = 0;\n/**\n * @hidden\n */\n\nexport function shouldIgnoreOnError() {\n  return ignoreOnError > 0;\n}\n/**\n * @hidden\n */\n\nexport function ignoreNextOnError() {\n  // onerror should trigger before setTimeout\n  ignoreOnError += 1;\n  setTimeout(function () {\n    ignoreOnError -= 1;\n  });\n}\n/**\n * Instruments the given function and sends an event to Sentry every time the\n * function throws an exception.\n *\n * @param fn A function to wrap.\n * @returns The wrapped function.\n * @hidden\n */\n\nexport function wrap(fn, options, before) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  if (typeof fn !== 'function') {\n    return fn;\n  }\n\n  try {\n    // We don't wanna wrap it twice\n    if (fn.__sentry__) {\n      return fn;\n    } // If this has already been wrapped in the past, return that wrapped function\n\n\n    if (fn.__sentry_wrapped__) {\n      return fn.__sentry_wrapped__;\n    }\n  } catch (e) {\n    // Just accessing custom props in some Selenium environments\n    // can cause a \"Permission denied\" exception (see raven-js#495).\n    // Bail on wrapping and return the function as-is (defers to window.onerror).\n    return fn;\n  }\n  /* eslint-disable prefer-rest-params */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  var sentryWrapped = function sentryWrapped() {\n    var args = Array.prototype.slice.call(arguments);\n\n    try {\n      if (before && typeof before === 'function') {\n        before.apply(this, arguments);\n      } // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/no-unsafe-member-access\n\n\n      var wrappedArguments = args.map(function (arg) {\n        return wrap(arg, options);\n      });\n\n      if (fn.handleEvent) {\n        // Attempt to invoke user-land function\n        // NOTE: If you are a Sentry user, and you are seeing this stack frame, it\n        //       means the sentry.javascript SDK caught an error invoking your application code. This\n        //       is expected behavior and NOT indicative of a bug with sentry.javascript.\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n        return fn.handleEvent.apply(this, wrappedArguments);\n      } // Attempt to invoke user-land function\n      // NOTE: If you are a Sentry user, and you are seeing this stack frame, it\n      //       means the sentry.javascript SDK caught an error invoking your application code. This\n      //       is expected behavior and NOT indicative of a bug with sentry.javascript.\n\n\n      return fn.apply(this, wrappedArguments);\n    } catch (ex) {\n      ignoreNextOnError();\n      withScope(function (scope) {\n        scope.addEventProcessor(function (event) {\n          var processedEvent = __assign({}, event);\n\n          if (options.mechanism) {\n            addExceptionTypeValue(processedEvent, undefined, undefined);\n            addExceptionMechanism(processedEvent, options.mechanism);\n          }\n\n          processedEvent.extra = __assign(__assign({}, processedEvent.extra), {\n            arguments: args\n          });\n          return processedEvent;\n        });\n        captureException(ex);\n      });\n      throw ex;\n    }\n  };\n  /* eslint-enable prefer-rest-params */\n  // Accessing some objects may throw\n  // ref: https://github.com/getsentry/sentry-javascript/issues/1168\n\n\n  try {\n    for (var property in fn) {\n      if (Object.prototype.hasOwnProperty.call(fn, property)) {\n        sentryWrapped[property] = fn[property];\n      }\n    }\n  } catch (_oO) {} // eslint-disable-line no-empty\n\n\n  fn.prototype = fn.prototype || {};\n  sentryWrapped.prototype = fn.prototype;\n  Object.defineProperty(fn, '__sentry_wrapped__', {\n    enumerable: false,\n    value: sentryWrapped\n  }); // Signal that this function has been wrapped/filled already\n  // for both debugging and to prevent it to being wrapped/filled twice\n\n  Object.defineProperties(sentryWrapped, {\n    __sentry__: {\n      enumerable: false,\n      value: true\n    },\n    __sentry_original__: {\n      enumerable: false,\n      value: fn\n    }\n  }); // Restore original function name (not all browsers allow that)\n\n  try {\n    var descriptor = Object.getOwnPropertyDescriptor(sentryWrapped, 'name');\n\n    if (descriptor.configurable) {\n      Object.defineProperty(sentryWrapped, 'name', {\n        get: function get() {\n          return fn.name;\n        }\n      });\n    } // eslint-disable-next-line no-empty\n\n  } catch (_oO) {}\n\n  return sentryWrapped;\n}\n/**\n * Injects the Report Dialog script\n * @hidden\n */\n\nexport function injectReportDialog(options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  if (!options.eventId) {\n    logger.error(\"Missing eventId option in showReportDialog call\");\n    return;\n  }\n\n  if (!options.dsn) {\n    logger.error(\"Missing dsn option in showReportDialog call\");\n    return;\n  }\n\n  var script = document.createElement('script');\n  script.async = true;\n  script.src = new API(options.dsn).getReportDialogEndpoint(options);\n\n  if (options.onLoad) {\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    script.onload = options.onLoad;\n  }\n\n  (document.head || document.body).appendChild(script);\n}","import { __assign, __values } from \"tslib\";\nimport { isInstanceOf, isString } from './is';\nimport { logger } from './logger';\nimport { getFunctionName, getGlobalObject } from './misc';\nimport { fill } from './object';\nimport { supportsHistory, supportsNativeFetch } from './supports';\nvar global = getGlobalObject();\n/**\n * Instrument native APIs to call handlers that can be used to create breadcrumbs, APM spans etc.\n *  - Console API\n *  - Fetch API\n *  - XHR API\n *  - History API\n *  - DOM API (click/typing)\n *  - Error API\n *  - UnhandledRejection API\n */\n\nvar handlers = {};\nvar instrumented = {};\n/** Instruments given API */\n\nfunction instrument(type) {\n  if (instrumented[type]) {\n    return;\n  }\n\n  instrumented[type] = true;\n\n  switch (type) {\n    case 'console':\n      instrumentConsole();\n      break;\n\n    case 'dom':\n      instrumentDOM();\n      break;\n\n    case 'xhr':\n      instrumentXHR();\n      break;\n\n    case 'fetch':\n      instrumentFetch();\n      break;\n\n    case 'history':\n      instrumentHistory();\n      break;\n\n    case 'error':\n      instrumentError();\n      break;\n\n    case 'unhandledrejection':\n      instrumentUnhandledRejection();\n      break;\n\n    default:\n      logger.warn('unknown instrumentation type:', type);\n  }\n}\n/**\n * Add handler that will be called when given type of instrumentation triggers.\n * Use at your own risk, this might break without changelog notice, only used internally.\n * @hidden\n */\n\n\nexport function addInstrumentationHandler(handler) {\n  if (!handler || typeof handler.type !== 'string' || typeof handler.callback !== 'function') {\n    return;\n  }\n\n  handlers[handler.type] = handlers[handler.type] || [];\n  handlers[handler.type].push(handler.callback);\n  instrument(handler.type);\n}\n/** JSDoc */\n\nfunction triggerHandlers(type, data) {\n  var e_1, _a;\n\n  if (!type || !handlers[type]) {\n    return;\n  }\n\n  try {\n    for (var _b = __values(handlers[type] || []), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var handler = _c.value;\n\n      try {\n        handler(data);\n      } catch (e) {\n        logger.error(\"Error while triggering instrumentation handler.\\nType: \" + type + \"\\nName: \" + getFunctionName(handler) + \"\\nError: \" + e);\n      }\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n}\n/** JSDoc */\n\n\nfunction instrumentConsole() {\n  if (!('console' in global)) {\n    return;\n  }\n\n  ['debug', 'info', 'warn', 'error', 'log', 'assert'].forEach(function (level) {\n    if (!(level in global.console)) {\n      return;\n    }\n\n    fill(global.console, level, function (originalConsoleLevel) {\n      return function () {\n        var args = [];\n\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n\n        triggerHandlers('console', {\n          args: args,\n          level: level\n        }); // this fails for some browsers. :(\n\n        if (originalConsoleLevel) {\n          Function.prototype.apply.call(originalConsoleLevel, global.console, args);\n        }\n      };\n    });\n  });\n}\n/** JSDoc */\n\n\nfunction instrumentFetch() {\n  if (!supportsNativeFetch()) {\n    return;\n  }\n\n  fill(global, 'fetch', function (originalFetch) {\n    return function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      var commonHandlerData = {\n        args: args,\n        fetchData: {\n          method: getFetchMethod(args),\n          url: getFetchUrl(args)\n        },\n        startTimestamp: Date.now()\n      };\n      triggerHandlers('fetch', __assign({}, commonHandlerData)); // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n\n      return originalFetch.apply(global, args).then(function (response) {\n        triggerHandlers('fetch', __assign(__assign({}, commonHandlerData), {\n          endTimestamp: Date.now(),\n          response: response\n        }));\n        return response;\n      }, function (error) {\n        triggerHandlers('fetch', __assign(__assign({}, commonHandlerData), {\n          endTimestamp: Date.now(),\n          error: error\n        })); // NOTE: If you are a Sentry user, and you are seeing this stack frame,\n        //       it means the sentry.javascript SDK caught an error invoking your application code.\n        //       This is expected behavior and NOT indicative of a bug with sentry.javascript.\n\n        throw error;\n      });\n    };\n  });\n}\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\n\n/** Extract `method` from fetch call arguments */\n\n\nfunction getFetchMethod(fetchArgs) {\n  if (fetchArgs === void 0) {\n    fetchArgs = [];\n  }\n\n  if ('Request' in global && isInstanceOf(fetchArgs[0], Request) && fetchArgs[0].method) {\n    return String(fetchArgs[0].method).toUpperCase();\n  }\n\n  if (fetchArgs[1] && fetchArgs[1].method) {\n    return String(fetchArgs[1].method).toUpperCase();\n  }\n\n  return 'GET';\n}\n/** Extract `url` from fetch call arguments */\n\n\nfunction getFetchUrl(fetchArgs) {\n  if (fetchArgs === void 0) {\n    fetchArgs = [];\n  }\n\n  if (typeof fetchArgs[0] === 'string') {\n    return fetchArgs[0];\n  }\n\n  if ('Request' in global && isInstanceOf(fetchArgs[0], Request)) {\n    return fetchArgs[0].url;\n  }\n\n  return String(fetchArgs[0]);\n}\n/* eslint-enable @typescript-eslint/no-unsafe-member-access */\n\n/** JSDoc */\n\n\nfunction instrumentXHR() {\n  if (!('XMLHttpRequest' in global)) {\n    return;\n  }\n\n  var xhrproto = XMLHttpRequest.prototype;\n  fill(xhrproto, 'open', function (originalOpen) {\n    return function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      } // eslint-disable-next-line @typescript-eslint/no-this-alias\n\n\n      var xhr = this;\n      var url = args[1];\n      xhr.__sentry_xhr__ = {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n        method: isString(args[0]) ? args[0].toUpperCase() : args[0],\n        url: args[1]\n      }; // if Sentry key appears in URL, don't capture it as a request\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n\n      if (isString(url) && xhr.__sentry_xhr__.method === 'POST' && url.match(/sentry_key/)) {\n        xhr.__sentry_own_request__ = true;\n      }\n\n      var onreadystatechangeHandler = function onreadystatechangeHandler() {\n        if (xhr.readyState === 4) {\n          try {\n            // touching statusCode in some platforms throws\n            // an exception\n            if (xhr.__sentry_xhr__) {\n              xhr.__sentry_xhr__.status_code = xhr.status;\n            }\n          } catch (e) {\n            /* do nothing */\n          }\n\n          triggerHandlers('xhr', {\n            args: args,\n            endTimestamp: Date.now(),\n            startTimestamp: Date.now(),\n            xhr: xhr\n          });\n        }\n      };\n\n      if ('onreadystatechange' in xhr && typeof xhr.onreadystatechange === 'function') {\n        fill(xhr, 'onreadystatechange', function (original) {\n          return function () {\n            var readyStateArgs = [];\n\n            for (var _i = 0; _i < arguments.length; _i++) {\n              readyStateArgs[_i] = arguments[_i];\n            }\n\n            onreadystatechangeHandler();\n            return original.apply(xhr, readyStateArgs);\n          };\n        });\n      } else {\n        xhr.addEventListener('readystatechange', onreadystatechangeHandler);\n      }\n\n      return originalOpen.apply(xhr, args);\n    };\n  });\n  fill(xhrproto, 'send', function (originalSend) {\n    return function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      triggerHandlers('xhr', {\n        args: args,\n        startTimestamp: Date.now(),\n        xhr: this\n      });\n      return originalSend.apply(this, args);\n    };\n  });\n}\n\nvar lastHref;\n/** JSDoc */\n\nfunction instrumentHistory() {\n  if (!supportsHistory()) {\n    return;\n  }\n\n  var oldOnPopState = global.onpopstate;\n\n  global.onpopstate = function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    var to = global.location.href; // keep track of the current URL state, as we always receive only the updated state\n\n    var from = lastHref;\n    lastHref = to;\n    triggerHandlers('history', {\n      from: from,\n      to: to\n    });\n\n    if (oldOnPopState) {\n      return oldOnPopState.apply(this, args);\n    }\n  };\n  /** @hidden */\n\n\n  function historyReplacementFunction(originalHistoryFunction) {\n    return function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      var url = args.length > 2 ? args[2] : undefined;\n\n      if (url) {\n        // coerce to string (this is what pushState does)\n        var from = lastHref;\n        var to = String(url); // keep track of the current URL state, as we always receive only the updated state\n\n        lastHref = to;\n        triggerHandlers('history', {\n          from: from,\n          to: to\n        });\n      }\n\n      return originalHistoryFunction.apply(this, args);\n    };\n  }\n\n  fill(global.history, 'pushState', historyReplacementFunction);\n  fill(global.history, 'replaceState', historyReplacementFunction);\n}\n/** JSDoc */\n\n\nfunction instrumentDOM() {\n  if (!('document' in global)) {\n    return;\n  } // Capture breadcrumbs from any click that is unhandled / bubbled up all the way\n  // to the document. Do this before we instrument addEventListener.\n\n\n  global.document.addEventListener('click', domEventHandler('click', triggerHandlers.bind(null, 'dom')), false);\n  global.document.addEventListener('keypress', keypressEventHandler(triggerHandlers.bind(null, 'dom')), false); // After hooking into document bubbled up click and keypresses events, we also hook into user handled click & keypresses.\n\n  ['EventTarget', 'Node'].forEach(function (target) {\n    /* eslint-disable @typescript-eslint/no-unsafe-member-access */\n    var proto = global[target] && global[target].prototype; // eslint-disable-next-line no-prototype-builtins\n\n    if (!proto || !proto.hasOwnProperty || !proto.hasOwnProperty('addEventListener')) {\n      return;\n    }\n    /* eslint-enable @typescript-eslint/no-unsafe-member-access */\n\n\n    fill(proto, 'addEventListener', function (original) {\n      return function (eventName, fn, options) {\n        if (fn && fn.handleEvent) {\n          if (eventName === 'click') {\n            fill(fn, 'handleEvent', function (innerOriginal) {\n              return function (event) {\n                domEventHandler('click', triggerHandlers.bind(null, 'dom'))(event);\n                return innerOriginal.call(this, event);\n              };\n            });\n          }\n\n          if (eventName === 'keypress') {\n            fill(fn, 'handleEvent', function (innerOriginal) {\n              return function (event) {\n                keypressEventHandler(triggerHandlers.bind(null, 'dom'))(event);\n                return innerOriginal.call(this, event);\n              };\n            });\n          }\n        } else {\n          if (eventName === 'click') {\n            domEventHandler('click', triggerHandlers.bind(null, 'dom'), true)(this);\n          }\n\n          if (eventName === 'keypress') {\n            keypressEventHandler(triggerHandlers.bind(null, 'dom'))(this);\n          }\n        }\n\n        return original.call(this, eventName, fn, options);\n      };\n    });\n    fill(proto, 'removeEventListener', function (original) {\n      return function (eventName, fn, options) {\n        try {\n          original.call(this, eventName, fn.__sentry_wrapped__, options);\n        } catch (e) {// ignore, accessing __sentry_wrapped__ will throw in some Selenium environments\n        }\n\n        return original.call(this, eventName, fn, options);\n      };\n    });\n  });\n}\n\nvar debounceDuration = 1000;\nvar debounceTimer = 0;\nvar keypressTimeout;\nvar lastCapturedEvent;\n/**\n * Wraps addEventListener to capture UI breadcrumbs\n * @param name the event name (e.g. \"click\")\n * @param handler function that will be triggered\n * @param debounce decides whether it should wait till another event loop\n * @returns wrapped breadcrumb events handler\n * @hidden\n */\n\nfunction domEventHandler(name, handler, debounce) {\n  if (debounce === void 0) {\n    debounce = false;\n  }\n\n  return function (event) {\n    // reset keypress timeout; e.g. triggering a 'click' after\n    // a 'keypress' will reset the keypress debounce so that a new\n    // set of keypresses can be recorded\n    keypressTimeout = undefined; // It's possible this handler might trigger multiple times for the same\n    // event (e.g. event propagation through node ancestors). Ignore if we've\n    // already captured the event.\n\n    if (!event || lastCapturedEvent === event) {\n      return;\n    }\n\n    lastCapturedEvent = event;\n\n    if (debounceTimer) {\n      clearTimeout(debounceTimer);\n    }\n\n    if (debounce) {\n      debounceTimer = setTimeout(function () {\n        handler({\n          event: event,\n          name: name\n        });\n      });\n    } else {\n      handler({\n        event: event,\n        name: name\n      });\n    }\n  };\n}\n/**\n * Wraps addEventListener to capture keypress UI events\n * @param handler function that will be triggered\n * @returns wrapped keypress events handler\n * @hidden\n */\n\n\nfunction keypressEventHandler(handler) {\n  // TODO: if somehow user switches keypress target before\n  //       debounce timeout is triggered, we will only capture\n  //       a single breadcrumb from the FIRST target (acceptable?)\n  return function (event) {\n    var target;\n\n    try {\n      target = event.target;\n    } catch (e) {\n      // just accessing event properties can throw an exception in some rare circumstances\n      // see: https://github.com/getsentry/raven-js/issues/838\n      return;\n    }\n\n    var tagName = target && target.tagName; // only consider keypress events on actual input elements\n    // this will disregard keypresses targeting body (e.g. tabbing\n    // through elements, hotkeys, etc)\n\n    if (!tagName || tagName !== 'INPUT' && tagName !== 'TEXTAREA' && !target.isContentEditable) {\n      return;\n    } // record first keypress in a series, but ignore subsequent\n    // keypresses until debounce clears\n\n\n    if (!keypressTimeout) {\n      domEventHandler('input', handler)(event);\n    }\n\n    clearTimeout(keypressTimeout);\n    keypressTimeout = setTimeout(function () {\n      keypressTimeout = undefined;\n    }, debounceDuration);\n  };\n}\n\nvar _oldOnErrorHandler = null;\n/** JSDoc */\n\nfunction instrumentError() {\n  _oldOnErrorHandler = global.onerror;\n\n  global.onerror = function (msg, url, line, column, error) {\n    triggerHandlers('error', {\n      column: column,\n      error: error,\n      line: line,\n      msg: msg,\n      url: url\n    });\n\n    if (_oldOnErrorHandler) {\n      // eslint-disable-next-line prefer-rest-params\n      return _oldOnErrorHandler.apply(this, arguments);\n    }\n\n    return false;\n  };\n}\n\nvar _oldOnUnhandledRejectionHandler = null;\n/** JSDoc */\n\nfunction instrumentUnhandledRejection() {\n  _oldOnUnhandledRejectionHandler = global.onunhandledrejection;\n\n  global.onunhandledrejection = function (e) {\n    triggerHandlers('unhandledrejection', e);\n\n    if (_oldOnUnhandledRejectionHandler) {\n      // eslint-disable-next-line prefer-rest-params\n      return _oldOnUnhandledRejectionHandler.apply(this, arguments);\n    }\n\n    return true;\n  };\n}","import { __assign, __read, __spread } from \"tslib\";\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\n\n/* eslint-disable max-lines */\n\nimport { getCurrentHub } from '@sentry/core';\nimport { Severity } from '@sentry/types';\nimport { addInstrumentationHandler, getEventDescription, getGlobalObject, htmlTreeAsString, parseUrl, safeJoin } from '@sentry/utils';\n/**\n * Default Breadcrumbs instrumentations\n * TODO: Deprecated - with v6, this will be renamed to `Instrument`\n */\n\nvar Breadcrumbs =\n/** @class */\nfunction () {\n  /**\n   * @inheritDoc\n   */\n  function Breadcrumbs(options) {\n    /**\n     * @inheritDoc\n     */\n    this.name = Breadcrumbs.id;\n    this._options = __assign({\n      console: true,\n      dom: true,\n      fetch: true,\n      history: true,\n      sentry: true,\n      xhr: true\n    }, options);\n  }\n  /**\n   * Create a breadcrumb of `sentry` from the events themselves\n   */\n\n\n  Breadcrumbs.prototype.addSentryBreadcrumb = function (event) {\n    if (!this._options.sentry) {\n      return;\n    }\n\n    getCurrentHub().addBreadcrumb({\n      category: \"sentry.\" + (event.type === 'transaction' ? 'transaction' : 'event'),\n      event_id: event.event_id,\n      level: event.level,\n      message: getEventDescription(event)\n    }, {\n      event: event\n    });\n  };\n  /**\n   * Instrument browser built-ins w/ breadcrumb capturing\n   *  - Console API\n   *  - DOM API (click/typing)\n   *  - XMLHttpRequest API\n   *  - Fetch API\n   *  - History API\n   */\n\n\n  Breadcrumbs.prototype.setupOnce = function () {\n    var _this = this;\n\n    if (this._options.console) {\n      addInstrumentationHandler({\n        callback: function callback() {\n          var args = [];\n\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n\n          _this._consoleBreadcrumb.apply(_this, __spread(args));\n        },\n        type: 'console'\n      });\n    }\n\n    if (this._options.dom) {\n      addInstrumentationHandler({\n        callback: function callback() {\n          var args = [];\n\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n\n          _this._domBreadcrumb.apply(_this, __spread(args));\n        },\n        type: 'dom'\n      });\n    }\n\n    if (this._options.xhr) {\n      addInstrumentationHandler({\n        callback: function callback() {\n          var args = [];\n\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n\n          _this._xhrBreadcrumb.apply(_this, __spread(args));\n        },\n        type: 'xhr'\n      });\n    }\n\n    if (this._options.fetch) {\n      addInstrumentationHandler({\n        callback: function callback() {\n          var args = [];\n\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n\n          _this._fetchBreadcrumb.apply(_this, __spread(args));\n        },\n        type: 'fetch'\n      });\n    }\n\n    if (this._options.history) {\n      addInstrumentationHandler({\n        callback: function callback() {\n          var args = [];\n\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n\n          _this._historyBreadcrumb.apply(_this, __spread(args));\n        },\n        type: 'history'\n      });\n    }\n  };\n  /**\n   * Creates breadcrumbs from console API calls\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  Breadcrumbs.prototype._consoleBreadcrumb = function (handlerData) {\n    var breadcrumb = {\n      category: 'console',\n      data: {\n        arguments: handlerData.args,\n        logger: 'console'\n      },\n      level: Severity.fromString(handlerData.level),\n      message: safeJoin(handlerData.args, ' ')\n    };\n\n    if (handlerData.level === 'assert') {\n      if (handlerData.args[0] === false) {\n        breadcrumb.message = \"Assertion failed: \" + (safeJoin(handlerData.args.slice(1), ' ') || 'console.assert');\n        breadcrumb.data.arguments = handlerData.args.slice(1);\n      } else {\n        // Don't capture a breadcrumb for passed assertions\n        return;\n      }\n    }\n\n    getCurrentHub().addBreadcrumb(breadcrumb, {\n      input: handlerData.args,\n      level: handlerData.level\n    });\n  };\n  /**\n   * Creates breadcrumbs from DOM API calls\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  Breadcrumbs.prototype._domBreadcrumb = function (handlerData) {\n    var target; // Accessing event.target can throw (see getsentry/raven-js#838, #768)\n\n    try {\n      target = handlerData.event.target ? htmlTreeAsString(handlerData.event.target) : htmlTreeAsString(handlerData.event);\n    } catch (e) {\n      target = '<unknown>';\n    }\n\n    if (target.length === 0) {\n      return;\n    }\n\n    getCurrentHub().addBreadcrumb({\n      category: \"ui.\" + handlerData.name,\n      message: target\n    }, {\n      event: handlerData.event,\n      name: handlerData.name\n    });\n  };\n  /**\n   * Creates breadcrumbs from XHR API calls\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  Breadcrumbs.prototype._xhrBreadcrumb = function (handlerData) {\n    if (handlerData.endTimestamp) {\n      // We only capture complete, non-sentry requests\n      if (handlerData.xhr.__sentry_own_request__) {\n        return;\n      }\n\n      getCurrentHub().addBreadcrumb({\n        category: 'xhr',\n        data: handlerData.xhr.__sentry_xhr__,\n        type: 'http'\n      }, {\n        xhr: handlerData.xhr\n      });\n      return;\n    }\n  };\n  /**\n   * Creates breadcrumbs from fetch API calls\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  Breadcrumbs.prototype._fetchBreadcrumb = function (handlerData) {\n    // We only capture complete fetch requests\n    if (!handlerData.endTimestamp) {\n      return;\n    }\n\n    if (handlerData.fetchData.url.match(/sentry_key/) && handlerData.fetchData.method === 'POST') {\n      // We will not create breadcrumbs for fetch requests that contain `sentry_key` (internal sentry requests)\n      return;\n    }\n\n    if (handlerData.error) {\n      getCurrentHub().addBreadcrumb({\n        category: 'fetch',\n        data: handlerData.fetchData,\n        level: Severity.Error,\n        type: 'http'\n      }, {\n        data: handlerData.error,\n        input: handlerData.args\n      });\n    } else {\n      getCurrentHub().addBreadcrumb({\n        category: 'fetch',\n        data: __assign(__assign({}, handlerData.fetchData), {\n          status_code: handlerData.response.status\n        }),\n        type: 'http'\n      }, {\n        input: handlerData.args,\n        response: handlerData.response\n      });\n    }\n  };\n  /**\n   * Creates breadcrumbs from history API calls\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  Breadcrumbs.prototype._historyBreadcrumb = function (handlerData) {\n    var global = getGlobalObject();\n    var from = handlerData.from;\n    var to = handlerData.to;\n    var parsedLoc = parseUrl(global.location.href);\n    var parsedFrom = parseUrl(from);\n    var parsedTo = parseUrl(to); // Initial pushState doesn't provide `from` information\n\n    if (!parsedFrom.path) {\n      parsedFrom = parsedLoc;\n    } // Use only the path component of the URL if the URL matches the current\n    // document (almost all the time when using pushState)\n\n\n    if (parsedLoc.protocol === parsedTo.protocol && parsedLoc.host === parsedTo.host) {\n      to = parsedTo.relative;\n    }\n\n    if (parsedLoc.protocol === parsedFrom.protocol && parsedLoc.host === parsedFrom.host) {\n      from = parsedFrom.relative;\n    }\n\n    getCurrentHub().addBreadcrumb({\n      category: 'navigation',\n      data: {\n        from: from,\n        to: to\n      }\n    });\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  Breadcrumbs.id = 'Breadcrumbs';\n  return Breadcrumbs;\n}();\n\nexport { Breadcrumbs };","import { __assign, __extends, __read, __spread } from \"tslib\";\nimport { BaseClient } from '@sentry/core';\nimport { getGlobalObject, logger } from '@sentry/utils';\nimport { BrowserBackend } from './backend';\nimport { injectReportDialog } from './helpers';\nimport { Breadcrumbs } from './integrations';\nimport { SDK_NAME, SDK_VERSION } from './version';\n/**\n * The Sentry Browser SDK Client.\n *\n * @see BrowserOptions for documentation on configuration options.\n * @see SentryClient for usage documentation.\n */\n\nvar BrowserClient =\n/** @class */\nfunction (_super) {\n  __extends(BrowserClient, _super);\n  /**\n   * Creates a new Browser SDK instance.\n   *\n   * @param options Configuration options for this SDK.\n   */\n\n\n  function BrowserClient(options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    return _super.call(this, BrowserBackend, options) || this;\n  }\n  /**\n   * Show a report dialog to the user to send feedback to a specific event.\n   *\n   * @param options Set individual options for the dialog\n   */\n\n\n  BrowserClient.prototype.showReportDialog = function (options) {\n    if (options === void 0) {\n      options = {};\n    } // doesn't work without a document (React Native)\n\n\n    var document = getGlobalObject().document;\n\n    if (!document) {\n      return;\n    }\n\n    if (!this._isEnabled()) {\n      logger.error('Trying to call showReportDialog with Sentry Client disabled');\n      return;\n    }\n\n    injectReportDialog(__assign(__assign({}, options), {\n      dsn: options.dsn || this.getDsn()\n    }));\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  BrowserClient.prototype._prepareEvent = function (event, scope, hint) {\n    event.platform = event.platform || 'javascript';\n    event.sdk = __assign(__assign({}, event.sdk), {\n      name: SDK_NAME,\n      packages: __spread(event.sdk && event.sdk.packages || [], [{\n        name: 'npm:@sentry/browser',\n        version: SDK_VERSION\n      }]),\n      version: SDK_VERSION\n    });\n    return _super.prototype._prepareEvent.call(this, event, scope, hint);\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  BrowserClient.prototype._sendEvent = function (event) {\n    var integration = this.getIntegration(Breadcrumbs);\n\n    if (integration) {\n      integration.addSentryBreadcrumb(event);\n    }\n\n    _super.prototype._sendEvent.call(this, event);\n  };\n\n  return BrowserClient;\n}(BaseClient);\n\nexport { BrowserClient };","export var SDK_NAME = 'sentry.javascript.browser';\nexport var SDK_VERSION = '5.23.0';","import { __assign } from \"tslib\";\nimport { fill, getFunctionName, getGlobalObject } from '@sentry/utils';\nimport { wrap } from '../helpers';\nvar DEFAULT_EVENT_TARGET = ['EventTarget', 'Window', 'Node', 'ApplicationCache', 'AudioTrackList', 'ChannelMergerNode', 'CryptoOperation', 'EventSource', 'FileReader', 'HTMLUnknownElement', 'IDBDatabase', 'IDBRequest', 'IDBTransaction', 'KeyOperation', 'MediaController', 'MessagePort', 'ModalWindow', 'Notification', 'SVGElementInstance', 'Screen', 'TextTrack', 'TextTrackCue', 'TextTrackList', 'WebSocket', 'WebSocketWorker', 'Worker', 'XMLHttpRequest', 'XMLHttpRequestEventTarget', 'XMLHttpRequestUpload'];\n/** Wrap timer functions and event targets to catch errors and provide better meta data */\n\nvar TryCatch =\n/** @class */\nfunction () {\n  /**\n   * @inheritDoc\n   */\n  function TryCatch(options) {\n    /**\n     * @inheritDoc\n     */\n    this.name = TryCatch.id;\n    this._options = __assign({\n      XMLHttpRequest: true,\n      eventTarget: true,\n      requestAnimationFrame: true,\n      setInterval: true,\n      setTimeout: true\n    }, options);\n  }\n  /**\n   * Wrap timer functions and event targets to catch errors\n   * and provide better metadata.\n   */\n\n\n  TryCatch.prototype.setupOnce = function () {\n    var global = getGlobalObject();\n\n    if (this._options.setTimeout) {\n      fill(global, 'setTimeout', this._wrapTimeFunction.bind(this));\n    }\n\n    if (this._options.setInterval) {\n      fill(global, 'setInterval', this._wrapTimeFunction.bind(this));\n    }\n\n    if (this._options.requestAnimationFrame) {\n      fill(global, 'requestAnimationFrame', this._wrapRAF.bind(this));\n    }\n\n    if (this._options.XMLHttpRequest && 'XMLHttpRequest' in global) {\n      fill(XMLHttpRequest.prototype, 'send', this._wrapXHR.bind(this));\n    }\n\n    if (this._options.eventTarget) {\n      var eventTarget = Array.isArray(this._options.eventTarget) ? this._options.eventTarget : DEFAULT_EVENT_TARGET;\n      eventTarget.forEach(this._wrapEventTarget.bind(this));\n    }\n  };\n  /** JSDoc */\n\n\n  TryCatch.prototype._wrapTimeFunction = function (original) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      var originalCallback = args[0];\n      args[0] = wrap(originalCallback, {\n        mechanism: {\n          data: {\n            function: getFunctionName(original)\n          },\n          handled: true,\n          type: 'instrument'\n        }\n      });\n      return original.apply(this, args);\n    };\n  };\n  /** JSDoc */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  TryCatch.prototype._wrapRAF = function (original) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return function (callback) {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n      return original.call(this, wrap(callback, {\n        mechanism: {\n          data: {\n            function: 'requestAnimationFrame',\n            handler: getFunctionName(original)\n          },\n          handled: true,\n          type: 'instrument'\n        }\n      }));\n    };\n  };\n  /** JSDoc */\n\n\n  TryCatch.prototype._wrapEventTarget = function (target) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var global = getGlobalObject(); // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n\n    var proto = global[target] && global[target].prototype; // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n\n    if (!proto || !proto.hasOwnProperty || !proto.hasOwnProperty('addEventListener')) {\n      return;\n    }\n\n    fill(proto, 'addEventListener', function (original) {\n      return function (eventName, fn, options) {\n        try {\n          if (typeof fn.handleEvent === 'function') {\n            fn.handleEvent = wrap(fn.handleEvent.bind(fn), {\n              mechanism: {\n                data: {\n                  function: 'handleEvent',\n                  handler: getFunctionName(fn),\n                  target: target\n                },\n                handled: true,\n                type: 'instrument'\n              }\n            });\n          }\n        } catch (err) {// can sometimes get 'Permission denied to access property \"handle Event'\n        }\n\n        return original.call(this, eventName, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        wrap(fn, {\n          mechanism: {\n            data: {\n              function: 'addEventListener',\n              handler: getFunctionName(fn),\n              target: target\n            },\n            handled: true,\n            type: 'instrument'\n          }\n        }), options);\n      };\n    });\n    fill(proto, 'removeEventListener', function (original) {\n      return function (eventName, fn, options) {\n        /**\n         * There are 2 possible scenarios here:\n         *\n         * 1. Someone passes a callback, which was attached prior to Sentry initialization, or by using unmodified\n         * method, eg. `document.addEventListener.call(el, name, handler). In this case, we treat this function\n         * as a pass-through, and call original `removeEventListener` with it.\n         *\n         * 2. Someone passes a callback, which was attached after Sentry was initialized, which means that it was using\n         * our wrapped version of `addEventListener`, which internally calls `wrap` helper.\n         * This helper \"wraps\" whole callback inside a try/catch statement, and attached appropriate metadata to it,\n         * in order for us to make a distinction between wrapped/non-wrapped functions possible.\n         * If a function was wrapped, it has additional property of `__sentry_wrapped__`, holding the handler.\n         *\n         * When someone adds a handler prior to initialization, and then do it again, but after,\n         * then we have to detach both of them. Otherwise, if we'd detach only wrapped one, it'd be impossible\n         * to get rid of the initial handler and it'd stick there forever.\n         */\n        try {\n          original.call(this, eventName, fn.__sentry_wrapped__, options);\n        } catch (e) {// ignore, accessing __sentry_wrapped__ will throw in some Selenium environments\n        }\n\n        return original.call(this, eventName, fn, options);\n      };\n    });\n  };\n  /** JSDoc */\n\n\n  TryCatch.prototype._wrapXHR = function (originalSend) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      } // eslint-disable-next-line @typescript-eslint/no-this-alias\n\n\n      var xhr = this;\n      var xmlHttpRequestProps = ['onload', 'onerror', 'onprogress', 'onreadystatechange'];\n      xmlHttpRequestProps.forEach(function (prop) {\n        if (prop in xhr && typeof xhr[prop] === 'function') {\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          fill(xhr, prop, function (original) {\n            var wrapOptions = {\n              mechanism: {\n                data: {\n                  function: prop,\n                  handler: getFunctionName(original)\n                },\n                handled: true,\n                type: 'instrument'\n              }\n            }; // If Instrument integration has been called before TryCatch, get the name of original function\n\n            if (original.__sentry_original__) {\n              wrapOptions.mechanism.data.handler = getFunctionName(original.__sentry_original__);\n            } // Otherwise wrap directly\n\n\n            return wrap(original, wrapOptions);\n          });\n        }\n      });\n      return originalSend.apply(this, args);\n    };\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  TryCatch.id = 'TryCatch';\n  return TryCatch;\n}();\n\nexport { TryCatch };","import { __assign } from \"tslib\";\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\n\nimport { getCurrentHub } from '@sentry/core';\nimport { Severity } from '@sentry/types';\nimport { addExceptionMechanism, addInstrumentationHandler, getLocationHref, isErrorEvent, isPrimitive, isString, logger } from '@sentry/utils';\nimport { eventFromUnknownInput } from '../eventbuilder';\nimport { shouldIgnoreOnError } from '../helpers';\n/** Global handlers */\n\nvar GlobalHandlers =\n/** @class */\nfunction () {\n  /** JSDoc */\n  function GlobalHandlers(options) {\n    /**\n     * @inheritDoc\n     */\n    this.name = GlobalHandlers.id;\n    /** JSDoc */\n\n    this._onErrorHandlerInstalled = false;\n    /** JSDoc */\n\n    this._onUnhandledRejectionHandlerInstalled = false;\n    this._options = __assign({\n      onerror: true,\n      onunhandledrejection: true\n    }, options);\n  }\n  /**\n   * @inheritDoc\n   */\n\n\n  GlobalHandlers.prototype.setupOnce = function () {\n    Error.stackTraceLimit = 50;\n\n    if (this._options.onerror) {\n      logger.log('Global Handler attached: onerror');\n\n      this._installGlobalOnErrorHandler();\n    }\n\n    if (this._options.onunhandledrejection) {\n      logger.log('Global Handler attached: onunhandledrejection');\n\n      this._installGlobalOnUnhandledRejectionHandler();\n    }\n  };\n  /** JSDoc */\n\n\n  GlobalHandlers.prototype._installGlobalOnErrorHandler = function () {\n    var _this = this;\n\n    if (this._onErrorHandlerInstalled) {\n      return;\n    }\n\n    addInstrumentationHandler({\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      callback: function callback(data) {\n        var error = data.error;\n        var currentHub = getCurrentHub();\n        var hasIntegration = currentHub.getIntegration(GlobalHandlers);\n        var isFailedOwnDelivery = error && error.__sentry_own_request__ === true;\n\n        if (!hasIntegration || shouldIgnoreOnError() || isFailedOwnDelivery) {\n          return;\n        }\n\n        var client = currentHub.getClient();\n        var event = isPrimitive(error) ? _this._eventFromIncompleteOnError(data.msg, data.url, data.line, data.column) : _this._enhanceEventWithInitialFrame(eventFromUnknownInput(error, undefined, {\n          attachStacktrace: client && client.getOptions().attachStacktrace,\n          rejection: false\n        }), data.url, data.line, data.column);\n        addExceptionMechanism(event, {\n          handled: false,\n          type: 'onerror'\n        });\n        currentHub.captureEvent(event, {\n          originalException: error\n        });\n      },\n      type: 'error'\n    });\n    this._onErrorHandlerInstalled = true;\n  };\n  /** JSDoc */\n\n\n  GlobalHandlers.prototype._installGlobalOnUnhandledRejectionHandler = function () {\n    var _this = this;\n\n    if (this._onUnhandledRejectionHandlerInstalled) {\n      return;\n    }\n\n    addInstrumentationHandler({\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      callback: function callback(e) {\n        var error = e; // dig the object of the rejection out of known event types\n\n        try {\n          // PromiseRejectionEvents store the object of the rejection under 'reason'\n          // see https://developer.mozilla.org/en-US/docs/Web/API/PromiseRejectionEvent\n          if ('reason' in e) {\n            error = e.reason;\n          } // something, somewhere, (likely a browser extension) effectively casts PromiseRejectionEvents\n          // to CustomEvents, moving the `promise` and `reason` attributes of the PRE into\n          // the CustomEvent's `detail` attribute, since they're not part of CustomEvent's spec\n          // see https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent and\n          // https://github.com/getsentry/sentry-javascript/issues/2380\n          else if ('detail' in e && 'reason' in e.detail) {\n              error = e.detail.reason;\n            }\n        } catch (_oO) {// no-empty\n        }\n\n        var currentHub = getCurrentHub();\n        var hasIntegration = currentHub.getIntegration(GlobalHandlers);\n        var isFailedOwnDelivery = error && error.__sentry_own_request__ === true;\n\n        if (!hasIntegration || shouldIgnoreOnError() || isFailedOwnDelivery) {\n          return true;\n        }\n\n        var client = currentHub.getClient();\n        var event = isPrimitive(error) ? _this._eventFromIncompleteRejection(error) : eventFromUnknownInput(error, undefined, {\n          attachStacktrace: client && client.getOptions().attachStacktrace,\n          rejection: true\n        });\n        event.level = Severity.Error;\n        addExceptionMechanism(event, {\n          handled: false,\n          type: 'onunhandledrejection'\n        });\n        currentHub.captureEvent(event, {\n          originalException: error\n        });\n        return;\n      },\n      type: 'unhandledrejection'\n    });\n    this._onUnhandledRejectionHandlerInstalled = true;\n  };\n  /**\n   * This function creates a stack from an old, error-less onerror handler.\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  GlobalHandlers.prototype._eventFromIncompleteOnError = function (msg, url, line, column) {\n    var ERROR_TYPES_RE = /^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i; // If 'message' is ErrorEvent, get real message from inside\n\n    var message = isErrorEvent(msg) ? msg.message : msg;\n    var name;\n\n    if (isString(message)) {\n      var groups = message.match(ERROR_TYPES_RE);\n\n      if (groups) {\n        name = groups[1];\n        message = groups[2];\n      }\n    }\n\n    var event = {\n      exception: {\n        values: [{\n          type: name || 'Error',\n          value: message\n        }]\n      }\n    };\n    return this._enhanceEventWithInitialFrame(event, url, line, column);\n  };\n  /**\n   * This function creates an Event from an TraceKitStackTrace that has part of it missing.\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  GlobalHandlers.prototype._eventFromIncompleteRejection = function (error) {\n    return {\n      exception: {\n        values: [{\n          type: 'UnhandledRejection',\n          value: \"Non-Error promise rejection captured with value: \" + error\n        }]\n      }\n    };\n  };\n  /** JSDoc */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  GlobalHandlers.prototype._enhanceEventWithInitialFrame = function (event, url, line, column) {\n    event.exception = event.exception || {};\n    event.exception.values = event.exception.values || [];\n    event.exception.values[0] = event.exception.values[0] || {};\n    event.exception.values[0].stacktrace = event.exception.values[0].stacktrace || {};\n    event.exception.values[0].stacktrace.frames = event.exception.values[0].stacktrace.frames || [];\n    var colno = isNaN(parseInt(column, 10)) ? undefined : column;\n    var lineno = isNaN(parseInt(line, 10)) ? undefined : line;\n    var filename = isString(url) && url.length > 0 ? url : getLocationHref();\n\n    if (event.exception.values[0].stacktrace.frames.length === 0) {\n      event.exception.values[0].stacktrace.frames.push({\n        colno: colno,\n        filename: filename,\n        function: '?',\n        in_app: true,\n        lineno: lineno\n      });\n    }\n\n    return event;\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  GlobalHandlers.id = 'GlobalHandlers';\n  return GlobalHandlers;\n}();\n\nexport { GlobalHandlers };","import { __read, __spread } from \"tslib\";\nimport { addGlobalEventProcessor, getCurrentHub } from '@sentry/core';\nimport { isInstanceOf } from '@sentry/utils';\nimport { exceptionFromStacktrace } from '../parsers';\nimport { computeStackTrace } from '../tracekit';\nvar DEFAULT_KEY = 'cause';\nvar DEFAULT_LIMIT = 5;\n/** Adds SDK info to an event. */\n\nvar LinkedErrors =\n/** @class */\nfunction () {\n  /**\n   * @inheritDoc\n   */\n  function LinkedErrors(options) {\n    if (options === void 0) {\n      options = {};\n    }\n    /**\n     * @inheritDoc\n     */\n\n\n    this.name = LinkedErrors.id;\n    this._key = options.key || DEFAULT_KEY;\n    this._limit = options.limit || DEFAULT_LIMIT;\n  }\n  /**\n   * @inheritDoc\n   */\n\n\n  LinkedErrors.prototype.setupOnce = function () {\n    addGlobalEventProcessor(function (event, hint) {\n      var self = getCurrentHub().getIntegration(LinkedErrors);\n\n      if (self) {\n        return self._handler(event, hint);\n      }\n\n      return event;\n    });\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  LinkedErrors.prototype._handler = function (event, hint) {\n    if (!event.exception || !event.exception.values || !hint || !isInstanceOf(hint.originalException, Error)) {\n      return event;\n    }\n\n    var linkedErrors = this._walkErrorTree(hint.originalException, this._key);\n\n    event.exception.values = __spread(linkedErrors, event.exception.values);\n    return event;\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  LinkedErrors.prototype._walkErrorTree = function (error, key, stack) {\n    if (stack === void 0) {\n      stack = [];\n    }\n\n    if (!isInstanceOf(error[key], Error) || stack.length + 1 >= this._limit) {\n      return stack;\n    }\n\n    var stacktrace = computeStackTrace(error[key]);\n    var exception = exceptionFromStacktrace(stacktrace);\n    return this._walkErrorTree(error[key], key, __spread([exception], stack));\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  LinkedErrors.id = 'LinkedErrors';\n  return LinkedErrors;\n}();\n\nexport { LinkedErrors };","import { __assign } from \"tslib\";\nimport { addGlobalEventProcessor, getCurrentHub } from '@sentry/core';\nimport { getGlobalObject } from '@sentry/utils';\nvar global = getGlobalObject();\n/** UserAgent */\n\nvar UserAgent =\n/** @class */\nfunction () {\n  function UserAgent() {\n    /**\n     * @inheritDoc\n     */\n    this.name = UserAgent.id;\n  }\n  /**\n   * @inheritDoc\n   */\n\n\n  UserAgent.prototype.setupOnce = function () {\n    addGlobalEventProcessor(function (event) {\n      if (getCurrentHub().getIntegration(UserAgent)) {\n        if (!global.navigator || !global.location) {\n          return event;\n        }\n\n        var request = event.request || {};\n        request.url = request.url || global.location.href;\n        request.headers = request.headers || {};\n        request.headers['User-Agent'] = global.navigator.userAgent;\n        return __assign(__assign({}, event), {\n          request: request\n        });\n      }\n\n      return event;\n    });\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  UserAgent.id = 'UserAgent';\n  return UserAgent;\n}();\n\nexport { UserAgent };","import { getCurrentHub, initAndBind, Integrations as CoreIntegrations } from '@sentry/core';\nimport { getGlobalObject, SyncPromise } from '@sentry/utils';\nimport { BrowserClient } from './client';\nimport { wrap as internalWrap } from './helpers';\nimport { Breadcrumbs, GlobalHandlers, LinkedErrors, TryCatch, UserAgent } from './integrations';\nexport var defaultIntegrations = [new CoreIntegrations.InboundFilters(), new CoreIntegrations.FunctionToString(), new TryCatch(), new Breadcrumbs(), new GlobalHandlers(), new LinkedErrors(), new UserAgent()];\n/**\n * The Sentry Browser SDK Client.\n *\n * To use this SDK, call the {@link init} function as early as possible when\n * loading the web page. To set context information or send manual events, use\n * the provided methods.\n *\n * @example\n *\n * ```\n *\n * import { init } from '@sentry/browser';\n *\n * init({\n *   dsn: '__DSN__',\n *   // ...\n * });\n * ```\n *\n * @example\n * ```\n *\n * import { configureScope } from '@sentry/browser';\n * configureScope((scope: Scope) => {\n *   scope.setExtra({ battery: 0.7 });\n *   scope.setTag({ user_mode: 'admin' });\n *   scope.setUser({ id: '4711' });\n * });\n * ```\n *\n * @example\n * ```\n *\n * import { addBreadcrumb } from '@sentry/browser';\n * addBreadcrumb({\n *   message: 'My Breadcrumb',\n *   // ...\n * });\n * ```\n *\n * @example\n *\n * ```\n *\n * import * as Sentry from '@sentry/browser';\n * Sentry.captureMessage('Hello, world!');\n * Sentry.captureException(new Error('Good bye'));\n * Sentry.captureEvent({\n *   message: 'Manual',\n *   stacktrace: [\n *     // ...\n *   ],\n * });\n * ```\n *\n * @see {@link BrowserOptions} for documentation on configuration options.\n */\n\nexport function init(options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  if (options.defaultIntegrations === undefined) {\n    options.defaultIntegrations = defaultIntegrations;\n  }\n\n  if (options.release === undefined) {\n    var window_1 = getGlobalObject(); // This supports the variable that sentry-webpack-plugin injects\n\n    if (window_1.SENTRY_RELEASE && window_1.SENTRY_RELEASE.id) {\n      options.release = window_1.SENTRY_RELEASE.id;\n    }\n  }\n\n  initAndBind(BrowserClient, options);\n}\n/**\n * Present the user with a report dialog.\n *\n * @param options Everything is optional, we try to fetch all info need from the global scope.\n */\n\nexport function showReportDialog(options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  if (!options.eventId) {\n    options.eventId = getCurrentHub().lastEventId();\n  }\n\n  var client = getCurrentHub().getClient();\n\n  if (client) {\n    client.showReportDialog(options);\n  }\n}\n/**\n * This is the getter for lastEventId.\n *\n * @returns The last event id of a captured event.\n */\n\nexport function lastEventId() {\n  return getCurrentHub().lastEventId();\n}\n/**\n * This function is here to be API compatible with the loader.\n * @hidden\n */\n\nexport function forceLoad() {// Noop\n}\n/**\n * This function is here to be API compatible with the loader.\n * @hidden\n */\n\nexport function onLoad(callback) {\n  callback();\n}\n/**\n * A promise that resolves when all current events have been sent.\n * If you provide a timeout and the queue takes longer to drain the promise returns false.\n *\n * @param timeout Maximum time in ms the client should wait.\n */\n\nexport function flush(timeout) {\n  var client = getCurrentHub().getClient();\n\n  if (client) {\n    return client.flush(timeout);\n  }\n\n  return SyncPromise.reject(false);\n}\n/**\n * A promise that resolves when all current events have been sent.\n * If you provide a timeout and the queue takes longer to drain the promise returns false.\n *\n * @param timeout Maximum time in ms the client should wait.\n */\n\nexport function close(timeout) {\n  var client = getCurrentHub().getClient();\n\n  if (client) {\n    return client.close(timeout);\n  }\n\n  return SyncPromise.reject(false);\n}\n/**\n * Wrap code within a try/catch block so the SDK is able to capture errors.\n *\n * @param fn A function to wrap.\n *\n * @returns The result of wrapped function call.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nexport function wrap(fn) {\n  return internalWrap(fn)();\n}","import { getCurrentHub } from '@sentry/hub';\nimport { logger } from '@sentry/utils';\n/**\n * Internal function to create a new SDK client instance. The client is\n * installed and then bound to the current scope.\n *\n * @param clientClass The client class to instanciate.\n * @param options Options to pass to the client.\n */\n\nexport function initAndBind(clientClass, options) {\n  if (options.debug === true) {\n    logger.enable();\n  }\n\n  var hub = getCurrentHub();\n  var client = new clientClass(options);\n  hub.bindClient(client);\n}","import { __assign, __read, __spread } from \"tslib\";\nimport { getCurrentHub } from '@sentry/hub';\n/**\n * This calls a function on the current hub.\n * @param method function to call on hub.\n * @param args to pass to function.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nfunction callOnHub(method) {\n  var args = [];\n\n  for (var _i = 1; _i < arguments.length; _i++) {\n    args[_i - 1] = arguments[_i];\n  }\n\n  var hub = getCurrentHub();\n\n  if (hub && hub[method]) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return hub[method].apply(hub, __spread(args));\n  }\n\n  throw new Error(\"No hub defined or \" + method + \" was not found on the hub, please open a bug report.\");\n}\n/**\n * Captures an exception event and sends it to Sentry.\n *\n * @param exception An exception-like object.\n * @returns The generated eventId.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\n\n\nexport function captureException(exception, captureContext) {\n  var syntheticException;\n\n  try {\n    throw new Error('Sentry syntheticException');\n  } catch (exception) {\n    syntheticException = exception;\n  }\n\n  return callOnHub('captureException', exception, {\n    captureContext: captureContext,\n    originalException: exception,\n    syntheticException: syntheticException\n  });\n}\n/**\n * Captures a message event and sends it to Sentry.\n *\n * @param message The message to send to Sentry.\n * @param level Define the level of the message.\n * @returns The generated eventId.\n */\n\nexport function captureMessage(message, captureContext) {\n  var syntheticException;\n\n  try {\n    throw new Error(message);\n  } catch (exception) {\n    syntheticException = exception;\n  } // This is necessary to provide explicit scopes upgrade, without changing the original\n  // arity of the `captureMessage(message, level)` method.\n\n\n  var level = typeof captureContext === 'string' ? captureContext : undefined;\n  var context = typeof captureContext !== 'string' ? {\n    captureContext: captureContext\n  } : undefined;\n  return callOnHub('captureMessage', message, level, __assign({\n    originalException: message,\n    syntheticException: syntheticException\n  }, context));\n}\n/**\n * Captures a manually created event and sends it to Sentry.\n *\n * @param event The event to send to Sentry.\n * @returns The generated eventId.\n */\n\nexport function captureEvent(event) {\n  return callOnHub('captureEvent', event);\n}\n/**\n * Callback to set context information onto the scope.\n * @param callback Callback function that receives Scope.\n */\n\nexport function configureScope(callback) {\n  callOnHub('configureScope', callback);\n}\n/**\n * Records a new breadcrumb which will be attached to future events.\n *\n * Breadcrumbs will be added to subsequent events to provide more context on\n * user's actions prior to an error or crash.\n *\n * @param breadcrumb The breadcrumb to record.\n */\n\nexport function addBreadcrumb(breadcrumb) {\n  callOnHub('addBreadcrumb', breadcrumb);\n}\n/**\n * Sets context data with the given name.\n * @param name of the context\n * @param context Any kind of data. This data will be normalized.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nexport function setContext(name, context) {\n  callOnHub('setContext', name, context);\n}\n/**\n * Set an object that will be merged sent as extra data with the event.\n * @param extras Extras object to merge into current context.\n */\n\nexport function setExtras(extras) {\n  callOnHub('setExtras', extras);\n}\n/**\n * Set an object that will be merged sent as tags data with the event.\n * @param tags Tags context object to merge into current context.\n */\n\nexport function setTags(tags) {\n  callOnHub('setTags', tags);\n}\n/**\n * Set key:value that will be sent as extra data with the event.\n * @param key String of extra\n * @param extra Any kind of data. This data will be normalized.\n */\n\nexport function setExtra(key, extra) {\n  callOnHub('setExtra', key, extra);\n}\n/**\n * Set key:value that will be sent as tags data with the event.\n * @param key String key of tag\n * @param value String value of tag\n */\n\nexport function setTag(key, value) {\n  callOnHub('setTag', key, value);\n}\n/**\n * Updates user context information for future events.\n *\n * @param user User context object to be set in the current context. Pass `null` to unset the user.\n */\n\nexport function setUser(user) {\n  callOnHub('setUser', user);\n}\n/**\n * Creates a new scope with and executes the given operation within.\n * The scope is automatically removed once the operation\n * finishes or throws.\n *\n * This is essentially a convenience function for:\n *\n *     pushScope();\n *     callback();\n *     popScope();\n *\n * @param callback that will be enclosed into push/popScope.\n */\n\nexport function withScope(callback) {\n  callOnHub('withScope', callback);\n}\n/**\n * Calls a function on the latest client. Use this with caution, it's meant as\n * in \"internal\" helper so we don't need to expose every possible function in\n * the shim. It is not guaranteed that the client actually implements the\n * function.\n *\n * @param method The method to call on the client/client.\n * @param args Arguments to pass to the client/fontend.\n * @hidden\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nexport function _callOnClient(method) {\n  var args = [];\n\n  for (var _i = 1; _i < arguments.length; _i++) {\n    args[_i - 1] = arguments[_i];\n  }\n\n  callOnHub.apply(void 0, __spread(['_invokeClient', method], args));\n}\n/**\n * Starts a new `Transaction` and returns it. This is the entry point to manual\n * tracing instrumentation.\n *\n * A tree structure can be built by adding child spans to the transaction, and\n * child spans to other spans. To start a new child span within the transaction\n * or any span, call the respective `.startChild()` method.\n *\n * Every child span must be finished before the transaction is finished,\n * otherwise the unfinished spans are discarded.\n *\n * The transaction must be finished with a call to its `.finish()` method, at\n * which point the transaction with all its finished child spans will be sent to\n * Sentry.\n *\n * @param context Properties of the new `Transaction`.\n */\n\nexport function startTransaction(context) {\n  return callOnHub('startTransaction', __assign({}, context));\n}","import { __values } from \"tslib\";\nimport { isElement, isError, isEvent, isInstanceOf, isPlainObject, isPrimitive, isSyntheticEvent } from './is';\nimport { Memo } from './memo';\nimport { getFunctionName, htmlTreeAsString } from './misc';\nimport { truncate } from './string';\n/**\n * Wrap a given object method with a higher-order function\n *\n * @param source An object that contains a method to be wrapped.\n * @param name A name of method to be wrapped.\n * @param replacement A function that should be used to wrap a given method.\n * @returns void\n */\n\nexport function fill(source, name, replacement) {\n  if (!(name in source)) {\n    return;\n  }\n\n  var original = source[name];\n  var wrapped = replacement(original); // Make sure it's a function first, as we need to attach an empty prototype for `defineProperties` to work\n  // otherwise it'll throw \"TypeError: Object.defineProperties called on non-object\"\n\n  if (typeof wrapped === 'function') {\n    try {\n      wrapped.prototype = wrapped.prototype || {};\n      Object.defineProperties(wrapped, {\n        __sentry_original__: {\n          enumerable: false,\n          value: original\n        }\n      });\n    } catch (_Oo) {// This can throw if multiple fill happens on a global object like XMLHttpRequest\n      // Fixes https://github.com/getsentry/sentry-javascript/issues/2043\n    }\n  }\n\n  source[name] = wrapped;\n}\n/**\n * Encodes given object into url-friendly format\n *\n * @param object An object that contains serializable values\n * @returns string Encoded\n */\n\nexport function urlEncode(object) {\n  return Object.keys(object).map(function (key) {\n    return encodeURIComponent(key) + \"=\" + encodeURIComponent(object[key]);\n  }).join('&');\n}\n/**\n * Transforms any object into an object literal with all it's attributes\n * attached to it.\n *\n * @param value Initial source that we have to transform in order to be usable by the serializer\n */\n\nfunction getWalkSource(value) {\n  if (isError(value)) {\n    var error = value;\n    var err = {\n      message: error.message,\n      name: error.name,\n      stack: error.stack\n    };\n\n    for (var i in error) {\n      if (Object.prototype.hasOwnProperty.call(error, i)) {\n        err[i] = error[i];\n      }\n    }\n\n    return err;\n  }\n\n  if (isEvent(value)) {\n    var event_1 = value;\n    var source = {};\n    source.type = event_1.type; // Accessing event.target can throw (see getsentry/raven-js#838, #768)\n\n    try {\n      source.target = isElement(event_1.target) ? htmlTreeAsString(event_1.target) : Object.prototype.toString.call(event_1.target);\n    } catch (_oO) {\n      source.target = '<unknown>';\n    }\n\n    try {\n      source.currentTarget = isElement(event_1.currentTarget) ? htmlTreeAsString(event_1.currentTarget) : Object.prototype.toString.call(event_1.currentTarget);\n    } catch (_oO) {\n      source.currentTarget = '<unknown>';\n    }\n\n    if (typeof CustomEvent !== 'undefined' && isInstanceOf(value, CustomEvent)) {\n      source.detail = event_1.detail;\n    }\n\n    for (var i in event_1) {\n      if (Object.prototype.hasOwnProperty.call(event_1, i)) {\n        source[i] = event_1;\n      }\n    }\n\n    return source;\n  }\n\n  return value;\n}\n/** Calculates bytes size of input string */\n\n\nfunction utf8Length(value) {\n  // eslint-disable-next-line no-bitwise\n  return ~-encodeURI(value).split(/%..|./).length;\n}\n/** Calculates bytes size of input object */\n\n\nfunction jsonSize(value) {\n  return utf8Length(JSON.stringify(value));\n}\n/** JSDoc */\n\n\nexport function normalizeToSize(object, // Default Node.js REPL depth\ndepth, // 100kB, as 200kB is max payload size, so half sounds reasonable\nmaxSize) {\n  if (depth === void 0) {\n    depth = 3;\n  }\n\n  if (maxSize === void 0) {\n    maxSize = 100 * 1024;\n  }\n\n  var serialized = normalize(object, depth);\n\n  if (jsonSize(serialized) > maxSize) {\n    return normalizeToSize(object, depth - 1, maxSize);\n  }\n\n  return serialized;\n}\n/** Transforms any input value into a string form, either primitive value or a type of the input */\n\nfunction serializeValue(value) {\n  var type = Object.prototype.toString.call(value); // Node.js REPL notation\n\n  if (typeof value === 'string') {\n    return value;\n  }\n\n  if (type === '[object Object]') {\n    return '[Object]';\n  }\n\n  if (type === '[object Array]') {\n    return '[Array]';\n  }\n\n  var normalized = normalizeValue(value);\n  return isPrimitive(normalized) ? normalized : type;\n}\n/**\n * normalizeValue()\n *\n * Takes unserializable input and make it serializable friendly\n *\n * - translates undefined/NaN values to \"[undefined]\"/\"[NaN]\" respectively,\n * - serializes Error objects\n * - filter global objects\n */\n\n\nfunction normalizeValue(value, key) {\n  if (key === 'domain' && value && typeof value === 'object' && value._events) {\n    return '[Domain]';\n  }\n\n  if (key === 'domainEmitter') {\n    return '[DomainEmitter]';\n  }\n\n  if (typeof global !== 'undefined' && value === global) {\n    return '[Global]';\n  }\n\n  if (typeof window !== 'undefined' && value === window) {\n    return '[Window]';\n  }\n\n  if (typeof document !== 'undefined' && value === document) {\n    return '[Document]';\n  } // React's SyntheticEvent thingy\n\n\n  if (isSyntheticEvent(value)) {\n    return '[SyntheticEvent]';\n  }\n\n  if (typeof value === 'number' && value !== value) {\n    return '[NaN]';\n  }\n\n  if (value === void 0) {\n    return '[undefined]';\n  }\n\n  if (typeof value === 'function') {\n    return \"[Function: \" + getFunctionName(value) + \"]\";\n  }\n\n  return value;\n}\n/**\n * Walks an object to perform a normalization on it\n *\n * @param key of object that's walked in current iteration\n * @param value object to be walked\n * @param depth Optional number indicating how deep should walking be performed\n * @param memo Optional Memo class handling decycling\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\n\nexport function walk(key, value, depth, memo) {\n  if (depth === void 0) {\n    depth = +Infinity;\n  }\n\n  if (memo === void 0) {\n    memo = new Memo();\n  } // If we reach the maximum depth, serialize whatever has left\n\n\n  if (depth === 0) {\n    return serializeValue(value);\n  }\n  /* eslint-disable @typescript-eslint/no-unsafe-member-access */\n  // If value implements `toJSON` method, call it and return early\n\n\n  if (value !== null && value !== undefined && typeof value.toJSON === 'function') {\n    return value.toJSON();\n  }\n  /* eslint-enable @typescript-eslint/no-unsafe-member-access */\n  // If normalized value is a primitive, there are no branches left to walk, so we can just bail out, as theres no point in going down that branch any further\n\n\n  var normalized = normalizeValue(value, key);\n\n  if (isPrimitive(normalized)) {\n    return normalized;\n  } // Create source that we will use for next itterations, either objectified error object (Error type with extracted keys:value pairs) or the input itself\n\n\n  var source = getWalkSource(value); // Create an accumulator that will act as a parent for all future itterations of that branch\n\n  var acc = Array.isArray(value) ? [] : {}; // If we already walked that branch, bail out, as it's circular reference\n\n  if (memo.memoize(value)) {\n    return '[Circular ~]';\n  } // Walk all keys of the source\n\n\n  for (var innerKey in source) {\n    // Avoid iterating over fields in the prototype if they've somehow been exposed to enumeration.\n    if (!Object.prototype.hasOwnProperty.call(source, innerKey)) {\n      continue;\n    } // Recursively walk through all the child nodes\n\n\n    acc[innerKey] = walk(innerKey, source[innerKey], depth - 1, memo);\n  } // Once walked through all the branches, remove the parent from memo storage\n\n\n  memo.unmemoize(value); // Return accumulated values\n\n  return acc;\n}\n/**\n * normalize()\n *\n * - Creates a copy to prevent original input mutation\n * - Skip non-enumerablers\n * - Calls `toJSON` if implemented\n * - Removes circular references\n * - Translates non-serializeable values (undefined/NaN/Functions) to serializable format\n * - Translates known global objects/Classes to a string representations\n * - Takes care of Error objects serialization\n * - Optionally limit depth of final output\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\nexport function normalize(input, depth) {\n  try {\n    return JSON.parse(JSON.stringify(input, function (key, value) {\n      return walk(key, value, depth);\n    }));\n  } catch (_oO) {\n    return '**non-serializable**';\n  }\n}\n/**\n * Given any captured exception, extract its keys and create a sorted\n * and truncated list that will be used inside the event message.\n * eg. `Non-error exception captured with keys: foo, bar, baz`\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\nexport function extractExceptionKeysForMessage(exception, maxLength) {\n  if (maxLength === void 0) {\n    maxLength = 40;\n  }\n\n  var keys = Object.keys(getWalkSource(exception));\n  keys.sort();\n\n  if (!keys.length) {\n    return '[object has no keys]';\n  }\n\n  if (keys[0].length >= maxLength) {\n    return truncate(keys[0], maxLength);\n  }\n\n  for (var includedKeys = keys.length; includedKeys > 0; includedKeys--) {\n    var serialized = keys.slice(0, includedKeys).join(', ');\n\n    if (serialized.length > maxLength) {\n      continue;\n    }\n\n    if (includedKeys === keys.length) {\n      return serialized;\n    }\n\n    return truncate(serialized, maxLength);\n  }\n\n  return '';\n}\n/**\n * Given any object, return the new object with removed keys that value was `undefined`.\n * Works recursively on objects and arrays.\n */\n\nexport function dropUndefinedKeys(val) {\n  var e_1, _a;\n\n  if (isPlainObject(val)) {\n    var obj = val;\n    var rv = {};\n\n    try {\n      for (var _b = __values(Object.keys(obj)), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var key = _c.value;\n\n        if (typeof obj[key] !== 'undefined') {\n          rv[key] = dropUndefinedKeys(obj[key]);\n        }\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n\n    return rv;\n  }\n\n  if (Array.isArray(val)) {\n    return val.map(dropUndefinedKeys);\n  }\n\n  return val;\n}","import { isRegExp, isString } from './is';\n/**\n * Truncates given string to the maximum characters count\n *\n * @param str An object that contains serializable values\n * @param max Maximum number of characters in truncated string\n * @returns string Encoded\n */\n\nexport function truncate(str, max) {\n  if (max === void 0) {\n    max = 0;\n  }\n\n  if (typeof str !== 'string' || max === 0) {\n    return str;\n  }\n\n  return str.length <= max ? str : str.substr(0, max) + \"...\";\n}\n/**\n * This is basically just `trim_line` from\n * https://github.com/getsentry/sentry/blob/master/src/sentry/lang/javascript/processor.py#L67\n *\n * @param str An object that contains serializable values\n * @param max Maximum number of characters in truncated string\n * @returns string Encoded\n */\n\nexport function snipLine(line, colno) {\n  var newLine = line;\n  var ll = newLine.length;\n\n  if (ll <= 150) {\n    return newLine;\n  }\n\n  if (colno > ll) {\n    // eslint-disable-next-line no-param-reassign\n    colno = ll;\n  }\n\n  var start = Math.max(colno - 60, 0);\n\n  if (start < 5) {\n    start = 0;\n  }\n\n  var end = Math.min(start + 140, ll);\n\n  if (end > ll - 5) {\n    end = ll;\n  }\n\n  if (end === ll) {\n    start = Math.max(end - 140, 0);\n  }\n\n  newLine = newLine.slice(start, end);\n\n  if (start > 0) {\n    newLine = \"'{snip} \" + newLine;\n  }\n\n  if (end < ll) {\n    newLine += ' {snip}';\n  }\n\n  return newLine;\n}\n/**\n * Join values in array\n * @param input array of values to be joined together\n * @param delimiter string to be placed in-between values\n * @returns Joined values\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nexport function safeJoin(input, delimiter) {\n  if (!Array.isArray(input)) {\n    return '';\n  }\n\n  var output = []; // eslint-disable-next-line @typescript-eslint/prefer-for-of\n\n  for (var i = 0; i < input.length; i++) {\n    var value = input[i];\n\n    try {\n      output.push(String(value));\n    } catch (e) {\n      output.push('[value cannot be serialized]');\n    }\n  }\n\n  return output.join(delimiter);\n}\n/**\n * Checks if the value matches a regex or includes the string\n * @param value The string value to be checked against\n * @param pattern Either a regex or a string that must be contained in value\n */\n\nexport function isMatchingPattern(value, pattern) {\n  if (!isString(value)) {\n    return false;\n  }\n\n  if (isRegExp(pattern)) {\n    return pattern.test(value);\n  }\n\n  if (typeof pattern === 'string') {\n    return value.indexOf(pattern) !== -1;\n  }\n\n  return false;\n}","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { consoleSandbox, getGlobalObject } from './misc'; // TODO: Implement different loggers for different environments\n\nvar global = getGlobalObject();\n/** Prefix for logging strings */\n\nvar PREFIX = 'Sentry Logger ';\n/** JSDoc */\n\nvar Logger =\n/** @class */\nfunction () {\n  /** JSDoc */\n  function Logger() {\n    this._enabled = false;\n  }\n  /** JSDoc */\n\n\n  Logger.prototype.disable = function () {\n    this._enabled = false;\n  };\n  /** JSDoc */\n\n\n  Logger.prototype.enable = function () {\n    this._enabled = true;\n  };\n  /** JSDoc */\n\n\n  Logger.prototype.log = function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    if (!this._enabled) {\n      return;\n    }\n\n    consoleSandbox(function () {\n      global.console.log(PREFIX + \"[Log]: \" + args.join(' '));\n    });\n  };\n  /** JSDoc */\n\n\n  Logger.prototype.warn = function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    if (!this._enabled) {\n      return;\n    }\n\n    consoleSandbox(function () {\n      global.console.warn(PREFIX + \"[Warn]: \" + args.join(' '));\n    });\n  };\n  /** JSDoc */\n\n\n  Logger.prototype.error = function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    if (!this._enabled) {\n      return;\n    }\n\n    consoleSandbox(function () {\n      global.console.error(PREFIX + \"[Error]: \" + args.join(' '));\n    });\n  };\n\n  return Logger;\n}(); // Ensure we only have a single logger instance, even if multiple versions of @sentry/utils are being used\n\n\nglobal.__SENTRY__ = global.__SENTRY__ || {};\nvar logger = global.__SENTRY__.logger || (global.__SENTRY__.logger = new Logger());\nexport { logger };"],"sourceRoot":""}
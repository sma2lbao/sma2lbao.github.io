{"version":3,"sources":["components/app/Player/ShadowPlayer.tsx","components/app/Player/withThird.tsx","components/app/Player/index.ts","components/app/Input/input.d.ts","components/base/Editor/Controls.tsx","components/base/Editor/NormalEditor.tsx","views/shadows/ShadowUpload/modules/EditAbout/index.tsx","components/app/Input/useEditableInput.tsx","components/app/Input/EditableInput.tsx","components/app/FileUpload/FileUpload.tsx","components/app/FileUpload/DialogFileUpload.tsx","views/shadows/ShadowUpload/modules/EditCast/index.tsx","views/shadows/ShadowUpload/modules/EditTop/index.tsx","views/shadows/ShadowUpload/modules/EditMediumInfo/EditInfo.tsx","views/shadows/ShadowUpload/modules/EditMediumInfo/index.tsx","views/shadows/ShadowUpload/modules/EditMain/index.tsx","components/base/Confirm/index.tsx","views/shadows/ShadowUpload/index.tsx"],"names":["useStyles","makeStyles","theme","createStyles","player","width","height","background","ShadowPlayer","props","classes","url","rest","isM3u8","toString","endsWith","videoRef","React","AspectRatioBox","ratio","ref","className","config","file","forceHLS","attributes","controlsList","disablePictureInPicture","onContextMenu","e","preventDefault","youtube","playerVars","autoplay","playing","modestbranding","rel","showinfo","controls","embedOptions","defaultProps","wrap","position","tool","right","spacing","top","transform","display","flexDirection","justifyContent","maxHeight","overflow","backdropFilter","color","padding","borderRadius","shape","visibility","grouped","border","withThird","Component","youtubeUrl","originUrl","undefined","bridgUrl","setBridgUrl","source","setSource","showThird","ThemeProvider","createMuiTheme","palette","type","ToggleButtonGroup","orientation","value","exclusive","onChange","event","nextValue","ToggleButton","YouTube","InputStatus","paper","divider","flexWrap","margin","BLOCK_TYPES","label","style","icon","FormatQuote","FormatListBulleted","FormatListNumbered","Code","INLINE_STYLES","FormatBold","FormatItalic","FormatUnderlined","Controls","inlines","setInlines","blocktype","setBlocktype","toggleBlockType","toggleInlineStyle","Paper","elevation","newFormats","currentTarget","dataset","map","data-style","key","Divider","flexItem","newFormat","root","editor","minHeight","NormalEditor","raw","onBlur","placeholder","EditorState","createWithContent","convertFromRaw","JSON","parse","createEmpty","editorState","setEditorState","getRawString","stringify","convertToRaw","getCurrentContent","blockType","RichUtils","inlineStyle","blockStyleFn","block","getType","customStyleMap","CODE","backgroundColor","fontFamily","fontSize","handleKeyCommand","cmd","state","newState","keyBindingFn","getDefaultKeyBinding","spellCheck","EditAbout","aboutRaw","setAboutRaw","about","editorRef","rawString","current","useEditableInput","initValue","setValue","target","input","borderColor","body2","typography","body1","caption","button","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","overline","inherit","normalRoot","toolIcon","cursor","EditableInput","variant","NORMAL","status","setStatus","ClickAwayListener","onClickAway","Input","fullWidth","multiline","startAdornment","InputAdornment","IconButton","size","onClick","EDITING","Edit","readOnly","disableUnderline","alignItems","text","secondary","flex","custom","base","small","FileUpload","onComplete","onError","children","component","title","maxSize","enqueueSnackbar","useSnackbar","inputRef","useUploadFileOssMutation","onCompleted","data","upload_file_oss","error","message","loading","Tag","role","click","accept","validity","files","valid","variables","Box","CloudUpload","Typography","tabPane","marginTop","DialogFileUpload","open","setOpen","tab","setTab","remoteUrl","setRemoteUrl","Dialog","onClose","Tabs","_","val","Tab","hidden","disabled","InputBase","subheaderWrap","EditCast","credits","setCredits","handleChange","idx","List","subheader","ListSubheader","avatar","name","description","AddCircle","length","item","ListItem","ListItemAvatar","cur","Object","assign","handleChangeAvatar","Badge","overlap","anchorOrigin","vertical","horizontal","badgeContent","Avatar","src","inputProps","rowsMax","ListItemSecondaryAction","splice","handleDelete","Delete","Placeholder","AutoPlaySwipeableViews","autoPlay","SwipeableViews","aider","left","bottom","aiderContent","main","mainContent","poster","posterTool","EditTop","activeStep","setActiveStep","setTitle","sub_title","setSubTitle","setDescription","posters","setPosters","cover","setCover","includes","handleRemovePoster","window","confirm","onChangeIndex","step","index","image","Image","aspectRatio","DEFULAT_SHADOW_COVER","GridList","cellHeight","cols","GridListTile","alt","Tooltip","TransitionComponent","Zoom","placement","arrow","Switch","checked","handleChangeCover","data-idx","imageUrl","mt","PlayCircleOutline","header","marginBottom","infoItem","marginLeft","toolBox","marginRight","toolText","EditInfo","setName","sub_name","setSubName","member","useAuth","moment","Date","now","format","ThumbDownAlt","ThumbUpAlt","MoreVert","ml","nickname","body","content","borderRight","sourceWrap","toolbarWrap","imageFab","shadowFab","EditMediumInfo","onSave","onCancel","setUrl","infoRef","handleCancle","fullScreen","AppBar","Toolbar","Button","light","Fab","sourceUrl","MovieCreation","sticky","EditMediaOwn","withTool","MediaOwn","box","borderTop","EditMain","forwardRef","useState","openMedium","setOpenMedium","mediums","setMediums","useImperativeHandle","onDelete","medium","findIndex","ShowDialog","DialogTitle","DialogContent","DialogContentText","DialogActions","cancel","cancelText","onConfirm","autoFocus","confirmText","Confirm","dialog","options","Promise","resolve","reject","mountPoint","document","createElement","appendChild","clear","remove","ReactDOM","render","speedDial","speedDialIcon","ShadowUpload","RouterHelper","useRouterHelper","topRef","mainRef","aboutRef","castRef","useCreateShadowMutation","then","gotoHome","create_shadow","SpeedDial","ariaLabel","SpeedDialIcon","onOpen","SpeedDialAction","Save","tooltipTitle","topFields","mainFields","aboutFields","castFields","shadow","sources"],"mappings":"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","file":"static/js/16.fea9be64.chunk.js","sourcesContent":["import * as React from \"react\";\nimport ReactPlayer, { ReactPlayerProps } from \"react-player\";\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core/styles\";\nimport { AspectRatioBox } from \"@/components/base/AspectRatioBox\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    player: {\n      width: \"100% !important\",\n      height: \"100% !important\",\n      background: \"#000\"\n    }\n  })\n);\n\nexport interface PlayerBaseProps\n  extends Pick<\n    ReactPlayerProps,\n    \"url\" | \"playing\" | \"controls\" | \"muted\" | \"wrapper\" | \"light\"\n  > {}\n\nexport const ShadowPlayer: React.FC<PlayerBaseProps> = props => {\n  const classes = useStyles();\n  const { url, ...rest } = props;\n  const isM3u8 = url?.toString().endsWith(\".m3u8\");\n  const videoRef = React.createRef<ReactPlayer>();\n\n  return (\n    <AspectRatioBox ratio={16 / 9}>\n      <ReactPlayer\n        ref={videoRef}\n        className={classes.player}\n        {...rest}\n        url={url}\n        config={{\n          file: {\n            forceHLS: isM3u8,\n            attributes: {\n              controlsList: \"nodownload noremoteplayback\",\n              disablePictureInPicture: true,\n              onContextMenu: e => e.preventDefault()\n            }\n          },\n          youtube: {\n            playerVars: {\n              autoplay: rest.playing,\n              modestbranding: 1,\n              rel: 0,\n              showinfo: 0,\n              controls: rest.controls\n            },\n            embedOptions: {}\n          }\n        }}\n      />\n    </AspectRatioBox>\n  );\n};\n\nShadowPlayer.defaultProps = {\n  controls: true,\n  playing: true\n};\n\nexport default ShadowPlayer;\n","import * as React from \"react\";\nimport {\n  makeStyles,\n  Theme,\n  createStyles,\n  ThemeProvider,\n  createMuiTheme\n} from \"@material-ui/core\";\nimport { YouTube } from \"@material-ui/icons\";\nimport { ToggleButtonGroup, ToggleButton } from \"@material-ui/lab\";\n// import { Delete } from \"@material-ui/icons\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    wrap: {\n      position: \"relative\",\n      width: \"100%\"\n    },\n    tool: {\n      position: \"absolute\",\n      right: theme.spacing(1),\n      top: \"50%\",\n      transform: \"translateY(-50%)\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"space-between\",\n      maxHeight: \"50%\",\n      overflow: \"auto\",\n      background: \"rgba(0, 0, 0, .1)\",\n      backdropFilter: \"blur(8px)\",\n      color: \"#fff\",\n      padding: theme.spacing(1),\n      borderRadius: theme.shape.borderRadius,\n      visibility: \"hidden\",\n      \"$wrap:hover &\": {\n        visibility: \"initial\"\n      }\n    },\n    grouped: {\n      border: \"none\",\n      \"&:not(:first-child)\": {\n        borderRadius: theme.shape.borderRadius\n      },\n      \"&:first-child\": {\n        borderRadius: theme.shape.borderRadius\n      }\n    }\n  })\n);\n\nexport interface WithThirdProps {\n  youtubeUrl?: string | null;\n}\n\nexport function withThird<P>(Component: React.FC<P & WithThirdProps>) {\n  return (props: P & WithThirdProps) => {\n    const classes = useStyles();\n    const { youtubeUrl, ...rest } = props;\n    const originUrl = rest && (rest as any).url ? (rest as any).url : undefined;\n    const [bridgUrl, setBridgUrl] = React.useState<string>(originUrl);\n    const [source, setSource] = React.useState<string>();\n\n    const showThird =\n      youtubeUrl &&\n      rest &&\n      (rest as any).url &&\n      (rest as any).url !== youtubeUrl;\n\n    const handleChange = (\n      event: React.MouseEvent<HTMLElement>,\n      nextValue: string\n    ) => {\n      setSource(nextValue);\n    };\n    React.useEffect(() => {\n      if (source === \"youtube\") {\n        setBridgUrl(youtubeUrl as string);\n      } else {\n        setBridgUrl(originUrl);\n      }\n    }, [source, originUrl, youtubeUrl]);\n\n    return (\n      <div className={classes.wrap}>\n        <Component {...(rest as P)} url={bridgUrl} />\n        {showThird && (\n          <div className={classes.tool}>\n            <ThemeProvider\n              theme={() => {\n                return createMuiTheme({\n                  palette: { type: \"dark\" }\n                });\n              }}\n            >\n              <ToggleButtonGroup\n                classes={{ grouped: classes.grouped }}\n                orientation=\"vertical\"\n                value={source}\n                exclusive\n                onChange={handleChange}\n              >\n                <ToggleButton value=\"youtube\">\n                  <YouTube></YouTube>\n                </ToggleButton>\n              </ToggleButtonGroup>\n            </ThemeProvider>\n          </div>\n        )}\n      </div>\n    );\n  };\n}\nexport default withThird;\n","export * from \"./ShadowPlayer\";\nexport * from \"./withThird\";\n","import { InputProps } from \"@material-ui/core\";\n\nconst variantProps = [\n  \"body1\",\n  \"body2\",\n  \"button\",\n  \"caption\",\n  \"h1\",\n  \"h2\",\n  \"h3\",\n  \"h4\",\n  \"h5\",\n  \"h6\",\n  \"inherit\",\n  \"overline\",\n  \"subtitle1\",\n  \"subtitle2\"\n] as const;\n\nexport interface BaseInputAttributes {\n  placeholder?: string;\n\n  variant?: typeof variantProps[number];\n}\n\nexport interface BaseInputProps extends InputProps, BaseInputAttributes {\n  value: any;\n\n  onChange?(e: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>): void;\n}\n\nexport enum InputStatus {\n  NORMAL = 0, // 默认状态\n\n  EDITING = 1 // 编辑中\n}\n","import * as React from \"react\";\nimport {\n  makeStyles,\n  Theme,\n  createStyles,\n  Divider,\n  Paper\n} from \"@material-ui/core\";\nimport { ToggleButtonGroup, ToggleButton } from \"@material-ui/lab\";\nimport {\n  FormatBold,\n  FormatItalic,\n  FormatUnderlined,\n  FormatQuote,\n  FormatListBulleted,\n  FormatListNumbered,\n  Code\n} from \"@material-ui/icons\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    paper: {\n      display: \"inline-flex\",\n      border: `1px solid ${theme.palette.divider}`,\n      flexWrap: \"wrap\"\n    },\n    divider: {\n      margin: theme.spacing(1, 0.5)\n    },\n    grouped: {\n      margin: theme.spacing(0.5),\n      border: \"none\",\n      \"&:not(:first-child)\": {\n        borderRadius: theme.shape.borderRadius\n      },\n      \"&:first-child\": {\n        borderRadius: theme.shape.borderRadius\n      }\n    }\n  })\n);\n\nconst BLOCK_TYPES = [\n  // { label: \"H1\", style: \"header-one\", value: \"h1\", icon: <FormatBold /> },\n  // { label: \"H2\", style: \"header-two\", value: \"h2\", icon: <FormatBold /> },\n  // { label: \"H3\", style: \"header-three\", value: \"h3\", icon: <FormatBold /> },\n  // { label: \"H4\", style: \"header-four\", value: \"h4\", icon: <FormatBold /> },\n  // { label: \"H5\", style: \"header-five\", value: \"h5\", icon: <FormatBold /> },\n  // { label: \"H6\", style: \"header-six\", value: \"h6\", icon: <FormatBold /> },\n  {\n    label: \"Blockquote\",\n    style: \"blockquote\",\n    value: \"blockquote\",\n    icon: <FormatQuote />\n  },\n  {\n    label: \"UL\",\n    style: \"unordered-list-item\",\n    value: \"ul\",\n    icon: <FormatListBulleted />\n  },\n  {\n    label: \"OL\",\n    style: \"ordered-list-item\",\n    value: \"ol\",\n    icon: <FormatListNumbered />\n  },\n  {\n    label: \"CodeBlock\",\n    style: \"code-block\",\n    value: \"codeblock\",\n    icon: <Code />\n  }\n];\n\nconst INLINE_STYLES = [\n  { label: \"Bold\", style: \"BOLD\", value: \"bold\", icon: <FormatBold /> },\n  { label: \"Italic\", style: \"ITALIC\", value: \"italic\", icon: <FormatItalic /> },\n  {\n    label: \"Underline\",\n    style: \"UNDERLINE\",\n    value: \"underline\",\n    icon: <FormatUnderlined />\n  }\n  // {\n  //   label: \"Monospace\",\n  //   style: \"CODE\",\n  //   value: \"code\",\n  //   icon: <FormatQuote />,\n  // },\n];\n\nexport const Controls = props => {\n  const classes = useStyles();\n  const [inlines, setInlines] = React.useState<string[]>([]);\n  const [blocktype, setBlocktype] = React.useState<string>();\n  const { toggleBlockType, toggleInlineStyle } = props;\n  // const selection = editorState.getSelection();\n  // const blockType = editorState\n  //   .getCurrentContent()\n  //   .getBlockForKey(selection.getStartKey())\n  //   .getType();\n  // const currentStyle = editorState.getCurrentInlineStyle();\n\n  const handleInlineFormat = (\n    event: React.MouseEvent<HTMLElement>,\n    newFormats: string[]\n  ) => {\n    const { style } = event.currentTarget.dataset;\n    if (style) {\n      toggleInlineStyle(style);\n    }\n    setInlines(newFormats);\n  };\n\n  const handleBlocktypeFormat = (\n    event: React.MouseEvent<HTMLElement>,\n    newFormat\n  ) => {\n    const { style } = event.currentTarget.dataset;\n    if (style) {\n      toggleBlockType(style);\n    }\n    setBlocktype(newFormat);\n  };\n\n  return (\n    <Paper elevation={0} className={classes.paper}>\n      <ToggleButtonGroup\n        value={inlines}\n        onChange={handleInlineFormat}\n        classes={{ grouped: classes.grouped }}\n      >\n        {INLINE_STYLES.map(type => (\n          <ToggleButton\n            data-style={type.style}\n            key={type.value}\n            value={type.value}\n          >\n            {type.icon}\n          </ToggleButton>\n        ))}\n      </ToggleButtonGroup>\n      <Divider flexItem orientation=\"vertical\" className={classes.divider} />\n      <ToggleButtonGroup\n        value={blocktype}\n        exclusive\n        onChange={handleBlocktypeFormat}\n        classes={{ grouped: classes.grouped }}\n      >\n        {BLOCK_TYPES.map(type => (\n          <ToggleButton\n            data-style={type.style}\n            key={type.value}\n            value={type.value}\n          >\n            {type.icon}\n          </ToggleButton>\n        ))}\n      </ToggleButtonGroup>\n    </Paper>\n  );\n};\n","import * as React from \"react\";\nimport {\n  Editor,\n  EditorState,\n  RichUtils,\n  getDefaultKeyBinding,\n  convertFromRaw,\n  convertToRaw\n} from \"draft-js\";\nimport \"draft-js/dist/Draft.css\";\nimport { BaseEditorProps, BaseEditorHandles } from \"./editor\";\nimport { makeStyles, Theme, createStyles } from \"@material-ui/core\";\nimport { Controls } from \"./Controls\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      // minHeight: 420,\n    },\n    editor: {\n      minHeight: 220,\n      border: `1px solid ${theme.palette.divider}`\n    }\n  })\n);\n\nexport const NormalEditor = React.forwardRef<\n  BaseEditorHandles,\n  BaseEditorProps\n>((props, ref) => {\n  const classes = useStyles();\n  const { raw, onBlur, placeholder } = props;\n  const [editorState, setEditorState] = React.useState(() =>\n    raw\n      ? EditorState.createWithContent(convertFromRaw(JSON.parse(raw)))\n      : EditorState.createEmpty()\n  );\n\n  React.useImperativeHandle(ref, () => ({\n    getRawString: () => {\n      return JSON.stringify(convertToRaw(editorState.getCurrentContent()));\n    }\n  }));\n\n  const handleKeyCommand = (cmd, state) => {\n    const newState = RichUtils.handleKeyCommand(state, cmd);\n    if (newState) {\n      setEditorState(newState);\n      return \"handled\";\n    }\n    return \"not-handled\";\n  };\n\n  const mapKeyToEditorCommand = e => {\n    // if (e.keyCode === 9 /* TAB */) {\n    //   const newEditorState = RichUtils.onTab(e, editorState, 4 /* maxDepth */);\n    //   if (newEditorState !== editorState) {\n    //     setEditorState(newEditorState);\n    //   }\n    //   return null;\n    // }\n    return getDefaultKeyBinding(e);\n  };\n\n  const toggleBlockType = blockType => {\n    setEditorState(RichUtils.toggleBlockType(editorState, blockType));\n  };\n\n  const toggleInlineStyle = inlineStyle => {\n    setEditorState(RichUtils.toggleInlineStyle(editorState, inlineStyle));\n  };\n\n  // Custom overrides for \"code\" style.\n  const styleMap = {\n    CODE: {\n      backgroundColor: \"rgba(0, 0, 0, 0.05)\",\n      fontFamily: '\"Inconsolata\", \"Menlo\", \"Consolas\", monospace',\n      fontSize: 16,\n      padding: 2\n    }\n  };\n\n  function getBlockStyle(block) {\n    switch (block.getType()) {\n      case \"blockquote\":\n        return \"RichEditor-blockquote\";\n      default:\n        return \"\";\n    }\n  }\n\n  return (\n    <div className={classes.root}>\n      <Controls\n        editorState={editorState}\n        toggleBlockType={toggleBlockType}\n        toggleInlineStyle={toggleInlineStyle}\n      />\n      <div className={classes.editor}>\n        <Editor\n          blockStyleFn={getBlockStyle}\n          customStyleMap={styleMap}\n          editorState={editorState}\n          handleKeyCommand={handleKeyCommand}\n          keyBindingFn={mapKeyToEditorCommand}\n          onChange={setEditorState}\n          onBlur={onBlur}\n          placeholder={placeholder}\n          spellCheck={true}\n        />\n      </div>\n    </div>\n  );\n});\n","import * as React from \"react\";\nimport { NormalEditor } from \"@/components/base/Editor\";\nimport { EditorHandles } from \"@/components/base/Editor/editor\";\n\nexport interface EditAboutHandles {\n  about?: string;\n}\n\nexport const EditAbout = React.forwardRef<EditAboutHandles, unknown>(\n  (props, ref) => {\n    const [aboutRaw, setAboutRaw] = React.useState(\"\");\n\n    React.useImperativeHandle(ref, () => ({\n      about: aboutRaw\n    }));\n    const editorRef = React.createRef<EditorHandles>();\n\n    const handleBlur = () => {\n      const rawString = editorRef.current?.getRawString();\n      setAboutRaw(rawString);\n    };\n\n    return (\n      <div>\n        <NormalEditor ref={editorRef} onBlur={handleBlur} />\n      </div>\n    );\n  }\n);\n\nexport default EditAbout;\n","import * as React from \"react\";\n\nexport const useEditableInput = (initValue?: any): [any, any] => {\n  const [value, setValue] = React.useState(initValue);\n\n  const onChange = (\n    e: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>\n  ) => {\n    setValue(e.target.value);\n  };\n\n  return [value, onChange];\n};\n","import * as React from \"react\";\nimport {\n  Input,\n  makeStyles,\n  Theme,\n  createStyles,\n  InputAdornment,\n  IconButton,\n  ClickAwayListener\n} from \"@material-ui/core\";\nimport { BaseInputProps, InputStatus } from \"./input.d\";\nimport { Edit } from \"@material-ui/icons\";\n\nconst useStyles = makeStyles((theme: Theme) => {\n  return createStyles({\n    root: {\n      color: \"inherit\"\n    },\n    input: {\n      borderColor: \"transparent\"\n    },\n    /* Styles applied to the root element if `variant=\"body2\"`. */\n    body2: theme.typography.body2,\n    /* Styles applied to the root element if `variant=\"body1\"`. */\n    body1: theme.typography.body1,\n    /* Styles applied to the root element if `variant=\"caption\"`. */\n    caption: theme.typography.caption,\n    /* Styles applied to the root element if `variant=\"button\"`. */\n    button: theme.typography.button,\n    /* Styles applied to the root element if `variant=\"h1\"`. */\n    h1: theme.typography.h1,\n    /* Styles applied to the root element if `variant=\"h2\"`. */\n    h2: theme.typography.h2,\n    /* Styles applied to the root element if `variant=\"h3\"`. */\n    h3: theme.typography.h3,\n    /* Styles applied to the root element if `variant=\"h4\"`. */\n    h4: theme.typography.h4,\n    /* Styles applied to the root element if `variant=\"h5\"`. */\n    h5: theme.typography.h5,\n    /* Styles applied to the root element if `variant=\"h6\"`. */\n    h6: theme.typography.h6,\n    /* Styles applied to the root element if `variant=\"subtitle1\"`. */\n    subtitle1: theme.typography.subtitle1,\n    /* Styles applied to the root element if `variant=\"subtitle2\"`. */\n    subtitle2: theme.typography.subtitle2,\n    /* Styles applied to the root element if `variant=\"overline\"`. */\n    overline: theme.typography.overline,\n    /* Styles applied to the root element if `variant=\"inherit\"`. */\n    inherit: {},\n\n    normalRoot: {\n      position: \"relative\"\n    },\n\n    toolIcon: {\n      position: \"relative\",\n      top: theme.spacing(-1),\n      cursor: \"pointer\"\n    }\n  });\n});\n\nexport const EditableInput: React.FC<BaseInputProps> = props => {\n  const { value, onChange, placeholder, variant = \"inherit\", ...rest } = props;\n  const classes = useStyles();\n  const [status, setStatus] = React.useState<InputStatus>(InputStatus.NORMAL);\n\n  const handleClickAway = () => {\n    if (status !== InputStatus.NORMAL) {\n      setStatus(InputStatus.NORMAL);\n    }\n  };\n\n  return (\n    <ClickAwayListener onClickAway={handleClickAway}>\n      <Input\n        classes={{\n          root: classes.root\n        }}\n        fullWidth\n        multiline\n        className={classes[variant]}\n        value={value}\n        onChange={onChange}\n        placeholder={placeholder}\n        {...rest}\n        startAdornment={\n          status === InputStatus.NORMAL ? (\n            <InputAdornment position=\"start\">\n              <IconButton\n                size=\"small\"\n                color=\"inherit\"\n                onClick={() => setStatus(InputStatus.EDITING)}\n              >\n                <Edit fontSize=\"small\" />\n              </IconButton>\n            </InputAdornment>\n          ) : null\n        }\n        readOnly={status === InputStatus.NORMAL}\n        disableUnderline={status === InputStatus.NORMAL}\n        // onBlur={() => setStatus(InputStatus.NORMAL)}\n      />\n    </ClickAwayListener>\n  );\n};\n","import * as React from \"react\";\nimport { useUploadFileOssMutation } from \"@/schema\";\nimport { BaseFileUploadProps } from \"./file-upload\";\nimport {\n  Box,\n  makeStyles,\n  Theme,\n  createStyles,\n  Typography\n} from \"@material-ui/core\";\nimport { CloudUpload } from \"@material-ui/icons\";\nimport { IPlaceholderProps } from \"@/components/base/Placeholder/placeholder\";\nimport { useSnackbar } from \"notistack\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: \"inline-flex\",\n      flexDirection: \"column\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      width: (props: IPlaceholderProps) => {\n        return props.width ?? \"100%\";\n      },\n      height: (props: IPlaceholderProps) => {\n        return props.height ?? \"100%\";\n      },\n      color: theme.palette.text.secondary,\n      flex: 1\n    },\n    icon: theme.custom.base.icon.small\n  })\n);\n\nexport const FileUpload: React.FC<BaseFileUploadProps> = props => {\n  const {\n    onComplete,\n    onError,\n    children,\n    component,\n    custom,\n    title,\n    maxSize\n  } = props;\n  const classes = useStyles(props);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const inputRef = React.createRef<HTMLInputElement>();\n\n  const [upload_file_oss, { loading }] = useUploadFileOssMutation({\n    onCompleted(data) {\n      onComplete && onComplete(data.upload_file_oss);\n    },\n    onError(error) {\n      onError && onError(error.message);\n    }\n  });\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const {\n      validity,\n      files: [file]\n    } = e.currentTarget;\n    if (maxSize && file.size > maxSize * 1024 * 1024) {\n      enqueueSnackbar(\"超出尺寸限制\", { variant: \"warning\" });\n      return;\n    }\n    if (validity.valid) {\n      upload_file_oss({ variables: { file } });\n    }\n  };\n\n  const handleClick = () => {\n    if (!loading) {\n      inputRef.current?.click();\n    }\n  };\n\n  const Tag = component || \"div\";\n\n  return (\n    <Tag role=\"button\" onClick={handleClick}>\n      <input\n        ref={inputRef}\n        style={{ display: \"none\" }}\n        type=\"file\"\n        accept=\"*\"\n        onChange={handleChange}\n      />\n      {custom ? (\n        <>{children}</>\n      ) : (\n        <Box className={classes.root}>\n          <div>\n            <CloudUpload className={classes.icon} />\n          </div>\n          <Typography variant=\"h6\">{loading ? \"上传中...\" : title}</Typography>\n        </Box>\n      )}\n    </Tag>\n  );\n};\n\nFileUpload.defaultProps = {\n  custom: false,\n  title: \"点击上传\",\n  maxSize: 200\n};\n","import * as React from \"react\";\nimport {\n  Dialog,\n  Box,\n  Tabs,\n  Tab,\n  Paper,\n  InputBase,\n  IconButton,\n  makeStyles,\n  Theme,\n  createStyles,\n  Typography\n} from \"@material-ui/core\";\nimport { FileUpload } from \"./FileUpload\";\nimport { CloudUpload } from \"@material-ui/icons\";\nimport LinkIcon from \"@material-ui/icons/Link\";\nimport DoneIcon from \"@material-ui/icons/Done\";\nimport { DialogFileUploadProps } from \"./file-upload\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: \"inline-flex\",\n      flexDirection: \"column\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      width: \"100%\",\n      height: \"100%\",\n      color: theme.palette.text.secondary,\n      flex: 1\n    },\n    paper: {\n      display: \"flex\",\n      alignItems: \"center\"\n    },\n    icon: theme.custom.base?.icon.small,\n    tabPane: {\n      marginTop: theme.spacing(2)\n    }\n  })\n);\n\nexport const DialogFileUpload: React.FC<DialogFileUploadProps> = (\n  props: DialogFileUploadProps\n) => {\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n  const [tab, setTab] = React.useState(0);\n  const [remoteUrl, setRemoteUrl] = React.useState<string>(\"\");\n\n  const handleChange = (\n    event: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>\n  ) => {\n    setRemoteUrl(event.target.value);\n  };\n\n  const handleSubmitRemoteUrl = () => {\n    props.onComplete && props.onComplete(remoteUrl);\n    setOpen(false);\n  };\n\n  const handleCompleteLocalUpload = (url: string) => {\n    props.onComplete && props.onComplete(url);\n    setOpen(false);\n  };\n\n  return (\n    <div>\n      <div onClick={() => setOpen(true)}>\n        {props.custom ? (\n          <>{props.children}</>\n        ) : (\n          <Box className={classes.root}>\n            <div>\n              <CloudUpload className={classes.icon} />\n            </div>\n            <Typography variant=\"h6\">{props.title}</Typography>\n          </Box>\n        )}\n      </div>\n      <Dialog onClose={() => setOpen(false)} open={open}>\n        <Box padding={2}>\n          <Tabs value={tab} onChange={(_, val) => setTab(val)}>\n            <Tab label=\"本地上传\"></Tab>\n            <Tab label=\"粘贴链接\"></Tab>\n          </Tabs>\n          <div className={classes.tabPane}>\n            <div hidden={tab !== 0}>\n              <FileUpload\n                onComplete={handleCompleteLocalUpload}\n                onError={props.onError}\n              />\n            </div>\n            <div hidden={tab !== 1}>\n              <Paper className={classes.paper} component=\"form\">\n                <IconButton disabled>\n                  <LinkIcon />\n                </IconButton>\n                <InputBase\n                  value={remoteUrl}\n                  onChange={handleChange}\n                  fullWidth\n                  placeholder=\"链接地址\"\n                />\n                <IconButton\n                  onClick={handleSubmitRemoteUrl}\n                  color=\"primary\"\n                  disabled={!remoteUrl}\n                >\n                  <DoneIcon />\n                </IconButton>\n              </Paper>\n            </div>\n          </div>\n        </Box>\n      </Dialog>\n    </div>\n  );\n};\nexport default DialogFileUpload;\n\nDialogFileUpload.defaultProps = {\n  custom: false,\n  title: \"点击上传\"\n};\n","import * as React from \"react\";\nimport {\n  List,\n  ListItem,\n  ListItemAvatar,\n  Avatar,\n  ListItemSecondaryAction,\n  IconButton,\n  Box,\n  ListSubheader,\n  Badge\n} from \"@material-ui/core\";\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core/styles\";\nimport { AddCircle, Delete, Edit } from \"@material-ui/icons\";\nimport { Placeholder } from \"@/components/base/Placeholder\";\nimport { Character } from \"@/schema\";\nimport { EditableInput } from \"@/components/app/Input\";\nimport { DialogFileUpload } from \"@/components/app/FileUpload\";\n\nexport interface CharacterEdit extends Character {\n  // status:\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      backgroundColor: theme.palette.background.paper\n    },\n    subheaderWrap: {\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      alignItems: \"center\"\n    }\n  })\n);\n\nexport interface EditCastHandles {\n  credits: CharacterEdit[];\n}\n\nexport const EditCast = React.forwardRef<EditCastHandles, unknown>(\n  (props, ref) => {\n    const classes = useStyles();\n    const [credits, setCredits] = React.useState<CharacterEdit[]>([]);\n\n    React.useImperativeHandle(ref, () => ({\n      credits\n    }));\n\n    const handleAddCredit = () => {\n      setCredits([\n        ...credits,\n        {\n          avatar: \"\",\n          name: \"\",\n          description: \"\"\n          // tags: []\n        }\n      ]);\n    };\n\n    const handleChange = (\n      e: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>\n    ) => {\n      const { dataset, value } = e.target;\n      if (dataset.idx && dataset.key) {\n        const cur = credits[dataset.idx];\n        cur[dataset.key] = value;\n        setCredits([...credits]);\n      }\n    };\n\n    const handleChangeAvatar = (idx: number, url: string) => {\n      const cur = credits[idx];\n      Object.assign(cur, { avatar: url });\n      setCredits([...credits]);\n    };\n\n    const handleDelete = (idx: number) => {\n      credits.splice(idx, 1);\n      setCredits([...credits]);\n    };\n\n    return (\n      <Box className={classes.root}>\n        <List\n          subheader={\n            <ListSubheader className={classes.subheaderWrap}>\n              演职表\n              <IconButton onClick={handleAddCredit} size=\"small\">\n                <AddCircle fontSize=\"small\" />\n              </IconButton>\n            </ListSubheader>\n          }\n        >\n          {credits.length ? (\n            <>\n              {credits.map((item, idx) => {\n                return (\n                  <ListItem key={idx}>\n                    <ListItemAvatar>\n                      <DialogFileUpload\n                        custom\n                        onComplete={url => handleChangeAvatar(idx, url)}\n                      >\n                        <Badge\n                          overlap=\"circle\"\n                          anchorOrigin={{\n                            vertical: \"top\",\n                            horizontal: \"right\"\n                          }}\n                          badgeContent={<Edit fontSize=\"small\" />}\n                        >\n                          <Avatar src={item.avatar}></Avatar>\n                        </Badge>\n                      </DialogFileUpload>\n                    </ListItemAvatar>\n                    <div>\n                      <EditableInput\n                        inputProps={{ \"data-idx\": idx, \"data-key\": \"name\" }}\n                        value={item.name}\n                        onChange={handleChange}\n                        placeholder=\"请输入名字\"\n                        rowsMax={1}\n                      />\n\n                      <EditableInput\n                        inputProps={{\n                          \"data-idx\": idx,\n                          \"data-key\": \"description\"\n                        }}\n                        value={item.description}\n                        onChange={handleChange}\n                        placeholder=\"请输入描述\"\n                        rowsMax={1}\n                      />\n                    </div>\n                    <ListItemSecondaryAction>\n                      <IconButton onClick={() => handleDelete(idx)}>\n                        <Delete />\n                      </IconButton>\n                    </ListItemSecondaryAction>\n                  </ListItem>\n                );\n              })}\n            </>\n          ) : (\n            <div>\n              <Placeholder title=\"Please add cast.\" />\n            </div>\n          )}\n        </List>\n      </Box>\n    );\n  }\n);\n\nexport default EditCast;\n","import * as React from \"react\";\nimport { Image } from \"@/components/base/Image\";\nimport { DEFULAT_SHADOW_COVER } from \"@/common/constants/default.constant\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport {\n  Box,\n  GridList,\n  GridListTile,\n  IconButton,\n  Switch,\n  Tooltip,\n  Zoom\n} from \"@material-ui/core\";\n\nimport { useEditableInput, EditableInput } from \"@/components/app/Input\";\nimport { DialogFileUpload } from \"@/components/app/FileUpload\";\nimport { PlayCircleOutline, Delete } from \"@material-ui/icons\";\nimport SwipeableViews from \"react-swipeable-views\";\nimport { autoPlay } from \"react-swipeable-views-utils\";\nimport { AspectRatioBox } from \"@/components/base/AspectRatioBox\";\n\nconst AutoPlaySwipeableViews = autoPlay(SwipeableViews);\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      position: \"relative\",\n      width: \"100%\"\n    },\n    aider: {\n      position: \"absolute\",\n      left: 0,\n      top: 0,\n      bottom: 0,\n      width: \"45%\",\n      padding: theme.spacing(8)\n    },\n    aiderContent: {\n      width: \"50%\",\n      padding: theme.spacing(1),\n      borderRadius: theme.shape.borderRadius,\n      maxHeight: \"100%\",\n      background: \"rgba(0, 0, 0, .1)\",\n      backdropFilter: \"blur(8px)\",\n      overflow: \"auto\"\n    },\n    main: {\n      position: \"absolute\",\n      top: \"50%\",\n      right: 0,\n      width: \"50%\",\n      padding: theme.spacing(0, 8),\n      transform: \"translate(0, -50%)\",\n      color: \"#fff\",\n      display: \"flex\",\n      flexDirection: \"column\"\n    },\n    mainContent: {\n      background: \"rgba(0, 0, 0, .1)\",\n      backdropFilter: \"blur(8px)\",\n      padding: theme.spacing(4),\n      borderRadius: theme.shape.borderRadius\n    },\n    poster: {\n      position: \"relative\"\n    },\n    posterTool: {\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      alignItems: \"center\",\n      visibility: \"hidden\",\n      position: \"absolute\",\n      padding: theme.spacing(1),\n      top: 0,\n      left: 0,\n      width: \"100%\",\n      color: \"#fff\",\n      \"$poster:hover &\": {\n        visibility: \"initial\"\n      }\n    }\n  })\n);\n\nexport interface EditTopHandles {\n  title: string;\n\n  sub_title?: string;\n\n  description?: string;\n\n  posters?: string[];\n\n  cover: string;\n}\n\nexport const EditTop = React.forwardRef<EditTopHandles, unknown>(\n  (props, ref) => {\n    const classes = useStyles();\n    const [activeStep, setActiveStep] = React.useState(0);\n    const [title, setTitle] = useEditableInput(\"\");\n    const [sub_title, setSubTitle] = useEditableInput(\"\");\n    const [description, setDescription] = useEditableInput(\"\");\n    const [posters, setPosters] = React.useState<string[]>([]);\n    const [cover, setCover] = React.useState<string>(\"\");\n\n    React.useEffect(() => {\n      if (posters && posters.length > 0) {\n        if (!cover || !posters.includes(cover)) setCover(posters[0]);\n      } else {\n        setCover(\"\");\n      }\n    }, [cover, posters]);\n\n    React.useImperativeHandle(ref, () => ({\n      title,\n      sub_title,\n      description,\n      posters,\n      cover\n    }));\n\n    const handleAddPoster = imageUrl => {\n      if (imageUrl && !posters.includes(imageUrl)) {\n        setPosters([...posters, imageUrl]);\n      }\n    };\n\n    const handleRemovePoster = (\n      e: React.MouseEvent<HTMLDivElement, MouseEvent>\n    ) => {\n      const result = window.confirm(\"delete?\");\n      if (result) {\n        const { dataset } = e.currentTarget;\n        if (dataset.idx) {\n          posters.splice(+dataset.idx, 1);\n          setPosters([...posters]);\n        }\n      }\n    };\n\n    const handleChangeCover = (idx: number) => {\n      setCover(posters[idx]);\n    };\n\n    return (\n      <div className={classes.root}>\n        {posters.length ? (\n          <AutoPlaySwipeableViews\n            onChangeIndex={step => setActiveStep(step)}\n            index={activeStep}\n          >\n            {posters.map((image, idx) => {\n              return <Image key={idx} aspectRatio={16 / 9} src={image} />;\n            })}\n          </AutoPlaySwipeableViews>\n        ) : (\n          <Image aspectRatio={16 / 9} src={DEFULAT_SHADOW_COVER} />\n        )}\n\n        <div className={classes.aider}>\n          <div className={classes.aiderContent}>\n            <GridList cellHeight=\"auto\" cols={1}>\n              {posters.map((poster, idx) => (\n                <GridListTile key={poster} cols={1} className={classes.poster}>\n                  <Image\n                    aspectRatio={16 / 9}\n                    src={poster}\n                    alt={\"poster\" + idx}\n                  />\n                  <div className={classes.posterTool}>\n                    <div>\n                      <Tooltip\n                        TransitionComponent={Zoom}\n                        title=\"设成封面\"\n                        placement=\"bottom\"\n                        arrow\n                      >\n                        <Switch\n                          size=\"small\"\n                          color=\"primary\"\n                          checked={cover === poster}\n                          onChange={() => handleChangeCover(idx)}\n                        />\n                      </Tooltip>\n                    </div>\n                    <div data-idx={idx} onClick={handleRemovePoster}>\n                      <Tooltip\n                        TransitionComponent={Zoom}\n                        title=\"删除\"\n                        placement=\"bottom\"\n                        arrow\n                      >\n                        <IconButton size=\"medium\">\n                          <Delete fontSize=\"small\" />\n                        </IconButton>\n                      </Tooltip>\n                    </div>\n                  </div>\n                </GridListTile>\n              ))}\n              <GridListTile cols={1}>\n                <AspectRatioBox ratio={16 / 9}>\n                  <Box\n                    display=\"flex\"\n                    alignItems=\"center\"\n                    justifyContent=\"center\"\n                    height=\"100%\"\n                  >\n                    <DialogFileUpload onComplete={handleAddPoster} />\n                  </Box>\n                </AspectRatioBox>\n              </GridListTile>\n            </GridList>\n          </div>\n        </div>\n        <div className={classes.main}>\n          <div className={classes.mainContent}>\n            <EditableInput\n              variant=\"h4\"\n              value={title}\n              onChange={setTitle}\n              placeholder=\"请输入标题\"\n            />\n            <EditableInput\n              variant=\"subtitle1\"\n              value={sub_title}\n              onChange={setSubTitle}\n              placeholder=\"请输入副标题\"\n            />\n            <EditableInput\n              variant=\"body2\"\n              value={description}\n              onChange={setDescription}\n              placeholder=\"请输入电影描述...\"\n            />\n            <Box mt={3}>\n              <IconButton color=\"inherit\" disabled>\n                <PlayCircleOutline fontSize=\"large\" />\n              </IconButton>\n            </Box>\n          </div>\n        </div>\n      </div>\n    );\n  }\n);\n\nexport default EditTop;\n","import * as React from \"react\";\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core/styles\";\nimport { Typography, Box, IconButton, Avatar } from \"@material-ui/core\";\nimport { ThumbUpAlt, ThumbDownAlt, MoreVert } from \"@material-ui/icons\";\nimport moment from \"moment\";\nimport { EditableInput, useEditableInput } from \"@/components/app/Input\";\nimport { useAuth } from \"@/hooks\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {},\n    header: {\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      marginBottom: theme.spacing(1)\n    },\n    infoItem: {\n      \"& + &\": {\n        marginLeft: theme.spacing(1)\n      }\n    },\n    toolBox: {\n      display: \"flex\",\n      alignItems: \"center\",\n      marginRight: theme.spacing(2)\n    },\n    toolText: {\n      marginLeft: theme.spacing(0.5)\n    },\n    description: {\n      marginBottom: theme.spacing(1)\n    }\n  })\n);\n\nexport interface EditInfoHandles {\n  name?: string;\n\n  sub_name?: string;\n\n  description?: string;\n}\n\nexport const EditInfo = React.forwardRef<EditInfoHandles, unknown>(\n  (props, ref) => {\n    const classes = useStyles();\n    const [name, setName] = useEditableInput(\"\");\n    const [sub_name, setSubName] = useEditableInput(\"\");\n    const [description, setDescription] = useEditableInput(\"\");\n    const { member } = useAuth();\n\n    React.useImperativeHandle(ref, () => ({\n      name,\n      sub_name,\n      description\n    }));\n\n    return (\n      <div>\n        <Box className={classes.header}>\n          <div>\n            <Typography variant=\"subtitle1\">\n              <EditableInput\n                value={name}\n                onChange={setName}\n                placeholder=\"name\"\n              />\n              <EditableInput\n                value={sub_name}\n                onChange={setSubName}\n                placeholder=\"sub_name\"\n              />\n            </Typography>\n            <Box display=\"flex\">\n              {/* <Typography variant=\"caption\" className={classes.infoItem}>\n                观看: TODO\n              </Typography> */}\n              <Typography variant=\"caption\" className={classes.infoItem}>\n                发布时间: {moment(Date.now()).format(\"YYYY-MM-DD HH:mm\")}\n              </Typography>\n            </Box>\n          </div>\n          <Box display=\"flex\" alignItems=\"center\">\n            <Box className={classes.toolBox}>\n              <IconButton size=\"small\">\n                <ThumbDownAlt fontSize=\"small\" />\n              </IconButton>\n              <Typography className={classes.toolText}>--</Typography>\n            </Box>\n            <Box className={classes.toolBox}>\n              <IconButton size=\"small\">\n                <ThumbUpAlt fontSize=\"small\" />\n              </IconButton>\n              <Typography className={classes.toolText}>--</Typography>\n            </Box>\n            <IconButton size=\"small\">\n              <MoreVert fontSize=\"small\" />\n            </IconButton>\n          </Box>\n        </Box>\n        <Typography className={classes.description} variant=\"body2\">\n          <EditableInput\n            variant=\"body2\"\n            value={description}\n            onChange={setDescription}\n            placeholder=\"description...\"\n          />\n        </Typography>\n\n        <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\n          <Box display=\"flex\" alignItems=\"center\">\n            <Avatar src={member?.avatar}></Avatar>\n            <Box ml={1}>\n              <Typography variant=\"subtitle2\">{member?.nickname}</Typography>\n              <Typography variant=\"caption\">{member?.description}</Typography>\n            </Box>\n          </Box>\n        </Box>\n      </div>\n    );\n  }\n);\n\nexport default EditInfo;\n","import * as React from \"react\";\nimport {\n  Dialog,\n  Toolbar,\n  AppBar,\n  Button,\n  Box,\n  Theme,\n  makeStyles,\n  createStyles,\n  Fab\n} from \"@material-ui/core\";\nimport {\n  FullScreen,\n  BodyScreen,\n  ContentScreen,\n  AiderScreen\n} from \"@/layouts/PageLayout\";\nimport { Image } from \"@/components/base/Image\";\nimport { DEFULAT_SHADOW_COVER } from \"@/common/constants/default.constant\";\nimport { Placeholder } from \"@/components/base/Placeholder\";\nimport { DialogFileUpload } from \"@/components/app/FileUpload\";\nimport ImageIcon from \"@material-ui/icons/Image\";\nimport { MovieCreation } from \"@material-ui/icons\";\nimport { ShadowPlayer } from \"@/components/app/Player\";\nimport { EditInfo, EditInfoHandles } from \"./EditInfo\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      height: \"100%\"\n    },\n    body: {\n      backgroundColor: theme.palette.background.paper,\n      display: \"flex\",\n      margin: \"0 auto\"\n    },\n    content: {\n      padding: theme.spacing(2, 5),\n      borderRight: `1px solid ${theme.palette.divider}`\n    },\n    aider: {\n      padding: theme.spacing(2, 4),\n      height: \"100%\",\n      overflow: \"auto\"\n    },\n    sourceWrap: {\n      width: \"100%\",\n      position: \"relative\"\n    },\n    toolbarWrap: {\n      width: \"100%\",\n      display: \"flex\",\n      justifyContent: \"space-between\"\n    },\n    imageFab: {\n      position: \"absolute\",\n      left: theme.spacing(4),\n      bottom: theme.spacing(4)\n    },\n    shadowFab: {\n      position: \"absolute\",\n      right: theme.spacing(4),\n      bottom: theme.spacing(4)\n    }\n  })\n);\n\nexport interface EditMediumInfoProp {\n  open: boolean;\n\n  onSave?(medium: unknown): void;\n\n  onCancel?(): void;\n}\n\nexport const EditMediumInfo: React.FC<EditMediumInfoProp> = (\n  props: EditMediumInfoProp\n) => {\n  const { onSave, onCancel } = props;\n\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n  const [url, setUrl] = React.useState(\"\");\n  const [cover, setCover] = React.useState(\"\");\n\n  const infoRef = React.createRef<EditInfoHandles>();\n\n  React.useEffect(() => {\n    setOpen(props.open);\n  }, [props.open]);\n\n  const reset = () => {\n    setOpen(false);\n    setUrl(\"\");\n    setCover(\"\");\n  };\n\n  const handleChangeCover = imageUrl => {\n    if (imageUrl) {\n      setCover(imageUrl);\n    }\n  };\n\n  const handleChangeSource = sourceUrl => {\n    if (sourceUrl) {\n      setUrl(sourceUrl);\n    }\n  };\n\n  const handleSave = () => {\n    onSave &&\n      onSave({\n        url,\n        cover,\n        name: infoRef.current?.name,\n        sub_name: infoRef.current?.sub_name,\n        description: infoRef.current?.description\n      });\n    handleCancle();\n  };\n\n  const handleCancle = () => {\n    setOpen(false);\n    onCancel && onCancel();\n    reset();\n  };\n\n  return (\n    <div>\n      <Dialog open={open} fullScreen onClose={handleCancle}>\n        <AppBar position=\"fixed\">\n          <Toolbar className={classes.toolbarWrap}>\n            <Button onClick={handleSave} color=\"inherit\">\n              保存\n            </Button>\n            <Button onClick={handleCancle} color=\"inherit\">\n              取消\n            </Button>\n          </Toolbar>\n        </AppBar>\n        <Box className={classes.root}>\n          <Toolbar />\n          <FullScreen>\n            <BodyScreen>\n              <div className={classes.sourceWrap}>\n                {url ? (\n                  <ShadowPlayer\n                    url={url}\n                    light={cover ? cover : DEFULAT_SHADOW_COVER}\n                  />\n                ) : (\n                  <Image\n                    aspectRatio={16 / 9}\n                    src={cover ? cover : DEFULAT_SHADOW_COVER}\n                  />\n                )}\n                <DialogFileUpload custom onComplete={handleChangeCover}>\n                  <Fab\n                    color={cover ? \"primary\" : \"default\"}\n                    size=\"medium\"\n                    className={classes.imageFab}\n                  >\n                    <ImageIcon />\n                  </Fab>\n                </DialogFileUpload>\n                <DialogFileUpload custom onComplete={handleChangeSource}>\n                  <Fab\n                    color={url ? \"primary\" : \"default\"}\n                    size=\"medium\"\n                    className={classes.shadowFab}\n                  >\n                    <MovieCreation />\n                  </Fab>\n                </DialogFileUpload>\n              </div>\n            </BodyScreen>\n          </FullScreen>\n          <BodyScreen className={classes.body}>\n            <ContentScreen className={classes.content}>\n              <EditInfo ref={infoRef} />\n            </ContentScreen>\n            <AiderScreen sticky className={classes.aider}>\n              <Placeholder title=\"评论区\" />\n            </AiderScreen>\n          </BodyScreen>\n        </Box>\n      </Dialog>\n    </div>\n  );\n};\n","import React from \"react\";\nimport {\n  Box,\n  // Typography,\n  GridList,\n  GridListTile,\n  Button\n} from \"@material-ui/core\";\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core/styles\";\nimport { MediaOwn, withTool } from \"@/components/app/Media\";\nimport { EditMediumInfo } from \"../EditMediumInfo\";\nimport { Placeholder } from \"@/components/base/Placeholder\";\n\nconst EditMediaOwn = withTool(MediaOwn);\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      padding: theme.spacing(1, 0)\n    },\n    box: {\n      padding: theme.spacing(2, 0),\n\n      \"& + &\": {\n        borderTop: `1px solid ${theme.palette.divider}`\n      }\n    }\n  })\n);\n\nexport interface EditMainHandles {\n  mediums: any[];\n}\n\nexport const EditMain = React.forwardRef<EditMainHandles, unknown>(\n  (props, ref) => {\n    const classes = useStyles();\n    const [openMedium, setOpenMedium] = React.useState(false);\n    const [mediums, setMediums] = React.useState<any[]>([]);\n\n    React.useImperativeHandle(ref, () => ({\n      mediums: mediums\n    }));\n\n    const handleSave = medium => {\n      setMediums([...mediums, medium]);\n    };\n\n    const handleDelete = medium => {\n      const idx = mediums.findIndex(item => item === medium);\n      if (idx !== -1) {\n        mediums.splice(idx, 1);\n        setMediums([...mediums]);\n      }\n    };\n\n    return (\n      <>\n        <Box className={classes.root}>\n          <Box className={classes.box}>\n            {/* <Typography variant=\"subtitle1\" gutterBottom>\n              相关资源\n            </Typography> */}\n            <GridList cellHeight=\"auto\" cols={4}>\n              {mediums.map((item, idx) => {\n                return (\n                  <GridListTile cols={1} key={idx}>\n                    <EditMediaOwn\n                      {...item}\n                      onDelete={() => handleDelete(item)}\n                    />\n                  </GridListTile>\n                );\n              })}\n\n              <Button onClick={() => setOpenMedium(true)}>\n                <Placeholder title=\"Create Medium\" />\n              </Button>\n            </GridList>\n          </Box>\n          {/* <Box className={classes.box}>\n        <Typography variant=\"subtitle1\">精彩点评</Typography>\n      </Box> */}\n        </Box>\n        <EditMediumInfo\n          open={openMedium}\n          onSave={handleSave}\n          onCancel={() => setOpenMedium(false)}\n        />\n      </>\n    );\n  }\n);\n\nexport default EditMain;\n","import * as React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogContentText,\n  DialogActions,\n  Button,\n  DialogProps\n} from \"@material-ui/core\";\n\ninterface ConfirmProps extends Omit<DialogProps, \"open\"> {\n  title?: string;\n  content: string;\n  cancel?: boolean;\n  cancelText?: string;\n  confirmText?: string;\n}\n\ninterface ConfirmEventProps {\n  onConfirm?(): void;\n  onCancel?(): void;\n}\n\nconst ShowDialog = (props: ConfirmEventProps & ConfirmProps) => {\n  const [open, setOpen] = React.useState(true);\n  const handleCancel = () => {\n    setOpen(false);\n    props.onCancel && props.onCancel();\n  };\n\n  const handleConfirm = () => {\n    setOpen(false);\n    props.onConfirm && props.onConfirm();\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n    props.onCancel && props.onCancel();\n  };\n\n  return (\n    <div>\n      <Dialog open={open} onClose={handleClose}>\n        {props.title && <DialogTitle>{props.title}</DialogTitle>}\n        <DialogContent>\n          <DialogContentText>{props.content}</DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          {props.cancel && (\n            <Button onClick={handleCancel} color=\"primary\">\n              {props.cancelText || \"取消\"}\n            </Button>\n          )}\n          <Button onClick={handleConfirm} color=\"primary\" autoFocus>\n            {props.confirmText || \"确定\"}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n};\n\nexport const Confirm = {\n  dialog: function(options: ConfirmProps): Promise<boolean> {\n    return new Promise((resolve, reject) => {\n      const mountPoint = document.createElement(\"div\");\n      document.body.appendChild(mountPoint);\n      const clear = () => {\n        mountPoint.remove();\n      };\n      const onConfirm = () => {\n        resolve(true);\n        clear();\n      };\n      const onCancel = () => {\n        resolve(false);\n        clear();\n      };\n      ReactDOM.render(\n        <div>\n          <ShowDialog {...options} onConfirm={onConfirm} onCancel={onCancel} />\n        </div>,\n        mountPoint\n      );\n    });\n  }\n};\n\nexport default Confirm;\n","import * as React from \"react\";\nimport {\n  EditAbout,\n  EditCast,\n  EditMain,\n  EditTop,\n  EditCastHandles,\n  EditTopHandles,\n  EditMainHandles,\n  EditAboutHandles\n} from \"./modules\";\nimport {\n  ContentScreen,\n  AiderScreen,\n  FullScreen,\n  BodyScreen\n} from \"@/layouts/PageLayout\";\nimport {\n  makeStyles,\n  Theme,\n  createStyles,\n  Box,\n  Tabs,\n  Tab\n} from \"@material-ui/core\";\nimport { useCreateShadowMutation } from \"@/schema\";\nimport { useRouterHelper } from \"@/hooks\";\nimport Confirm from \"@/components/base/Confirm\";\nimport { SpeedDial, SpeedDialAction, SpeedDialIcon } from \"@material-ui/lab\";\nimport { Save } from \"@material-ui/icons\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    main: {\n      backgroundColor: theme.palette.background.paper,\n      padding: theme.spacing(1, 6),\n      borderRight: `1px solid ${theme.palette.divider}`\n    },\n    speedDial: {\n      position: \"fixed\",\n      \"&.MuiSpeedDial-directionUp, &.MuiSpeedDial-directionLeft\": {\n        bottom: theme.spacing(2),\n        right: theme.spacing(2)\n      },\n      \"&.MuiSpeedDial-directionDown, &.MuiSpeedDial-directionRight\": {\n        top: theme.spacing(2),\n        left: theme.spacing(2)\n      }\n    },\n    speedDialIcon: {\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\"\n    }\n  })\n);\n\nexport const ShadowUpload: React.FC = () => {\n  const classes = useStyles();\n  const RouterHelper = useRouterHelper();\n  const [tab, setTab] = React.useState(0);\n  const [open, setOpen] = React.useState(false);\n  const topRef = React.createRef<EditTopHandles>();\n  const mainRef = React.createRef<EditMainHandles>();\n  const aboutRef = React.createRef<EditAboutHandles>();\n  const castRef = React.createRef<EditCastHandles>();\n\n  const [create_shadow] = useCreateShadowMutation({\n    onCompleted() {\n      Confirm.dialog({\n        title: \"提示\",\n        content: \"上传成功。\"\n      }).then(() => {\n        RouterHelper.gotoHome();\n      });\n    }\n  });\n\n  const handleCreateShadow = () => {\n    const topFields = topRef.current;\n    const mainFields = mainRef.current;\n    const aboutFields = aboutRef.current;\n    const castFields = castRef.current;\n\n    create_shadow({\n      variables: {\n        shadow: {\n          title: topFields?.title || \"\",\n          cover: topFields?.cover || \"\",\n          posters: topFields?.posters,\n          description: topFields?.description,\n          credits: castFields?.credits,\n          about: aboutFields?.about,\n          sources: mainFields?.mediums\n        }\n      }\n    });\n  };\n\n  return (\n    <Box>\n      <FullScreen>\n        <BodyScreen>\n          <EditTop ref={topRef} />\n        </BodyScreen>\n      </FullScreen>\n      <BodyScreen>\n        <ContentScreen className={classes.main}>\n          <Tabs value={tab} onChange={(e, val) => setTab(val)}>\n            <Tab label=\"信息\"></Tab>\n            <Tab label=\"相关推荐\" disabled></Tab>\n            <Tab label=\"关于\"></Tab>\n          </Tabs>\n          <div>\n            <div hidden={tab !== 0}>\n              <EditMain ref={mainRef} />\n            </div>\n            {/* {tab === 1 && <Relative />} */}\n            <div hidden={tab !== 2}>\n              <EditAbout ref={aboutRef} />\n            </div>\n            <SpeedDial\n              ariaLabel=\"SpeedDial OpenIcon\"\n              className={classes.speedDial}\n              // hidden={hidden}\n              // icon={<SpeedDialIcon openIcon={<EditIcon />} />}\n              icon={<SpeedDialIcon className={classes.speedDialIcon} />}\n              onClose={() => setOpen(false)}\n              onOpen={() => setOpen(true)}\n              open={open}\n            >\n              <SpeedDialAction\n                icon={<Save />}\n                tooltipTitle=\"Create\"\n                onClick={handleCreateShadow}\n              />\n            </SpeedDial>\n          </div>\n        </ContentScreen>\n        <AiderScreen>\n          <EditCast ref={castRef} />\n        </AiderScreen>\n      </BodyScreen>\n    </Box>\n  );\n};\nexport default ShadowUpload;\n"],"sourceRoot":""}
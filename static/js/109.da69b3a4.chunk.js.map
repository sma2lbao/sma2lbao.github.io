{"version":3,"file":"static/js/109.da69b3a4.chunk.js","mappings":"gYA8BaA,EAAyB,WACpC,IAAMC,GAAWC,EAAAA,EAAAA,MACjB,EAAsBC,EAAAA,SAAe,GAArC,eAAOC,EAAP,KAAYC,EAAZ,KACA,EAAwBF,EAAAA,UAAe,GAAvC,eAAOG,EAAP,KAAaC,EAAb,KACMC,EAASL,EAAAA,YACTM,EAAUN,EAAAA,YACVO,EAAWP,EAAAA,YACXQ,EAAUR,EAAAA,YAEhB,GAAwBS,EAAAA,EAAAA,IAAwB,CAC9CC,YAD8C,WAE5CC,EAAAA,EAAAA,OAAe,CACbC,MAAO,eACPC,QAAS,mCACRC,MAAK,WACNhB,EAAS,QACV,GACF,IARIiB,GAAP,eA0CA,OACE,UAAC,IAAD,YACE,SAAC,KAAD,WACE,SAAC,KAAD,WACE,SAAC,KAAD,CAASC,IAAKX,SAGlB,UAAC,KAAD,YACE,UAAC,KAAD,CACEY,GAAI,SAACC,GAAD,MAAY,CACdC,gBAAiBD,EAAME,QAAQC,WAAWC,MAC1CC,QAASL,EAAMM,QAAQ,EAAG,GAC1BC,YAAY,aAAD,OAAeP,EAAME,QAAQM,SAHtC,EADN,WAOE,UAAC,IAAD,CAAMC,MAAO1B,EAAK2B,SAAU,SAACC,EAAGC,GAAJ,OAAY5B,EAAO4B,EAAnB,EAA5B,WACE,SAAC,IAAD,CAAKC,MAAM,kBACX,SAAC,IAAD,CAAKA,MAAM,2BAAOC,UAAQ,KAC1B,SAAC,IAAD,CAAKD,MAAM,qBAEb,4BACE,gBAAKE,OAAgB,IAARhC,EAAb,UACE,SAAC,KAAD,CAAUe,IAAKV,OAGjB,gBAAK2B,OAAgB,IAARhC,EAAb,UACE,SAAC,KAAD,CAAWe,IAAKT,OAElB,SAAC,IAAD,CACE2B,UAAU,qBACVjB,GAAI,SAACC,GAAD,MAAY,CACdiB,SAAU,QACV,2DAA4D,CAC1DC,OAAQlB,EAAMM,QAAQ,GACtBa,MAAOnB,EAAMM,QAAQ,IAEvB,8DAA+D,CAC7Dc,IAAKpB,EAAMM,QAAQ,GACnBe,KAAMrB,EAAMM,QAAQ,IARpB,EAaJgB,MACE,SAAC,IAAD,CACEvB,GAAI,CACFwB,QAAS,OACTC,WAAY,SACZC,eAAgB,YAItBC,QAAS,kBAAMxC,GAAQ,EAAd,EACTyC,OAAQ,kBAAMzC,GAAQ,EAAd,EACRD,KAAMA,EA1BR,UA4BE,SAAC,IAAD,CACEqC,MAAM,SAAC,IAAD,IACNM,aAAa,SACbC,QA1Fa,WACzB,IAAMC,EAAY3C,EAAO4C,QACnBC,EAAa5C,EAAQ2C,QACrBE,EAAa3C,EAAQyC,QACrBG,EAAc7C,EAAS0C,QAE7BlC,EAAc,CACZsC,UAAW,CACTC,OAAQ,CACN1C,OAAgB,OAAToC,QAAS,IAATA,OAAA,EAAAA,EAAWpC,QAAS,GAC3B2C,WAAoB,OAATP,QAAS,IAATA,OAAA,EAAAA,EAAWO,YAAa,GACnCC,OAAgB,OAATR,QAAS,IAATA,OAAA,EAAAA,EAAWQ,QAAS,GAC3BC,QAAO,OAAET,QAAF,IAAEA,OAAF,EAAEA,EAAWS,QACpBC,YAAW,OAAEV,QAAF,IAAEA,OAAF,EAAEA,EAAWU,YACxBC,QAAO,OAAER,QAAF,IAAEA,OAAF,EAAEA,EAAYQ,QACrBC,OAAkB,OAAXR,QAAW,IAAXA,OAAA,EAAAA,EAAaQ,QAAS,GAC7BC,QAAO,OAAEX,QAAF,IAAEA,OAAF,EAAEA,EAAYY,QAAQC,KAAI,SAACC,GAChC,IAAQC,EAAgDD,EAAhDC,KAAMC,EAA0CF,EAA1CE,SAAUR,EAAgCM,EAAhCN,YAAaF,EAAmBQ,EAAnBR,MAAUW,GAA/C,OAAwDH,EAAxD,GACA,OAAO,QACLC,KAAMA,IAAI,OAAIjB,QAAJ,IAAIA,OAAJ,EAAIA,EAAWpC,OACzBsD,SAAUA,IAAQ,OAAIlB,QAAJ,IAAIA,OAAJ,EAAIA,EAAWO,WACjCG,YAAaA,IAAW,OAAIV,QAAJ,IAAIA,OAAJ,EAAIA,EAAWU,aACvCF,MAAOA,IAAK,OAAIR,QAAJ,IAAIA,OAAJ,EAAIA,EAAWQ,QACxBW,EAEN,OAIR,aAkEK,SAAC,KAAD,WACE,SAAC,KAAD,CAAUnD,IAAKR,WAKxB,EACD,W","sources":["views/shadows/shadow-upload/index.tsx"],"sourcesContent":["import React from 'react';\nimport {\n  EditCast,\n  EditMain,\n  EditTop,\n  EditCastHandles,\n  EditTopHandles,\n  EditMainHandles,\n  EditAboutHandles,\n  EditAbout,\n} from './modules';\nimport {\n  ContentScreen,\n  AiderScreen,\n  FullScreen,\n  BodyScreen,\n} from '@/layouts/page-layout';\nimport {\n  Box,\n  Tabs,\n  Tab,\n  SpeedDial,\n  SpeedDialAction,\n  SpeedDialIcon,\n} from '@mui/material';\nimport { useCreateShadowMutation } from '@/schema';\nimport Confirm from '@/components/base/confirm';\nimport { Save } from '@mui/icons-material';\nimport { useNavigate } from 'react-router-dom';\n\nexport const ShadowUpload: React.FC = () => {\n  const navigate = useNavigate();\n  const [tab, setTab] = React.useState(0);\n  const [open, setOpen] = React.useState(false);\n  const topRef = React.createRef<EditTopHandles>();\n  const mainRef = React.createRef<EditMainHandles>();\n  const aboutRef = React.createRef<EditAboutHandles>();\n  const castRef = React.createRef<EditCastHandles>();\n\n  const [create_shadow] = useCreateShadowMutation({\n    onCompleted() {\n      Confirm.dialog({\n        title: '提示',\n        content: '上传成功。',\n      }).then(() => {\n        navigate('/home');\n      });\n    },\n  });\n\n  const handleCreateShadow = () => {\n    const topFields = topRef.current;\n    const mainFields = mainRef.current;\n    const castFields = castRef.current;\n    const aboutFields = aboutRef.current;\n\n    create_shadow({\n      variables: {\n        shadow: {\n          title: topFields?.title || '',\n          sub_title: topFields?.sub_title || '',\n          cover: topFields?.cover || '',\n          posters: topFields?.posters,\n          description: topFields?.description,\n          credits: castFields?.credits,\n          about: aboutFields?.about || '',\n          sources: mainFields?.mediums.map((medium) => {\n            const { name, sub_name, description, cover, ...rest } = medium;\n            return {\n              name: name || topFields?.title!,\n              sub_name: sub_name || topFields?.sub_title,\n              description: description || topFields?.description,\n              cover: cover || topFields?.cover,\n              ...rest,\n            };\n          }),\n        },\n      },\n    });\n  };\n\n  return (\n    <Box>\n      <FullScreen>\n        <BodyScreen>\n          <EditTop ref={topRef} />\n        </BodyScreen>\n      </FullScreen>\n      <BodyScreen>\n        <ContentScreen\n          sx={(theme) => ({\n            backgroundColor: theme.palette.background.paper,\n            padding: theme.spacing(1, 6),\n            borderRight: `1px solid ${theme.palette.divider}`,\n          })}\n        >\n          <Tabs value={tab} onChange={(e, val) => setTab(val)}>\n            <Tab label=\"信息\"></Tab>\n            <Tab label=\"相关推荐\" disabled></Tab>\n            <Tab label=\"关于\"></Tab>\n          </Tabs>\n          <div>\n            <div hidden={tab !== 0}>\n              <EditMain ref={mainRef} />\n            </div>\n            {/* {tab === 1 && <Relative />} */}\n            <div hidden={tab !== 2}>\n              <EditAbout ref={aboutRef} />\n            </div>\n            <SpeedDial\n              ariaLabel=\"SpeedDial OpenIcon\"\n              sx={(theme) => ({\n                position: 'fixed',\n                '&.MuiSpeedDial-directionUp, &.MuiSpeedDial-directionLeft': {\n                  bottom: theme.spacing(2),\n                  right: theme.spacing(2),\n                },\n                '&.MuiSpeedDial-directionDown, &.MuiSpeedDial-directionRight': {\n                  top: theme.spacing(2),\n                  left: theme.spacing(2),\n                },\n              })}\n              // hidden={hidden}\n              // icon={<SpeedDialIcon openIcon={<EditIcon />} />}\n              icon={\n                <SpeedDialIcon\n                  sx={{\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                  }}\n                />\n              }\n              onClose={() => setOpen(false)}\n              onOpen={() => setOpen(true)}\n              open={open}\n            >\n              <SpeedDialAction\n                icon={<Save />}\n                tooltipTitle=\"Create\"\n                onClick={handleCreateShadow}\n              />\n            </SpeedDial>\n          </div>\n        </ContentScreen>\n        <AiderScreen>\n          <EditCast ref={castRef} />\n        </AiderScreen>\n      </BodyScreen>\n    </Box>\n  );\n};\nexport default ShadowUpload;\n"],"names":["ShadowUpload","navigate","useNavigate","React","tab","setTab","open","setOpen","topRef","mainRef","aboutRef","castRef","useCreateShadowMutation","onCompleted","Confirm","title","content","then","create_shadow","ref","sx","theme","backgroundColor","palette","background","paper","padding","spacing","borderRight","divider","value","onChange","e","val","label","disabled","hidden","ariaLabel","position","bottom","right","top","left","icon","display","alignItems","justifyContent","onClose","onOpen","tooltipTitle","onClick","topFields","current","mainFields","castFields","aboutFields","variables","shadow","sub_title","cover","posters","description","credits","about","sources","mediums","map","medium","name","sub_name","rest"],"sourceRoot":""}
"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[104],{18104:function(e,n,o){o.r(n),o.d(n,{ProfileContext:function(){return U},default:function(){return W}});var r=o(56828),i=o(51955),t=o(56305),a=o(59376),s=o(40192),l=o(14417),d=o(4555),c=o(46405),u=o(81259),v=o(93037),x=o(49941),g=o(78643),h=o(47822),f=o(75662),m=o(16831);function p(){var e,n,o,r,i=(0,d.UO)().username,t=(0,c.gC)({variables:{query:{last:8},author_username:i}}),a=t.data,s=t.loading,l=t.error;return(0,m.jsx)("div",{children:null!==a&&void 0!==a&&null!==(e=a.playlists_paginated)&&void 0!==e&&null!==(n=e.edges)&&void 0!==n&&n.length?(0,m.jsx)(x.Z,{children:a.playlists_paginated.edges.map((function(e,n){return(0,m.jsxs)(g.ZP,{children:[(0,m.jsx)(h.Z,{children:(0,m.jsx)(v.Z,{})}),(0,m.jsx)(f.Z,{primary:e.node.title,secondary:e.node.create_at})]},n)}))}):(0,m.jsx)(u.qZ,{loading:s,error:!!l,placeholder:!(null!==a&&void 0!==a&&null!==(o=a.playlists_paginated)&&void 0!==o&&null!==(r=o.edges)&&void 0!==r&&r.length),placeholderTitle:"No Playlist Here."})})}var Z=o(4962),j=o(16480),_=o(52066),C=o(77969),w=o(34325),y=o(34635),I=o(10926),b=o.n(I),k=function(){var e=i.useContext(U),n=(0,r.Z)(e,2),o=n[0],t=(0,r.Z)(n[1],1)[0],a=(0,d.s0)(),s=(0,y.F)({owner_uid:null===o||void 0===o?void 0:o.user.uid}),c=s.following,u=s.toggleFollow;return(0,m.jsxs)(l.Z,{sx:function(e){return{display:"flex",paddingBottom:e.spacing(2)}},children:[(0,m.jsxs)(l.Z,{sx:{display:"flex",flexDirection:"column",flex:1,overflow:"hidden"},children:[(0,m.jsxs)(l.Z,{sx:function(e){return{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:e.spacing(6)}},children:[(0,m.jsxs)(l.Z,{display:"flex",alignItems:"center",children:[(0,m.jsx)(j.Z,{src:null===o||void 0===o?void 0:o.user.avatar}),(0,m.jsxs)(l.Z,{ml:1,children:[(0,m.jsx)(_.Z,{variant:"subtitle1",children:null===o||void 0===o?void 0:o.user.nickname}),(0,m.jsx)(_.Z,{variant:"caption",children:null===o||void 0===o?void 0:o.user.description})]})]}),c?(0,m.jsx)(C.Z,{sx:function(e){return{marginLeft:e.spacing(1),flexShrink:0}},onClick:u,children:"\u5df2\u5173\u6ce8"}):(0,m.jsx)(C.Z,{sx:function(e){return{marginLeft:e.spacing(1),flexShrink:0}},onClick:u,children:"\u5173\u6ce8"})]}),(0,m.jsxs)(l.Z,{children:[(0,m.jsx)(_.Z,{gutterBottom:!0,variant:"subtitle2",component:"div",children:null===t||void 0===t?void 0:t.title}),(0,m.jsx)(_.Z,{gutterBottom:!0,variant:"body2",color:"textSecondary",component:"div",children:null===t||void 0===t?void 0:t.description}),(0,m.jsx)("div",{children:(0,m.jsxs)(_.Z,{variant:"caption",children:["\u53d1\u5e03\u4e8e\uff1a",b()(null===t||void 0===t?void 0:t.create_at).format("YYYY-MM-DD")]})})]})]}),(0,m.jsx)(l.Z,{sx:function(e){return{flex:1,overflow:"hidden",marginLeft:e.spacing(2)}},children:(0,m.jsx)(w.I8,(0,Z.Z)((0,Z.Z)({},t),{},{onClickRoot:function(){return a("/shadow/".concat(null===t||void 0===t?void 0:t.id))}}))})]})},S=o(27949),N=o(52202),B=o(2815),q=o(66530),P=o(23921),M={footer:"".concat("Medias","-footer")},F=(0,B.ZP)(l.Z)((function(e){var n=e.theme;return(0,N.Z)({},"& .".concat(M.footer),{padding:n.spacing(2),textAlign:"center"})})),R=function(){var e,n,o=(0,d.UO)().username,t=i.useContext(U),a=(0,r.Z)(t,2),s=(0,r.Z)(a[1],2)[1],v=(0,d.s0)(),x=(0,c.zg)({variables:{query:{last:8},author_username:o}}),g=x.data,h=x.loading,f=x.error,p=x.fetchMore;return i.useEffect((function(){var e;null!==g&&void 0!==g&&null!==(e=g.user_shadows_paginated.edges)&&void 0!==e&&e.length&&s(g.user_shadows_paginated.edges[0].node)}),[g,s]),(0,m.jsx)(F,{children:null!==g&&void 0!==g&&g.user_shadows_paginated.totalCount?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(q.Z,{rowHeight:"auto",cols:4,children:g.user_shadows_paginated.edges.map((function(e){return(0,m.jsx)(P.Z,{cols:1,rows:1,children:(0,m.jsx)(w.sV,(0,Z.Z)((0,Z.Z)({},e.node),{},{onClickRoot:function(){return v("/shadow/".concat(e.node.id))}}))},e.cursor)}))}),(null===g||void 0===g||null===(e=g.user_shadows_paginated)||void 0===e||null===(n=e.pageInfo)||void 0===n?void 0:n.hasNextPage)&&(0,m.jsx)(l.Z,{className:M.footer,children:(0,m.jsx)(C.Z,{onClick:function(){var e,n;p({variables:{query:{last:8,before:null===g||void 0===g||null===(e=g.user_shadows_paginated)||void 0===e||null===(n=e.pageInfo)||void 0===n?void 0:n.endCursor}},updateQuery:function(e,n){var o,r=n.fetchMoreResult;if(null!==r&&void 0!==r&&null!==(o=r.user_shadows_paginated)&&void 0!==o&&o.edges){var i=r.user_shadows_paginated,t=i.edges;return{user_shadows_paginated:{pageInfo:i.pageInfo,totalCount:i.totalCount,edges:[].concat((0,S.Z)(e.user_shadows_paginated.edges),(0,S.Z)(t)),__typename:e.user_shadows_paginated.__typename}}}return e}})},disabled:h,children:(0,m.jsx)(_.Z,{color:"textSecondary",variant:"caption",children:h?"\u52a0\u8f7d\u4e2d...":"\u52a0\u8f7d\u66f4\u591a"})})})]}):(0,m.jsx)(u.qZ,{loading:h,error:!!f,placeholder:!0,placeholderTitle:"\u6682\u672a\u4e0a\u4f20\u89c6\u9891"})})},L=o(7607),T="Basic",Y={root:"".concat(T,"-root"),cover:"".concat(T,"-cover"),coverImg:"".concat(T,"-coverImg"),info:"".concat(T,"-info"),pirmaryColor:"".concat(T,"-pirmaryColor"),secondColor:"".concat(T,"-secondColor")},z=(0,B.ZP)("div")((function(e){var n,o=e.theme;return n={},(0,N.Z)(n,"&.".concat(Y.root),{}),(0,N.Z)(n,"& .".concat(Y.cover),{}),(0,N.Z)(n,"& .".concat(Y.coverImg),{width:"100%",objectFit:"contain"}),(0,N.Z)(n,"& .".concat(Y.info),{padding:o.spacing(3,4)}),(0,N.Z)(n,"& .".concat(Y.pirmaryColor),{color:"#fff"}),(0,N.Z)(n,"& .".concat(Y.secondColor),{color:"#aaa"}),n})),D=function(){var e=i.useContext(U),n=(0,r.Z)(e,1)[0],o=(0,c.BI)({variables:{owner_uid:null===n||void 0===n?void 0:n.user.uid.toString()}}),t=o.data,a=o.loading,s=o.error,l=(0,c.Hh)({variables:{follower_uid:null===n||void 0===n?void 0:n.user.uid.toString()}}),d=l.data,v=l.loading,x=l.error;return(0,m.jsxs)(z,{className:Y.root,children:[(0,m.jsx)("div",{className:Y.cover,children:(0,m.jsx)("img",{alt:"cover",className:Y.coverImg,src:L.W2})}),(0,m.jsxs)("div",{className:Y.info,children:[(0,m.jsx)("div",{className:Y.pirmaryColor,children:(0,m.jsx)(_.Z,{gutterBottom:!0,variant:"h4",children:null===n||void 0===n?void 0:n.user.nickname})}),(0,m.jsxs)(_.Z,{component:"div",gutterBottom:!0,className:Y.pirmaryColor,children:[(0,m.jsx)(u.gq,{loading:a,error:!!s}),(null===t||void 0===t?void 0:t.fans_total)||0," \u7c89\u4e1d"]}),(0,m.jsxs)(_.Z,{component:"div",gutterBottom:!0,className:Y.pirmaryColor,children:[(0,m.jsx)(u.gq,{loading:v,error:!!x}),(null===d||void 0===d?void 0:d.follows_total)||0," \u5173\u6ce8"]}),(0,m.jsx)(_.Z,{component:"div",variant:"caption",className:Y.secondColor,gutterBottom:!0,children:null===n||void 0===n?void 0:n.user.description})]})]})},H=o(40663),O=o(13436),U=i.createContext([void 0,[void 0,function(){}]]);function W(){var e=(0,d.UO)().username,n=(0,c.bT)({variables:{username:e}}),o=n.data,v=n.loading,x=n.error,g=i.useState(),h=(0,r.Z)(g,2),f=h[0],Z=h[1],j=i.useState(0),_=(0,r.Z)(j,2),C=_[0],w=_[1];return(0,m.jsxs)(H.IT,{children:[(0,m.jsx)(O.q,{children:(0,m.jsxs)("title",{children:["".concat((null===o||void 0===o?void 0:o.user.username)||(null===o||void 0===o?void 0:o.user.nickname)),"\u7684\u4e2a\u4eba\u4e3b\u9875"]})}),null!==o&&void 0!==o&&o.user?(0,m.jsx)(H.A1,{children:(0,m.jsxs)(U.Provider,{value:[o,[f,Z]],children:[(0,m.jsx)(H._9,{sx:{background:"#333"},children:(0,m.jsx)(D,{})}),(0,m.jsxs)(H.BW,{sx:function(e){return{padding:e.spacing(6,4)}},children:[(0,m.jsx)(k,{}),(0,m.jsx)(t.Z,{}),(0,m.jsxs)("div",{children:[(0,m.jsxs)(a.Z,{value:C,onChange:function(e,n){return w(n)},children:[(0,m.jsx)(s.Z,{label:"\u89c6\u9891"}),(0,m.jsx)(s.Z,{label:"\u5217\u8868",disabled:!0})]}),(0,m.jsx)(l.Z,{py:2,hidden:0!==C,children:(0,m.jsx)(R,{})}),(0,m.jsx)(l.Z,{py:2,hidden:1!==C,children:(0,m.jsx)(p,{})})]})]})]})}):(0,m.jsx)(u.qZ,{loading:v,error:!!x})]})}},93037:function(e,n,o){var r=o(26334);n.Z=void 0;var i=r(o(17112)),t=o(16831),a=(0,i.default)((0,t.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z"}),"PlayCircleFilled");n.Z=a},47822:function(e,n,o){var r=o(14974),i=o(1167),t=o(51955),a=o(18767),s=o(81165),l=o(2815),d=o(18555),c=o(86894),u=o(98311),v=o(16831),x=["className"],g=(0,l.ZP)("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:function(e,n){var o=e.ownerState;return[n.root,"flex-start"===o.alignItems&&n.alignItemsFlexStart]}})((function(e){var n=e.theme,o=e.ownerState;return(0,i.Z)({minWidth:56,color:(n.vars||n).palette.action.active,flexShrink:0,display:"inline-flex"},"flex-start"===o.alignItems&&{marginTop:8})})),h=t.forwardRef((function(e,n){var o=(0,d.Z)({props:e,name:"MuiListItemIcon"}),l=o.className,h=(0,r.Z)(o,x),f=t.useContext(u.Z),m=(0,i.Z)({},o,{alignItems:f.alignItems}),p=function(e){var n=e.alignItems,o=e.classes,r={root:["root","flex-start"===n&&"alignItemsFlexStart"]};return(0,s.Z)(r,c.f,o)}(m);return(0,v.jsx)(g,(0,i.Z)({className:(0,a.Z)(p.root,l),ownerState:m,ref:n},h))}));n.Z=h}}]);
//# sourceMappingURL=104.4e0a2f0e.chunk.js.map
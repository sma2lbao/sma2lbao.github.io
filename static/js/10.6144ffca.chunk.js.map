{"version":3,"sources":["layouts/PageLayout/modules/AiderScreen.tsx","layouts/PageLayout/modules/BodyScreen.tsx","layouts/PageLayout/modules/ContentScreen.tsx","layouts/PageLayout/modules/FullScreen.tsx","layouts/PageLayout/index.tsx","views/Player/modules/Comment/CommentItem.tsx","views/Player/modules/Comment/AddComment.tsx","views/Player/modules/Comment/index.tsx","views/Player/modules/NextPlay/index.tsx","views/Player/modules/VideoInfo/index.tsx","views/Player/modules/VideoPlayer/Progress.tsx","views/Player/modules/VideoPlayer/Volume.tsx","views/Player/modules/VideoPlayer/player.interface.ts","views/Player/modules/VideoPlayer/Tool.tsx","views/Player/modules/VideoPlayer/SettingPanel.tsx","views/Player/modules/VideoPlayer/index.tsx","views/Player/index.tsx"],"names":["useStyles","makeStyles","theme","createStyles","root","maxWidth","AiderScreen","props","classes","className","clsx","children","BodyScreen","ContentScreen","style","Object","assign","width","FullScreen","avatar","marginRight","spacing","main","flex","infoItem","marginLeft","commentText","marginTop","CommentItem","Box","display","Avatar","justifyContent","alignItems","Typography","variant","AddComment","Input","placeholder","item","padding","borderTop","palette","divider","commentTitle","Comment","NextPlay","py","gutterBottom","GridList","cellHeight","cols","GridListTile","header","marginBottom","toolBox","toolText","description","VideoInfo","IconButton","size","ThumbDownAlt","ThumbUpAlt","MoreVert","ml","Button","Progress","duration","currentTime","onChange","formatHandler","hh","moment","hours","mm","minutes","ss","seconds","padStart","durationFormat","Slider","min","max","value","valueLabelDisplay","valueLabelFormat","e","val","onMouseMove","disabled","Volume","volume","muted","onClickMuted","onVolumeChange","anchorRef","React","open","setOpen","ref","onMouseEnter","onMouseLeave","onClick","VolumeOffRounded","VolumeMuteRounded","VolumeDownRounded","VolumeUpRounded","Popper","placement","anchorEl","current","transition","disablePortal","height","step","orientation","PlayRate","MediaType","PlayStatus","Tool","status","onPlay","onPause","Ready","Pause","PlayArrow","Playing","Waiting","SlowMotionVideo","minHeight","backgroundColor","SettingPanel","background","ClickAwayListener","onClickAway","console","log","position","setting","wrap","bottom","right","VideoPlayer","mediaType","src","onDurationChange","onTimeUpdate","onProgress","onLoadedMetadata","onRateChange","onWaiting","onPlaying","onEnded","onError","onCanPlay","rest","videoRef","openSetting","setOpenSetting","Loading","playbackRate","cache","videoInfo","setVideoInfo","M3U8","source","hls","Hls","loadSource","attachMedia","Ended","Error","currentTarget","buffered","length","end","play","pause","num","type","result","seek","Settings","defaultProps","autoPlay","controls","controlsList","loop","playsInline","preload","body","paper","margin","videoRoot","paddingTop","video","top","left","content","borderRight","aider","Player","url","playing"],"mappings":"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","file":"static/js/10.6144ffca.chunk.js","sourcesContent":["import * as React from \"react\";\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { AiderScreenLayoutProps } from \"../layout.d\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      maxWidth: 400\n    }\n  })\n);\n\nexport default function AiderScreen(props: AiderScreenLayoutProps) {\n  const classes = useStyles();\n\n  return (\n    <div className={clsx(classes.root, props.className)}>{props.children}</div>\n  );\n}\n","import * as React from \"react\";\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { BodyScreenLayoutProps } from \"../layout.d\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      maxWidth: 1600\n    }\n  })\n);\n\nexport default function BodyScreen(props: BodyScreenLayoutProps) {\n  const classes = useStyles();\n\n  return (\n    <div className={clsx(classes.root, props.className)}>{props.children}</div>\n  );\n}\n","import * as React from \"react\";\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { ContentScreenLayoutProps } from \"../layout.d\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      maxWidth: 1200\n    }\n  })\n);\n\nexport default function ContentScreen(props: ContentScreenLayoutProps) {\n  const classes = useStyles();\n\n  return (\n    <div\n      style={Object.assign({}, props.width ? { width: props.width } : {})}\n      className={clsx(classes.root, props.className)}\n    >\n      {props.children}\n    </div>\n  );\n}\n","import * as React from \"react\";\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { FullScreenLayoutProps } from \"../layout.d\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      width: \"100%\"\n    }\n  })\n);\n\nexport default function FullScreen(props: FullScreenLayoutProps) {\n  const classes = useStyles();\n\n  return (\n    <div className={clsx(classes.root, props.className)}>{props.children}</div>\n  );\n}\n","import * as React from \"react\";\n\ninterface PageLayoutProps {\n  children: React.ReactNode;\n}\n\nexport default function PageLayout(props: PageLayoutProps) {\n  return <div>{props.children}</div>;\n}\n\nexport { FullScreen, BodyScreen, ContentScreen, AiderScreen } from \"./modules\";\n","import * as React from \"react\";\nimport {\n  Box,\n  Typography,\n  Avatar,\n  makeStyles,\n  createStyles,\n  Theme\n} from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    avatar: {\n      marginRight: theme.spacing(2)\n    },\n    main: {\n      flex: 1\n    },\n    infoItem: {\n      \"& + &\": {\n        marginLeft: theme.spacing(2)\n      }\n    },\n    commentText: {\n      marginTop: theme.spacing(1)\n    }\n  })\n);\n\nfunction CommentItem() {\n  const classes = useStyles();\n\n  return (\n    <Box>\n      <Box display=\"flex\">\n        <Avatar className={classes.avatar}>L</Avatar>\n        <div className={classes.main}>\n          <Box\n            display=\"flex\"\n            justifyContent=\"space-between\"\n            alignItems=\"center\"\n          >\n            <Typography>白居易</Typography>\n            <Typography variant=\"caption\">2019/10/10 12:22</Typography>\n          </Box>\n          <Box display=\"flex\">\n            <Typography variant=\"caption\" className={classes.infoItem}>\n              like 2\n            </Typography>\n            <Typography variant=\"caption\" className={classes.infoItem}>\n              dislike 0\n            </Typography>\n          </Box>\n        </div>\n      </Box>\n      <Typography variant=\"body2\" className={classes.commentText}>\n        邯郸驿里逢冬至，抱膝灯前影伴身。 想得家中夜深坐，还应说着远行人。\n      </Typography>\n    </Box>\n  );\n}\n\nexport default CommentItem;\n","import * as React from \"react\";\nimport { Input } from \"@material-ui/core\";\n\nexport default function AddComment() {\n  return (\n    <div>\n      <Input\n        // defaultValue=\"Hello world\"\n        placeholder=\"请输入评论\"\n      />\n    </div>\n  );\n}\n","import * as React from \"react\";\nimport { Box, Typography } from \"@material-ui/core\";\nimport CommentItem from \"./CommentItem\";\nimport AddComment from \"./AddComment\";\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    item: {\n      padding: theme.spacing(2, 0),\n      \"& + &\": {\n        borderTop: `1px solid ${theme.palette.divider}`\n      }\n    },\n    commentTitle: {\n      padding: theme.spacing(1, 0)\n    }\n  })\n);\n\nexport default function Comment() {\n  const classes = useStyles();\n\n  return (\n    <Box>\n      <AddComment />\n      <Typography variant=\"subtitle2\" className={classes.commentTitle}>\n        评论\n      </Typography>\n      <div>\n        <div className={classes.item}>\n          <CommentItem />\n        </div>\n        <div className={classes.item}>\n          <CommentItem />\n        </div>\n        <div className={classes.item}>\n          <CommentItem />\n        </div>\n        <div className={classes.item}>\n          <CommentItem />\n        </div>\n        <div className={classes.item}>\n          <CommentItem />\n        </div>\n        <div className={classes.item}>\n          <CommentItem />\n        </div>\n        <div className={classes.item}>\n          <CommentItem />\n        </div>\n        <div className={classes.item}>\n          <CommentItem />\n        </div>\n        <div className={classes.item}>\n          <CommentItem />\n        </div>\n        <div className={classes.item}>\n          <CommentItem />\n        </div>\n        <div className={classes.item}>\n          <CommentItem />\n        </div>\n        <div className={classes.item}>\n          <CommentItem />\n        </div>\n      </div>\n    </Box>\n  );\n}\n","import * as React from \"react\";\nimport { VideoWithAuthor } from \"@/components/VideoCard\";\nimport { GridList, GridListTile, Typography, Box } from \"@material-ui/core\";\n\nexport default function NextPlay() {\n  return (\n    <Box py={2}>\n      <Typography variant=\"subtitle1\" gutterBottom>\n        接下来播放\n      </Typography>\n      <GridList cellHeight=\"auto\" cols={4}>\n        <GridListTile cols={1}>\n          <VideoWithAuthor />\n        </GridListTile>\n        <GridListTile cols={1}>\n          <VideoWithAuthor />\n        </GridListTile>\n        <GridListTile cols={1}>\n          <VideoWithAuthor />\n        </GridListTile>\n        <GridListTile cols={1}>\n          <VideoWithAuthor />\n        </GridListTile>\n        <GridListTile cols={1}>\n          <VideoWithAuthor />\n        </GridListTile>\n      </GridList>\n    </Box>\n  );\n}\n","import * as React from \"react\";\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core/styles\";\nimport { Typography, Box, IconButton, Avatar, Button } from \"@material-ui/core\";\nimport { ThumbUpAlt, ThumbDownAlt, MoreVert } from \"@material-ui/icons\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {},\n    header: {\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      marginBottom: theme.spacing(1)\n    },\n    infoItem: {\n      \"& + &\": {\n        marginLeft: theme.spacing(1)\n      }\n    },\n    toolBox: {\n      display: \"flex\",\n      alignItems: \"center\",\n      marginRight: theme.spacing(2)\n    },\n    toolText: {\n      marginLeft: theme.spacing(0.5)\n    },\n    description: {\n      marginBottom: theme.spacing(1)\n    }\n  })\n);\n\nexport default function VideoInfo() {\n  const classes = useStyles();\n\n  return (\n    <div>\n      <Box className={classes.header}>\n        <div>\n          <Typography variant=\"subtitle1\">白雪歌送武判官归京</Typography>\n          <Box display=\"flex\">\n            <Typography variant=\"caption\" className={classes.infoItem}>\n              观看: 22\n            </Typography>\n            <Typography variant=\"caption\" className={classes.infoItem}>\n              发布时间: 2019/10/10\n            </Typography>\n          </Box>\n        </div>\n        <Box display=\"flex\" alignItems=\"center\">\n          <Box className={classes.toolBox}>\n            <IconButton size=\"small\">\n              <ThumbDownAlt />\n            </IconButton>\n            <Typography className={classes.toolText}>26.8k</Typography>\n          </Box>\n          <Box className={classes.toolBox}>\n            <IconButton size=\"small\">\n              <ThumbUpAlt />\n            </IconButton>\n            <Typography className={classes.toolText}>26.8k</Typography>\n          </Box>\n          <IconButton size=\"small\">\n            <MoreVert />\n          </IconButton>\n        </Box>\n      </Box>\n      <Typography className={classes.description} variant=\"body2\">\n        北风卷地白草折，胡天八月即飞雪。 忽如一夜春风来，千树万树梨花开。\n        散入珠帘湿罗幕，狐裘不暖锦衾薄。 将军角弓不得控，都护铁衣冷难着。(难着\n        一作：犹著) 瀚海阑干百丈冰，愁云惨淡万里凝。\n        中军置酒饮归客，胡琴琵琶与羌笛。 纷纷暮雪下辕门，风掣红旗冻不翻。\n        轮台东门送君去，去时雪满天山路。 山回路转不见君，雪上空留马行处。\n      </Typography>\n\n      <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\n        <Box display=\"flex\" alignItems=\"center\">\n          <Avatar>岑</Avatar>\n          <Box ml={1}>\n            <Typography variant=\"subtitle2\">岑参</Typography>\n            <Typography variant=\"caption\">唐代</Typography>\n          </Box>\n        </Box>\n        <Button>订阅</Button>\n      </Box>\n    </div>\n  );\n}\n","import * as React from \"react\";\nimport {\n  // Theme,\n  // createStyles,\n  // makeStyles,\n  Slider,\n  Box,\n  Typography\n} from \"@material-ui/core\";\nimport { ProgressProps } from \"./player.interface\";\nimport moment from \"moment\";\n\n// const useStyles = makeStyles((theme: Theme) => createStyles({}));\n\nexport default function Progress(props: ProgressProps) {\n  const { duration, currentTime, onChange } = props;\n\n  const formatHandler = (duration: number): string => {\n    // 转换成毫秒\n    const hh = moment.duration(duration, \"ms\").hours() + \"\";\n    const mm = moment.duration(duration, \"ms\").minutes() + \"\";\n    const ss = moment.duration(duration, \"ms\").seconds() + \"\";\n    const format =\n      hh.padStart(2, \"0\") +\n      \":\" +\n      mm.padStart(2, \"0\") +\n      \":\" +\n      ss.padStart(2, \"0\");\n    return format;\n  };\n\n  const durationFormat = formatHandler(duration);\n\n  return (\n    <Box display=\"flex\">\n      <Slider\n        // marks\n        // step={1000}\n        min={0}\n        max={duration}\n        value={currentTime}\n        valueLabelDisplay=\"auto\"\n        valueLabelFormat={value => {\n          const valFormat = formatHandler(value);\n          return valFormat;\n        }}\n        onChange={(e, val: any) => {\n          onChange(val);\n        }}\n        onMouseMove={e => {\n          // const { left, width } = e.currentTarget.getBoundingClientRect();\n          // const x = e.clientX;\n          // const percent = (x - left) / width;\n          // const val = duration * percent;\n        }}\n        disabled={duration === 0}\n      />\n      <Typography>{formatHandler(currentTime)}/</Typography>\n      <Typography>{durationFormat}</Typography>\n    </Box>\n  );\n}\n","import * as React from \"react\";\nimport { IconButton, Popper, Slider } from \"@material-ui/core\";\nimport {\n  VolumeOffRounded,\n  VolumeMuteRounded,\n  VolumeDownRounded,\n  VolumeUpRounded\n} from \"@material-ui/icons\";\nimport { VolumeProps } from \"./player.interface\";\n\nexport default function Volume(props: VolumeProps) {\n  const { volume, muted, onClickMuted, onVolumeChange } = props;\n  const anchorRef = React.useRef(null);\n  const [open, setOpen] = React.useState(false);\n\n  return (\n    <span\n      ref={anchorRef}\n      onMouseEnter={() => setOpen(true)}\n      onMouseLeave={() => setOpen(false)}\n    >\n      <IconButton onClick={onClickMuted}>\n        {muted && <VolumeOffRounded />}\n        {!muted && volume === 0 && <VolumeMuteRounded />}\n        {!muted && volume > 0 && volume <= 0.5 && <VolumeDownRounded />}\n        {!muted && volume > 0.5 && <VolumeUpRounded />}\n      </IconButton>\n      <Popper\n        placement=\"top\"\n        open={open}\n        anchorEl={anchorRef.current}\n        transition\n        disablePortal\n      >\n        <div style={{ height: 80 }}>\n          <Slider\n            step={0.01}\n            min={0}\n            max={1}\n            value={volume}\n            valueLabelDisplay=\"off\"\n            orientation=\"vertical\"\n            onChange={(e, val: any) => {\n              onVolumeChange(val);\n            }}\n          />\n        </div>\n      </Popper>\n    </span>\n  );\n}\n","import { ReactEventHandler } from \"react\";\n\n// 播放速率\nexport enum PlayRate {\n  S075 = 0.75,\n  F125 = 1.25,\n  F150 = 1.5,\n  F200 = 2.0\n}\n\n// 媒体类型\nexport enum MediaType {\n  M3U8 = \"m3u8\",\n  NORMAL = \"normal\"\n}\n\n// Play状态\nexport enum PlayStatus {\n  Loading = 0, // 准备中\n  Ready = 1, // 已准备\n  Waiting = 2, // 加载中\n  Playing = 3, //播放中\n  Pause = 4, // 播放暂停\n  Ended = 5, // 播放完毕\n  Error = 6 // 播放出错\n}\n\nexport interface ProgressProps {\n  duration: number;\n  currentTime: number;\n  onChange: (value: number) => void;\n  cache?: number;\n}\n\nexport interface VolumeProps {\n  volume: number;\n  muted: boolean;\n  onClickMuted: () => void;\n  onVolumeChange: (value: number) => void;\n}\n\nexport interface ToolProps {\n  status: PlayStatus;\n  onPlay: () => void;\n  onPause: () => void;\n}\n\ninterface PlayerAttributes {\n  autoPlay?: boolean;\n  controls?: boolean;\n  controlsList?: string;\n  crossOrigin?: string;\n  loop?: boolean;\n  mediaGroup?: string;\n  muted?: boolean;\n  // playsinline?: boolean;\n  preload?: string;\n  src: string;\n\n  height?: number | string;\n  playsInline?: boolean;\n  poster?: string;\n  width?: number | string;\n  disablePictureInPicture?: boolean;\n}\n\ninterface VideoType {\n  mediaType: MediaType;\n}\n\ninterface PlayerCallback<T> {\n  onError?: ReactEventHandler<T>; // also a Media Event\n  onErrorCapture?: ReactEventHandler<T>; // also a Media Event\n  // Media Events\n  onAbort?: ReactEventHandler<T>;\n  onAbortCapture?: ReactEventHandler<T>;\n  onCanPlay?: ReactEventHandler<T>;\n  onCanPlayCapture?: ReactEventHandler<T>;\n  onCanPlayThrough?: ReactEventHandler<T>;\n  onCanPlayThroughCapture?: ReactEventHandler<T>;\n  onDurationChange?: ReactEventHandler<T>;\n  onDurationChangeCapture?: ReactEventHandler<T>;\n  onEmptied?: ReactEventHandler<T>;\n  onEmptiedCapture?: ReactEventHandler<T>;\n  onEncrypted?: ReactEventHandler<T>;\n  onEncryptedCapture?: ReactEventHandler<T>;\n  onEnded?: ReactEventHandler<T>;\n  onEndedCapture?: ReactEventHandler<T>;\n  onLoadedData?: ReactEventHandler<T>;\n  onLoadedDataCapture?: ReactEventHandler<T>;\n  onLoadedMetadata?: ReactEventHandler<T>;\n  onLoadedMetadataCapture?: ReactEventHandler<T>;\n  onLoadStart?: ReactEventHandler<T>;\n  onLoadStartCapture?: ReactEventHandler<T>;\n  onPause?: ReactEventHandler<T>;\n  onPauseCapture?: ReactEventHandler<T>;\n  onPlay?: ReactEventHandler<T>;\n  onPlayCapture?: ReactEventHandler<T>;\n  onPlaying?: ReactEventHandler<T>;\n  onPlayingCapture?: ReactEventHandler<T>;\n  onProgress?: ReactEventHandler<T>;\n  onProgressCapture?: ReactEventHandler<T>;\n  onRateChange?: ReactEventHandler<T>;\n  onRateChangeCapture?: ReactEventHandler<T>;\n  onSeeked?: ReactEventHandler<T>;\n  onSeekedCapture?: ReactEventHandler<T>;\n  onSeeking?: ReactEventHandler<T>;\n  onSeekingCapture?: ReactEventHandler<T>;\n  onStalled?: ReactEventHandler<T>;\n  onStalledCapture?: ReactEventHandler<T>;\n  onSuspend?: ReactEventHandler<T>;\n  onSuspendCapture?: ReactEventHandler<T>;\n  onTimeUpdate?: ReactEventHandler<T>;\n  onTimeUpdateCapture?: ReactEventHandler<T>;\n  onVolumeChange?: ReactEventHandler<T>;\n  onVolumeChangeCapture?: ReactEventHandler<T>;\n  onWaiting?: ReactEventHandler<T>;\n  onWaitingCapture?: ReactEventHandler<T>;\n}\n\nexport interface PlayerProps\n  extends VideoType,\n    PlayerAttributes,\n    PlayerCallback<any> {}\n","import * as React from \"react\";\nimport { Pause, PlayArrow, SlowMotionVideo } from \"@material-ui/icons\";\nimport { ToolProps, PlayStatus } from \"./player.interface\";\nimport { Box, IconButton } from \"@material-ui/core\";\n\nexport default function Tool(props: ToolProps) {\n  const { status, onPlay, onPause } = props;\n  return (\n    <Box>\n      {(status === PlayStatus.Ready || status === PlayStatus.Pause) && (\n        <IconButton onClick={onPlay}>\n          <PlayArrow />\n        </IconButton>\n      )}\n      {status === PlayStatus.Playing && (\n        <IconButton onClick={onPause}>\n          <Pause />\n        </IconButton>\n      )}\n      {status === PlayStatus.Waiting && (\n        <IconButton>\n          <SlowMotionVideo />\n        </IconButton>\n      )}\n    </Box>\n  );\n}\n","import * as React from \"react\";\nimport {\n  Theme,\n  Typography,\n  ClickAwayListener,\n  Popper\n} from \"@material-ui/core\";\nimport { makeStyles, createStyles } from \"@material-ui/styles\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      width: 300,\n      minHeight: 450,\n      backgroundColor: \"#fff\"\n    }\n  })\n);\n\nexport default function SettingPanel() {\n  const classes = useStyles();\n  const anchorRef = React.useRef(null);\n  // const [anchorEl, setAnchorEl] = React.useState<HTMLElement | null>(null)\n  const [open, setOpen] = React.useState(false);\n\n  return (\n    <div className={classes.root}>\n      <div>\n        <Typography>Speed</Typography>\n        <div\n          ref={anchorRef}\n          style={{ background: \"red\" }}\n          onMouseEnter={() => setOpen(true)}\n          // onClick={() => setOpen(true)}\n          onMouseLeave={() => setOpen(false)}\n        >\n          <Typography>Normal</Typography>\n          <Typography>></Typography>\n          <Popper\n            placement=\"left-end\"\n            open={open}\n            anchorEl={anchorRef.current}\n            transition\n            disablePortal\n          >\n            {() => (\n              <ClickAwayListener onClickAway={() => setOpen(false)}>\n                <div\n                  style={{ width: 200, height: 40, background: \"blue\" }}\n                  onClick={() => console.log(\"yi\")}\n                >\n                  yi\n                </div>\n              </ClickAwayListener>\n            )}\n          </Popper>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import * as React from \"react\";\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core/styles\";\nimport { IconButton, ClickAwayListener } from \"@material-ui/core\";\nimport { Settings } from \"@material-ui/icons\";\nimport Progress from \"./Progress\";\nimport Volume from \"./Volume\";\nimport Tool from \"./Tool\";\nimport SettingPanel from \"./SettingPanel\";\nimport {\n  PlayerProps,\n  // PlayRate,\n  PlayStatus,\n  MediaType\n} from \"./player.interface\";\nimport Hls from \"hls.js\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      position: \"relative\",\n      minHeight: 700\n    },\n    setting: {},\n    wrap: {\n      position: \"absolute\",\n      bottom: theme.spacing(2),\n      right: theme.spacing(2)\n    },\n    position: {\n      position: \"absolute\",\n      right: 0,\n      bottom: `calc(100% + ${theme.spacing(1)}px)`\n    }\n  })\n);\n\nfunction VideoPlayer(props: PlayerProps) {\n  const {\n    // 业务相关\n    mediaType,\n    src,\n    // 事件相关\n    onDurationChange,\n    onTimeUpdate,\n    onProgress,\n    onVolumeChange,\n    onLoadedMetadata,\n    onRateChange,\n    onWaiting,\n    onPlaying,\n    onPause,\n    onEnded,\n    onError,\n    onCanPlay,\n    ...rest\n  } = props;\n\n  const videoRef = React.useRef<HTMLVideoElement | null>(null);\n  const classes = useStyles();\n  const [openSetting, setOpenSetting] = React.useState(false);\n  const [videoInfo, setVideoInfo] = React.useState({\n    status: PlayStatus.Loading, // 是否可以播放(需初始化)\n    volume: 1, // 音量值(需初始化)\n    muted: false, // 是否静音(需初始化)\n    playbackRate: 1, // 播放速率\n    duration: 0, // 时长信息（ms）\n    currentTime: 0, // (ms)\n    cache: 0 // 已缓存的长度（ms）\n  });\n  const [source] = React.useState(mediaType === MediaType.M3U8 ? \"\" : src);\n\n  React.useEffect(() => {\n    if (mediaType === MediaType.M3U8 && videoRef.current) {\n      const hls = new Hls();\n      hls.loadSource(src);\n      hls.attachMedia(videoRef.current);\n    }\n    // window.player = videoRef.current\n  }, [mediaType, src]);\n\n  // 全屏播放\n  // const fullscreen = () => {\n  //   videoRef.current &&\n  //     videoRef.current.requestFullscreen({\n  //       navigationUI: \"hide\",\n  //     });\n  // };\n\n  // 画中画\n  // const pipscreen = () => {\n  //   // if (videoRef.current && videoRef.current.requestPictureInPicture) {\n  //   // videoRef.current.requestPictureInPicture();\n  //   // }\n  // };\n\n  // 播放\n  const play = function() {\n    videoRef.current && videoRef.current.play();\n  };\n\n  // 暂停\n  const pause = function() {\n    videoRef.current && videoRef.current.pause();\n  };\n\n  // 跳跃\n  const seek = function(num: number, type: \"ms\" | \"s\" = \"ms\") {\n    let result = num;\n    // 转换成秒\n    if (type === \"ms\") {\n      result = result / 1000;\n    }\n    if (videoRef.current) {\n      videoRef.current.currentTime = result;\n    }\n  };\n\n  // 设置音量数值\n  const volume = (num: number, type: \"small\" | \"percent\" = \"small\") => {\n    let result = num;\n    // 转换成小数\n    if (type === \"percent\") {\n      result = result / 100.0;\n    }\n    if (videoRef.current) {\n      videoRef.current.volume = result;\n    }\n  };\n\n  // 设置是否静音\n  const muted = (val: boolean) => {\n    if (videoRef.current) {\n      videoRef.current.muted = val;\n    }\n  };\n\n  // 设置播放速率\n  // const rate = (val: PlayRate) => {\n  //   if (videoRef.current) {\n  //     videoRef.current.playbackRate = val;\n  //   }\n  // };\n\n  // 处理时长信息\n  const durationHandler = (\n    e: React.SyntheticEvent<HTMLVideoElement, Event>\n  ) => {\n    onDurationChange && onDurationChange(e);\n    // 转换成毫秒\n    const duration = e.currentTarget.duration * 1000;\n    setVideoInfo({\n      ...videoInfo,\n      duration\n    });\n  };\n\n  // 处理当前播放点\n  const timeUpdateHandler = (\n    e: React.SyntheticEvent<HTMLVideoElement, Event>\n  ) => {\n    onTimeUpdate && onTimeUpdate(e);\n    // 转换成毫秒\n    const currentTime = e.currentTarget.currentTime * 1000;\n    setVideoInfo({\n      ...videoInfo,\n      currentTime\n    });\n  };\n\n  // 处理缓存点\n  const progressHandler = (\n    e: React.SyntheticEvent<HTMLVideoElement, Event>\n  ) => {\n    onProgress && onProgress(e);\n    const { buffered, duration } = e.currentTarget;\n    if (!buffered || buffered.length === 0) {\n      return;\n    }\n    const end = buffered.end(buffered.length - 1);\n    const cache = end > duration ? duration * 1000 : end * 1000;\n    setVideoInfo({\n      ...videoInfo,\n      cache\n    });\n  };\n\n  // 处理音量\n  const volumeHandler = (e: React.SyntheticEvent<HTMLVideoElement, Event>) => {\n    onVolumeChange && onVolumeChange(e);\n    setVideoInfo({\n      ...videoInfo,\n      volume: +e.currentTarget.volume,\n      muted: !!e.currentTarget.muted\n    });\n  };\n\n  // 速率处理\n  const rateHandler = (e: React.SyntheticEvent<HTMLVideoElement, Event>) => {\n    onRateChange && onRateChange(e);\n    setVideoInfo({\n      ...videoInfo,\n      playbackRate: +e.currentTarget.playbackRate\n    });\n  };\n\n  // 加载处理\n  const waitingHandler = (e: React.SyntheticEvent<HTMLVideoElement, Event>) => {\n    onWaiting && onWaiting(e);\n    setVideoInfo({\n      ...videoInfo,\n      status: PlayStatus.Waiting\n    });\n  };\n\n  // 播放处理\n  const playingHandler = (e: React.SyntheticEvent<HTMLVideoElement, Event>) => {\n    onPlaying && onPlaying(e);\n    setVideoInfo({\n      ...videoInfo,\n      status: PlayStatus.Playing\n    });\n  };\n\n  // 暂停处理\n  const pauseHandler = (e: React.SyntheticEvent<HTMLVideoElement, Event>) => {\n    onPause && onPause(e);\n    setVideoInfo({\n      ...videoInfo,\n      status: PlayStatus.Pause\n    });\n  };\n\n  // 播放完成处理\n  const endedHandler = (e: React.SyntheticEvent<HTMLVideoElement, Event>) => {\n    onEnded && onEnded(e);\n    setVideoInfo({\n      ...videoInfo,\n      status: PlayStatus.Ended\n    });\n  };\n\n  // 播放出错处理\n  const errorHandler = (e: React.SyntheticEvent<HTMLVideoElement, Event>) => {\n    onError && onError(e);\n    setVideoInfo({\n      ...videoInfo,\n      status: PlayStatus.Error\n    });\n  };\n\n  // 能播放处理\n  const canplayHandler = (e: React.SyntheticEvent<HTMLVideoElement, Event>) => {\n    onCanPlay && onCanPlay(e);\n    setVideoInfo({\n      ...videoInfo,\n      status: PlayStatus.Ready\n    });\n  };\n\n  // 处理video需要初始化获取的信息\n  const loadedMetadataHandler = (\n    e: React.SyntheticEvent<HTMLVideoElement, Event>\n  ) => {\n    onLoadedMetadata && onLoadedMetadata(e);\n    const { volume, muted, playbackRate } = e.currentTarget;\n    // console.dir(e.currentTarget)\n    setVideoInfo({\n      ...videoInfo,\n      volume,\n      muted,\n      playbackRate\n    });\n  };\n\n  return (\n    <div className={classes.root}>\n      <video\n        {...rest}\n        src={source}\n        ref={videoRef}\n        // 状态事件\n        onWaiting={waitingHandler}\n        onPlaying={playingHandler}\n        onPause={pauseHandler}\n        onEnded={endedHandler}\n        onError={errorHandler}\n        onCanPlay={canplayHandler}\n        // 其他事件\n        onLoadedMetadata={loadedMetadataHandler}\n        onVolumeChange={volumeHandler}\n        onProgress={progressHandler}\n        onTimeUpdate={timeUpdateHandler}\n        onDurationChange={durationHandler}\n        onRateChange={rateHandler}\n      />\n      <Tool status={videoInfo.status} onPlay={play} onPause={pause} />\n      <Volume\n        volume={videoInfo.volume}\n        muted={videoInfo.muted}\n        onClickMuted={() => muted(!videoInfo.muted)}\n        onVolumeChange={val => volume(val)}\n      />\n      <Progress\n        duration={videoInfo.duration} // 时长信息（ms）\n        currentTime={videoInfo.currentTime} // (ms)\n        onChange={(value: number) => seek(value)}\n      />\n      <ClickAwayListener onClickAway={() => setOpenSetting(false)}>\n        <div className={classes.wrap}>\n          <IconButton\n            className={classes.setting}\n            size=\"small\"\n            onClick={() => setOpenSetting(true)}\n          >\n            <Settings />\n          </IconButton>\n          {openSetting && (\n            <div className={classes.position}>\n              <SettingPanel />\n            </div>\n          )}\n        </div>\n      </ClickAwayListener>\n    </div>\n  );\n}\n\nVideoPlayer.defaultProps = {\n  autoPlay: false,\n  controls: false,\n  controlsList: \"nodownload nofullscreen noremoteplayback\",\n  loop: false,\n  muted: false,\n  playsInline: false,\n  width: 200,\n  height: 100,\n  preload: \"auto\"\n} as Partial<PlayerProps>;\n\nexport default VideoPlayer;\n","import * as React from \"react\";\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core/styles\";\nimport ReactPlayer from \"react-player\";\nimport { Box } from \"@material-ui/core\";\nimport {\n  FullScreen,\n  BodyScreen,\n  ContentScreen,\n  AiderScreen\n} from \"@/layouts/PageLayout\";\n// import Image from \"@/components/Image\";\nimport { NextPlay, VideoInfo, Comment } from \"./modules\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      height: \"100%\"\n    },\n    body: {\n      backgroundColor: theme.palette.background.paper,\n      display: \"flex\",\n      margin: \"0 auto\"\n    },\n    videoRoot: {\n      width: \"100%\",\n      paddingTop: \"calc(56.25%)\",\n      position: \"relative\"\n    },\n    video: {\n      width: \"100% !important\",\n      height: \"100% !important\",\n      position: \"absolute\",\n      top: 0,\n      left: 0\n    },\n    content: {\n      padding: theme.spacing(2, 5),\n      borderRight: `1px solid ${theme.palette.divider}`\n    },\n    aider: {\n      padding: theme.spacing(2, 4)\n    }\n  })\n);\n\nexport default function Player() {\n  const classes = useStyles();\n\n  return (\n    <Box className={classes.root}>\n      <FullScreen>\n        {/* <Image aspectRatio={16 / 9} /> */}\n        <div className={classes.videoRoot}>\n          <ReactPlayer\n            className={classes.video}\n            url=\"https://www.youtube.com/watch?v=ysz5S6PUM-U\"\n            playing\n          />\n        </div>\n      </FullScreen>\n      <BodyScreen className={classes.body}>\n        <ContentScreen className={classes.content}>\n          <VideoInfo />\n          <NextPlay />\n        </ContentScreen>\n        <AiderScreen className={classes.aider}>\n          <Comment />\n        </AiderScreen>\n      </BodyScreen>\n    </Box>\n  );\n}\n"],"sourceRoot":""}
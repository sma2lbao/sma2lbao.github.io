{"version":3,"sources":["views/movies/MovieHome/modules/Filter/index.tsx","views/movies/MovieHome/modules/Sort/index.tsx","views/movies/MovieHome/index.tsx"],"names":["useStyles","makeStyles","theme","createStyles","root","Filter","classes","Box","className","Typography","variant","ToggleButtonGroup","value","ToggleButton","Chip","color","size","onDelete","icon","Face","backgroundColor","palette","background","paper","display","padding","spacing","Sort","React","sorts","setSorts","onChange","_","newSorts","content","margin","filterFull","justifyContent","flexDirection","alignItems","borderBottom","divider","gridRoot","gridTemplateColumns","gridGap","gridAutoFlow","gridCardMain","gridRow","gridColumn","scollButton","position","right","bottom","MovieHome","props","useMoviesPaginatedQuery","variables","query","first","data","fetchMore","window","trigger","useScrollTrigger","target","undefined","disableHysteresis","threshold","movies_paginated","edges","map","edge","key","cursor","pageInfo","hasNextPage","onClick","last","after","endCursor","updateQuery","previousQueryResult","fetchMoreResult","totalCount","__typename","sticky","Zoom","in","Fab","KeyboardArrowUp"],"mappings":"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","file":"static/js/16.52539c4d.chunk.js","sourcesContent":["import * as React from \"react\";\nimport {\n  Box,\n  makeStyles,\n  Theme,\n  createStyles,\n  Typography,\n  Chip\n} from \"@material-ui/core\";\nimport { ToggleButtonGroup, ToggleButton } from \"@material-ui/lab\";\nimport { Face } from \"@material-ui/icons\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      // display: \"flex\",\n      // alignItems: \"center\",\n    }\n  })\n);\n\nexport default function Filter() {\n  const classes = useStyles();\n\n  return (\n    <Box className={classes.root}>\n      <div>\n        <Typography variant=\"caption\">地区</Typography>\n        <div>\n          <ToggleButtonGroup value={1}>\n            <ToggleButton value={1}>其他</ToggleButton>\n            <ToggleButton value={2}>其他</ToggleButton>\n            <ToggleButton value={3}>其他</ToggleButton>\n            <ToggleButton value={4}>其他</ToggleButton>\n          </ToggleButtonGroup>\n        </div>\n      </div>\n\n      <div>\n        <Typography variant=\"caption\">地区</Typography>\n        <div>\n          <ToggleButtonGroup value={1}>\n            <ToggleButton value={1}>其他</ToggleButton>\n            <ToggleButton value={2}>其他</ToggleButton>\n            <ToggleButton value={3}>其他</ToggleButton>\n            <ToggleButton value={4}>其他</ToggleButton>\n          </ToggleButtonGroup>\n        </div>\n      </div>\n\n      <div>\n        <Typography variant=\"caption\">标签</Typography>\n        <div>\n          <Chip\n            color=\"secondary\"\n            size=\"small\"\n            onDelete={() => {}}\n            icon={<Face />}\n          />\n        </div>\n      </div>\n    </Box>\n  );\n}\n","import * as React from \"react\";\nimport { Box, makeStyles, Theme, createStyles } from \"@material-ui/core\";\nimport { ToggleButtonGroup, ToggleButton } from \"@material-ui/lab\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      backgroundColor: theme.palette.background.paper,\n      display: \"flex\",\n      padding: theme.spacing(2, 0)\n    }\n  })\n);\n\nexport default function Sort() {\n  const classes = useStyles();\n  const [sorts, setSorts] = React.useState(() => [1, 2]);\n\n  const _changeCall = (_, newSorts: any[]) => {\n    setSorts(newSorts);\n  };\n\n  return (\n    <Box className={classes.root}>\n      <ToggleButtonGroup value={sorts} onChange={_changeCall}>\n        <ToggleButton value={1}></ToggleButton>\n        <ToggleButton value={2}></ToggleButton>\n        <ToggleButton value={3}></ToggleButton>\n        <ToggleButton value={4}></ToggleButton>\n      </ToggleButtonGroup>\n    </Box>\n  );\n}\n","import * as React from \"react\";\nimport { VideoWithAuthor } from \"@/components/app/VideoCard\";\nimport { ContentScreen, AiderScreen, BodyScreen } from \"@/layouts/PageLayout\";\nimport { Filter, Sort } from \"./modules\";\nimport { Theme, makeStyles, createStyles } from \"@material-ui/core/styles\";\nimport { Box, Fab, useScrollTrigger, Zoom } from \"@material-ui/core\";\nimport { KeyboardArrowUp } from \"@material-ui/icons\";\nimport { useMoviesPaginatedQuery } from \"@/schema\";\n\ninterface Props {\n  window?: () => Window;\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    content: {\n      margin: \"0 auto\",\n      padding: theme.spacing(2),\n      background: theme.palette.background.paper\n    },\n    filterFull: {\n      background: theme.palette.background.paper,\n      display: \"flex\",\n      justifyContent: \"center\",\n      flexDirection: \"column\",\n      alignItems: \"center\",\n      borderBottom: `1px solid ${theme.palette.divider}`\n    },\n    gridRoot: {\n      display: \"grid\",\n      gridTemplateColumns: \"repeat(4, 1fr)\",\n      gridGap: theme.spacing(1, 1),\n      gridAutoFlow: \"row dense\"\n    },\n    gridCardMain: {\n      gridRow: \"2 span\",\n      gridColumn: \"2 span\"\n    },\n    scollButton: {\n      position: \"fixed\",\n      right: theme.spacing(2),\n      bottom: theme.spacing(2)\n    }\n  })\n);\n\nexport default function MovieHome(props: Props) {\n  const { data, fetchMore } = useMoviesPaginatedQuery({\n    variables: {\n      query: {\n        first: 8\n      }\n    }\n  });\n  const loadMore = () => {\n    fetchMore({\n      variables: {\n        query: {\n          last: 8,\n          after: data?.movies_paginated?.pageInfo?.endCursor\n        }\n      },\n      updateQuery: (previousQueryResult, { fetchMoreResult }) => {\n        if (fetchMoreResult?.movies_paginated?.edges) {\n          const {\n            edges,\n            pageInfo,\n            totalCount\n          } = fetchMoreResult.movies_paginated;\n          return {\n            movies_paginated: {\n              pageInfo,\n              totalCount,\n              edges: [...previousQueryResult.movies_paginated.edges, ...edges],\n              __typename: previousQueryResult.movies_paginated.__typename\n            }\n          };\n        }\n        return previousQueryResult;\n      }\n    });\n  };\n\n  const classes = useStyles();\n  const { window } = props;\n  const trigger = useScrollTrigger({\n    target: window ? window() : undefined,\n    disableHysteresis: true,\n    threshold: 500\n  });\n\n  return (\n    <BodyScreen>\n      <ContentScreen className={classes.content}>\n        <Box className={classes.gridRoot}>\n          {data?.movies_paginated?.edges?.map(edge => {\n            return (\n              <div key={edge.cursor} className={classes.gridCardMain}>\n                <VideoWithAuthor />\n              </div>\n            );\n          })}\n          {data?.movies_paginated?.pageInfo?.hasNextPage && (\n            <div onClick={loadMore}>load more</div>\n          )}\n        </Box>\n      </ContentScreen>\n      <AiderScreen sticky>\n        <Sort />\n        <Filter />\n      </AiderScreen>\n      <Zoom in={trigger}>\n        <Fab size=\"small\" className={classes.scollButton}>\n          <KeyboardArrowUp />\n        </Fab>\n      </Zoom>\n    </BodyScreen>\n  );\n}\n"],"sourceRoot":""}
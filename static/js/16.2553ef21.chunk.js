(this.webpackJsonpmiss=this.webpackJsonpmiss||[]).push([[16],{575:function(e,t,a){"use strict";a.r(t);var n=a(31),r=a(0),c=a.n(r),l=a(445),o=(a(540),r.forwardRef((function(e,t){var a=e.raw,c=e.onBlur,o=e.placeholder,i=r.useState((function(){return a?l.EditorState.createWithContent(Object(l.convertFromRaw)(JSON.parse(a))):l.EditorState.createEmpty()})),u=Object(n.a)(i,2),d=u[0],s=u[1];return r.useImperativeHandle(t,(function(){return{getRawString:function(){return JSON.stringify(Object(l.convertToRaw)(d.getCurrentContent()))}}})),r.createElement(l.Editor,{editorState:d,onChange:s,onBlur:c,placeholder:o})}))),i=r.forwardRef((function(e,t){var a=r.useState(""),c=Object(n.a)(a,2),l=c[0],i=c[1];r.useImperativeHandle(t,(function(){return{about:l}}));var u=r.createRef();return r.createElement("div",null,r.createElement(o,{ref:u,onBlur:function(){var e,t=null===(e=u.current)||void 0===e?void 0:e.getRawString();i(t)}}))})),u=a(353),d=a(332),s=a(310),m=a(436),p=a(93),v=a(307),E=a(272),b=a(320),f=a(334),g=a(321),h=a(393),O=a(322),j=a(269),k=a(264),C=a(317),y=a(565),x=a(146),R=Object(j.a)((function(e){return Object(k.a)({root:{backgroundColor:e.palette.background.paper}})})),w=r.forwardRef((function(e,t){var a=R(),c=r.useState([]),l=Object(n.a)(c,2),o=l[0],i=l[1];r.useImperativeHandle(t,(function(){return{credits:o}}));var j=function(e){var t=e.target,a=t.dataset,n=t.value;if(a.idx&&a.key){var r=o[a.idx];r[a.key]=n,i([].concat(Object(u.a)(o),[r]))}},k=function(e){var t=e.currentTarget.dataset;if(t.idx){var a=o.splice(+t.idx,1);i(Object(u.a)(a))}};return r.createElement(d.a,{className:a.root},r.createElement(s.a,{subheader:r.createElement(m.a,null,r.createElement(p.a,null,"\u6f14\u804c\u8868"),r.createElement(v.a,{onClick:function(){i([].concat(Object(u.a)(o),[{avatar:"",name:"",description:"",tags:[]}]))},size:"small"},r.createElement(C.a,{fontSize:"small"})))},o.length?r.createElement(r.Fragment,null,o.map((function(e,t){return r.createElement(E.a,{key:t},r.createElement("div",null,r.createElement(b.a,null,r.createElement(f.a,{src:e.avatar}))),r.createElement(g.a,{primary:r.createElement("div",null,r.createElement(h.a,{"data-idx":t,"data-key":"name",onChange:j,value:e.name,placeholder:"\u8bf7\u8f93\u5165\u540d\u5b57"})),secondary:r.createElement("div",null,r.createElement(h.a,{"data-idx":t,"data-key":"description",value:e.description,placeholder:"\u8bf7\u8f93\u5165\u63cf\u8ff0"}))}),r.createElement(O.a,null,r.createElement(v.a,{"data-idx":t,onClick:k},r.createElement(y.a,null))))}))):r.createElement("div",null,r.createElement(x.a,{title:"\u8bf7\u6dfb\u52a0\u6f14\u804c\u4eba\u5458"}))))})),S=a(69),N=a(53),H=a(325),T=a(326),B=a(323),_=function(e){var t=r.useState(e),a=Object(n.a)(t,2),c=a[0],l=a[1];return[c,function(e){l(e.target.value)}]},F=Object(j.a)((function(e){return Object(k.a)({root:{},input:{borderColor:"transparent"}})})),I=function(e){var t=e.value,a=e.onChange,n=e.placeholder,c=F();return r.createElement(h.a,{classes:{root:c.root},value:t,onChange:a,placeholder:n})},J=Object(j.a)((function(e){return Object(k.a)({root:{position:"relative",width:"100%"},aider:{position:"absolute",left:0,top:0,bottom:0,width:"45%",padding:e.spacing(8)},aiderContent:{width:"50%",padding:e.spacing(2),borderRadius:e.shape.borderRadius,height:"100%",background:"rgba(0, 0, 0, .1)",backdropFilter:"blur(8px)",overflow:"auto"},main:{position:"absolute",top:"50%",right:0,width:"50%",padding:e.spacing(0,8),transform:"translate(0, -50%)",color:"#fff",display:"flex",flexDirection:"column"},mainContent:{background:"rgba(0, 0, 0, .1)",backdropFilter:"blur(8px)",padding:e.spacing(4),borderRadius:e.shape.borderRadius},posters:{},posterTool:{display:"none"}})})),z=r.forwardRef((function(e,t){var a=J(),c=_(""),l=Object(n.a)(c,2),o=l[0],i=l[1],s=_(""),m=Object(n.a)(s,2),v=m[0],E=m[1],b=_(""),f=Object(n.a)(b,2),g=f[0],h=f[1],O=r.useState([]),j=Object(n.a)(O,2),k=j[0],C=j[1],y=r.useState(""),x=Object(n.a)(y,2),R=x[0],w=x[1];r.useEffect((function(){k&&k.length>0?R&&k.includes(R)||w(k[0]):w("")}),[R,k]),r.useImperativeHandle(t,(function(){return{title:o,sub_title:v,description:g,posters:k,cover:R}}));var F=function(e){if(window.confirm("delete?")){var t=e.currentTarget.dataset;t.idx&&(k.splice(+t.idx,1),C(Object(u.a)(k)))}},z=function(e){var t=e.currentTarget.dataset;t.idx&&w(k[t.idx])};return r.createElement("div",{className:a.root},r.createElement(S.a,{aspectRatio:16/9,src:N.c}),r.createElement("div",{className:a.aider},r.createElement("div",{className:a.aiderContent},r.createElement(H.a,{cellHeight:"auto",className:a.posters,cols:1},k.map((function(e,t){return r.createElement(T.a,{key:e,cols:1},r.createElement(S.a,{aspectRatio:16/9,src:e,alt:"poster"+t}),r.createElement("div",{className:a.posterTool},r.createElement("div",{"data-idx":t,onClick:F},"remove poster"),r.createElement("div",{"data-idx":t,onClick:z},R===e?"is cover":"isn't cover")))})),r.createElement(T.a,{cols:1,onClick:function(){var e=prompt("image url.");e&&!k.includes(e)&&C([].concat(Object(u.a)(k),[e]))}},r.createElement("img",{alt:"add poster"}))))),r.createElement("div",{className:a.main},r.createElement("div",{className:a.mainContent},r.createElement(p.a,{gutterBottom:!0,variant:"h4",component:"div"},r.createElement(I,{value:o,onChange:i,placeholder:"movie title"})),r.createElement(p.a,{gutterBottom:!0,variant:"subtitle1",component:"div"},r.createElement(I,{value:v,onChange:E,placeholder:"\u8bf7\u8f93\u5165\u526f\u6807\u9898"})),r.createElement(p.a,{variant:"body2",component:"div"},r.createElement(I,{value:g,onChange:h,placeholder:"\u8bf7\u8f93\u5165\u7535\u5f71\u63cf\u8ff0..."})),r.createElement(d.a,{mt:3},r.createElement(B.a,{disabled:!0,size:"large",variant:"contained",color:"primary"},"\u64ad\u653e")))))})),P=a(75),W=a(61),D=a(77),M=a(566),U=a(313),q=a(314),A=a(94),G=Object(j.a)((function(e){return Object(k.a)({root:{height:"100%"},body:{backgroundColor:e.palette.background.paper,display:"flex",margin:"0 auto"},content:{padding:e.spacing(2,5),borderRight:"1px solid ".concat(e.palette.divider)},aider:{padding:e.spacing(2,4),height:"100%",overflow:"auto"},sourceWrap:{width:"100%",position:"relative"}})})),K=function(e){var t=e.onSave,a=e.onCancel,c=G(),l=r.useState(!1),o=Object(n.a)(l,2),i=o[0],u=o[1],s=r.useState({name:"",url:"",alias_name:"",description:"",cover:""}),m=Object(n.a)(s,2),v=m[0],E=m[1];r.useEffect((function(){u(e.open)}),[e.open]);var b=function(e){var t=e.target,a=t.dataset,n=t.value;a.key&&E(Object(D.a)(Object(D.a)({},v),{},Object(W.a)({},a.key,n)))},f=function(){u(!1),a&&a(),u(!1),E({name:"",url:"",alias_name:"",description:"",cover:""})};return r.createElement("div",null,r.createElement(M.a,{open:i,fullScreen:!0,onClose:f},r.createElement(U.a,{position:"relative"},r.createElement(q.a,null,r.createElement(B.a,{onClick:function(){t&&t(v),f()},color:"inherit"},"save"),r.createElement(B.a,{onClick:f,color:"inherit"},"cancle"))),r.createElement(d.a,{className:c.root},r.createElement(A.d,null,r.createElement(A.b,null,r.createElement("div",{className:c.sourceWrap},r.createElement(S.a,{aspectRatio:16/9,src:N.c}),r.createElement("div",{onClick:function(){var e=prompt("image url.");e&&E(Object(D.a)(Object(D.a)({},v),{},{cover:e}))}},"add cover"),r.createElement("div",{onClick:function(){var e=prompt("source url.");e&&E(Object(D.a)(Object(D.a)({},v),{},{cover:e}))}},"add source")))),r.createElement(A.b,{className:c.body},r.createElement(A.c,{className:c.content},r.createElement(p.a,null,r.createElement(h.a,{inputProps:{"data-key":"name"},value:v.name,onChange:b,placeholder:"name"})),r.createElement(p.a,null,r.createElement(h.a,{inputProps:{"data-key":"alias_name"},value:v.alias_name,onChange:b,placeholder:"alias_name"})),r.createElement(p.a,null,r.createElement(h.a,{rows:4,inputProps:{"data-key":"description"},value:v.description,onChange:b,placeholder:"description..."}))),r.createElement(A.a,{sticky:!0,className:c.aider},r.createElement(x.a,{title:"\u8bc4\u8bba\u533a"}))))))},L=Object(j.a)((function(e){return Object(k.a)({root:{padding:e.spacing(1,0)},box:{padding:e.spacing(2,0),"& + &":{borderTop:"1px solid ".concat(e.palette.divider)}}})})),Q=c.a.forwardRef((function(e,t){var a=L(),r=c.a.useState(!1),l=Object(n.a)(r,2),o=l[0],i=l[1],s=c.a.useState([]),m=Object(n.a)(s,2),v=m[0],E=m[1];c.a.useImperativeHandle(t,(function(){return{mediums:v}}));return c.a.createElement(c.a.Fragment,null,c.a.createElement(d.a,{className:a.root},c.a.createElement(d.a,{className:a.box},c.a.createElement(p.a,{variant:"subtitle1",gutterBottom:!0},"\u76f8\u5173\u8d44\u6e90"),c.a.createElement(H.a,{cellHeight:"auto",cols:4},v.map((function(e,t){return c.a.createElement(T.a,{cols:1,key:t},c.a.createElement(P.a,e))})),c.a.createElement(B.a,{onClick:function(){return i(!0)}},"\u6dfb\u52a0")))),c.a.createElement(K,{open:o,onSave:function(e){E([].concat(Object(u.a)(v),[e]))},onCancel:function(){return i(!1)}}))})),V=a(579),X=a(553),Y=a(54);a.d(t,"MovieUpload",(function(){return $}));var Z=Object(j.a)((function(e){return Object(k.a)({main:{backgroundColor:e.palette.background.paper,padding:e.spacing(1,6),borderRight:"1px solid ".concat(e.palette.divider)}})})),$=function(){var e=Z(),t=r.useState(0),a=Object(n.a)(t,2),c=a[0],l=a[1],o=r.createRef(),u=r.createRef(),s=r.createRef(),m=r.createRef(),p=Object(Y.b)(),v=Object(n.a)(p,1)[0];return r.createElement(d.a,null,r.createElement(A.d,null,r.createElement(A.b,null,r.createElement(z,{ref:o}))),r.createElement(A.b,null,r.createElement(A.c,{className:e.main},r.createElement(V.a,{value:c,onChange:function(e,t){return l(t)}},r.createElement(X.a,{label:"\u4fe1\u606f"}),r.createElement(X.a,{label:"\u76f8\u5173\u63a8\u8350",disabled:!0}),r.createElement(X.a,{label:"\u5173\u4e8e"})),r.createElement("div",null,r.createElement("div",{hidden:0!==c},r.createElement(Q,{ref:u})),r.createElement("div",{hidden:2!==c},r.createElement(i,{ref:s})),r.createElement("div",null,r.createElement("div",{onClick:function(){var e=o.current,t=u.current,a=s.current,n=m.current;v({variables:{movie:{title:(null===e||void 0===e?void 0:e.title)||"",cover:(null===e||void 0===e?void 0:e.cover)||"",posters:null===e||void 0===e?void 0:e.posters,description:null===e||void 0===e?void 0:e.description,credits:null===n||void 0===n?void 0:n.credits,about:null===a||void 0===a?void 0:a.about,sources:null===t||void 0===t?void 0:t.mediums}}})}},"create")))),r.createElement(A.a,null,r.createElement(w,{ref:m}))))};t.default=$}}]);
//# sourceMappingURL=16.2553ef21.chunk.js.map
{"version":3,"sources":["components/base/Editor/Controls.tsx","components/base/Editor/NormalEditor.tsx","components/base/Editor/index.tsx","views/movies/MovieUpload/modules/EditAbout/index.tsx","components/app/Input/useEditableInput.tsx","components/app/Input/EditableInput.tsx","views/movies/MovieUpload/modules/EditCast/index.tsx","components/app/FileUpload/FileUpload.tsx","views/movies/MovieUpload/modules/EditTop/index.tsx","views/movies/MovieUpload/modules/EditMediumInfo/index.tsx","views/movies/MovieUpload/modules/EditMain/index.tsx","components/base/Confirm/index.tsx","views/movies/MovieUpload/index.tsx"],"names":["useStyles","makeStyles","theme","createStyles","paper","display","border","palette","divider","flexWrap","margin","spacing","grouped","borderRadius","shape","BLOCK_TYPES","label","style","value","icon","FormatQuote","FormatListBulleted","FormatListNumbered","Code","INLINE_STYLES","FormatBold","FormatItalic","FormatUnderlined","Controls","props","classes","React","inlines","setInlines","blocktype","setBlocktype","toggleBlockType","toggleInlineStyle","Paper","elevation","className","ToggleButtonGroup","onChange","event","newFormats","currentTarget","dataset","map","type","ToggleButton","data-style","key","Divider","flexItem","orientation","exclusive","newFormat","root","editor","minHeight","NormalEditor","ref","raw","onBlur","placeholder","EditorState","createWithContent","convertFromRaw","JSON","parse","createEmpty","editorState","setEditorState","getRawString","stringify","convertToRaw","getCurrentContent","blockType","RichUtils","inlineStyle","blockStyleFn","block","getType","customStyleMap","CODE","backgroundColor","fontFamily","fontSize","padding","handleKeyCommand","cmd","state","newState","keyBindingFn","e","getDefaultKeyBinding","spellCheck","EditAbout","aboutRaw","setAboutRaw","about","editorRef","rawString","current","useEditableInput","initValue","setValue","target","input","borderColor","body2","typography","body1","caption","button","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","overline","inherit","EditableInput","variant","rest","Input","background","EditCast","credits","setCredits","handleChange","idx","cur","Box","List","subheader","ListSubheader","Typography","IconButton","onClick","avatar","name","description","tags","size","AddCircle","length","item","ListItem","ListItemAvatar","Avatar","src","inputProps","ListItemSecondaryAction","newCredits","splice","handleDelete","Delete","Placeholder","title","flexDirection","justifyContent","alignItems","width","height","color","text","secondary","flex","custom","base","large","FileUpload","onComplete","onError","children","component","inputRef","useUploadFileOssMutation","onCompleted","data","upload_file_oss","error","message","loading","Tag","role","click","accept","validity","file","files","valid","variables","CloudUpload","defaultProps","position","aider","left","top","bottom","aiderContent","maxHeight","backdropFilter","overflow","main","right","transform","mainContent","posters","posterTool","EditTop","setTitle","sub_title","setSubTitle","setDescription","setPosters","cover","setCover","includes","handleRemovePoster","window","confirm","handleChangeCover","Image","aspectRatio","DEFULAT_MOVIE_COVER","GridList","cellHeight","cols","poster","GridListTile","alt","data-idx","imageUrl","gutterBottom","mt","disabled","PlayCircleOutline","body","content","borderRight","sourceWrap","EditMediumInfo","onSave","onCancel","open","setOpen","url","setUrl","setName","alias_name","setAliasName","handleCancle","Dialog","fullScreen","onClose","AppBar","Toolbar","Button","sourceUrl","sticky","box","borderTop","EditMain","forwardRef","useState","openMedium","setOpenMedium","mediums","setMediums","useImperativeHandle","Media","medium","ShowDialog","DialogTitle","DialogContent","DialogContentText","DialogActions","cancel","cancelText","onConfirm","autoFocus","confirmText","Confirm","dialog","options","Promise","resolve","reject","mountPoint","document","createElement","appendChild","clear","remove","ReactDOM","render","MovieUpload","RouterHelper","useRouterHelper","tab","setTab","topRef","mainRef","aboutRef","castRef","useCreateMovieMutation","then","gotoHome","create_movie","Tabs","val","Tab","hidden","topFields","mainFields","aboutFields","castFields","movie","sources"],"mappings":"yPAmBMA,EAAYC,aAAW,SAACC,GAAD,OAC3BC,YAAa,CACXC,MAAO,CACLC,QAAS,cACTC,OAAO,aAAD,OAAeJ,EAAMK,QAAQC,SACnCC,SAAU,QAEZD,QAAS,CACPE,OAAQR,EAAMS,QAAQ,EAAG,KAE3BC,QAAS,CACPF,OAAQR,EAAMS,QAAQ,IACtBL,OAAQ,OACR,sBAAuB,CACrBO,aAAcX,EAAMY,MAAMD,cAE5B,gBAAiB,CACfA,aAAcX,EAAMY,MAAMD,oBAM5BE,EAAc,CAOlB,CACEC,MAAO,aACPC,MAAO,aACPC,MAAO,aACPC,KAAM,gBAACC,EAAA,EAAD,OAER,CACEJ,MAAO,KACPC,MAAO,sBACPC,MAAO,KACPC,KAAM,gBAACE,EAAA,EAAD,OAER,CACEL,MAAO,KACPC,MAAO,oBACPC,MAAO,KACPC,KAAM,gBAACG,EAAA,EAAD,OAER,CACEN,MAAO,YACPC,MAAO,aACPC,MAAO,YACPC,KAAM,gBAACI,EAAA,EAAD,QAIJC,EAAgB,CACpB,CAAER,MAAO,OAAQC,MAAO,OAAQC,MAAO,OAAQC,KAAM,gBAACM,EAAA,EAAD,OACrD,CAAET,MAAO,SAAUC,MAAO,SAAUC,MAAO,SAAUC,KAAM,gBAACO,EAAA,EAAD,OAC3D,CACEV,MAAO,YACPC,MAAO,YACPC,MAAO,YACPC,KAAM,gBAACQ,EAAA,EAAD,QAUGC,EAAW,SAAAC,GACtB,IAAMC,EAAU9B,IADe,EAED+B,WAAyB,IAFxB,mBAExBC,EAFwB,KAEfC,EAFe,OAGGF,aAHH,mBAGxBG,EAHwB,KAGbC,EAHa,KAIvBC,EAAuCP,EAAvCO,gBAAiBC,EAAsBR,EAAtBQ,kBA8BzB,OACE,gBAACC,EAAA,EAAD,CAAOC,UAAW,EAAGC,UAAWV,EAAQ1B,OACtC,gBAACqC,EAAA,EAAD,CACEvB,MAAOc,EACPU,SA1BqB,SACzBC,EACAC,GACI,IACI3B,EAAU0B,EAAME,cAAcC,QAA9B7B,MACJA,GACFoB,EAAkBpB,GAEpBgB,EAAWW,IAmBPd,QAAS,CAAElB,QAASkB,EAAQlB,UAE3BY,EAAcuB,KAAI,SAAAC,GAAI,OACrB,gBAACC,EAAA,EAAD,CACEC,aAAYF,EAAK/B,MACjBkC,IAAKH,EAAK9B,MACVA,MAAO8B,EAAK9B,OAEX8B,EAAK7B,UAIZ,gBAACiC,EAAA,EAAD,CAASC,UAAQ,EAACC,YAAY,WAAWd,UAAWV,EAAQtB,UAC5D,gBAACiC,EAAA,EAAD,CACEvB,MAAOgB,EACPqB,WAAS,EACTb,SAhCwB,SAC5BC,EACAa,GACI,IACIvC,EAAU0B,EAAME,cAAcC,QAA9B7B,MACJA,GACFmB,EAAgBnB,GAElBkB,EAAaqB,IAyBT1B,QAAS,CAAElB,QAASkB,EAAQlB,UAE3BG,EAAYgC,KAAI,SAAAC,GAAI,OACnB,gBAACC,EAAA,EAAD,CACEC,aAAYF,EAAK/B,MACjBkC,IAAKH,EAAK9B,MACVA,MAAO8B,EAAK9B,OAEX8B,EAAK7B,YC9IZnB,EAAYC,aAAW,SAACC,GAAD,OAC3BC,YAAa,CACXsD,KAAM,GAGNC,OAAQ,CACNC,UAAW,IACXrD,OAAO,aAAD,OAAeJ,EAAMK,QAAQC,eAK5BoD,EAAe7B,cAG1B,SAACF,EAAOgC,GACR,IAAM/B,EAAU9B,IACR8D,EAA6BjC,EAA7BiC,IAAKC,EAAwBlC,EAAxBkC,OAAQC,EAAgBnC,EAAhBmC,YAFL,EAGsBjC,YAAe,kBACnD+B,EACIG,cAAYC,kBAAkBC,yBAAeC,KAAKC,MAAMP,KACxDG,cAAYK,iBANF,mBAGTC,EAHS,KAGIC,EAHJ,KAShBzC,sBAA0B8B,GAAK,iBAAO,CACpCY,aAAc,WACZ,OAAOL,KAAKM,UAAUC,uBAAaJ,EAAYK,2BAmDnD,OACE,uBAAKpC,UAAWV,EAAQ2B,MACtB,gBAAC,EAAD,CACEc,YAAaA,EACbnC,gBA/BkB,SAAAyC,GACtBL,EAAeM,YAAU1C,gBAAgBmC,EAAaM,KA+BlDxC,kBA5BoB,SAAA0C,GACxBP,EAAeM,YAAUzC,kBAAkBkC,EAAaQ,OA6BtD,uBAAKvC,UAAWV,EAAQ4B,QACtB,gBAAC,SAAD,CACEsB,aAlBR,SAAuBC,GACrB,OAAQA,EAAMC,WACZ,IAAK,aACH,MAAO,wBACT,QACE,MAAO,KAcLC,eA5BS,CACfC,KAAM,CACJC,gBAAiB,sBACjBC,WAAY,gDACZC,SAAU,GACVC,QAAS,IAwBLjB,YAAaA,EACbkB,iBA3DiB,SAACC,EAAKC,GAC7B,IAAMC,EAAWd,YAAUW,iBAAiBE,EAAOD,GACnD,OAAIE,GACFpB,EAAeoB,GACR,WAEF,eAsDDC,aAnDsB,SAAAC,GAQ5B,OAAOC,+BAAqBD,IA4CtBpD,SAAU8B,EACVT,OAAQA,EACRC,YAAaA,EACbgC,YAAY,SC5GtB,kCAEepC,O,6ECMFqC,EAAYlE,cACvB,SAACF,EAAOgC,GAAS,IAAD,EACkB9B,WAAe,IADjC,mBACPmE,EADO,KACGC,EADH,KAGdpE,sBAA0B8B,GAAK,iBAAO,CACpCuC,MAAOF,MAET,IAAMG,EAAYtE,cAOlB,OACE,2BACE,gBAAC,IAAD,CAAc8B,IAAKwC,EAAWtC,OAPf,WAAO,IAAD,EACjBuC,EAAS,UAAGD,EAAUE,eAAb,aAAG,EAAmB9B,eACrC0B,EAAYG,U,sICjBLE,EAAmB,SAACC,GAAiC,IAAD,EACrC1E,WAAe0E,GADsB,mBACxDvF,EADwD,KACjDwF,EADiD,KAS/D,MAAO,CAACxF,EANS,SACf4E,GAEAY,EAASZ,EAAEa,OAAOzF,U,iBCJhBlB,EAAYC,aAAW,SAACC,GAC5B,OAAOC,YAAa,CAClBsD,KAAM,GACNmD,MAAO,CACLC,YAAa,eAGfC,MAAO5G,EAAM6G,WAAWD,MAExBE,MAAO9G,EAAM6G,WAAWC,MAExBC,QAAS/G,EAAM6G,WAAWE,QAE1BC,OAAQhH,EAAM6G,WAAWG,OAEzBC,GAAIjH,EAAM6G,WAAWI,GAErBC,GAAIlH,EAAM6G,WAAWK,GAErBC,GAAInH,EAAM6G,WAAWM,GAErBC,GAAIpH,EAAM6G,WAAWO,GAErBC,GAAIrH,EAAM6G,WAAWQ,GAErBC,GAAItH,EAAM6G,WAAWS,GAErBC,UAAWvH,EAAM6G,WAAWU,UAE5BC,UAAWxH,EAAM6G,WAAWW,UAE5BC,SAAUzH,EAAM6G,WAAWY,SAE3BC,QAAS,QAIAC,EAA0C,SAAAhG,GAAU,IACvDX,EAA6DW,EAA7DX,MAAOwB,EAAsDb,EAAtDa,SAAUsB,EAA4CnC,EAA5CmC,YADqC,EACOnC,EAA/BiG,eADwB,MACd,QADc,EACFC,EADE,YACOlG,EADP,8CAExDC,EAAU9B,IAChB,OACE,gBAACgI,EAAA,EAAD,eACElG,QAAS,CACP2B,KAAM3B,EAAQ2B,MAEhBjB,UAAWV,EAAQgG,GACnB5G,MAAOA,EACPwB,SAAUA,EACVsB,YAAaA,GACT+D,KC/BJ/H,EAAYC,aAAW,SAACC,GAAD,OAC3BC,YAAa,CACXsD,KAAM,CACJ4B,gBAAiBnF,EAAMK,QAAQ0H,WAAW7H,YASnC8H,EAAWnG,cACtB,SAACF,EAAOgC,GACN,IAAM/B,EAAU9B,IADF,EAEgB+B,WAAgC,IAFhD,mBAEPoG,EAFO,KAEEC,EAFF,KAIdrG,sBAA0B8B,GAAK,iBAAO,CACpCsE,cAGF,IAYME,EAAe,SACnBvC,GACI,IAAD,EACwBA,EAAEa,OAArB7D,EADL,EACKA,QAAS5B,EADd,EACcA,MACjB,GAAI4B,EAAQwF,KAAOxF,EAAQK,IAAK,CAC9B,IAAMoF,EAAMJ,EAAQrF,EAAQwF,KAC5BC,EAAIzF,EAAQK,KAAOjC,EACnBkH,EAAW,GAAD,mBAAKD,GAAL,CAAcI,OAS5B,OACE,gBAACC,EAAA,EAAD,CAAKhG,UAAWV,EAAQ2B,MACtB,gBAACgF,EAAA,EAAD,CACEC,UACE,gBAACC,EAAA,EAAD,KACE,gBAACC,EAAA,EAAD,2BACA,gBAACC,EAAA,EAAD,CAAYC,QAlCE,WACtBV,EAAW,GAAD,mBACLD,GADK,CAER,CACEY,OAAQ,GACRC,KAAM,GACNC,YAAa,GACbC,KAAM,QA2BoCC,KAAK,SACzC,gBAACC,EAAA,EAAD,CAAW7D,SAAS,aAKzB4C,EAAQkB,OACP,gCACGlB,EAAQpF,KAAI,SAACuG,EAAMhB,GAClB,OACE,gBAACiB,EAAA,EAAD,CAAUpG,IAAKmF,GACb,gBAACkB,EAAA,EAAD,KACE,gBAACC,EAAA,EAAD,CAAQC,IAAKJ,EAAKP,UAEpB,2BACE,gBAAC,EAAD,CACEY,WAAY,CAAE,WAAYrB,EAAK,WAAY,QAC3CpH,MAAOoI,EAAKN,KACZtG,SAAU2F,EACVrE,YAAY,mCAGd,gBAAC,EAAD,CACE2F,WAAY,CACV,WAAYrB,EACZ,WAAY,eAEdpH,MAAOoI,EAAKN,KACZtG,SAAU2F,EACVrE,YAAY,oCAGhB,gBAAC4F,EAAA,EAAD,KACE,gBAACf,EAAA,EAAD,CAAYC,QAAS,kBA5ClB,SAACR,GACpB,IAAMuB,EAAa1B,EAAQ2B,OAAOxB,EAAK,GACvCF,EAAW,YAAIyB,IA0C4BE,CAAazB,KACtC,gBAAC0B,EAAA,EAAD,aAQZ,2BACE,gBAACC,EAAA,EAAD,CAAaC,MAAM,qD,mDC3G3BlK,EAAYC,aAAW,SAACC,GAAD,OAC3BC,YAAa,CACXsD,KAAM,CACJpD,QAAS,cACT8J,cAAe,SACfC,eAAgB,SAChBC,WAAY,SACZC,MAAO,SAACzI,GAA8B,IAAD,EACnC,iBAAOA,EAAMyI,aAAb,QAAsB,QAExBC,OAAQ,SAAC1I,GAA8B,IAAD,EACpC,iBAAOA,EAAM0I,cAAb,QAAuB,QAEzBC,MAAOtK,EAAMK,QAAQkK,KAAKC,UAC1BC,KAAM,GAERxJ,KAAMjB,EAAM0K,OAAOC,KAAK1J,KAAK2J,WAIpBC,EAA4C,SAAAlJ,GAAU,IACzDmJ,EAA4DnJ,EAA5DmJ,WAAYC,EAAgDpJ,EAAhDoJ,QAASC,EAAuCrJ,EAAvCqJ,SAAUC,EAA6BtJ,EAA7BsJ,UAAWP,EAAkB/I,EAAlB+I,OAAQV,EAAUrI,EAAVqI,MACpDpI,EAAU9B,EAAU6B,GAEpBuJ,EAAWrJ,cAJ+C,EAMzBsJ,YAAyB,CAC9DC,YAD8D,SAClDC,GACVP,GAAcA,EAAWO,EAAKC,kBAEhCP,QAJ8D,SAItDQ,GACNR,GAAWA,EAAQQ,EAAMC,YAXmC,mBAMzDF,EANyD,KAMtCG,EANsC,KAMtCA,QAyBpBC,EAAMT,GAAa,MAEzB,OACE,gBAACS,EAAD,CAAKC,KAAK,SAAS/C,QATD,WACH,IAAD,EAAT6C,IACH,UAAAP,EAAS7E,eAAT,SAAkBuF,WAQlB,yBACEjI,IAAKuH,EACLnK,MAAO,CAAEZ,QAAS,QAClB2C,KAAK,OACL+I,OAAO,IACPrJ,SAzBe,SAACoD,GAA4C,IAAD,EAI3DA,EAAEjD,cAFJmJ,EAF6D,EAE7DA,SACQC,EAHqD,cAG7DC,MAH6D,MAK3DF,EAASG,OACXX,EAAgB,CAAEY,UAAW,CAAEH,aAqB9BrB,EACC,CAAEM,YAEF,gBAAC1C,EAAA,EAAD,CAAKhG,UAAWV,EAAQ2B,MACtB,2BACE,gBAAC4I,EAAA,EAAD,CAAa7J,UAAWV,EAAQX,QAGlC,gBAACyH,EAAA,EAAD,CAAYd,QAAQ,MAAM6D,EAAU,wBAAWzB,MAOzDa,EAAWuB,aAAe,CACxB1B,QAAQ,EACRV,MAAO,4B,aC5EHlK,EAAYC,aAAW,SAACC,GAAD,OAC3BC,YAAa,CACXsD,KAAM,CACJ8I,SAAU,WACVjC,MAAO,QAETkC,MAAO,CACLD,SAAU,WACVE,KAAM,EACNC,IAAK,EACLC,OAAQ,EACRrC,MAAO,MACP9E,QAAStF,EAAMS,QAAQ,IAEzBiM,aAAc,CACZtC,MAAO,MACP9E,QAAStF,EAAMS,QAAQ,GACvBE,aAAcX,EAAMY,MAAMD,aAC1BgM,UAAW,OACX5E,WAAY,oBACZ6E,eAAgB,YAChBC,SAAU,QAEZC,KAAM,CACJT,SAAU,WACVG,IAAK,MACLO,MAAO,EACP3C,MAAO,MACP9E,QAAStF,EAAMS,QAAQ,EAAG,GAC1BuM,UAAW,qBACX1C,MAAO,OACPnK,QAAS,OACT8J,cAAe,UAEjBgD,YAAa,CACXlF,WAAY,oBACZ6E,eAAgB,YAChBtH,QAAStF,EAAMS,QAAQ,GACvBE,aAAcX,EAAMY,MAAMD,cAE5BuM,QAAS,GACTC,WAAY,CACVhN,QAAS,aAiBFiN,EAAUvL,cACrB,SAACF,EAAOgC,GACN,IAAM/B,EAAU9B,IADF,EAEYwG,EAAiB,IAF7B,mBAEP0D,EAFO,KAEAqD,EAFA,OAGmB/G,EAAiB,IAHpC,mBAGPgH,EAHO,KAGIC,EAHJ,OAIwBjH,EAAiB,IAJzC,mBAIPyC,EAJO,KAIMyE,EAJN,OAKgB3L,WAAyB,IALzC,mBAKPqL,EALO,KAKEO,EALF,OAMY5L,WAAuB,IANnC,mBAMP6L,EANO,KAMAC,EANA,KAQd9L,aAAgB,WACVqL,GAAWA,EAAQ/D,OAAS,EACzBuE,GAAUR,EAAQU,SAASF,IAAQC,EAAST,EAAQ,IAEzDS,EAAS,MAEV,CAACD,EAAOR,IAEXrL,sBAA0B8B,GAAK,iBAAO,CACpCqG,QACAsD,YACAvE,cACAmE,UACAQ,YAGF,IAMMG,EAAqB,SACzBjI,GAGA,GADekI,OAAOC,QAAQ,WAClB,CAAC,IACHnL,EAAYgD,EAAEjD,cAAdC,QACJA,EAAQwF,MACV8E,EAAQtD,QAAQhH,EAAQwF,IAAK,GAC7BqF,EAAW,YAAIP,OAKfc,EAAoB,SACxBpI,GACI,IACIhD,EAAYgD,EAAEjD,cAAdC,QACJA,EAAQwF,KACVuF,EAAST,EAAQtK,EAAQwF,OAI7B,OACE,uBAAK9F,UAAWV,EAAQ2B,MACtB,gBAAC0K,EAAA,EAAD,CAAOC,YAAa,GAAK,EAAG1E,IAAK2E,MACjC,uBAAK7L,UAAWV,EAAQ0K,OACtB,uBAAKhK,UAAWV,EAAQ8K,cACtB,gBAAC0B,EAAA,EAAD,CAAUC,WAAW,OAAO/L,UAAWV,EAAQsL,QAASoB,KAAM,GAC3DpB,EAAQrK,KAAI,SAAC0L,EAAQnG,GAAT,OACX,gBAACoG,EAAA,EAAD,CAAcvL,IAAKsL,EAAQD,KAAM,GAC/B,gBAACL,EAAA,EAAD,CACEC,YAAa,GAAK,EAClB1E,IAAK+E,EACLE,IAAK,SAAWrG,IAElB,uBAAK9F,UAAWV,EAAQuL,YACtB,uBAAKuB,WAAUtG,EAAKQ,QAASiF,GAA7B,iBAGA,uBAAKa,WAAUtG,EAAKQ,QAASoF,GAC1BN,IAAUa,EAAS,WAAa,oBAKzC,gBAACC,EAAA,EAAD,CAAcF,KAAM,GAClB,gBAAC,EAAD,CAAYxD,WApDA,SAAA6D,GAClBA,IAAazB,EAAQU,SAASe,IAChClB,EAAW,GAAD,mBAAKP,GAAL,CAAcyB,MAkDyB3E,MAAM,iCAKvD,uBAAK1H,UAAWV,EAAQkL,MACtB,uBAAKxK,UAAWV,EAAQqL,aACtB,gBAACvE,EAAA,EAAD,CAAYkG,cAAY,EAAChH,QAAQ,KAAKqD,UAAU,OAC9C,gBAAC,EAAD,CACErD,QAAQ,KACR5G,MAAOgJ,EACPxH,SAAU6K,EACVvJ,YAAY,iBAGhB,gBAAC4E,EAAA,EAAD,CAAYkG,cAAY,EAAChH,QAAQ,YAAYqD,UAAU,OACrD,gBAAC,EAAD,CACEjK,MAAOsM,EACP9K,SAAU+K,EACVzJ,YAAY,0CAGhB,gBAAC4E,EAAA,EAAD,CAAYd,QAAQ,QAAQqD,UAAU,OACpC,gBAAC,EAAD,CACEjK,MAAO+H,EACPvG,SAAUgL,EACV1J,YAAY,mDAGhB,gBAACwE,EAAA,EAAD,CAAKuG,GAAI,GACP,gBAAClG,EAAA,EAAD,CAAYmG,UAAQ,GAClB,gBAACC,EAAA,EAAD,c,oDChKVjP,EAAYC,aAAW,SAACC,GAAD,OAC3BC,YAAa,CACXsD,KAAM,CACJ8G,OAAQ,QAEV2E,KAAM,CACJ7J,gBAAiBnF,EAAMK,QAAQ0H,WAAW7H,MAC1CC,QAAS,OACTK,OAAQ,UAEVyO,QAAS,CACP3J,QAAStF,EAAMS,QAAQ,EAAG,GAC1ByO,YAAY,aAAD,OAAelP,EAAMK,QAAQC,UAE1CgM,MAAO,CACLhH,QAAStF,EAAMS,QAAQ,EAAG,GAC1B4J,OAAQ,OACRwC,SAAU,QAEZsC,WAAY,CACV/E,MAAO,OACPiC,SAAU,iBAaH+C,EAA+C,SAC1DzN,GACI,IACI0N,EAAqB1N,EAArB0N,OAAQC,EAAa3N,EAAb2N,SAEV1N,EAAU9B,IAHb,EAIqB+B,YAAe,GAJpC,mBAII0N,EAJJ,KAIUC,EAJV,OAKmB3N,WAAe,IALlC,mBAKI4N,EALJ,KAKSC,EALT,OAMuB7N,WAAe,IANtC,mBAMI6L,EANJ,KAMWC,EANX,OAOqBrH,EAAiB,IAPtC,mBAOIwC,EAPJ,KAOU6G,EAPV,OAQgCrJ,EAAiB,IARjD,mBAQIsJ,EARJ,KAQgBC,EARhB,OASmCvJ,EAAiB,IATpD,mBASIyC,EATJ,KASiByE,EATjB,KAWH3L,aAAgB,WACd2N,EAAQ7N,EAAM4N,QACb,CAAC5N,EAAM4N,OAEV,IAiCMO,EAAe,WACnBN,GAAQ,GACRF,GAAYA,IAlCZE,GAAQ,GACRE,EAAO,IACP/B,EAAS,IACTgC,EAAQ,IACRE,EAAa,IACbrC,EAAe,KAiCjB,OACE,2BACE,gBAACuC,EAAA,EAAD,CAAQR,KAAMA,EAAMS,YAAU,EAACC,QAASH,GACtC,gBAACI,EAAA,EAAD,CAAQ7D,SAAS,YACf,gBAAC8D,EAAA,EAAD,KACE,gBAACC,EAAA,EAAD,CAAQxH,QAvBC,WACjByG,GACEA,EAAO,CACLI,MACA/B,QACA5E,OACA8G,aACA7G,gBAEJ+G,KAcqCxF,MAAM,WAAnC,QAGA,gBAAC8F,EAAA,EAAD,CAAQxH,QAASkH,EAAcxF,MAAM,WAArC,YAKJ,gBAAChC,EAAA,EAAD,CAAKhG,UAAWV,EAAQ2B,MACtB,gBAAC,IAAD,KACE,gBAAC,IAAD,KACE,uBAAKjB,UAAWV,EAAQuN,YACtB,gBAAClB,EAAA,EAAD,CAAOC,YAAa,GAAK,EAAG1E,IAAK2E,MACjC,gBAAC,EAAD,CAAYrD,WAhDA,SAAA6D,GACpBA,GACFhB,EAASgB,KA8CC,aAGA,gBAAC,EAAD,CAAY7D,WA7CC,SAAAuF,GACrBA,GACFX,EAAOW,KA2CG,iBAMN,gBAAC,IAAD,CAAY/N,UAAWV,EAAQoN,MAC7B,gBAAC,IAAD,CAAe1M,UAAWV,EAAQqN,SAGhC,gBAAC,EAAD,CACEjO,MAAO8H,EACPtG,SAAUmN,EACV7L,YAAY,SAEd,gBAAC,EAAD,CACE9C,MAAO4O,EACPpN,SAAUqN,EACV/L,YAAY,eAEd,gBAAC,EAAD,CACE9C,MAAO+H,EACPvG,SAAUgL,EACV1J,YAAY,oBAGhB,gBAAC,IAAD,CAAawM,QAAM,EAAChO,UAAWV,EAAQ0K,OAErC,gBAACvC,EAAA,EAAD,CAAaC,MAAM,6BCrJ3BlK,EAAYC,aAAW,SAACC,GAAD,OAC3BC,YAAa,CACXsD,KAAM,CACJ+B,QAAStF,EAAMS,QAAQ,EAAG,IAE5B8P,IAAK,CACHjL,QAAStF,EAAMS,QAAQ,EAAG,GAE1B,QAAS,CACP+P,UAAU,aAAD,OAAexQ,EAAMK,QAAQC,gBAUjCmQ,EAAW5O,IAAM6O,YAC5B,SAAC/O,EAAOgC,GACN,IAAM/B,EAAU9B,IADF,EAEsB+B,IAAM8O,UAAS,GAFrC,mBAEPC,EAFO,KAEKC,EAFL,OAGgBhP,IAAM8O,SAAc,IAHpC,mBAGPG,EAHO,KAGEC,EAHF,KAKdlP,IAAMmP,oBAAoBrN,GAAK,iBAAO,CACpCmN,QAASA,MAOX,OACE,oCACE,kBAACxI,EAAA,EAAD,CAAKhG,UAAWV,EAAQ2B,MACtB,kBAAC+E,EAAA,EAAD,CAAKhG,UAAWV,EAAQ2O,KACtB,kBAAC7H,EAAA,EAAD,CAAYd,QAAQ,YAAYgH,cAAY,GAA5C,4BAGA,kBAACR,EAAA,EAAD,CAAUC,WAAW,OAAOC,KAAM,GAC/BwC,EAAQjO,KAAI,SAACuG,EAAMhB,GAClB,OACE,kBAACoG,EAAA,EAAD,CAAcF,KAAM,EAAGrL,IAAKmF,GAC1B,kBAAC6I,EAAA,EAAgB7H,OAKvB,kBAACgH,EAAA,EAAD,CAAQxH,QAAS,kBAAMiI,GAAc,KAArC,mBAON,kBAAC,EAAD,CACEtB,KAAMqB,EACNvB,OA7Ba,SAAA6B,GACjBH,EAAW,GAAD,mBAAKD,GAAL,CAAcI,MA6BpB5B,SAAU,kBAAMuB,GAAc,U,sFC/ClCM,GAAa,SAACxP,GAA6C,IAAD,EACtCE,YAAe,GADuB,mBACvD0N,EADuD,KACjDC,EADiD,KAiB9D,OACE,2BACE,gBAACO,EAAA,EAAD,CAAQR,KAAMA,EAAMU,QAPJ,WAClBT,GAAQ,GACR7N,EAAM2N,UAAY3N,EAAM2N,aAMnB3N,EAAMqI,OAAS,gBAACoH,GAAA,EAAD,KAAczP,EAAMqI,OACpC,gBAACqH,GAAA,EAAD,KACE,gBAACC,GAAA,EAAD,KAAoB3P,EAAMsN,UAE5B,gBAACsC,GAAA,EAAD,KACG5P,EAAM6P,QACL,gBAACpB,EAAA,EAAD,CAAQxH,QAxBG,WACnB4G,GAAQ,GACR7N,EAAM2N,UAAY3N,EAAM2N,YAsBehF,MAAM,WAClC3I,EAAM8P,YAAc,gBAGzB,gBAACrB,EAAA,EAAD,CAAQxH,QAvBM,WACpB4G,GAAQ,GACR7N,EAAM+P,WAAa/P,EAAM+P,aAqBapH,MAAM,UAAUqH,WAAS,GACtDhQ,EAAMiQ,aAAe,oBAkCnBC,GA1BQ,CACrBC,OAAQ,SAASC,GACf,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAC3B,IAAMC,EAAaC,SAASC,cAAc,OAC1CD,SAASpD,KAAKsD,YAAYH,GAC1B,IAAMI,EAAQ,WACZJ,EAAWK,UAUbC,KAASC,OACP,2BACE,gBAAC,GAAD,iBAAgBX,EAAhB,CAAyBL,UAVX,WAChBO,GAAQ,GACRM,KAQiDjD,SANlC,WACf2C,GAAQ,GACRM,SAMAJ,Q,6CCvDR,IAAMrS,GAAYC,aAAW,SAACC,GAAD,OAC3BC,YAAa,CACX6M,KAAM,CACJ3H,gBAAiBnF,EAAMK,QAAQ0H,WAAW7H,MAC1CoF,QAAStF,EAAMS,QAAQ,EAAG,GAC1ByO,YAAY,aAAD,OAAelP,EAAMK,QAAQC,eAKjCqS,GAAwB,WACnC,IAAM/Q,EAAU9B,KACV8S,EAAeC,cAFoB,EAGnBhR,WAAe,GAHI,mBAGlCiR,EAHkC,KAG7BC,EAH6B,KAInCC,EAASnR,cACToR,EAAUpR,cACVqR,EAAWrR,cACXsR,EAAUtR,cAPyB,EASlBuR,YAAuB,CAC5ChI,YAD4C,WAE1CyG,GAAQC,OAAO,CACb9H,MAAO,eACPiF,QAAS,mCACRoE,MAAK,WACNT,EAAaU,iBANZC,EATkC,oBAyCzC,OACE,gBAACjL,EAAA,EAAD,KACE,gBAAC,IAAD,KACE,gBAAC,IAAD,KACE,gBAAC8E,EAAD,CAASzJ,IAAKqP,MAGlB,gBAAC,IAAD,KACE,gBAAC,IAAD,CAAe1Q,UAAWV,EAAQkL,MAChC,gBAAC0G,EAAA,EAAD,CAAMxS,MAAO8R,EAAKtQ,SAAU,SAACoD,EAAG6N,GAAJ,OAAYV,EAAOU,KAC7C,gBAACC,EAAA,EAAD,CAAK5S,MAAM,iBACX,gBAAC4S,EAAA,EAAD,CAAK5S,MAAM,2BAAOgO,UAAQ,IAC1B,gBAAC4E,EAAA,EAAD,CAAK5S,MAAM,kBAEb,2BACE,uBAAK6S,OAAgB,IAARb,GACX,gBAACrC,EAAD,CAAU9M,IAAKsP,KAGjB,uBAAKU,OAAgB,IAARb,GACX,gBAAC/M,EAAD,CAAWpC,IAAKuP,KAElB,2BACE,uBAAKtK,QA5CS,WACxB,IAAMgL,EAAYZ,EAAO3M,QACnBwN,EAAaZ,EAAQ5M,QACrByN,EAAcZ,EAAS7M,QACvB0N,EAAaZ,EAAQ9M,QAE3BkN,EAAa,CACXrH,UAAW,CACT8H,MAAO,CACLhK,OAAgB,OAAT4J,QAAS,IAATA,OAAA,EAAAA,EAAW5J,QAAS,GAC3B0D,OAAgB,OAATkG,QAAS,IAATA,OAAA,EAAAA,EAAWlG,QAAS,GAC3BR,QAAO,OAAE0G,QAAF,IAAEA,OAAF,EAAEA,EAAW1G,QACpBnE,YAAW,OAAE6K,QAAF,IAAEA,OAAF,EAAEA,EAAW7K,YACxBd,QAAO,OAAE8L,QAAF,IAAEA,OAAF,EAAEA,EAAY9L,QACrB/B,MAAK,OAAE4N,QAAF,IAAEA,OAAF,EAAEA,EAAa5N,MACpB+N,QAAO,OAAEJ,QAAF,IAAEA,OAAF,EAAEA,EAAY/C,cA6BjB,aAIN,gBAAC,IAAD,KACE,gBAAC9I,EAAD,CAAUrE,IAAKwP,QAMVR","file":"static/js/14.307ec293.chunk.js","sourcesContent":["import * as React from \"react\";\nimport {\n  makeStyles,\n  Theme,\n  createStyles,\n  Divider,\n  Paper\n} from \"@material-ui/core\";\nimport { ToggleButtonGroup, ToggleButton } from \"@material-ui/lab\";\nimport {\n  FormatBold,\n  FormatItalic,\n  FormatUnderlined,\n  FormatQuote,\n  FormatListBulleted,\n  FormatListNumbered,\n  Code\n} from \"@material-ui/icons\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    paper: {\n      display: \"inline-flex\",\n      border: `1px solid ${theme.palette.divider}`,\n      flexWrap: \"wrap\"\n    },\n    divider: {\n      margin: theme.spacing(1, 0.5)\n    },\n    grouped: {\n      margin: theme.spacing(0.5),\n      border: \"none\",\n      \"&:not(:first-child)\": {\n        borderRadius: theme.shape.borderRadius\n      },\n      \"&:first-child\": {\n        borderRadius: theme.shape.borderRadius\n      }\n    }\n  })\n);\n\nconst BLOCK_TYPES = [\n  // { label: \"H1\", style: \"header-one\", value: \"h1\", icon: <FormatBold /> },\n  // { label: \"H2\", style: \"header-two\", value: \"h2\", icon: <FormatBold /> },\n  // { label: \"H3\", style: \"header-three\", value: \"h3\", icon: <FormatBold /> },\n  // { label: \"H4\", style: \"header-four\", value: \"h4\", icon: <FormatBold /> },\n  // { label: \"H5\", style: \"header-five\", value: \"h5\", icon: <FormatBold /> },\n  // { label: \"H6\", style: \"header-six\", value: \"h6\", icon: <FormatBold /> },\n  {\n    label: \"Blockquote\",\n    style: \"blockquote\",\n    value: \"blockquote\",\n    icon: <FormatQuote />\n  },\n  {\n    label: \"UL\",\n    style: \"unordered-list-item\",\n    value: \"ul\",\n    icon: <FormatListBulleted />\n  },\n  {\n    label: \"OL\",\n    style: \"ordered-list-item\",\n    value: \"ol\",\n    icon: <FormatListNumbered />\n  },\n  {\n    label: \"CodeBlock\",\n    style: \"code-block\",\n    value: \"codeblock\",\n    icon: <Code />\n  }\n];\n\nconst INLINE_STYLES = [\n  { label: \"Bold\", style: \"BOLD\", value: \"bold\", icon: <FormatBold /> },\n  { label: \"Italic\", style: \"ITALIC\", value: \"italic\", icon: <FormatItalic /> },\n  {\n    label: \"Underline\",\n    style: \"UNDERLINE\",\n    value: \"underline\",\n    icon: <FormatUnderlined />\n  }\n  // {\n  //   label: \"Monospace\",\n  //   style: \"CODE\",\n  //   value: \"code\",\n  //   icon: <FormatQuote />,\n  // },\n];\n\nexport const Controls = props => {\n  const classes = useStyles();\n  const [inlines, setInlines] = React.useState<string[]>([]);\n  const [blocktype, setBlocktype] = React.useState<string>();\n  const { toggleBlockType, toggleInlineStyle } = props;\n  // const selection = editorState.getSelection();\n  // const blockType = editorState\n  //   .getCurrentContent()\n  //   .getBlockForKey(selection.getStartKey())\n  //   .getType();\n  // const currentStyle = editorState.getCurrentInlineStyle();\n\n  const handleInlineFormat = (\n    event: React.MouseEvent<HTMLElement>,\n    newFormats: string[]\n  ) => {\n    const { style } = event.currentTarget.dataset;\n    if (style) {\n      toggleInlineStyle(style);\n    }\n    setInlines(newFormats);\n  };\n\n  const handleBlocktypeFormat = (\n    event: React.MouseEvent<HTMLElement>,\n    newFormat\n  ) => {\n    const { style } = event.currentTarget.dataset;\n    if (style) {\n      toggleBlockType(style);\n    }\n    setBlocktype(newFormat);\n  };\n\n  return (\n    <Paper elevation={0} className={classes.paper}>\n      <ToggleButtonGroup\n        value={inlines}\n        onChange={handleInlineFormat}\n        classes={{ grouped: classes.grouped }}\n      >\n        {INLINE_STYLES.map(type => (\n          <ToggleButton\n            data-style={type.style}\n            key={type.value}\n            value={type.value}\n          >\n            {type.icon}\n          </ToggleButton>\n        ))}\n      </ToggleButtonGroup>\n      <Divider flexItem orientation=\"vertical\" className={classes.divider} />\n      <ToggleButtonGroup\n        value={blocktype}\n        exclusive\n        onChange={handleBlocktypeFormat}\n        classes={{ grouped: classes.grouped }}\n      >\n        {BLOCK_TYPES.map(type => (\n          <ToggleButton\n            data-style={type.style}\n            key={type.value}\n            value={type.value}\n          >\n            {type.icon}\n          </ToggleButton>\n        ))}\n      </ToggleButtonGroup>\n    </Paper>\n  );\n};\n","import * as React from \"react\";\nimport {\n  Editor,\n  EditorState,\n  RichUtils,\n  getDefaultKeyBinding,\n  convertFromRaw,\n  convertToRaw\n} from \"draft-js\";\nimport \"draft-js/dist/Draft.css\";\nimport { BaseEditorProps, BaseEditorHandles } from \"./editor\";\nimport { makeStyles, Theme, createStyles } from \"@material-ui/core\";\nimport { Controls } from \"./Controls\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      // minHeight: 420,\n    },\n    editor: {\n      minHeight: 220,\n      border: `1px solid ${theme.palette.divider}`\n    }\n  })\n);\n\nexport const NormalEditor = React.forwardRef<\n  BaseEditorHandles,\n  BaseEditorProps\n>((props, ref) => {\n  const classes = useStyles();\n  const { raw, onBlur, placeholder } = props;\n  const [editorState, setEditorState] = React.useState(() =>\n    raw\n      ? EditorState.createWithContent(convertFromRaw(JSON.parse(raw)))\n      : EditorState.createEmpty()\n  );\n\n  React.useImperativeHandle(ref, () => ({\n    getRawString: () => {\n      return JSON.stringify(convertToRaw(editorState.getCurrentContent()));\n    }\n  }));\n\n  const handleKeyCommand = (cmd, state) => {\n    const newState = RichUtils.handleKeyCommand(state, cmd);\n    if (newState) {\n      setEditorState(newState);\n      return \"handled\";\n    }\n    return \"not-handled\";\n  };\n\n  const mapKeyToEditorCommand = e => {\n    // if (e.keyCode === 9 /* TAB */) {\n    //   const newEditorState = RichUtils.onTab(e, editorState, 4 /* maxDepth */);\n    //   if (newEditorState !== editorState) {\n    //     setEditorState(newEditorState);\n    //   }\n    //   return null;\n    // }\n    return getDefaultKeyBinding(e);\n  };\n\n  const toggleBlockType = blockType => {\n    setEditorState(RichUtils.toggleBlockType(editorState, blockType));\n  };\n\n  const toggleInlineStyle = inlineStyle => {\n    setEditorState(RichUtils.toggleInlineStyle(editorState, inlineStyle));\n  };\n\n  // Custom overrides for \"code\" style.\n  const styleMap = {\n    CODE: {\n      backgroundColor: \"rgba(0, 0, 0, 0.05)\",\n      fontFamily: '\"Inconsolata\", \"Menlo\", \"Consolas\", monospace',\n      fontSize: 16,\n      padding: 2\n    }\n  };\n\n  function getBlockStyle(block) {\n    switch (block.getType()) {\n      case \"blockquote\":\n        return \"RichEditor-blockquote\";\n      default:\n        return \"\";\n    }\n  }\n\n  return (\n    <div className={classes.root}>\n      <Controls\n        editorState={editorState}\n        toggleBlockType={toggleBlockType}\n        toggleInlineStyle={toggleInlineStyle}\n      />\n      <div className={classes.editor}>\n        <Editor\n          blockStyleFn={getBlockStyle}\n          customStyleMap={styleMap}\n          editorState={editorState}\n          handleKeyCommand={handleKeyCommand}\n          keyBindingFn={mapKeyToEditorCommand}\n          onChange={setEditorState}\n          onBlur={onBlur}\n          placeholder={placeholder}\n          spellCheck={true}\n        />\n      </div>\n    </div>\n  );\n});\n","import { NormalEditor } from \"./NormalEditor\";\n\nexport default NormalEditor;\nexport const Editor = NormalEditor;\nexport * from \"./NormalEditor\";\n","import * as React from \"react\";\nimport { NormalEditor } from \"@/components/base/Editor\";\nimport { EditorHandles } from \"@/components/base/Editor/editor\";\n\nexport interface EditAboutHandles {\n  about?: string;\n}\n\nexport const EditAbout = React.forwardRef<EditAboutHandles, unknown>(\n  (props, ref) => {\n    const [aboutRaw, setAboutRaw] = React.useState(\"\");\n\n    React.useImperativeHandle(ref, () => ({\n      about: aboutRaw\n    }));\n    const editorRef = React.createRef<EditorHandles>();\n\n    const handleBlur = () => {\n      const rawString = editorRef.current?.getRawString();\n      setAboutRaw(rawString);\n    };\n\n    return (\n      <div>\n        <NormalEditor ref={editorRef} onBlur={handleBlur} />\n      </div>\n    );\n  }\n);\n\nexport default EditAbout;\n","import * as React from \"react\";\n\nexport const useEditableInput = (initValue?: any): [any, any] => {\n  const [value, setValue] = React.useState(initValue);\n\n  const onChange = (\n    e: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>\n  ) => {\n    setValue(e.target.value);\n  };\n\n  return [value, onChange];\n};\n","import * as React from \"react\";\nimport { Input, makeStyles, Theme, createStyles } from \"@material-ui/core\";\nimport { BaseInputProps } from \"./input\";\n\nconst useStyles = makeStyles((theme: Theme) => {\n  return createStyles({\n    root: {},\n    input: {\n      borderColor: \"transparent\"\n    },\n    /* Styles applied to the root element if `variant=\"body2\"`. */\n    body2: theme.typography.body2,\n    /* Styles applied to the root element if `variant=\"body1\"`. */\n    body1: theme.typography.body1,\n    /* Styles applied to the root element if `variant=\"caption\"`. */\n    caption: theme.typography.caption,\n    /* Styles applied to the root element if `variant=\"button\"`. */\n    button: theme.typography.button,\n    /* Styles applied to the root element if `variant=\"h1\"`. */\n    h1: theme.typography.h1,\n    /* Styles applied to the root element if `variant=\"h2\"`. */\n    h2: theme.typography.h2,\n    /* Styles applied to the root element if `variant=\"h3\"`. */\n    h3: theme.typography.h3,\n    /* Styles applied to the root element if `variant=\"h4\"`. */\n    h4: theme.typography.h4,\n    /* Styles applied to the root element if `variant=\"h5\"`. */\n    h5: theme.typography.h5,\n    /* Styles applied to the root element if `variant=\"h6\"`. */\n    h6: theme.typography.h6,\n    /* Styles applied to the root element if `variant=\"subtitle1\"`. */\n    subtitle1: theme.typography.subtitle1,\n    /* Styles applied to the root element if `variant=\"subtitle2\"`. */\n    subtitle2: theme.typography.subtitle2,\n    /* Styles applied to the root element if `variant=\"overline\"`. */\n    overline: theme.typography.overline,\n    /* Styles applied to the root element if `variant=\"inherit\"`. */\n    inherit: {}\n  });\n});\n\nexport const EditableInput: React.FC<BaseInputProps> = props => {\n  const { value, onChange, placeholder, variant = \"body1\", ...rest } = props;\n  const classes = useStyles();\n  return (\n    <Input\n      classes={{\n        root: classes.root\n      }}\n      className={classes[variant]}\n      value={value}\n      onChange={onChange}\n      placeholder={placeholder}\n      {...rest}\n    />\n  );\n};\n","import * as React from \"react\";\nimport {\n  List,\n  ListItem,\n  ListItemAvatar,\n  Avatar,\n  ListItemSecondaryAction,\n  IconButton,\n  Box,\n  ListSubheader,\n  Typography\n} from \"@material-ui/core\";\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core/styles\";\nimport { AddCircle, Delete } from \"@material-ui/icons\";\nimport { Placeholder } from \"@/components/base/Placeholder\";\nimport { Character } from \"@/schema\";\nimport { EditableInput } from \"@/components/app/Input\";\n\nexport interface CharacterEdit extends Character {\n  // status:\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      backgroundColor: theme.palette.background.paper\n    }\n  })\n);\n\nexport interface EditCastHandles {\n  credits: CharacterEdit[];\n}\n\nexport const EditCast = React.forwardRef<EditCastHandles, unknown>(\n  (props, ref) => {\n    const classes = useStyles();\n    const [credits, setCredits] = React.useState<CharacterEdit[]>([]);\n\n    React.useImperativeHandle(ref, () => ({\n      credits\n    }));\n\n    const handleAddCredit = () => {\n      setCredits([\n        ...credits,\n        {\n          avatar: \"\",\n          name: \"\",\n          description: \"\",\n          tags: []\n        }\n      ]);\n    };\n\n    const handleChange = (\n      e: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>\n    ) => {\n      const { dataset, value } = e.target;\n      if (dataset.idx && dataset.key) {\n        const cur = credits[dataset.idx];\n        cur[dataset.key] = value;\n        setCredits([...credits, cur]);\n      }\n    };\n\n    const handleDelete = (idx: number) => {\n      const newCredits = credits.splice(idx, 1);\n      setCredits([...newCredits]);\n    };\n\n    return (\n      <Box className={classes.root}>\n        <List\n          subheader={\n            <ListSubheader>\n              <Typography>演职表</Typography>\n              <IconButton onClick={handleAddCredit} size=\"small\">\n                <AddCircle fontSize=\"small\" />\n              </IconButton>\n            </ListSubheader>\n          }\n        >\n          {credits.length ? (\n            <>\n              {credits.map((item, idx) => {\n                return (\n                  <ListItem key={idx}>\n                    <ListItemAvatar>\n                      <Avatar src={item.avatar}></Avatar>\n                    </ListItemAvatar>\n                    <div>\n                      <EditableInput\n                        inputProps={{ \"data-idx\": idx, \"data-key\": \"name\" }}\n                        value={item.name}\n                        onChange={handleChange}\n                        placeholder=\"请输入名字\"\n                      />\n\n                      <EditableInput\n                        inputProps={{\n                          \"data-idx\": idx,\n                          \"data-key\": \"description\"\n                        }}\n                        value={item.name}\n                        onChange={handleChange}\n                        placeholder=\"请输入描述\"\n                      />\n                    </div>\n                    <ListItemSecondaryAction>\n                      <IconButton onClick={() => handleDelete(idx)}>\n                        <Delete />\n                      </IconButton>\n                    </ListItemSecondaryAction>\n                  </ListItem>\n                );\n              })}\n            </>\n          ) : (\n            <div>\n              <Placeholder title=\"请添加演职人员\" />\n            </div>\n          )}\n        </List>\n      </Box>\n    );\n  }\n);\n\nexport default EditCast;\n","import * as React from \"react\";\nimport { useUploadFileOssMutation } from \"@/schema\";\nimport { BaseFileUploadProps } from \"./file-upload\";\nimport {\n  Box,\n  makeStyles,\n  Theme,\n  createStyles,\n  Typography\n} from \"@material-ui/core\";\nimport { CloudUpload } from \"@material-ui/icons\";\nimport { IPlaceholderProps } from \"@/components/base/Placeholder/placeholder\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: \"inline-flex\",\n      flexDirection: \"column\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      width: (props: IPlaceholderProps) => {\n        return props.width ?? \"100%\";\n      },\n      height: (props: IPlaceholderProps) => {\n        return props.height ?? \"100%\";\n      },\n      color: theme.palette.text.secondary,\n      flex: 1\n    },\n    icon: theme.custom.base.icon.large\n  })\n);\n\nexport const FileUpload: React.FC<BaseFileUploadProps> = props => {\n  const { onComplete, onError, children, component, custom, title } = props;\n  const classes = useStyles(props);\n\n  const inputRef = React.createRef<HTMLInputElement>();\n\n  const [upload_file_oss, { loading }] = useUploadFileOssMutation({\n    onCompleted(data) {\n      onComplete && onComplete(data.upload_file_oss);\n    },\n    onError(error) {\n      onError && onError(error.message);\n    }\n  });\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const {\n      validity,\n      files: [file]\n    } = e.currentTarget;\n    if (validity.valid) {\n      upload_file_oss({ variables: { file } });\n    }\n  };\n\n  const handleClick = () => {\n    if (!loading) {\n      inputRef.current?.click();\n    }\n  };\n\n  const Tag = component || \"div\";\n\n  return (\n    <Tag role=\"button\" onClick={handleClick}>\n      <input\n        ref={inputRef}\n        style={{ display: \"none\" }}\n        type=\"file\"\n        accept=\"*\"\n        onChange={handleChange}\n      />\n      {custom ? (\n        { children }\n      ) : (\n        <Box className={classes.root}>\n          <div>\n            <CloudUpload className={classes.icon} />\n            {/* <CircularProgress className={classes.icon} /> */}\n          </div>\n          <Typography variant=\"h6\">{loading ? \"上传中...\" : title}</Typography>\n        </Box>\n      )}\n    </Tag>\n  );\n};\n\nFileUpload.defaultProps = {\n  custom: false,\n  title: \"点击上传\"\n};\n","import * as React from \"react\";\nimport { Image } from \"@/components/base/Image\";\nimport { DEFULAT_MOVIE_COVER } from \"@/common/constants/default.constant\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport {\n  Typography,\n  Box,\n  GridList,\n  GridListTile,\n  IconButton\n} from \"@material-ui/core\";\n\nimport { useEditableInput, EditableInput } from \"@/components/app/Input\";\nimport { FileUpload } from \"@/components/app/FileUpload\";\nimport { PlayCircleOutline } from \"@material-ui/icons\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      position: \"relative\",\n      width: \"100%\"\n    },\n    aider: {\n      position: \"absolute\",\n      left: 0,\n      top: 0,\n      bottom: 0,\n      width: \"45%\",\n      padding: theme.spacing(8)\n    },\n    aiderContent: {\n      width: \"50%\",\n      padding: theme.spacing(2),\n      borderRadius: theme.shape.borderRadius,\n      maxHeight: \"100%\",\n      background: \"rgba(0, 0, 0, .1)\",\n      backdropFilter: \"blur(8px)\",\n      overflow: \"auto\"\n    },\n    main: {\n      position: \"absolute\",\n      top: \"50%\",\n      right: 0,\n      width: \"50%\",\n      padding: theme.spacing(0, 8),\n      transform: \"translate(0, -50%)\",\n      color: \"#fff\",\n      display: \"flex\",\n      flexDirection: \"column\"\n    },\n    mainContent: {\n      background: \"rgba(0, 0, 0, .1)\",\n      backdropFilter: \"blur(8px)\",\n      padding: theme.spacing(4),\n      borderRadius: theme.shape.borderRadius\n    },\n    posters: {},\n    posterTool: {\n      display: \"none\"\n    }\n  })\n);\n\nexport interface EditTopHandles {\n  title: string;\n\n  sub_title?: string;\n\n  description?: string;\n\n  posters?: string[];\n\n  cover: string;\n}\n\nexport const EditTop = React.forwardRef<EditTopHandles, unknown>(\n  (props, ref) => {\n    const classes = useStyles();\n    const [title, setTitle] = useEditableInput(\"\");\n    const [sub_title, setSubTitle] = useEditableInput(\"\");\n    const [description, setDescription] = useEditableInput(\"\");\n    const [posters, setPosters] = React.useState<string[]>([]);\n    const [cover, setCover] = React.useState<string>(\"\");\n\n    React.useEffect(() => {\n      if (posters && posters.length > 0) {\n        if (!cover || !posters.includes(cover)) setCover(posters[0]);\n      } else {\n        setCover(\"\");\n      }\n    }, [cover, posters]);\n\n    React.useImperativeHandle(ref, () => ({\n      title,\n      sub_title,\n      description,\n      posters,\n      cover\n    }));\n\n    const handleAddPoster = imageUrl => {\n      if (imageUrl && !posters.includes(imageUrl)) {\n        setPosters([...posters, imageUrl]);\n      }\n    };\n\n    const handleRemovePoster = (\n      e: React.MouseEvent<HTMLDivElement, MouseEvent>\n    ) => {\n      const result = window.confirm(\"delete?\");\n      if (result) {\n        const { dataset } = e.currentTarget;\n        if (dataset.idx) {\n          posters.splice(+dataset.idx, 1);\n          setPosters([...posters]);\n        }\n      }\n    };\n\n    const handleChangeCover = (\n      e: React.MouseEvent<HTMLDivElement, MouseEvent>\n    ) => {\n      const { dataset } = e.currentTarget;\n      if (dataset.idx) {\n        setCover(posters[dataset.idx]);\n      }\n    };\n\n    return (\n      <div className={classes.root}>\n        <Image aspectRatio={16 / 9} src={DEFULAT_MOVIE_COVER} />\n        <div className={classes.aider}>\n          <div className={classes.aiderContent}>\n            <GridList cellHeight=\"auto\" className={classes.posters} cols={1}>\n              {posters.map((poster, idx) => (\n                <GridListTile key={poster} cols={1}>\n                  <Image\n                    aspectRatio={16 / 9}\n                    src={poster}\n                    alt={\"poster\" + idx}\n                  />\n                  <div className={classes.posterTool}>\n                    <div data-idx={idx} onClick={handleRemovePoster}>\n                      remove poster\n                    </div>\n                    <div data-idx={idx} onClick={handleChangeCover}>\n                      {cover === poster ? \"is cover\" : \"isn't cover\"}\n                    </div>\n                  </div>\n                </GridListTile>\n              ))}\n              <GridListTile cols={1}>\n                <FileUpload onComplete={handleAddPoster} title=\"上传海报\" />\n              </GridListTile>\n            </GridList>\n          </div>\n        </div>\n        <div className={classes.main}>\n          <div className={classes.mainContent}>\n            <Typography gutterBottom variant=\"h4\" component=\"div\">\n              <EditableInput\n                variant=\"h4\"\n                value={title}\n                onChange={setTitle}\n                placeholder=\"movie title\"\n              />\n            </Typography>\n            <Typography gutterBottom variant=\"subtitle1\" component=\"div\">\n              <EditableInput\n                value={sub_title}\n                onChange={setSubTitle}\n                placeholder=\"请输入副标题\"\n              />\n            </Typography>\n            <Typography variant=\"body2\" component=\"div\">\n              <EditableInput\n                value={description}\n                onChange={setDescription}\n                placeholder=\"请输入电影描述...\"\n              />\n            </Typography>\n            <Box mt={3}>\n              <IconButton disabled>\n                <PlayCircleOutline />\n              </IconButton>\n            </Box>\n          </div>\n        </div>\n      </div>\n    );\n  }\n);\n\nexport default EditTop;\n","import * as React from \"react\";\nimport {\n  Dialog,\n  Toolbar,\n  AppBar,\n  Button,\n  Box,\n  Theme,\n  makeStyles,\n  createStyles\n} from \"@material-ui/core\";\nimport {\n  FullScreen,\n  BodyScreen,\n  ContentScreen,\n  AiderScreen\n} from \"@/layouts/PageLayout\";\nimport { Image } from \"@/components/base/Image\";\nimport { DEFULAT_MOVIE_COVER } from \"@/common/constants/default.constant\";\nimport { Placeholder } from \"@/components/base/Placeholder\";\nimport { useEditableInput, EditableInput } from \"@/components/app/Input\";\nimport { FileUpload } from \"@/components/app/FileUpload\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      height: \"100%\"\n    },\n    body: {\n      backgroundColor: theme.palette.background.paper,\n      display: \"flex\",\n      margin: \"0 auto\"\n    },\n    content: {\n      padding: theme.spacing(2, 5),\n      borderRight: `1px solid ${theme.palette.divider}`\n    },\n    aider: {\n      padding: theme.spacing(2, 4),\n      height: \"100%\",\n      overflow: \"auto\"\n    },\n    sourceWrap: {\n      width: \"100%\",\n      position: \"relative\"\n    }\n  })\n);\n\nexport interface EditMediumInfoProp {\n  open: boolean;\n\n  onSave?(medium: unknown): void;\n\n  onCancel?(): void;\n}\n\nexport const EditMediumInfo: React.FC<EditMediumInfoProp> = (\n  props: EditMediumInfoProp\n) => {\n  const { onSave, onCancel } = props;\n\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n  const [url, setUrl] = React.useState(\"\");\n  const [cover, setCover] = React.useState(\"\");\n  const [name, setName] = useEditableInput(\"\");\n  const [alias_name, setAliasName] = useEditableInput(\"\");\n  const [description, setDescription] = useEditableInput(\"\");\n\n  React.useEffect(() => {\n    setOpen(props.open);\n  }, [props.open]);\n\n  const reset = () => {\n    setOpen(false);\n    setUrl(\"\");\n    setCover(\"\");\n    setName(\"\");\n    setAliasName(\"\");\n    setDescription(\"\");\n  };\n\n  const handleChangeCover = imageUrl => {\n    if (imageUrl) {\n      setCover(imageUrl);\n    }\n  };\n\n  const handleChangeSource = sourceUrl => {\n    if (sourceUrl) {\n      setUrl(sourceUrl);\n    }\n  };\n\n  const handleSave = () => {\n    onSave &&\n      onSave({\n        url,\n        cover,\n        name,\n        alias_name,\n        description\n      });\n    handleCancle();\n  };\n\n  const handleCancle = () => {\n    setOpen(false);\n    onCancel && onCancel();\n    reset();\n  };\n\n  return (\n    <div>\n      <Dialog open={open} fullScreen onClose={handleCancle}>\n        <AppBar position=\"relative\">\n          <Toolbar>\n            <Button onClick={handleSave} color=\"inherit\">\n              save\n            </Button>\n            <Button onClick={handleCancle} color=\"inherit\">\n              cancle\n            </Button>\n          </Toolbar>\n        </AppBar>\n        <Box className={classes.root}>\n          <FullScreen>\n            <BodyScreen>\n              <div className={classes.sourceWrap}>\n                <Image aspectRatio={16 / 9} src={DEFULAT_MOVIE_COVER} />\n                <FileUpload onComplete={handleChangeCover}>\n                  add cover\n                </FileUpload>\n                <FileUpload onComplete={handleChangeSource}>\n                  add source\n                </FileUpload>\n              </div>\n            </BodyScreen>\n          </FullScreen>\n          <BodyScreen className={classes.body}>\n            <ContentScreen className={classes.content}>\n              {/* <VideoInfo /> */}\n              {/* <NextPlay /> */}\n              <EditableInput\n                value={name}\n                onChange={setName}\n                placeholder=\"name\"\n              />\n              <EditableInput\n                value={alias_name}\n                onChange={setAliasName}\n                placeholder=\"alias_name\"\n              />\n              <EditableInput\n                value={description}\n                onChange={setDescription}\n                placeholder=\"description...\"\n              />\n            </ContentScreen>\n            <AiderScreen sticky className={classes.aider}>\n              {/* <Comment /> */}\n              <Placeholder title=\"评论区\" />\n            </AiderScreen>\n          </BodyScreen>\n        </Box>\n      </Dialog>\n    </div>\n  );\n};\n","import React from \"react\";\nimport {\n  Box,\n  Typography,\n  GridList,\n  GridListTile,\n  Button\n} from \"@material-ui/core\";\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core/styles\";\nimport { MediaNormal } from \"@/components/app/Media\";\nimport { EditMediumInfo } from \"../EditMediumInfo\";\n// import Placeholder from \"@/components/base/Placeholder\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      padding: theme.spacing(1, 0)\n    },\n    box: {\n      padding: theme.spacing(2, 0),\n\n      \"& + &\": {\n        borderTop: `1px solid ${theme.palette.divider}`\n      }\n    }\n  })\n);\n\nexport interface EditMainHandles {\n  mediums: any[];\n}\n\nexport const EditMain = React.forwardRef<EditMainHandles, unknown>(\n  (props, ref) => {\n    const classes = useStyles();\n    const [openMedium, setOpenMedium] = React.useState(false);\n    const [mediums, setMediums] = React.useState<any>([]);\n\n    React.useImperativeHandle(ref, () => ({\n      mediums: mediums\n    }));\n\n    const handleSave = medium => {\n      setMediums([...mediums, medium]);\n    };\n\n    return (\n      <>\n        <Box className={classes.root}>\n          <Box className={classes.box}>\n            <Typography variant=\"subtitle1\" gutterBottom>\n              相关资源\n            </Typography>\n            <GridList cellHeight=\"auto\" cols={4}>\n              {mediums.map((item, idx) => {\n                return (\n                  <GridListTile cols={1} key={idx}>\n                    <MediaNormal {...item} />\n                  </GridListTile>\n                );\n              })}\n\n              <Button onClick={() => setOpenMedium(true)}>添加</Button>\n            </GridList>\n          </Box>\n          {/* <Box className={classes.box}>\n        <Typography variant=\"subtitle1\">精彩点评</Typography>\n      </Box> */}\n        </Box>\n        <EditMediumInfo\n          open={openMedium}\n          onSave={handleSave}\n          onCancel={() => setOpenMedium(false)}\n        />\n      </>\n    );\n  }\n);\n\nexport default EditMain;\n","import * as React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogContentText,\n  DialogActions,\n  Button,\n  DialogProps\n} from \"@material-ui/core\";\n\ninterface ConfirmProps extends Omit<DialogProps, \"open\"> {\n  title?: string;\n  content: string;\n  cancel?: boolean;\n  cancelText?: string;\n  confirmText?: string;\n}\n\ninterface ConfirmEventProps {\n  onConfirm?(): void;\n  onCancel?(): void;\n}\n\nconst ShowDialog = (props: ConfirmEventProps & ConfirmProps) => {\n  const [open, setOpen] = React.useState(true);\n  const handleCancel = () => {\n    setOpen(false);\n    props.onCancel && props.onCancel();\n  };\n\n  const handleConfirm = () => {\n    setOpen(false);\n    props.onConfirm && props.onConfirm();\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n    props.onCancel && props.onCancel();\n  };\n\n  return (\n    <div>\n      <Dialog open={open} onClose={handleClose}>\n        {props.title && <DialogTitle>{props.title}</DialogTitle>}\n        <DialogContent>\n          <DialogContentText>{props.content}</DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          {props.cancel && (\n            <Button onClick={handleCancel} color=\"primary\">\n              {props.cancelText || \"取消\"}\n            </Button>\n          )}\n          <Button onClick={handleConfirm} color=\"primary\" autoFocus>\n            {props.confirmText || \"确定\"}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n};\n\nexport const Confirm = {\n  dialog: function(options: ConfirmProps): Promise<boolean> {\n    return new Promise((resolve, reject) => {\n      const mountPoint = document.createElement(\"div\");\n      document.body.appendChild(mountPoint);\n      const clear = () => {\n        mountPoint.remove();\n      };\n      const onConfirm = () => {\n        resolve(true);\n        clear();\n      };\n      const onCancel = () => {\n        resolve(false);\n        clear();\n      };\n      ReactDOM.render(\n        <div>\n          <ShowDialog {...options} onConfirm={onConfirm} onCancel={onCancel} />\n        </div>,\n        mountPoint\n      );\n    });\n  }\n};\n\nexport default Confirm;\n","import * as React from \"react\";\nimport {\n  EditAbout,\n  EditCast,\n  EditMain,\n  EditTop,\n  EditCastHandles,\n  EditTopHandles,\n  EditMainHandles,\n  EditAboutHandles\n} from \"./modules\";\nimport {\n  ContentScreen,\n  AiderScreen,\n  FullScreen,\n  BodyScreen\n} from \"@/layouts/PageLayout\";\nimport {\n  makeStyles,\n  Theme,\n  createStyles,\n  Box,\n  Tabs,\n  Tab\n} from \"@material-ui/core\";\nimport { useCreateMovieMutation } from \"@/schema\";\nimport { useRouterHelper } from \"@/hooks\";\nimport Confirm from \"@/components/base/Confirm\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    main: {\n      backgroundColor: theme.palette.background.paper,\n      padding: theme.spacing(1, 6),\n      borderRight: `1px solid ${theme.palette.divider}`\n    }\n  })\n);\n\nexport const MovieUpload: React.FC = () => {\n  const classes = useStyles();\n  const RouterHelper = useRouterHelper();\n  const [tab, setTab] = React.useState(0);\n  const topRef = React.createRef<EditTopHandles>();\n  const mainRef = React.createRef<EditMainHandles>();\n  const aboutRef = React.createRef<EditAboutHandles>();\n  const castRef = React.createRef<EditCastHandles>();\n\n  const [create_movie] = useCreateMovieMutation({\n    onCompleted() {\n      Confirm.dialog({\n        title: \"提示\",\n        content: \"上传成功。\"\n      }).then(() => {\n        RouterHelper.gotoHome();\n      });\n    }\n  });\n\n  const handleCreateMovie = () => {\n    const topFields = topRef.current;\n    const mainFields = mainRef.current;\n    const aboutFields = aboutRef.current;\n    const castFields = castRef.current;\n\n    create_movie({\n      variables: {\n        movie: {\n          title: topFields?.title || \"\",\n          cover: topFields?.cover || \"\",\n          posters: topFields?.posters,\n          description: topFields?.description,\n          credits: castFields?.credits,\n          about: aboutFields?.about,\n          sources: mainFields?.mediums\n        }\n      }\n    });\n  };\n\n  return (\n    <Box>\n      <FullScreen>\n        <BodyScreen>\n          <EditTop ref={topRef} />\n        </BodyScreen>\n      </FullScreen>\n      <BodyScreen>\n        <ContentScreen className={classes.main}>\n          <Tabs value={tab} onChange={(e, val) => setTab(val)}>\n            <Tab label=\"信息\"></Tab>\n            <Tab label=\"相关推荐\" disabled></Tab>\n            <Tab label=\"关于\"></Tab>\n          </Tabs>\n          <div>\n            <div hidden={tab !== 0}>\n              <EditMain ref={mainRef} />\n            </div>\n            {/* {tab === 1 && <Relative />} */}\n            <div hidden={tab !== 2}>\n              <EditAbout ref={aboutRef} />\n            </div>\n            <div>\n              <div onClick={handleCreateMovie}>create</div>\n            </div>\n          </div>\n        </ContentScreen>\n        <AiderScreen>\n          <EditCast ref={castRef} />\n        </AiderScreen>\n      </BodyScreen>\n    </Box>\n  );\n};\nexport default MovieUpload;\n"],"sourceRoot":""}